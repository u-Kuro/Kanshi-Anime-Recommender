let db;self.addEventListener("unhandledrejection",event=>{console.error(event?.reason);self.postMessage({error:event?.reason||"Something went wrong"})});self.onmessage=async({data})=>{if(!db)await IDBinit();let tagInfo=await retrieveJSON("tagInfo");if(!isJsonObject(tagInfo)||jsonIsEmpty(tagInfo)){self.postMessage({status:"Getting Filters"});tagInfo={technical:{"4-koma":"A manga in the 'yonkoma' format, which consists of four equal-sized panels arranged in a vertical strip.",achromatic:"Contains animation that is primarily done in black and white.",advertisement:"Produced in order to promote the products of a certain company.",anthology:"A collection of separate works collated into a single release.",cgi:"Prominently features scenes created with computer-generated imagery.",episodic:"Features story arcs that are loosely tied or lack an overarching plot.",flash:"Created using Flash animation techniques.","full cgi":"Almost entirely created with computer-generated imagery.","full color":"Manga fully colored or drawn in color.","no dialogue":"This work contains no dialogue.","non-fiction":"A work that provides information regarding a real world topic and does not focus on an imaginary narrative.",pov:"Point of View; features scenes shown from the perspective of the series protagonist.",puppetry:"Animation style involving the manipulation of puppets to act out scenes.",rotoscoping:"Animation technique that animators use to trace over motion picture footage, frame by frame, to produce realistic action.","stop motion":"Animation style characterized by physical objects being moved incrementally between frames to create the illusion of movement."},"setting-time":{"achronological order":"Chapters or episodes do not occur in chronological order.",anachronism:"Prominently features elements that are out of place in the historical period the work takes place in, particularly modern elements in a historical setting.",dystopian:"Partly or completely set in a society characterized by poverty, squalor or oppression.",historical:"Partly or completely set during a real period of world history.","time skip":"Features a gap in time used to advance the story."},"theme-arts":{acting:"Centers around actors or the acting industry.",calligraphy:"Centers around the art of calligraphy.","classic literature":"Discusses or adapts a work of classic world literature.",drawing:"Centers around the art of drawing, including manga and doujinshi.",fashion:"Centers around the fashion industry.",food:"Centers around cooking or food appraisal.",makeup:"Centers around the makeup industry.",photography:"Centers around the use of cameras to capture photos.",rakugo:"Rakugo is the traditional Japanese performance art of comic storytelling.",writing:"Centers around the profession of writing books or novels."},"theme-other":{adoption:"Features a character who has been adopted by someone who is neither of their biological parents.",animals:"Prominently features animal characters in a leading role.",astronomy:"Relating or centered around the study of celestial objects and phenomena, space, or the universe.",autobiographical:"Real stories and anecdotes written by the author about their own life.",biographical:"Based on true stories of real persons living or dead, written by another.","body horror":"Features characters who undergo horrific transformations or disfigurement, often to their own detriment.",cannibalism:"Prominently features the act of consuming another member of the same species as food.",chibi:'Features "super deformed" character designs with smaller, rounder proportions and a cute look.',"cosmic horror":"A type of horror that emphasizes human insignificance in the grand scope of cosmic reality; fearing the unknown and being powerless to fight it.",crime:"Centers around unlawful activities punishable by the state or other authority.",crossover:"Centers around the placement of two or more otherwise discrete fictional characters, settings, or universes into the context of a single story.","death game":"Features characters participating in a game, where failure results in death.",denpa:"Works that feature themes of social dissociation, delusions, and other issues like suicide, bullying, self-isolation, paranoia, and technological necessity in daily lives. Classic iconography: telephone poles, rooftops, and trains.",drugs:"Prominently features the usage of drugs such as opioids, stimulants, hallucinogens etc.",economics:"Centers around the field of economics.",educational:"Primary aim is to educate the audience.",environmental:"Concern with the state of the natural world and how humans interact with it.","ero guro":"Japanese literary and artistic movement originating in the 1930's. Works have a focus on grotesque eroticism, sexual corruption, and decadence.",filmmaking:"Centers around the art of filmmaking.","found family":"Features a group of characters with no biological relations that are united in a group providing social support.",gambling:"Centers around the act of gambling.","gender bending":"Prominently features a character who dresses and behaves in a way characteristic of another gender, or has been transformed into a person of another gender.",gore:"Prominently features graphic bloodshed and violence.","language barrier":"A barrier to communication between people who are unable to speak a common language.","lgbtq+ themes":"Prominently features characters or themes associated with the LGBTQ+ community, such as sexuality or gender identity.","lost civilization":"Featuring a civilization with few ruins or records that exist in present day knowledge.",marriage:"Centers around marriage between two or more characters.",medicine:"Centered around the activities of people working in the field of medicine.","memory manipulation":"Prominently features a character(s) who has had their memories altered.",meta:"Features fourth wall-breaking references to itself or genre tropes.",mountaineering:"Prominently features characters discussing or hiking mountains.",noir:"Stylized as a cynical crime drama with low-key visuals.","otaku culture":"Centers around the culture of a fanatical fan-base.",pandemic:"Prominently features a disease prevalent over a whole country or the world.",philosophy:"Relating or devoted to the study of the fundamental nature of knowledge, reality, and existence.",politics:"Centers around politics, politicians, or government activities.","proxy battle":"A fight instigated by a participant who does not themself become involved.",reincarnation:"Features a character being born again after death, typically as another person or in another world.",religion:"Centers on the belief that humanity is related to supernatural, transcendental, and spiritual elements.",slavery:"Prominently features slaves, slavery, or slave trade.","software development":"Centers around characters developing or programming a piece of technology, software, gaming, etc.",survival:"Centers around the struggle to live in spite of extreme obstacles.",terrorism:"Centers around the activities of a terrorist or terrorist organization.",torture:"The act of deliberately inflicting severe pain or suffering upon another individual or oneself as a punishment or with a specific purpose.",travel:"Centers around character(s) moving between places a significant distance apart.",war:"Partly or completely set during wartime."},"setting-universe":{afterlife:"Partly or completely set in the afterlife.","alternate universe":"Features multiple alternate universes in the same series.","augmented reality":"Prominently features events with augmented reality as the main setting.",omegaverse:"Alternative universe that prominently features dynamics modeled after wolves in which there are alphas, betas, and omegas and heat cycles as well as impregnation, regardless of gender.","post-apocalyptic":"Partly or completely set in a world or civilization after a global disaster.",space:"Partly or completely set in outer space.","urban fantasy":"Set in a world similar to the real world, but with the existence of magic or other supernatural elements.","virtual world":"Partly or completely set in the world inside a video game."},"theme-romance":{"age gap":"Prominently features romantic relations between people with a significant age difference.",bisexual:"Features a character who is romantically or sexually attracted to people of more than one sex or gender.","boys' love":"Prominently features romance between two males, not inherently sexual.","female harem":"Main cast features the protagonist plus several female characters who are romantically interested in them.",heterosexual:"Prominently features a romance between a man and a woman, not inherently sexual.","love triangle":"Centered around romantic feelings between more than two people. Includes all love polygons.","male harem":"Main cast features the protagonist plus several male characters who are romantically interested in them.","mixed gender harem":"Main cast features the protagonist plus several people, regardless of gender, who are romantically interested in them.","teens' love":"Sexually explicit love-story between individuals of the opposite sex, specifically targeting females of teens and young adult age.",yuri:"Prominently features romance between two females, not inherently sexual. Also known as Girls' Love."},"cast-traits":{"age regression":"Prominently features a character who was returned to a younger state.",agender:"Prominently features agender characters.",aliens:"Prominently features extraterrestrial lifeforms.",amnesia:"Prominently features a character(s) with memory loss.",angels:"Prominently features spiritual beings usually represented with wings and halos and believed to be attendants of God.",anthropomorphism:"Contains non-human character(s) that have attributes or characteristics of a human being.","arranged marriage":"Features two characters made to marry each other, usually by their family.","artificial intelligence":"Intelligent non-organic machines that work and react similarly to humans.",asexual:"Features a character who isn't sexually attracted to people of any sex or gender.",butler:"Prominently features a character who is a butler.",centaur:"Prominently features a character with a human upper body and the lower body of a horse.",chimera:"Features a beast made by combining animals, usually with humans.",chuunibyou:'Prominently features a character with "Middle School 2nd Year Syndrome", who either acts like a know-it-all adult or falsely believes they have special powers.',clone:"Prominently features a character who is an artificial exact copy of another organism.",cosplay:"Features dressing up as a different character or profession.",crossdressing:"Prominently features a character dressing up as the opposite sex.",cyborg:"Prominently features a human character whose physiological functions are aided or enhanced by artificial means.",delinquents:'Features characters with a notorious image and attitude, sometimes referred to as "yankees".',demons:"Prominently features malevolent otherworldly creatures.",detective:"Features a character who investigates and solves crimes.",dinosaurs:"Prominently features Dinosaurs, prehistoric reptiles that went extinct millions of years ago.",disability:"A work that features one or more characters with a physical, mental, cognitive, or developmental condition that impairs, interferes with, or limits the person's ability to engage in certain tasks or actions.","dissociative identities":"A case where one or more people share the same body.",dragons:"Prominently features mythical reptiles which generally have wings and can breathe fire.",dullahan:"Prominently features a character who is a Dullahan, a creature from Irish Folklore with a head that can be detached from its main body.",elf:"Prominently features a character who is an elf.",fairy:"Prominently features a character who is a fairy.",femboy:"Features a boy who exhibits characteristics or behaviors considered in many cultures to be typical of girls.",ghost:"Prominently features a character who is a ghost.",goblin:"A goblin is a monstrous creature from European folklore. They are almost always small and grotesque, mischievous or outright malicious, and greedy. Sometimes with magical abilities.",gods:"Prominently features a character of divine or religious nature.",gyaru:"Prominently features a female character who has a distinct American-emulated fashion style, such as tanned skin, bleached hair, and excessive makeup. Also known as gal.",hikikomori:"Prominently features a character who withdraws from social life, often seeking extreme isolation.",homeless:"Prominently features a character that is homeless.",idol:"Centers around the life and activities of an idol.",kemonomimi:"Prominently features humanoid characters with animal ears.",kuudere:"Prominently features a character who generally retains a cold, blunt and cynical exterior, but once one gets to know them, they have a very warm and loving interior.",maids:"Prominently features a character who is a maid.",mermaid:"A mythological creature with the body of a human and the tail of a fish.","monster boy":"Prominently features a male character who is a part-monster.","monster girl":"Prominently features a female character who is part-monster.",nekomimi:"Humanoid characters with cat-like features such as cat ears and a tail.",ninja:"Prominently features Japanese warriors traditionally trained in espionage, sabotage and assasination.",nudity:"Features a character wearing no clothing or exposing intimate body parts.",nun:"Prominently features a character who is a nun.","office lady":"Prominently features a female office worker or OL.",oiran:"Prominently features a courtesan character of the Japanese Edo Period.","ojou-sama":"Features a wealthy, high-class, oftentimes stuck up and demanding female character.",orphan:"Prominently features a character that is an orphan.",pirates:"Prominently features sea-faring adventurers branded as criminals by the law.",robots:"Prominently features humanoid machines.",samurai:"Prominently features warriors of medieval Japanese nobility bound by a code of honor.","shrine maiden":"Prominently features a character who is a shrine maiden.",skeleton:"Prominently features skeleton(s) as a character.",succubus:"Prominently features a character who is a succubus, a creature in medieval folklore that typically uses their sexual prowess to trap and seduce people to feed off them.","tanned skin":"Prominently features characters with tanned skin.",teacher:"Protagonist is an educator, usually in a school setting.",tomboy:"Features a girl who exhibits characteristics or behaviors considered in many cultures to be typical of boys.",transgender:"Features a character whose gender identity differs from the sex they were assigned at birth.",tsundere:"Prominently features a character who acts cold and hostile in order to mask warmer emotions.",twins:"Prominently features two or more siblings that were born at one birth.",vampire:"Prominently features a character who is a vampire.",veterinarian:"Prominently features a veterinarian or one of the main characters is a veterinarian.",vikings:"Prominently features Scandinavian seafaring pirates and warriors.",villainess:"Centers around or prominently features a villainous noble lady.",vtuber:"Prominently features a character who is either an actual or fictive VTuber.",werewolf:"Prominently features a character who is a werewolf.",witch:"Prominently features a character who is a witch.",yandere:"Prominently features a character who is obsessively in love with another, to the point of acting deranged or violent.",zombie:"Prominently features reanimated corpses which often prey on live humans and turn them into zombies."},"theme-slice of life":{agriculture:"Prominently features agriculture practices.","cute boys doing cute things":"Centers around male characters doing cute activities, usually with little to no emphasis on drama and conflict.","cute girls doing cute things":"Centers around female characters doing cute activities, usually with little to no emphasis on drama and conflict.\n","family life":"Centers around the activities of a family unit.",iyashikei:"Primary aim is to heal the audience through serene depictions of characters' daily lives."},"sexual content":{ahegao:"Features a character making an exaggerated orgasm face.",amputation:"Features amputation or amputees.","anal sex":"Features sexual penetration of the anal cavity.",armpits:"Features the sexual depiction or stimulation of a character's armpits.",ashikoki:"Footjob; features stimulation of genitalia by feet.",asphyxiation:"Features breath play.",blackmail:"Features a character blackmailing another into performing sexual acts.",bondage:"Features BDSM, with or without the use of accessories.",boobjob:"Features the stimulation of male genitalia by breasts.","cervix penetration":"A sexual act in which the cervix is visibly penetrated.",cumflation:"The stomach area expands outward like a balloon due to being filled specifically with semen.",cunnilingus:"Features oral sex performed on female genitalia.",deepthroat:"Features oral sex where the majority of the erect male genitalia is inside another person's mouth, usually stimulating some gagging in the back of their throat.",defloration:"Features a female character who has never had sexual relations (until now).",dilf:"Features sexual intercourse with older men.","double penetration":"A sexual act in which the vagina/anus are penetrated by two penises/toys.",exhibitionism:"Features the act of exposing oneself in public for sexual pleasure.",facial:"Features sexual ejaculation onto an individual's face.",feet:"Features the sexual depiction or stimulation of a character's feet.",fellatio:"Blowjob; features oral sex performed on male genitalia.",femdom:"Female Dominance. Features sexual acts with a woman in a dominant position.","flat chest":"Features a female character with smaller-than-average breasts.",futanari:"Features female characters with male genitalia.","group sex":"Features more than two participants engaged in sex simultaneously.","hair pulling ":"A sexual act in which the giver will grab the receivers hair and tug whilst giving pleasure from behind.",handjob:"Features the stimulation of genitalia by another's hands.","human pet":'Features characters in a master-slave relationship where one is the "owner" and the other is a "pet."',hypersexuality:"Portrays a character with a hypersexuality disorder, compulsive sexual behavior, or sex addiction.",incest:"Features sexual relations between characters who are related by blood.",inseki:"Features sexual relations among step, adopted, and other non-blood related family members.",irrumatio:"Oral rape; features a character thrusting their genitalia or a phallic object into the mouth of another character.",lactation:"Features breast milk play and production.","large breasts":"Features a character with larger-than-average breasts.","male pregnancy":"Features pregnant male characters in a sexual context.",masochism:"Prominently features characters who get sexual pleasure from being hurt or controlled by others.",masturbation:"Features erotic stimulation of one's own genitalia or other erogenous regions.",milf:"Features sexual intercourse with older women.",nakadashi:"Creampie; features sexual ejaculation inside of a character.",netorare:"NTR; features a character with a partner shown being intimate with someone else.",netorase:"Features characters in a romantic relationship who agree to be sexually intimate with others.",netori:"Features a character shown being intimate with the partner of another character. The opposite of netorare.","pet play":"Treating a participant as though they were a pet animal. Often involves a collar and possibly BDSM.",pregnant:"Features pregnant female characters in a sexual context.",prostitution:"Features characters who are paid for sexual favors.","public sex":"Features sexual acts performed in public settings.",rape:"Features non-consensual sexual penetration.",rimjob:"Features oral sex performed on the anus.",sadism:"Prominently features characters deriving pleasure, especially sexual gratification, from inflicting pain, suffering, or humiliation on others.",scat:"Lots of feces.",scissoring:"A form of sexual activity between women in which the genitals are stimulated by being rubbed against one another.","sex toys":"Features objects that are designed to stimulate sexual pleasure.",squirting:"Female ejaculation; features the expulsion of liquid from the female genitalia.",sumata:"Pussyjob; features the stimulation of male genitalia by the thighs and labia majora of a female character.",sweat:"Lots of sweat.",tentacles:"Features the long appendages most commonly associated with octopuses or squid, often sexually penetrating a character.",threesome:"Features sexual acts between three people.",virginity:"Features a male character who has never had sexual relations (until now).",vore:"Features a character being swallowed or swallowing another creature whole.",voyeur:"Features a character who enjoys seeing the sex acts or sex organs of others.",watersports:"Features sexual situations involving urine.",zoophilia:"Features a character who has a sexual attraction for non-human animals."},"theme-game-sport":{airsoft:"Centers around the sport of airsoft.","american football":"Centers around the sport of American football.",athletics:"Centers around sporting events that involve competitive running, jumping, throwing, or walking.",badminton:"Centers around the sport of badminton.",baseball:"Centers around the sport of baseball.",basketball:"Centers around the sport of basketball.",boxing:"Centers around the sport of boxing.",cheerleading:"Centers around the activity of cheerleading.",cycling:"Centers around the sport of cycling.",fencing:"Centers around the sport of fencing.",fishing:"Centers around the sport of fishing.",fitness:"Centers around exercise with the aim of improving physical health.",football:'Centers around the sport of football (known in the USA as "soccer").',golf:"Centers around the sport of golf.",handball:"Centers around the sport of handball.","ice skating":"Centers around the sport of ice skating.",judo:"Centers around the sport of judo.",lacrosse:"A team game played with a ball and lacrosse sticks.",parkour:"Centers around the sport of parkour.",rugby:"Centers around the sport of rugby.","scuba diving":"Prominently features characters diving with the aid of special breathing equipment.",skateboarding:"Centers around or prominently features skateboarding as a sport.",sumo:"Centers around the sport of sumo.",surfing:"Centers around surfing as a sport.",swimming:"Centers around the sport of swimming.","table tennis":'Centers around the sport of table tennis (also known as "ping pong").',tennis:"Centers around the sport of tennis.",volleyball:"Centers around the sport of volleyball.",wrestling:"Centers around the sport of wrestling."},"theme-fantasy":{alchemy:"Features character(s) who practice alchemy.","body swapping":"Centers around individuals swapping bodies with one another.",cultivation:"Features characters using training, often martial arts-related, and other special methods to cultivate life force and gain strength or immortality.","fairy tale":"This work tells a fairy tale, centers around fairy tales, or is based on a classic fairy tale.",henshin:"Prominently features character or costume transformations which often grant special abilities.",isekai:"Features characters being transported into an alternate world setting and having to adapt to their new surroundings.",kaiju:"Prominently features giant monsters.",magic:"Prominently features magical elements or the use of magic.",mythology:"Prominently features mythological elements, especially those from religious or cultural tradition.",necromancy:"When the dead are summoned as spirits, skeletons, or the undead, usually for the purpose of gaining information or to be used as a weapon.",shapeshifting:"Features character(s) who changes one's appearance or form.",steampunk:"Prominently features technology and designs inspired by 19th-century industrial steam-powered machinery.","super power":"Prominently features characters with special abilities that allow them to do what would normally be physically or logically impossible.",superhero:"Prominently features super-powered humans who aim to serve the greater good.",wuxia:"Chinese fiction concerning the adventures of martial artists in Ancient China.",youkai:"Prominently features supernatural creatures from Japanese folklore."},"cast-main cast":{"anti-hero":"Features a protagonist who lacks conventional heroic attributes and may be considered a borderline villain.","ensemble cast":"Features a large cast of characters with (almost) equal screen time and importance to the plot.","estranged family":"At least one family member of the MC intentionally distances themselves or a family distances themselves from a person related to the MC.","female protagonist":"Main character is female.","male protagonist":"Main character is male.","primarily adult cast":"Main cast is mostly composed of characters above a high school age.","primarily animal cast":"Main cast is mostly composed animal or animal-like characters.","primarily child cast":"Main cast is mostly composed of characters below a high school age.","primarily female cast":"Main cast is mostly composed of female characters.","primarily male cast":"Main cast is mostly composed of male characters.","primarily teen cast":"Main cast is mostly composed of teen characters."},"theme-action":{archery:"Centers around the sport of archery, or prominently features the use of archery in combat.","battle royale":"Centers around a fierce group competition, often violent and with only one winner.",espionage:"Prominently features characters infiltrating an organization in order to steal sensitive information.",fugitive:"Prominently features a character evading capture by an individual or organization.",guns:"Prominently features the use of guns in combat.","martial arts":"Centers around the use of traditional hand-to-hand combat.",spearplay:"Prominently features the use of spears in combat.",swordplay:"Prominently features the use of swords in combat."},"theme-other-organisations":{assassins:"Centers around characters who murder people as a profession.",cult:"Features a social group with unorthodox religious, spiritual, or philosophical beliefs and practices.",firefighters:"Centered around the life and activities of rescuers specialised in firefighting.",gangs:"Centers around gang organizations.",mafia:"Centered around Italian organised crime syndicates.",military:"Centered around the life and activities of military personnel.",police:"Centers around the life and activities of law enforcement officers.",triads:"Centered around Chinese organised crime syndicates.",yakuza:"Centered around Japanese organised crime syndicates."},"theme-other-vehicle":{aviation:"Regarding the flying or operation of aircraft.",cars:"Centers around the use of automotive vehicles.",mopeds:"Prominently features mopeds.",motorcycles:"Prominently features the use of motorcycles.",ships:"Prominently features the use of sea-based transportation vessels.",tanks:"Prominently features the use of tanks or other armoured vehicles.",trains:"Prominently features trains."},"theme-arts-music":{band:"Main cast is a group of musicians.",dancing:"Centers around the art of dance.",musical:"Features a performance that combines songs, spoken dialogue, acting, and dance."},"setting-scene":{bar:"Partly or completely set in a bar.","boarding school":"Features characters attending a boarding school.",circus:"Prominently features a circus.",coastal:"Story prominently takes place near the beach or around a coastal area/town. Setting is near the ocean.",college:"Partly or completely set in a college or university.",desert:"Prominently features a desert environment.",dungeon:"Prominently features a dungeon environment.",foreign:"Partly or completely set in a country outside the country of origin.",inn:"Partially or completely set in an Inn or Hotel.","natural disaster":"It focuses on catastrophic events of natural origin, such as earthquakes, tsunamis,  volcanic eruptions, and severe storms. These works often present situations of extreme danger in which the characters struggle to survive and overcome the adversity.",office:"Features people who work in a business office.",outdoor:"Centers around hiking, camping or other outdoor activities.",prison:"Partly or completely set in a prison.",rural:"Partly or completely set in the countryside.",school:"Partly or completely set in a primary or secondary educational institution.","school club":"Partly or completely set in a school club scene.",urban:"Partly or completely set in a city.",work:"Centers around the activities of a certain occupation."},"theme-game":{"board game":"Centers around characters playing board games.","e-sports":"Prominently features professional video game competitions, tournaments, players, etc.","video games":"Centers around characters playing video games."},"theme-drama":{bullying:"Prominently features the use of force for intimidation, often in a school setting.","coming of age":"Centers around a character's transition from childhood to adulthood.",conspiracy:"Contains one or more factions controlling or attempting to control the world from the shadows.",rehabilitation:"Prominently features the recovery of a character who became incapable of social life or work.",revenge:"Prominently features a character who aims to exact punishment in a resentful or vindictive manner.",suicide:"The act or an instance of taking or attempting to take one's own life voluntarily and intentionally.",tragedy:"Centers around tragic events and unhappy endings."},"theme-game-card & board game":{"card battle":"Centers around individuals competing in card games.",go:"Centered around the game of Go.",karuta:"Centers around the game of karuta.",mahjong:"Centered around the game of mahjong.",poker:"Centers around the game of poker or its variations.",shogi:"Centers around the game of shogi."},"theme-sci-fi":{cyberpunk:"Set in a future of advanced technological and scientific achievements that have resulted in social disorder.","space opera":"Centers around space warfare, advanced technology, chivalric romance and adventure.","time loop":"A character is stuck in a repetitive cycle that they are attempting to break out of. This is distinct from a manipulating time of their own choice.","time manipulation":"Prominently features time-traveling or other time-warping phenomena.",tokusatsu:"Prominently features elements that resemble special effects in Japanese live-action shows"},demographic:{josei:"Target demographic is adult females.",kids:"Target demographic is young children.",seinen:"Target demographic is adult males.",shoujo:"Target demographic is teenage and young adult females.",shounen:"Target demographic is teenage and young adult males."},setting:{matriarchy:"Prominently features a country that is ruled by a Queen or a society that is dominated by female inheritance."},"theme-comedy":{parody:"Features deliberate exaggeration of popular tropes or a particular genre to comedic effect.",satire:"Prominently features the use of comedy or ridicule to expose and criticise social phenomena.",slapstick:"Prominently features comedy based on deliberately clumsy actions or embarrassing events.","surreal comedy":"Prominently features comedic moments that defy casual reasoning, resulting in illogical events."},cast:{polyamorous:"Features a character who is in a consenting relationship with multiple people at one time."},"theme-sci-fi-mecha":{"real robot":"Prominently features mechanical designs loosely influenced by real-world robotics.","super robot":"Prominently features large robots often piloted by hot-blooded protagonists."}};await saveJSON(tagInfo,"tagInfo");await saveJSON(1706687489,"tagInfoUpdateAt")}let filters=await retrieveJSON("filters");const version=3;let hasNewVersion=filters?.version!==version;if(!isJsonObject(filters)||hasNewVersion||jsonIsEmpty(filters)){self.postMessage({status:"Getting Filters"});filters={format:{anime:1,manga:1,novel:1,tv:1,special:1,movie:1,ona:1,tv_short:1,one_shot:1,ova:1},"country of origin":{jp:1,kr:1,cn:1,tw:1},genre:{action:1,comedy:1,ecchi:1,fantasy:1,"mahou shoujo":1,"sci-fi":1,drama:1,mystery:1,adventure:1,romance:1,"slice of life":1,supernatural:1,music:1,psychological:1,mecha:1,sports:1,horror:1,thriller:1},tag:{magic:"theme-fantasy","cute girls doing cute things":"theme-slice of life",henshin:"theme-fantasy","female protagonist":"cast-main cast","primarily female cast":"cast-main cast","primarily child cast":"cast-main cast",nudity:"cast-traits","ojou-sama":"cast-traits","female harem":"theme-romance",shounen:"demographic",kuudere:"cast-traits",maids:"cast-traits",isekai:"theme-fantasy",chibi:"theme-other",educational:"theme-other",photography:"theme-arts","time skip":"setting-time","no dialogue":"technical",historical:"setting-time",tragedy:"theme-drama",parody:"theme-comedy",school:"setting-scene",slapstick:"theme-comedy",heterosexual:"theme-romance",drawing:"theme-arts",animals:"theme-other","family life":"theme-slice of life",inseki:"sexual content",seinen:"demographic",incest:"sexual content","anti-hero":"cast-main cast",airsoft:"theme-game-sport","surreal comedy":"theme-comedy",meta:"theme-other","school club":"setting-scene",shoujo:"demographic",chuunibyou:"cast-traits",military:"theme-other-organisations",athletics:"theme-game-sport","lgbtq+ themes":"theme-other","primarily teen cast":"cast-main cast",crossdressing:"cast-traits",youkai:"theme-fantasy",iyashikei:"theme-slice of life","male protagonist":"cast-main cast",rural:"setting-scene",adoption:"theme-other",shapeshifting:"theme-fantasy","video games":"theme-game",gods:"cast-traits","coming of age":"theme-drama",tsundere:"cast-traits","time manipulation":"theme-sci-fi",afterlife:"setting-universe","alternate universe":"setting-universe",food:"theme-arts","super power":"theme-fantasy",gore:"theme-other",outdoor:"setting-scene",work:"setting-scene","card battle":"theme-game-card & board game",angels:"cast-traits",revenge:"theme-drama",dragons:"cast-traits",politics:"theme-other",superhero:"theme-fantasy",aliens:"cast-traits",tokusatsu:"theme-sci-fi","artificial intelligence":"cast-traits","ensemble cast":"cast-main cast",mythology:"theme-fantasy","age gap":"theme-romance",detective:"cast-traits",josei:"demographic","male harem":"theme-romance","primarily male cast":"cast-main cast","urban fantasy":"setting-universe",nekomimi:"cast-traits",robots:"cast-traits",cgi:"technical",bullying:"theme-drama",witch:"cast-traits",amnesia:"cast-traits",circus:"setting-scene",kids:"demographic",alchemy:"theme-fantasy",steampunk:"theme-fantasy",environmental:"theme-other",aviation:"theme-other-vehicle","cosmic horror":"theme-other",philosophy:"theme-other",demons:"cast-traits",conspiracy:"theme-drama",swordplay:"theme-action","super robot":"theme-sci-fi-mecha",space:"setting-universe",tennis:"theme-game-sport",idol:"cast-traits",dancing:"theme-arts-music",musical:"theme-arts-music",foreign:"setting-scene",episodic:"technical","full cgi":"technical","love triangle":"theme-romance","boys' love":"theme-romance",handjob:"sexual content",acting:"theme-arts","otaku culture":"theme-other","gender bending":"theme-other",rape:"sexual content","cute boys doing cute things":"theme-slice of life",crime:"theme-other",ghost:"cast-traits",trains:"theme-other-vehicle",rehabilitation:"theme-drama",tomboy:"cast-traits","real robot":"theme-sci-fi-mecha",war:"theme-other",astronomy:"theme-other","primarily adult cast":"cast-main cast",crossover:"theme-other","achronological order":"setting-time","dissociative identities":"cast-traits",urban:"setting-scene",suicide:"theme-drama",hikikomori:"cast-traits","found family":"theme-other",yandere:"cast-traits",flash:"technical",police:"theme-other-organisations",guns:"theme-action","age regression":"cast-traits",assassins:"theme-other-organisations",bisexual:"theme-romance",ships:"theme-other-vehicle",disability:"cast-traits","classic literature":"theme-arts","space opera":"theme-sci-fi",satire:"theme-comedy",yuri:"theme-romance",twins:"cast-traits","post-apocalyptic":"setting-universe","lost civilization":"theme-other",cosplay:"cast-traits",oiran:"cast-traits","ice skating":"theme-game-sport",kemonomimi:"cast-traits",fugitive:"theme-action",pirates:"cast-traits",zombie:"cast-traits",archery:"theme-action",basketball:"theme-game-sport","body horror":"theme-other","virtual world":"setting-universe","battle royale":"theme-action","death game":"theme-other",anachronism:"setting-time",denpa:"theme-other",travel:"theme-other",economics:"theme-other",mermaid:"cast-traits",dungeon:"setting-scene",survival:"theme-other",torture:"theme-other",cannibalism:"theme-other",college:"setting-scene","table tennis":"theme-game-sport",teacher:"cast-traits",rotoscoping:"technical","language barrier":"theme-other",delinquents:"cast-traits",kaiju:"theme-fantasy",reincarnation:"theme-other",gangs:"theme-other-organisations",fashion:"theme-arts",villainess:"cast-traits",centaur:"cast-traits","monster girl":"cast-traits",slavery:"theme-other","memory manipulation":"theme-other","martial arts":"theme-action","fairy tale":"theme-fantasy",writing:"theme-arts",cultivation:"theme-fantasy",yakuza:"theme-other-organisations",motorcycles:"theme-other-vehicle",dullahan:"cast-traits","software development":"theme-other",terrorism:"theme-other",succubus:"cast-traits",biographical:"theme-other",vore:"sexual content",gyaru:"cast-traits","office lady":"cast-traits",elf:"cast-traits","large breasts":"sexual content",bondage:"sexual content","group sex":"sexual content",nun:"cast-traits",mopeds:"theme-other-vehicle","tanned skin":"cast-traits",vampire:"cast-traits",bar:"setting-scene","body swapping":"theme-fantasy",go:"theme-game-card & board game",baseball:"theme-game-sport",samurai:"cast-traits",orphan:"cast-traits","american football":"theme-game-sport",ninja:"cast-traits",cyberpunk:"theme-sci-fi",drugs:"theme-other",dystopian:"setting-time",mafia:"theme-other-organisations",voyeur:"sexual content",lacrosse:"theme-game-sport","mixed gender harem":"theme-romance",watersports:"sexual content",cycling:"theme-game-sport",cars:"theme-other-vehicle",anthropomorphism:"cast-traits",pandemic:"theme-other",advertisement:"technical",skeleton:"cast-traits",butler:"cast-traits",goblin:"cast-traits",religion:"theme-other",band:"theme-arts-music",volleyball:"theme-game-sport","ero guro":"theme-other",medicine:"theme-other",hypersexuality:"sexual content",femdom:"sexual content",skateboarding:"theme-game-sport","augmented reality":"setting-universe",gambling:"theme-other",spearplay:"theme-action",asexual:"cast-traits",anthology:"technical","stop motion":"technical",noir:"theme-other",transgender:"cast-traits",rakugo:"theme-arts",tanks:"theme-other-vehicle",werewolf:"cast-traits",makeup:"theme-arts",poker:"theme-game-card & board game",karuta:"theme-game-card & board game",agriculture:"theme-slice of life",cyborg:"cast-traits",calligraphy:"theme-arts",masturbation:"sexual content","shrine maiden":"cast-traits",swimming:"theme-game-sport",fitness:"theme-game-sport",badminton:"theme-game-sport",pov:"technical",feet:"sexual content",espionage:"theme-action",masochism:"sexual content",achromatic:"technical",mahjong:"theme-game-card & board game",parkour:"theme-game-sport",rugby:"theme-game-sport",cult:"theme-other-organisations",shogi:"theme-game-card & board game","4-koma":"technical",golf:"theme-game-sport",football:"theme-game-sport","scuba diving":"theme-game-sport",amputation:"sexual content",boxing:"theme-game-sport",triads:"theme-other-organisations",wrestling:"theme-game-sport",dinosaurs:"cast-traits",agender:"cast-traits",judo:"theme-game-sport",clone:"cast-traits",surfing:"theme-game-sport",necromancy:"theme-fantasy",sadism:"sexual content",milf:"sexual content","monster boy":"cast-traits",impersonation:1,nakadashi:"sexual content",ahegao:"sexual content",netorare:"sexual content","human pet":"sexual content",pregnant:"sexual content",virginity:"sexual content","sex toys":"sexual content",fishing:"theme-game-sport",homeless:"cast-traits",defloration:"sexual content","public sex":"sexual content",lactation:"sexual content",wuxia:"theme-fantasy",chimera:"cast-traits",irrumatio:"sexual content",firefighters:"theme-other-organisations","teens' love":"theme-romance","e-sports":"theme-game",cheerleading:"theme-game-sport",prostitution:"sexual content",autobiographical:"theme-other",fellatio:"sexual content",cunnilingus:"sexual content","anal sex":"sexual content",facial:"sexual content",squirting:"sexual content",boobjob:"sexual content","flat chest":"sexual content",asphyxiation:"sexual content",scat:"sexual content",vtuber:"cast-traits",puppetry:"technical",fencing:"theme-game-sport",futanari:"sexual content",tentacles:"sexual content",exhibitionism:"sexual content",handball:"theme-game-sport",sumo:"theme-game-sport",vikings:"cast-traits",scissoring:"sexual content",sweat:"sexual content",blackmail:"sexual content","non-fiction":"technical",desert:"setting-scene",femboy:"cast-traits",marriage:"theme-other",prison:"setting-scene",fairy:"cast-traits",threesome:"sexual content",omegaverse:"setting-universe",zoophilia:"sexual content"},"tag category":{"theme-fantasy":1,"theme-slice of life":1,"cast-main cast":1,"cast-traits":1,"theme-romance":1,demographic:1,"theme-other":1,"theme-arts":1,"setting-time":1,technical:1,"theme-drama":1,"theme-comedy":1,"setting-scene":1,"sexual content":1,"theme-game-sport":1,"theme-other-organisations":1,"theme-game":1,"theme-sci-fi":1,"setting-universe":1,"theme-game-card & board game":1,"theme-other-vehicle":1,"theme-action":1,"theme-sci-fi-mecha":1,"theme-arts-music":1,theme:1},studio:{sunrise:1,bones:1,madhouse:1,"toei animation":1,artland:1,"studio gallop":1,"azeta pictures":1,"j.c. staff":1,nomad:1,"nippon animation":1,"studio pierrot":1,tap:1,"magic bus":1,"mushi production":1,"studio guts":1,"asahi production":1,"production i.g":1,"trans arts":1,"studio comet":1,"studio jack":1,gonzo:1,"group tac":1,"studio deen":1,gainax:1,"tatsunoko production":1,olm:1,"tokyo movie shinsha":1,"bee train":1,aic:1,"hal film maker":1,"digital frontier":1,xebec:1,"feel.":1,zexcs:1,daume:1,"kyoto animation":1,"seven arcs":1,asread:1,"studio hibari":1,"tms entertainment":1,"sunny side up":1,"telecom animation film":1,ufotable:1,"studio flag":1,"studio matrix":1,"dream force":1,"studio fantasia":1,"front line":1,tnk:1,shaft:1,"studio ghibli":1,"studio izena":1,"ashi productions":1,"wao world":1,pastel:1,satelight:1,imagin:1,manglobe:1,appp:1,"i-move":1,arms:1,"a line":1,"chaos project":1,"tokyo kids":1,"palm studio":1,"aic spirits":1,"yumeta company":1,"shin-ei animation":1,"comix wave":1,"studio silver":1,"heewon entertainment":1,"a.c.g.t.":1,radix:1,ajiado:1,"ginga ya":1,"trilogy future studio":1,"anime room":1,"studio sign":1,"triangle staff":1,"e&g films":1,"picture magic":1,"aic a.s.t.a.":1,"m.s.c":1,rikuentai:1,"tokyo movie":1,"animate film":1,actas:1,"studio tulip":1,"g&g entertainment":1,"studio 4°c":1,plum:1,"pink pineapple":1,"studio wombat":1,"brain's base":1,"project team argos":1,"diomedéa":1,synergysp:1,"doga kobo":1,"tin house":1,topcraft:1,"studio junio":1,mobanimation:1,animaruya:1,enterbrain:1,"zero g room":1,"studio kyuuma":1,"doga productions":1,"tsuchida productions":1,"studio live":1,sido:1,"milky animation label":1,robot:1,echo:1,"studio rikka":1,"studiorf inc.":1,graphinica:1,"creators dot com":1,"sakura create":1,"tezuka productions":1,"t.p.o":1,planet:1,"studio take off":1,"character plan":1,"grouper productions":1,"bee media":1,"mook animation":1,"oh! production":1,"t-up":1,"kaname production":1,"ginga teikoku":1,"studio egg":1,"tamura shigeru studio":1,hero:1,"studio signal":1,"the answer studio":1,"square pictures":1,dna:1,"shanghai animation film studio":1,sanctuary:1,"kino production":1,"phoenix entertainment":1,annapuru:1,"sunshine corporation":1,"studio gazelle":1,koei:1,"ishimori entertainment":1,jcf:1,"dangun pictures":1,aubec:1,"office ao":1,"studio kelmadick":1,"public & basic":1,dle:1,"studio signpost":1,"minami machi bugyousho":1,"synergy japan":1,"studio ox":1,"atelier giga":1,"p.a. works":1,"a-1 pictures":1,"animation do":1,"animation 21":1,venet:1,"mu animation studio":1,"anime r":1,"liberty animation studio":1,"beat frog":1,"watanabe promotion":1,"animation staff room":1,oxybot:1,"yellow film":1,"studio kikan":1,"fairy tale co.":1,"anime friend":1,panmedia:1,"japan taps":1,"studio bogey":1,shirogumi:1,"studio magara":1,"studio unicorn":1,code:1,"trick block":1,anik:1,primetime:1,"polygon pictures":1,anpro:1,"tsuburaya productions":1,"circus production":1,"white fox":1,"takahashi studio":1,pra:1,"production reed":1,"nakamura production":1,"kanaban graphics":1,cinepix:1,ordet:1,"procen studio":1,"kojiro shishido animation works":1,"jm animation":1,realthing:1,keyeast:1,"kinema citrus":1,"jinni's animation studios":1,"shinwon productions":1,"maru production":1,"aic plus+":1,"8-bit":1,"marvy jack":1,"no side":1,"puzzle animation":1,"david production":1,"silver link.":1,seven:1,"tyo animations":1,gohands:1,"studio anima":1,"international digital artist":1,"wolf smoke":1,"tama production":1,"taikong works":1,"team till dawn":1,"dmm.futureworks":1,"studio look":1,"crius animation":1,"hanna pictures":1,"hoods entertainment":1,"dazzling star":1,"peak hunt":1,"great dreams cartoon":1,"studio massket":1,filmko:1,"kuri jikken manga kobo":1,sunflowers:1,"studio candy box":1,mappa:1,"ichigo animation":1,fanworks:1,irawias:1,"tsubasa production":1,"sorajima studio":1,"flagship line":1,"xing yi kai chen":1,"kun animation & comic":1,"green ooita":1,"encourage films":1,"chirying culture":1,"simage animation":1,kigumi:1,"maple toon":1,"yamato works":1,"kawamoto productions":1,"fever creations":1,qingxiang:1,"kaca entertainment":1,"the village of marchen":1,"panda kojo":1,"studio puyukai":1,"tomoyasu murata company":1,bridge:1,"sovat theater":1,"studio noa":1,ascension:1,"union cho":1,"studio crocodile":1,"studio colorido":1,"i.toon":1,c2c:1,"misseri studio":1,"aic build":1,jumondou:1,"rising force":1,"studio gokumi":1,"aic takarazuka":1,gokuusha:1,"mad box":1,"studio g-1neo":1,"kamikaze douga":1,"studio kuma":1,"studio gram":1,"sparkly key animation":1,"bliss pictures":1,rthk:1,"hong ying animation":1,"jade animation":1,"postgal workshop":1,"children's corner":1,"geidai animation":1,calf:1,lerche:1,"creative bridge":1,"beijing sharaku art":1,"i was a ballerina":1,moogoo:1,"b&t":1,"coloroom pictures":1,lapis:1,chuchu:1,"the berich":1,"project no.9":1,"studio blanc":1,"studio pastoral":1,"yamamura animation, inc.":1,"studio mwp":1,"jihou eigasha":1,sanzigen:1,"higa brothers production":1,"n&g production":1,bouncy:1,"möbius tone":1,"studio chizu":1,"landq studios":1,arplants:1,hotline:1,"larx entertainment":1,"hs pictures studio":1,lifework:1,"advance syakujii":1,"creators in pack":1,nexus:1,"otogi production":1,trigger:1,"studio kai":1,passione:1,"next animation studio":1,lidenfilms:1,orange:1,"an dercen":1,"wit studio":1,"vasoon animation":1,"animation 501":1,"xebec zwei":1,ayco:1,millepensee:1,connect:1,"studio kaab":1,"production ims":1,"mirai film":1,"wolf smoke studio":1,jaggard:1,"opera house":1,"lay-duce":1,naz:1,"tengu kobou":1,"c-station":1,"tri-slash":1,troyca:1,shuka:1,"cyclone graphics":1,"studio 3hz":1,heartbit:1,"geno studio":1,"studio khara":1,"bandai namco pictures":1,poncotan:1,"studio! cucuri":1,"emt squared":1,"office dci":1,tomovies:1,"platinum vision":1,"signal.md":1,"qualia animation":1,axsiz:1,cygamespictures:1,fortes:1,buemon:1,"pine jam":1,nut:1,"aqua aris":1,"egg firm":1,"haoliners animation":1,"studio lan":1,"pb animation":1,"paper plane animation studio":1,"zero-g":1,"neft film":1,gaina:1,"felix film":1,"g.cmay animation & film":1,"namu animation":1,pandanium:1,issen:1,andercen:1,"studio m2":1,blade:1,domerica:1,tetra:1,"typhoon graphics":1,"science saru":1,exsa:1,"studio ponoc":1,"pili international multimedia":1,imagineer:1,"prhythm vision":1,"children's playground entertainment":1,cloverworks:1,"k.pictures":1,foch:1,geektoys:1,"flat studio":1,"colored pencil animation":1,"l² studio":1,"triopen studio":1,"qiying animation":1,"rainbridge animation":1,clap:1,"idragons creative studio":1,"gainax kyoto":1,yamatoworks:1,"hangzhou shimei pictures":1,"studio nanahoshi":1,"magia doraglier":1,engi:1,drive:1,revoroot:1,"okuruto noboru":1,"east fish studio":1,"production +h":1,"ruo hong culture":1,"magilm pictures":1,"b.cmay pictures":1,"feng donghua culture":1,"transcendence picture":1,"bibury animation studios":1,"build dream":1,"light chaser animation":1,rocen:1,"october media":1,"wulifang animation":1,"studio ugoki":1,"seven stone entertainment":1,"jiang toon animation":1,"dawn picture":1,"motion magic":1,"yhkt entertainment":1,"cg year":1,garden:1,hmch:1,"l-a-unch・box":1,"cctv animation":1,"p.i.c.s.":1,"gudong animation studio":1,"yi chen animation":1,"mili pictures":1,"7doc":1,tuban:1,fenz:1,"e-dehi animation studio":1,"one & all animation studio":1,"arvo animation":1,"qiyuan yinghua":1,"tear-studio":1,"yudubai animation":1,"qianqi cartoon":1,"making animation":1,"asura film":1,"sprite animation studios":1,"visual flight":1,oddjob:1,"creative power entertaining":1,soyep:1,byment:1,"bakken record":1,chosen:1,"daysview animation":1,"sharefun studio":1,"maho film":1,mmt:1,"studio bind":1,hornets:1,"djinn power":1,"shengying animation":1,"qubic pictures":1,"cgcg studio inc.":1,"green monster team":1,choirock:1,"g-angle":1,"planet cartoon":1,tia:1,"comic animation":1,"monster's egg":1,"studio elle":1,"coco cartoon":1,"maten animation":1,"space neko company":1,"piso studio":1,"d’art shtajio":1,wolfsbane:1,"super normal studio":1,bigbigsun:1,"studio mother":1,"red dog culture house":1,arect:1,"lidenfilms kyoto studio":1,suspenders:1,albacrow:1,"blaze studio":1,"lunch box":1,"chongzhuo animation":1,"lx animation studio":1,"ask animation studio":1,"aqua entertainment":1,"lingsanwu animation":1,"the national film center japan":1,"yostar pictures":1,"tianwen kadokawa":1,"observatory animation":1,"cloud art":1,rastar:1,"sunrise beyond":1,speed:1,"studio goindol":1,filmony:1,"gosay studio":1,happyproject:1,"33 collective":1,"original force":1,"wonder cat animation":1,"twr entertainment":1,"fatchi moxie studio":1,trcartoon:1,tsukimidou:1,"team yamahitsuji":1,"xiaoying feiyang pictures":1,"painting dream":1,"axis studios":1,"spell bound":1,"year young culture":1,tecarat:1,makaria:1,durufix:1,"elite animation":1,"wind under the wings":1,"meditation with a pencil":1,pancake:1,"grimae animation studio":1,"seoul movie":1,drawiz:1,"d.rock-art":1,"idream entertainment":1,"tmx art":1,"zhongce picture":1,"oriental creative color":1,"zhangyue pictures":1,"mote stop-motion animation":1,"aisi animation studio":1,"jjjoy animation studios":1,"sansan studio":1,"dc impression vision":1,"joicy studio":1,"syok studio":1,standtower:1,"dreambox studio":1,"sakura eiga":1,ideomotor:1,"studio tumble":1,"studio jemi":1,"gift-o’-animation":1,"forest hunting one":1,"visual persistence":1,"sky dog":1,adnero:1,"colored pencil animation japan":1,"panda tower studio":1,"realwood studios":1,"dancing cg studio":1,"xiron animation":1,"mifan animation":1,bonedd:1,"winsing animation":1,"zoland animation":1,"one punch":1,boruntong:1,"gold valley films":1,saiji:1,"tyhoo cg":1,"charming fox animation":1,"fast snail":1,quebico:1,tanoism:1,"white paper animation":1,"hm heros":1,"xinglü animation":1,"liyu culture":1,"unity of knowledge and action animation":1,"xuni pictures":1,"delight animation":1,"painted edge":1,sjynexcus:1,"original dream":1,"kio studio":1,"717 studio":1,"take-y inc.":1,"hyoin entertainment":1,"cartoon saloon":1,"manhoo culture":1,"1in":1,"star hunter animation":1,"its cartoon":1,"arc anime":1,"smg pictures":1,taomee:1,"tiantai animation":1,"yi animation":1,wonderium:1,"escape velocity animation":1,"transistor studio":1,"studio palette":1,"cocktail media":1,"musashino art university":1,oz:1,"studio kafka":1,"yinhe changxing culture":1,"youliao studio":1,"heart & soul animation":1,"xiyang culture":1,"tthunder animation":1,"doumu animation":1,"reike eyes animation":1,"ten tails animation":1,"samg animation":1,gambit:1,"studio daisy":1,"ph studio":1,atoonz:1,"noovo inc.":1,picsys:1,"jichitai anime":1,indivision:1,"passion paint animation":1,betobe:1,"huamei animation":1,"5 inc.":1,"atelier pontdarc":1,quad:1,vcrworks:1,"stereotype inc.":1,"bluearc animation studio":1,"pai naodai animation":1,medo:1,aurora:1,"fengyun animation":1,"yixiang culture":1,"bookong culture":1,paintfree:1,"max-world":1,"original heart":1,"burning animation":1,"studio add":1,"story effect":1,"kobe design university":1,magidian:1,"live2d creative studio":1,"bibury animation cg":1,chongliyuhua:1,"ruichen pictures":1,"coco legends":1,"village studio":1,"scooter films":1,gritworld:1,akatsuki:1,"studio pasa":1,"project studio q":1,"kungfufrog animation":1,"gravity well":1,"pass media":1,"alfred imageworks":1,"thunder river":1,mojo:1,"shenfan animation":1,"he zhou culture":1,"wenzhou mengbu anime design":1,"origin chasing":1,"hui guang studio":1,"studio mindo":1,"apex vision":1,"hua dream":1,"flint sugar":1,"hayabusa film":1,"uou studio":1,"sheng guang qishi tuan":1,kitsutsuki:1,comptown:1,plott:1,"universal star animation":1,"soular animation":1,"seenewtall animation studio":1,nokid:1,orenda:1,"fantasier animation":1,"staple entertainment":1,gekkou:1,"shenman entertainment":1,"wanhe huyu":1,contrail:1,"block 12":1,"duoling cartoon":1,"studio 6'on":1,cloudhearts:1,yell:1,"fantawild animation":1,"jintu pictures":1,"studio lings":1,"studio 8 dogs":1,"studio sota":1,liber:1,"da yu":1,"dejavu media":1,skyloong:1,"j-cube":1,"soda bear animation":1,papa:1,"mind wind studio":1,"number 19 animation":1,"steam works":1,"tide boy":1,"yasuda genshou studio by xenotoon":1,gale:1,"vooz character system":1,"xiaolan friends":1,"shangshui original":1,"honglu technology":1,bytehoo:1,"cloud hearts":1,"ijigen tokyo":1,"imagica digitalscape":1,"gen long culture":1,"wu zhi guanying dongman":1,"space shell":1,"green planet studio":1,phantom:1,"soul stone animation studio":1,"shi qi yu mo":1,"mili digital":1,"tsumugi akita anime lab":1,"pingo entertainment":1,voil:1,"studio mir":1,boundary:1,"toho animation studio":1,"bug films":1,regaro:1,"netflix anime creators' base":1,evg:1,"next media animation":1,soket:1,maroyaka:1,unend:1,"studio fusion":1,"100studio":1,"studio n":1,"studio w.baba":1,xtorm:1,"thymos media":1},year:Array.from({length:(new Date).getFullYear()-1939+1},(_,index)=>1940+index).reduce((acc,year)=>{acc[year]=true;return acc},{}),"airing status":{finished:1,releasing:1,not_yet_released:1,cancelled:1,hiatus:1},"user status":{unwatched:1,completed:1,dropped:1,planning:1,paused:1,current:1,repeating:1},version:version};await saveJSON(filters,"filters")}let orderedFilters={sortFilter:["weighted score","score","average score","user score","popularity","trending","date","date updated","date added","favorites"],season:["current season","upcoming season","winter","spring","summer","fall"],"flexible inclusion":["OR: genre","OR: tag","OR: studio","OR: genre / tag","OR: genre / studio","OR: tag / studio","OR: genre / tag / studio"],"shown score":["weighted score","score","average score","user score","popularity","favorites","trending"],"shown list":["recommended studios","non-caution","non-semi-caution","recommended score","semi-recommended score","other"]};let orderedFiltersKeys=["genre","tag","tag category","year","format","country of origin","airing status","user status","studio"];let optionsSort={year:"descnum",season:{fall:5,summer:4,spring:3,winter:2,"upcoming season":1,"current season":0},format:{special:9,one_shot:8,ona:7,ova:6,tv_short:5,movie:4,tv:3,novel:2,manga:1,anime:0},"country of origin":{tw:3,cn:2,kr:1,jp:0}};let algorithmFilterSelections={genre:1,tag:1,"tag category":1};for(let i=0,l=orderedFiltersKeys.length;i<l;i++){let filterKey=orderedFiltersKeys[i];let options=Object.keys(filters[filterKey]);let isAlgorithmFilterSelection=algorithmFilterSelections[filterKey];options=options.reduce((uniqueOptions,k)=>{k=k!=="_"?k.replace(/\_/g," "):k;k=k!=='\\"'?k.replace(/\\"/g,'"'):k;k=k.replace(/\b(tv|ona|ova)\b/gi,match=>match.toUpperCase());if(!uniqueOptions[k]){uniqueOptions[k]=1}return uniqueOptions},{});if(isAlgorithmFilterSelection){delete options?.["all"];options=Object.keys(options)}else{options=Object.keys(options)}let optionSort=optionsSort[filterKey];if(optionSort==="descnum"){options.sort((a,b)=>parseFloat(b)-parseFloat(a))}else if(isJsonObject(optionSort)){options.sort((a,b)=>{const optionSortA=optionSort[a?.toLowerCase?.()];const optionSortB=optionSort[b?.toLowerCase?.()];const isNumberA=typeof optionSortA==="number";const isNumberB=typeof optionSortB==="number";if(isNumberA&&isNumberB){return optionSortA-optionSortB}if(isNumberA){return-1}if(isNumberB){return 1}const isStringA=typeof a==="string";const isStringB=typeof b==="string";if(isStringA&&isStringB){return a.localeCompare(b)}if(isStringA){return-1}if(isStringB){return 1}return 0})}else{options.sort()}if(isAlgorithmFilterSelection){options.unshift("all")}orderedFilters[filterKey]=options}let nonOrderedFilters={"Anime Filter":{bool:["hide my list","hide my finished list","hidden list","show my list","show adapted manga","show all sequels","show next sequel"],number:[{name:"average score",maxValue:Infinity,minValue:0},{name:"user score",maxValue:Infinity,minValue:0},{name:"year",max:Infinity,min:0},{name:"popularity",maxValue:Infinity,minValue:0},{name:"score",maxValue:Infinity,minValue:0},{name:"weighted score",max:Infinity,min:0}]},"Algorithm Filter":{bool:["content focused","inc. average score","inc. all factors","exclude year"],number:[{name:"min tag percentage",defaultValue:0,maxValue:Infinity,minValue:0},{name:"scoring system",maxValue:Infinity,minValue:0},{name:"sample size",maxValue:Infinity,minValue:1},{name:"min sample size",maxValue:Infinity,minValue:1},{name:"min popularity",maxValue:Infinity,minValue:1},{name:"min average score",minValue:1}]}};let filterConfig={readOnly:{"flexible inclusion":1,"shown score":1},selection:{"Anime Filter":["genre","tag","season","airing status","user status","format","country of origin","shown score","shown list","flexible inclusion","year","studio"],"Content Caution":["genre","tag"],"Algorithm Filter":["genre","tag","tag category"]}};let algorithmFilter=await retrieveJSON("algorithmFilters")||[];self.postMessage({status:null});self.postMessage({initalFilters:true,orderedFilters:orderedFiltersKeys.reduce((acc,rec)=>{acc[rec]=[];return acc},{}),nonOrderedFilters:nonOrderedFilters,filterConfig:filterConfig,algorithmFilter:algorithmFilter});let sentCount=0;for(let orderedFilterKey in orderedFilters){const orderedFilter=orderedFilters[orderedFilterKey];const orderedFilterLen=orderedFilter.length;for(let i=0;i<orderedFilterLen;i++){const orderedFilterOption=orderedFilter[i];const isLast=i>=orderedFilter.length-1;setTimeout(()=>{self.postMessage({orderedFilterKey:orderedFilterKey,orderedFilterOption:orderedFilterOption,orderedFilterOptionIdx:i,loadedProgress:i/(orderedFilterLen-1)*100,isLast:isLast})},Math.min(sentCount*17,2e9));++sentCount;if(orderedFilterKey==="tag"&&isLast){for(let tagCategoryKey in tagInfo){const tagCategory=tagInfo[tagCategoryKey];for(let tagKey in tagCategory){const tagDescription=tagCategory[tagKey];setTimeout(()=>{self.postMessage({tagCategoryKey:tagCategoryKey,tagKey:tagKey,tagDescription:tagDescription})},Math.min(sentCount*17,2e9));++sentCount}}}}}setTimeout(()=>{self.postMessage({done:true})},Math.min(sentCount*17,2e9))};async function IDBinit(){return await new Promise(resolve=>{let request=indexedDB.open("Kanshi.Anime.Recommendations.Anilist.W~uPtWCq=vG$TR:Zl^#t<vdS]I~N70",1);request.onerror=error=>{console.error(error)};request.onsuccess=event=>{db=event.target.result;return resolve()};request.onupgradeneeded=event=>{db=event.target.result;db.createObjectStore("MyObjectStore");let transaction=event.target.transaction;transaction.oncomplete=()=>{return resolve()}}})}async function saveJSON(data,name){return await new Promise(async(resolve,reject)=>{try{let write=db.transaction("MyObjectStore","readwrite").objectStore("MyObjectStore").openCursor();write.onsuccess=async()=>{let put=await db.transaction("MyObjectStore","readwrite").objectStore("MyObjectStore").put(data,name);put.onsuccess=()=>{return resolve()};put.onerror=()=>{return resolve()}};write.onerror=async error=>{console.error(error);return reject()}}catch(ex){console.error(ex)}})}async function retrieveJSON(name){return await new Promise(resolve=>{try{let read=db.transaction("MyObjectStore","readwrite").objectStore("MyObjectStore").get(name);read.onsuccess=()=>{return resolve(read.result)};read.onerror=error=>{console.error(error);return resolve()}}catch(ex){console.error(ex);return resolve()}})}function jsonIsEmpty(obj){for(const key in obj){return false}return true}function isJsonObject(obj){return Object.prototype.toString.call(obj)==="[object Object]"}