var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(n)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function s(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(e){let t;return c(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function p(e){return null==e?"":e}function m(e,t,n){return e.set(n),t}function f(t){return t&&l(t.destroy)?t.destroy:e}const h="undefined"!=typeof window;let g=h?()=>window.performance.now():()=>Date.now(),y=h?e=>requestAnimationFrame(e):e;const w=new Set;function v(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&y(v)}function b(e){let t;return 0===w.size&&y(v),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function x(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=z("style");return function(e,t){x(e.head||e,t),t.sheet}(k(e),t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function A(){return L(" ")}function S(){return L("")}function N(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function P(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t){e.value=null==t?"":t}function U(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function D(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}class R{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=T(t.nodeName):this.e=z(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const j=new Map;let H,O=0;function V(e,t,n,o,i,l,r,a=0){const s=16.666/o;let c="{\n";for(let e=0;e<=1;e+=s){const o=t+(n-t)*l(e);c+=100*e+`%{${r(o,1-o)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=k(e),{stylesheet:m,rules:f}=j.get(p)||function(e,t){const n={stylesheet:E(t),rules:{}};return j.set(e,n),n}(p,e);f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${i}ms 1 both`,O+=1,d}function q(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),O-=i,O||y((()=>{O||(j.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)})),j.clear())})))}function _(e){H=e}function Y(){if(!H)throw new Error("Function called outside component initialization");return H}function W(e){Y().$$.on_mount.push(e)}const J=[],K=[];let G=[];const X=[],Z=Promise.resolve();let Q=!1;function ee(){Q||(Q=!0,Z.then(re))}function te(){return ee(),Z}function ne(e){G.push(e)}const oe=new Set;let ie,le=0;function re(){if(0!==le)return;const e=H;do{try{for(;le<J.length;){const e=J[le];le++,_(e),ae(e.$$)}}catch(e){throw J.length=0,le=0,e}for(_(null),J.length=0,le=0;K.length;)K.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];oe.has(t)||(oe.add(t),t())}G.length=0}while(J.length);for(;X.length;)X.pop()();Q=!1,oe.clear(),_(e)}function ae(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function se(){return ie||(ie=Promise.resolve(),ie.then((()=>{ie=null}))),ie}function ce(e,t,n){e.dispatchEvent(D(`${t?"intro":"outro"}${n}`))}const ue=new Set;let de;function pe(){de={r:0,c:[],p:de}}function me(){de.r||i(de.c),de=de.p}function fe(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function he(e,t,n,o){if(e&&e.o){if(ue.has(e))return;ue.add(e),de.c.push((()=>{ue.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const ge={duration:0};function ye(n,o,i){const r={direction:"in"};let a,s,c=o(n,i,r),u=!1,d=0;function p(){a&&q(n,a)}function m(){const{delay:o=0,duration:i=300,easing:l=t,tick:r=e,css:m}=c||ge;m&&(a=V(n,0,1,i,o,l,m,d++)),r(0,1);const f=g()+o,h=f+i;s&&s.abort(),u=!0,ne((()=>ce(n,!0,"start"))),s=b((e=>{if(u){if(e>=h)return r(1,0),ce(n,!0,"end"),p(),u=!1;if(e>=f){const t=l((e-f)/i);r(t,1-t)}}return u}))}let f=!1;return{start(){f||(f=!0,q(n),l(c)?(c=c(r),se().then(m)):m())},invalidate(){f=!1},end(){u&&(p(),u=!1)}}}function we(n,o,r){const a={direction:"out"};let s,c=o(n,r,a),u=!0;const d=de;function p(){const{delay:o=0,duration:l=300,easing:r=t,tick:a=e,css:p}=c||ge;p&&(s=V(n,1,0,l,o,r,p));const m=g()+o,f=m+l;ne((()=>ce(n,!1,"start"))),b((e=>{if(u){if(e>=f)return a(0,1),ce(n,!1,"end"),--d.r||i(d.c),!1;if(e>=m){const t=r((e-m)/l);a(1-t,t)}}return u}))}return d.r+=1,l(c)?se().then((()=>{c=c(a),p()})):p(),{end(e){e&&c.tick&&c.tick(1,0),u&&(s&&q(n,s),u=!1)}}}function ve(n,o,r,a){const s={direction:"both"};let c=o(n,r,s),u=a?0:1,d=null,p=null,m=null;function f(){m&&q(n,m)}function h(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(o){const{delay:l=0,duration:r=300,easing:a=t,tick:s=e,css:y}=c||ge,w={start:g()+l,b:o};o||(w.group=de,de.r+=1),d||p?p=w:(y&&(f(),m=V(n,u,o,r,l,a,y)),o&&s(0,1),d=h(w,r),ne((()=>ce(n,o,"start"))),b((e=>{if(p&&e>p.start&&(d=h(p,r),p=null,ce(n,d.b,"start"),y&&(f(),m=V(n,u,d.b,d.duration,0,a,c.css))),d)if(e>=d.end)s(u=d.b,1-u),ce(n,d.b,"end"),p||(d.b?f():--d.group.r||i(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*a(t/d.duration),s(u,1-u)}return!(!d&&!p)})))}return{run(e){l(c)?se().then((()=>{c=c(s),y(e)})):y(e)},end(){f(),d=p=null}}}function be(e,t){const n=t.token={};function o(e,o,i,l){if(t.token!==n)return;t.resolved=l;let r=t.ctx;void 0!==i&&(r=r.slice(),r[i]=l);const a=e&&(t.current=e)(r);let s=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(pe(),he(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),me())})):t.block.d(1),a.c(),fe(a,1),a.m(t.mount(),t.anchor),s=!0),t.block=a,t.blocks&&(t.blocks[o]=a),s&&re()}if(!(i=e)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=Y();if(e.then((e=>{_(n),o(t.then,1,t.value,e),_(null)}),(e=>{if(_(n),o(t.catch,2,t.error,e),_(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var i}function xe(e,t){e.d(1),t.delete(e.key)}function ke(e,t){he(e,1,1,(()=>{t.delete(e.key)}))}function Ee(e,t,n,o,l,r,a,s,c,u,d,p){let m=e.length,f=r.length,h=m;const g={};for(;h--;)g[e[h].key]=h;const y=[],w=new Map,v=new Map,b=[];for(h=f;h--;){const e=p(l,r,h),i=n(e);let s=a.get(i);s?o&&b.push((()=>s.p(e,t))):(s=u(i,e),s.c()),w.set(i,y[h]=s),i in g&&v.set(i,Math.abs(h-g[i]))}const x=new Set,k=new Set;function E(e){fe(e,1),e.m(s,d),a.set(e.key,e),d=e.first,f--}for(;m&&f;){const t=y[f-1],n=e[m-1],o=t.key,i=n.key;t===n?(d=t.first,m--,f--):w.has(i)?!a.has(o)||x.has(o)?E(t):k.has(i)?m--:v.get(o)>v.get(i)?(k.add(o),E(t)):(x.add(i),m--):(c(n,a),m--)}for(;m--;){const t=e[m];w.has(t.key)||c(t,a)}for(;f;)E(y[f-1]);return i(b),y}function Me(e){e&&e.c()}function Ce(e,t,o,r){const{fragment:a,after_update:s}=e.$$;a&&a.m(t,o),r||ne((()=>{const t=e.$$.on_mount.map(n).filter(l);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),s.forEach(ne)}function $e(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];G.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),G=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ze(t,n,l,r,a,s,c,u=[-1]){const d=H;_(t);const p=t.$$={fragment:null,ctx:[],props:s,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let m=!1;if(p.ctx=l?l(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),m&&function(e,t){-1===e.$$.dirty[0]&&(J.push(e),ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),m=!0,i(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(C)}else p.fragment&&p.fragment.c();n.intro&&fe(t.$$.fragment),Ce(t,n.target,n.anchor,n.customElement),re()}_(d)}class Te{$destroy(){$e(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Le(e){return Math.sin(e*Math.PI/2)}function Ae(e,{delay:n=0,duration:o=400,easing:i=t}={}){const l=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:i,css:e=>"opacity: "+e*l}}const Se=[];function Ne(e,t){return{subscribe:Pe(e,t).subscribe}}function Pe(t,n=e){let o;const i=new Set;function l(e){if(r(t,e)&&(t=e,o)){const e=!Se.length;for(const e of i)e[1](),Se.push(e,t);if(e){for(let e=0;e<Se.length;e+=2)Se[e][0](Se[e+1]);Se.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(r,a=e){const s=[r,a];return i.add(s),1===i.size&&(o=n(l)||e),r(t),()=>{i.delete(s),0===i.size&&o&&(o(),o=null)}}}}let Ie=-Number.MAX_SAFE_INTEGER;const Fe=()=>Ie<Number.MAX_SAFE_INTEGER||"bigint"==typeof Ie?""+ ++Ie:(Ie&&"function"==typeof window.BigInt?(Ie=BigInt(Number.MAX_SAFE_INTEGER),++Ie):Ie=-Number.MAX_SAFE_INTEGER,`${Ie}`),Be=(e,t=0)=>{let n,o,i;const l=r=>{let a=0;r?void 0!==o&&(a=r-o):a=16,o=r,(t-=a)>0?n=requestAnimationFrame(l):(clearTimeout(i),n=requestAnimationFrame((()=>{try{e()}catch{}})))};if(t>0)i=setTimeout((()=>{cancelAnimationFrame(n);try{e()}catch{}}),t),n=requestAnimationFrame(l);else try{e()}catch{}return()=>{cancelAnimationFrame(n),clearTimeout(i)}},Ue=(e,t)=>{try{const n=document.createElement("a");n.href=e,n.target="_blank",n.rel="noopener noreferrer",n.download=t,n.click(),URL.revokeObjectURL(e)}catch{}},De=(e,t=!0)=>{try{"string"==typeof e&&e.length>0&&"boolean"==typeof t&&JSBridge.openToast(e,t)}catch(e){console.error(e)}},Re=()=>{try{return"function"==typeof JSBridge.exportUserData}catch{return!1}},je=async()=>{try{if(!1!==window.navigator?.onLine){const e=window.location;if(null==e)return!0;if(Re()){const t=e.origin;return null==t||await fetch(new URL("assets/check-connection",t),{method:"HEAD",cache:"no-store"}).ok}return await fetch(e,{method:"HEAD",cache:"no-store"}).ok}}catch{}return!1};let He;const Oe=async()=>He||(He=new Promise((async e=>{if(await je())return He=null,e(!0);await new Promise((e=>setTimeout(e,5e3))),await je()?(He=null,e(!0)):(He=null,e(!1))})),He),Ve=Ne("Kanshi.Media.Recommendations.AniList.W~uPtWCq=vG$TR:Zl^#t<vdS]I~N70"),qe=Ne(u(Ve)+".isBackgroundUpdate"),_e=Ne(u(Ve)+".visited"),Ye=Ne(u(Ve)+".evicted");let We=e=>{try{let t;e=u(Ve)+e;let n=localStorage.getItem(e);return t=JSON.parse(n),t}catch{}};const Je=Ne(Re()),Ke=Ne((()=>{try{const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substring(0,4))}catch{return!1}})()),Ge=Ne(!u(Je)&&(()=>{try{return new RegExp(atob("523239765a32786c596d393066474a70626d646962335238575746755a475634516d3930664552315932744564574e72516d3930664552315932744263334e706333524362335238516e4a68646d5669623352385757466f6232386849464e7364584a7766466b6853693138516d46705a48567a63476c6b5a584a3857573931516d393066456476623264735a53314a626e4e775a574e30615739755647397662413d3d".match(/.{1,2}/g).map((e=>String.fromCharCode(parseInt(e,16)))).join("")),"i").test(window.navigator.userAgent)}catch{return!1}})()),Xe=Pe(null),Ze=Pe(!0),Qe=Pe(0),et=Pe(0),tt=Pe(!1),nt=Math.max(window.visualViewport?.height||0,window.innerHeight||0),ot=Math.max(window.document?.documentElement?.getBoundingClientRect?.()?.width||0,window.visualViewport?.width||0,window.innerWidth||0),it=Pe(nt),lt=Pe(ot),rt=window.document?.fullscreenElement,at=Pe(rt?null:nt),st=Pe(window.document?.documentElement?.scrollTop||0),ct=Pe(!1),ut=Pe(!1),dt=Pe(We("username")||""),pt=Pe(null),mt=Pe({}),ft=Pe({}),ht=Pe(""),gt=Pe(null),yt=Pe(null),wt=Pe(null),vt=Pe(null),bt=Ne({"Media Filter":{bool:["Hide My List","Hide My Finished List","Show My List","Show All Sequels","Show Next Sequel","Show Anime Adapted","Has Unseen Progress","Hidden List"],number:[{name:"Average Score",maxValue:1/0,minValue:0},{name:"User Score",maxValue:1/0,minValue:0},{name:"Year",max:1/0,min:0},{name:"Popularity",maxValue:1/0,minValue:0},{name:"Score",maxValue:1/0,minValue:0},{name:"Weighted Score",max:1/0,min:0}]},"Algorithm Filter":{bool:["Content Focused","Inc. Average Score","Inc. All Factors","Exclude Year"],number:[{name:"Min Tag Percentage",defaultValue:0,maxValue:1/0,minValue:0},{name:"Scoring System",maxValue:1/0,minValue:0},{name:"Sample Size",maxValue:1/0,minValue:1},{name:"Min Sample Size",maxValue:1/0,minValue:1},{name:"Min Average Score",minValue:1},{name:"Min Anime Popularity",maxValue:1/0,minValue:1},{name:"Min Manga Popularity",maxValue:1/0,minValue:1},{name:"Min Novel Popularity",maxValue:1/0,minValue:1}]}}),xt=Ne({readOnly:{"Flexible Inclusion":1,"Shown Metric":1},selection:{"Media Filter":["Genre","Tag","Season","Release Status","User Status","Format","Country Of Origin","Shown Metric","Shown List","Flexible Inclusion","Year","Studio"],"Content Caution":["Genre","Tag"],"Algorithm Filter":["Genre","Tag","Tag Category"]}}),kt=Pe(null),Et=Pe(null),Mt=Pe(null),Ct=Pe(null),$t=Pe({}),zt=Pe({}),Tt=Pe(null),Lt=Pe(null),At=Pe({}),St=Pe(null),Nt=Pe(null),Pt=Pe({}),It=Pe(!1),Ft=Pe(!1),Bt=Pe(null),Ut=Pe(We("autoUpdate")??!0),Dt=Pe(null),Rt=Pe(null),jt=Pe(We("exportPathIsAvailable")??null),Ht=Pe(We("autoExport")??null),Ot=Pe(null),Vt=Pe(null),qt=Pe([]),_t=Pe(We("autoPlay")??null),Yt=Pe(!0),Wt=Pe(null),Jt=Pe(We("gridFullView")??null),Kt=Pe(We("showStatus")??!0),Gt=Pe(We("showRateLimit")??!0),Xt=Pe(null),Zt=Pe({}),Qt=Pe(!1),en=Pe(null),tn=Pe(!1),nn=Pe(!1),on=Pe(null),ln=Pe(!1),rn=Pe(null),an=Pe(!1),sn=Pe(!1),cn=Pe(!1),un=Pe(We("showFilterOptions")??null),dn=Pe(null),pn=Pe(null),mn=Pe(null),fn=Pe(null),hn=Pe(null),gn=Pe(null),yn=Pe(null),wn=Pe(null),vn=Pe(null);We=void 0;let bn,xn=!0;const kn={},En=(e,t,n,o)=>(kn[e]||(kn[e]=(async()=>{xn&&(xn=!1,bn=u(Xe));const i="number"==typeof bn?`${e}?v=${bn}`:e;try{let l=await fetch(i);if(!t||!n)return o?await l.blob():i;try{l=l.body.getReader();const e=[];let r,a,s,c=!1,d=0;for(;({done:c,value:r}=await l.read()),!c;)o&&e.push(r),d+=r?.byteLength??0,s||(s=!0,a=setTimeout((()=>{const e=d/t*100,o=u(Qe);e>0&&e<=100&&(!o||e>o||o>=100)&&(Qe.set(e),e>=100?St.set("100% "+n):St.set(`${e.toFixed(2)}% `+n)),s=!1}),200));return clearTimeout(a),St.set(null),Qe.set(30),Qe.set(100),o?new Blob(e):i}catch(t){return console.error(t),await En(e,null,null,o)}}catch(l){if(console.error(l),o){if(await Oe())return await((e=5e3)=>new Promise((t=>setTimeout(t,e))))(5e3),await En(e,t,n,o);throw delete kn[e],new Error("Server unreachable")}return i}})()),kn[e]),Mn=e=>"[object Object]"===Object.prototype.toString.call(e),Cn=e=>{for(const t in e)return!1;return!0},$n=(e,t)=>{try{return e.toLowerCase()===t.toLowerCase()}catch{}};let zn;const Tn=()=>new Promise(((e,t)=>{try{const n=indexedDB.open(u(Ve),1);n.onsuccess=({target:t})=>{zn=t.result,e()},n.onupgradeneeded=({target:n})=>{try{const{result:t,transaction:o}=n,i=["mediaEntries","mediaEntriesInfo","excludedMediaIds","mediaUpdateAt","mediaOptions","orderedMediaOptions","tagInfo","tagInfoUpdateAt","username","userMediaEntries","userMediaUpdateAt","recommendedMediaEntries","algorithmFilters","mediaCautions","hiddenMediaEntries","categories","selectedCategory","autoPlay","gridFullView","showRateLimit","showStatus","autoUpdate","autoExport","runnedAutoUpdateAt","runnedAutoExportAt","exportPathIsAvailable","shouldManageMedia","shouldProcessRecommendedEntries","nearestMediaReleaseAiringAt","recommendationError","visited"];for(const e of i)t.createObjectStore(e);o.oncomplete=()=>{zn=t,e()}}catch(e){console.error(e),t(e),transaction.abort()}},n.onerror=e=>{console.error(e),t(e)}}catch(e){console.error(e),t(e)}})),Ln=e=>new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly");t((await Promise.all(e.map((e=>new Promise((t=>{const o=n.objectStore(e).getKey(e);o.onsuccess=async()=>{t(void 0!==o.result)},o.onerror=e=>{console.error(e),t(!1)}})))))).every((e=>e)))}catch(e){console.error(e),t(!1)}})),An=e=>new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly").objectStore(e).get(e);n.onsuccess=async()=>{let e=n.result;e instanceof Blob&&(e=await new Response(e.stream().pipeThrough(new DecompressionStream("gzip"))).json()),t(e)},n.onerror=e=>{console.error(e),t()}}catch(e){console.error(e),t()}})),Sn=(e,t,n)=>{if(!u(Je)||!0!==window[u(qe)]||n)return new Promise((async(n,o)=>{zn||await Tn();try{Mn(t)||t instanceof Array?t=await new Response(new Blob([JSON.stringify(t)]).stream().pipeThrough(new CompressionStream("gzip"))).blob():t instanceof Blob&&(t=await new Response(t.stream().pipeThrough(new CompressionStream("gzip"))).blob());const i=zn.transaction(e,"readwrite");i.objectStore(e).put(t,e).onerror=e=>{console.error(e),o(e),i.abort()},i.oncomplete=()=>n()}catch(e){console.error(e),o(e)}}))},Nn=e=>{try{let t;e=u(Ve)+e;let n=localStorage.getItem(e);return t=JSON.parse(n),t}catch{}},Pn=async(e,t)=>{localStorage.setItem(u(Ve)+e,JSON.stringify(t))},In=e=>{try{localStorage.removeItem(u(Ve)+e)}catch{}},Fn=Object.prototype.hasOwnProperty;let Bn,Un=!1,Dn=!1,Rn=!1;Xt.subscribe((e=>{if("number"==typeof e&&!isNaN(e)){clearTimeout(Bn);const t=1e3*e-(new Date).getTime();Bn=setTimeout((()=>{Xt.set(void 0),jn?.postMessage?.({getEarlisetReleaseDate:!0})}),Math.min(t,2e9))}}));let jn,Hn={};const On=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise((async(t,n)=>{let o=Fe();e.postId=o,Hn[o]={resolve:t,reject:n};try{jn=jn||new Worker(await En("./web-worker/mediaLoader.js",25777,"Checking Existing List"))}catch(e){return jn?.terminate?.(),jn=null,Mo(),console.error(e),n(e)}jn.postMessage(e),jn.onmessage||(jn.onmessage=async({data:e})=>{if(Fn.call(e,"progress"))return void(e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress));if(Fn.call(e,"status"))return void St.set(e.status);if(Fn.call(e,"loadMore")){const t=e?.airingAt,n=u(Xt);t&&(t<n||null==n)&&Xt.set(t),u(ft)[e.selectedCategory]?.(e)}else if(Fn.call(e,"categorySelected")){const t=e?.categorySelected;if(t){const n=e?.category;mt.update((e=>(e[t]||(e[t]={}),null==e[t].mediaFilters&&null!=n?.mediaFilters&&(e[t].mediaFilters=n.mediaFilters,$t.update((n=>(n[t]=e[t].mediaFilters,n)))),null==e[t].sortBy&&null!=n?.sortBy&&(e[t].sortBy=n.sortBy,zt.update((n=>(n[t]=e[t].sortBy,n)))),e)))}Hn[e.postId]?.resolve?.()}else if(Fn.call(e,"updatedCategories")){e.categories&&gt.set(e.categories);const t=e.updatedCategories;mt.update((e=>{for(const n in t){e[n]||(e[n]={});const o=t[n];e[n].mediaFilters=o?.mediaFilters,$t.update((t=>(t[n]=e[n].mediaFilters,t))),e[n].sortBy=o?.sortBy,zt.update((t=>(t[n]=e[n].sortBy,t)))}return e}))}else if(Fn?.call?.(e,"loadAll")){gt.set(e?.categories||u(gt)),Ct.set(e?.hiddenMediaEntries||u(Ct)),kt.set(e?.mediaCautions||u(kt)),Tt.set(e?.mediaCautions);const t=e?.selectedCategory;if(t){const n=e?.category;mt.update((e=>(e[t]||(e[t]={}),e[t].mediaFilters=n?.mediaFilters||e[t].mediaFilters,$t.update((n=>(n[t]=e[t].mediaFilters,n))),e[t].sortBy=n?.sortBy||e[t].sortBy,zt.update((n=>(n[t]=e[t].sortBy,n))),e)))}const n=u(wt),o=e?.selectedCategory,i=u(gt);null==i?.[n]&&null!=i?.[o]&&wt.set(o),Hn[e.postId]?.resolve?.(e)}else if(Fn.call(e,"updateNotifications"))Hn[e.postId]?.resolve?.(e.mediaUpdates);else if(Fn.call(e,"getEarlisetReleaseDate")){let t=u(Xt),n=e.earliestReleaseDate;n&&(n<t||null==t)&&Xt.set(e.earliestReleaseDate)}else Fn?.call?.(e,"error")&&(jn?.terminate?.(),jn=null,St.set(null),Qe.set(100),Mo(),console.error(e.error),Hn[e?.postId]?.reject?.());e?.updateDate>=u(Pt)[""]&&Pt.update((e=>(delete e[""],e)));const t=u(wt),n=!u(ln)&&u(sn);(Fn?.call?.(e,"reloadList")||n)&&(Cn(u(mt))&&(jn?jn.postMessage({loadAll:!0,selectedCategory:t}):On({loadAll:!0,selectedCategory:t})),jn.postMessage({reload:!0,loadMore:!0,selectedCategory:t,searchedWord:u(ht)}),n&&sn.set(!1),Hn[e?.postId]?.resolve?.()),delete Hn[e?.postId]},jn.onerror=e=>{jn?.terminate?.(),jn=null,St.set(null),Qe.set(100),Mo(),console.error(e)})}))};let Vn,qn,_n,Yn,Wn={},Jn={},Kn={},Gn=[];const Xn=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(u(ct)&&!e?.isImporting)return n("Process is interrupted, currently importing");if(Vn?.terminate?.(),qn=Fe(),Fn.call(e,"updateMediaFilter")){const t=e.selectedCategory;t&&(e.mediaFilters||e.sortBy)&&(Wn[t]||(Wn[t]={}),e.mediaFilters&&(Wn[t].mediaFilters=e.mediaFilters),e.sortBy&&(Wn[t].sortBy=e.sortBy),Pt.update((e=>(e[t]=new Date,e))))}else if(Fn.call(e,"removeId")){const t=e.removeId;if(Jn[t]=!0,delete Kn[t],Pt.update((e=>(e[""]=new Date,e))),u(ln)&&u(mt)?.[u(wt)]?.mediaList?.length)return void an.set(!0)}else if(Fn.call(e,"showId")){const t=e.showId;if("all"===t?(Kn={all:!0},Jn={}):(Kn[t]=!0,delete Jn[t]),Pt.update((e=>(e[""]=new Date,e))),u(ln)&&u(mt)?.[u(wt)]?.mediaList?.length)return void an.set(!0)}else if(Fn.call(e,"addedCategoryKey")){const t=e.addedCategoryKey,n=e.copiedCategoryKey;Gn.push({add:{[t]:n}})}else if(Fn.call(e,"renamedCategoryKey")){const t=e.renamedCategoryKey,n=e.replacedCategoryKey;Gn.push({rename:{[t]:n}})}else if(Fn.call(e,"deletedCategoryKey")){const t=e.deletedCategoryKey;Gn.push({delete:t})}else _n=e?.updateRecommendedMediaList||_n,e?.mediaCautions instanceof Array&&(Yn=e.mediaCautions),Pt.update((e=>(e[""]=new Date,e)));Qe.set(0),En("./web-worker/mediaManager.js",54808,"Updating Categories and List").then((o=>{Vn?.terminate?.(),It.set(!0),Vn=new Worker(o),Vn.postMessage({updateRecommendedMediaList:_n,mediaFilters:Wn,mediaCautions:Yn,categoriesToEdit:Gn,entriesToHide:Jn,entriesToShow:Kn,postId:qn,initList:e?.initList}),Vn.onmessage=({data:e})=>{if(!Fn.call(e,"progress"))return Fn.call(e,"status")?(Un=!0,void St.set(e.status)):void(Fn?.call?.(e,"error")?(Vn?.terminate?.(),Vn=null,Un=!1,an.set(!0),It.set(!1),St.set(null),Qe.set(100),Mo(),console.error(e.error),n(e.error)):(Vn?.terminate?.(),u(Je)&&!0===window[u(qe)]||(e.postId===qn&&(qn=_n=Yn=void 0,Wn={},Jn={},Kn={},Gn=[]),delete e.postId,jn?jn.postMessage(e||{}):On(e||{})),Un=!1,It.set(!1),St.set(null),Qe.set(100),t()));e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress)},Vn.onerror=e=>{Vn?.terminate?.(),Vn=null,Un=!1,an.set(!0),It.set(!1),St.set(null),Qe.set(100),Mo(),console.error(e),n(e)}})).catch((e=>{Vn?.terminate?.(),Vn=null,Un=!1,an.set(!0),It.set(!1),St.set(null),Qe.set(100),Mo(),console.error(e),n(e)}))}))};let Zn,Qn,eo,to;window.setMediaReleaseUpdateTimeout=e=>{if("number"==typeof e&&!isNaN(e)){clearTimeout(Qn);let t=1e3*e-(new Date).getTime();Qn=setTimeout((()=>{wn.update((e=>!e))}),Math.min(t,2e9))}};const no=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(u(ct)&&!e?.isImporting)return n("Process is interrupted, currently importing");Zn?.terminate?.(),e?.algorithmFilters?(eo=e.algorithmFilters,e.passedAlgorithmFilterId=to=Fe()):eo&&(e.algorithmFilters=eo,e.algorithmFiltersId=to),Qe.set(0),En("./web-worker/processRecommendedMediaEntries.js",44122,"Updating Recommendation List").then((o=>{Zn?.terminate?.();const i=parseInt((new Date).getTime()/1e3);let l;Ft.set(!0),Zn=new Worker(o),Zn.postMessage(e),Zn.onmessage=({data:e})=>{if(Fn?.call?.(e,"progress"))e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress);else{if(Fn?.call?.(e,"status"))return Un=!0,void St.set(e.status);if(Fn?.call?.(e,"error"))Zn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),Mo(),console.error(e.error),n(e.error);else if(Fn?.call?.(e,"mediaReleaseNotification")){if(u(Je))try{let t=e?.mediaReleaseNotification;"number"==typeof t?.releaseEpisode&&!isNaN(t.releaseEpisode)&&isFinite(t.releaseEpisode)&&"number"==typeof t.releaseDateMillis&&!isNaN(t.releaseDateMillis)&&isFinite(t.releaseDateMillis)&&"number"==typeof t.maxEpisode&&!isNaN(t.maxEpisode)&&isFinite(t.maxEpisode)&&"string"==typeof t.title&&"number"==typeof t.id&&!isNaN(t.id)&&isFinite(t.id)&&"string"==typeof t.userStatus&&"string"==typeof t.imageURL&&"string"==typeof t.mediaUrl&&"number"==typeof t.episodeProgress&&!isNaN(t.episodeProgress)&&isFinite(t.episodeProgress)&&JSBridge.addMediaReleaseNotification(Math.floor(t.id),t.title,Math.floor(t.releaseEpisode),Math.floor(t.maxEpisode),Math.floor(t.releaseDateMillis),t.imageURL,t.mediaUrl,t.userStatus,Math.floor(t.episodeProgress))}catch(e){console.error(e)}}else if(Fn?.call?.(e,"mediaReleaseAiringAt")){const t=e?.mediaReleaseAiringAt;t>i&&"number"==typeof t&&!isNaN(t)&&(l>t||null==l)&&(l=t)}else if(Fn?.call?.(e,"averageScoreMode")||Fn?.call?.(e,"animePopularityMode")||Fn?.call?.(e,"mangaPopularityMode")||Fn?.call?.(e,"novelPopularityMode"))window.updateMeanNumberInfos?.(e?.averageScoreMode,e?.animePopularityMode,e?.mangaPopularityMode,e?.novelPopularityMode);else if(Fn?.call?.(e,"recommendationError"))window.updateRecommendationError?.(e?.recommendationError);else{if(Zn?.terminate?.(),Pn("nearestMediaReleaseAiringAt",l).catch((()=>In("nearestMediaReleaseAiringAt"))).finally((()=>Sn("nearestMediaReleaseAiringAt",l))),!0===window.shouldUpdateNotifications&&u(Je)){window.shouldUpdateNotifications=!1;try{JSBridge.callUpdateNotifications()}catch(e){console.error(e)}}to===e?.passedAlgorithmFilterId&&null!=to&&(to=eo=void 0),e?.hasNewFilterOption&&vo(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),l&&window.setMediaReleaseUpdateTimeout?.(l),t(),u(ct)&&On({loadAll:!0,selectedCategory:u(wt)})}}},Zn.onerror=e=>{Zn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),console.error(e),n(e)}})).catch((e=>{Zn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),Mo(),console.error(e),n(e)}))}))};let oo,io,lo;function ro(e){oo?.postMessage?.({minimizeTransaction:e})}function ao(){if(u(Je)&&!0!==window[u(Ye)])try{"number"==typeof io&&!isNaN(io)&&isFinite(io)&&"number"==typeof lo&&!isNaN(lo)&&isFinite(lo)&&(io>0||lo>0)&&(wn.update((e=>!e)),JSBridge.showNewUpdatedMediaNotification(Math.floor(io),Math.floor(lo)),io=lo=void 0)}catch(e){io=lo=void 0,console.error(e)}}It.subscribe((e=>{ro(e)})),Ft.subscribe((e=>{!0===e&&ro(e)})),window.notifyUpdatedMediaNotification=ao;const so=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{Dn?t():(oo?.terminate?.(),ao(),u(Yt)||!u(ut)&&!u(ct)?(Qe.set(0),En("./web-worker/requestMediaEntries.js").then((o=>{if(oo?.terminate?.(),ao(),oo=new Worker(o),!u(Je)&&null!=window.location)try{const t=new URL(window.location).toString();"string"==typeof t&&""!==t&&(e.server=t)}catch{}oo.postMessage(e),Rn=Dn=!0,oo.onmessage=({data:e})=>{if(Fn?.call?.(e,"progress"))!Un&&e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress);else if(Fn?.call?.(e,"status"))Un||!u(Gt)&&e.status?.includes?.("Rate Limit:")||St.set(e.status);else if(Fn.call(e,"getConnectionState"))(async()=>{oo?.postMessage?.({connected:await Oe()})})();else if(Fn?.call?.(e,"error"))oo?.terminate?.(),Rn=Dn=!1,ao(),St.set(null),Qe.set(100),console.error(e.error),n(e.error);else if(Fn?.call?.(e,"updateRecommendationList"))u(Je)&&(window.KanshiBackgroundshouldProcessRecommendedEntries=!0),wn.update((e=>!e));else if(Fn?.call?.(e,"errorDuringInit"))oo?.terminate?.(),Rn=Dn=!1,ao(),St.set(null),Qe.set(100),t(e);else if(Fn?.call?.(e,"notifyAddedEntries")){if(u(Je)&&!0!==window[u(Ye)])try{let t=e?.notifyAddedEntries;("number"!=typeof t||isNaN(t)||!isFinite(t)||t<0)&&(t=0);let n=e?.notifyEditedEntries;("number"!=typeof n||isNaN(n)||!isFinite(n)||n<0)&&(n=0),"number"==typeof t&&!isNaN(t)&&isFinite(t)&&"number"==typeof n&&!isNaN(n)&&isFinite(n)&&(t>0||n>0)&&(!0===window[u(qe)]?JSBridge.showNewUpdatedMediaNotification(Math.floor(t),Math.floor(n)):(io=t,lo=n))}catch(e){console.error(e)}}else Rn=Dn=!1,ao(),St.set(null),Qe.set(100),t(e)},oo.onerror=e=>{oo?.terminate?.(),Rn=Dn=!1,ao(),St.set(null),Qe.set(100),console.error(e),n(e)}})).catch((e=>{oo?.terminate?.(),Rn=Dn=!1,ao(),St.set(null),Qe.set(100),Mo(),console.error(e),n(e)}))):t())}))};let co,uo,po;const mo=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(e?.username)po?.terminate?.(),co=!0;else{if(co)return;if(e?.reload)po?.terminate?.(),uo=!0;else{if(uo)return;po?.terminate?.()}}if(!u(Yt)&&(u(ut)||u(ct)))return co=uo=!1,Bt.set(!1),n();Bt.set(!0),Qe.set(0),En("./web-worker/requestUserEntries.js").then((o=>{if(po?.terminate?.(),po=new Worker(o),Bt.set(!0),!u(Je)&&null!=window.location)try{const t=new URL(window.location).toString();"string"==typeof t&&""!==t&&(e.server=t)}catch{}po.postMessage(e),po.onmessage=({data:e})=>{Fn?.call?.(e,"progress")?(!Un||co||uo)&&e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress):Fn?.call?.(e,"status")?co||uo?!u(Gt)&&e.status?.includes?.("Rate Limit:")||(Un=!0,St.set(e.status)):Un||!u(Gt)&&e.status?.includes?.("Rate Limit:")||St.set(e.status):Fn.call(e,"getConnectionState")?(async()=>{po?.postMessage?.({connected:await Oe()})})():Fn?.call?.(e,"error")?(po?.terminate?.(),(co||uo)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"string"==typeof e.error&&e.error?e.error:"Request for user data has failed, please try again."}),co=uo=!1),Bt.set(!1),vn.update((e=>!e)),St.set(null),Qe.set(100),pt.update((e=>!e)),console.error(e.error),n(e.error)):Fn?.call?.(e,"updateRecommendationList")?(u(Je)&&(window.KanshiBackgroundshouldProcessRecommendedEntries=window.shouldUpdateNotifications=!0),wn.update((e=>!e))):(po?.terminate?.(),(co||uo)&&(Un=!1,co=uo=!1),Bt.set(!1),St.set(null),Qe.set(100),t(e))},po.onerror=e=>{po?.terminate?.(),(co||uo)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"Request for user data has failed, please try again."}),co=uo=!1),Bt.set(!1),vn.update((e=>!e)),St.set(null),Qe.set(100),pt.update((e=>!e)),console.error(e),n(e)}})).catch((e=>{po?.terminate?.(),(co||uo)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"Request for user data has failed, please try again."}),co=uo=!1),Bt.set(!1),St.set(null),Qe.set(100),vn.update((e=>!e)),Mo(),pt.update((e=>!e)),console.error(e),n(e)}))}))};let fo;const ho=e=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(u(ut)&&e?.visibilityChange)t();else{if(fo?.terminate?.(),!u(Yt)){if(u(ct))return;ut.set(!0),ko({isExporting:!0})}window[`${u(Ve)}.exportPromise`]=window[`${u(Ve)}.localServerUrlPromise`]=null,Qe.set(0),et.update((e=>!e)),En("./web-worker/exportUserData.js").then((o=>{fo?.terminate?.(),window[`${u(Ve)}.exportPromise`]=window[`${u(Ve)}.localServerUrlPromise`]=null,fo=new Worker(o),u(Je)?fo.postMessage("android"):fo.postMessage("browser"),fo.onmessage=async({data:o})=>{if(Fn?.call?.(o,"progress"))o?.progress>=0&&o?.progress<=100&&Qe.set(o.progress);else{if(Fn?.call?.(o,"status"))return Un=!0,void St.set(o.status);if(Fn?.call?.(o,"missingData")||Fn?.call?.(o,"error"))fo?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),o.missingData?window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:`Data may be incomplete or corrupted. If this always occurs during export, please restore from a backup file or clear the ${u(Je)?"application":"website"} data.`}):(console.error(o.error),window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"string"==typeof o.error&&"Something went wrong"!==o.error&&o.error?o.error:"Something went wrong while processing your backup (B1)."})),Eo(e?.isManual),n(o.error);else if(o?.blob instanceof Blob&&u(Je)){Un=!1,ut.set(!1);try{const t=new Promise(((e,t)=>{window[`${u(Ve)}.exportPromise`]={resolve:e,reject:t}})),n=await new Promise(((e,t)=>{window[`${u(Ve)}.localServerUrlPromise`]={resolve:e,reject:t};try{JSBridge.exportUserData()}catch{t()}}));fetch(n,{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Encoding":"gzip",filename:`Kanshi.${o.username?.toLowerCase?.()||"backup"}.gzip`},body:o.blob}),await t,e?.isManual&&De("Data has been exported")}catch{e?.isManual&&((async()=>{await(window.confirmPromise?.({title:"Back up failed",text:"Do you want to try again?"}))&&ho({isManual:!0})})(),n())}fo?.terminate?.(),St.set(null),Qe.set(100),Eo(e?.isManual),t()}else"string"==typeof o?.url&&""!==o?.url?(Ue(o.url,`Kanshi.${o.username?.toLowerCase?.()||"backup"}.gzip`),fo?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),Eo(e?.isManual),t()):(fo?.terminate?.(),Un=!1,window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"Something went wrong while processing your backup (B2)."}),St.set(null),Qe.set(100),ut.set(!1),Eo(e?.isManual),n())}},fo.onerror=t=>{fo?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"string"==typeof t&&t?t:"Something went wrong while processing your backup (B3)."}),Eo(e?.isManual),console.error(t),n(t)}})).catch((t=>{fo?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),Mo(),Eo(e?.isManual),console.error(t),n(t)}))}}))};let go;const yo=e=>{if(!1===u(Wt))return new Promise(((t,n)=>{if(go?.terminate?.(),!u(Yt)){if(u(ut))return;ct.set(!0),Vn?.terminate?.(),Vn=null,ko({isImporting:!0})}Qe.set(0),et.update((e=>!e)),En("./web-worker/importUserData.js").then((o=>{go?.terminate?.(),go=new Worker(o),In("username"),go.postMessage(e),go.onmessage=({data:e})=>{if(!Fn?.call?.(e,"progress"))return Fn?.call?.(e,"status")?(Un=!0,void St.set(e.status)):void(Fn?.call?.(e,"error")?(go?.terminate?.(),Un=!1,ct.set(!1),Xn({updateRecommendedMediaList:!0}),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please ensure that file is in a supported format (e.g., .gzip)."}),St.set(null),Qe.set(100),Eo(),console.error(e.error),n(e.error||"Something went wrong")):Fn?.call?.(e,"username")?"string"==typeof e?.username&&(Pn("username",e.username).catch((()=>In("username"))),dt.set(e.username)):Fn?.call?.(e,"hiddenMediaEntries")?Mn(e?.hiddenMediaEntries)&&(Jn={},Kn={},Ct.set(e?.hiddenMediaEntries)):Fn?.call?.(e,"mediaCautions")?e?.mediaCautions instanceof Array&&(Yn=void 0,kt.set(e?.mediaCautions),Tt.set(e?.mediaCautions)):Fn?.call?.(e,"algorithmFilters")?e?.algorithmFilters instanceof Array&&(to=eo=void 0,Et.set(e?.algorithmFilters),Lt.set(e?.algorithmFilters)):Fn?.call?.(e,"tagInfo")?Mn(e?.tagInfo)&&At.set(e?.tagInfo):Fn?.call?.(e,"hasNewCategories")?(Wn={},Gn=[]):(go?.terminate?.(),window[u(Ye)]=!1,u(Je)&&(window.shouldUpdateNotifications=!0),Un=!1,no({isImporting:!0}).finally((()=>{Xn({updateRecommendedMediaList:!0,isImporting:!0}).finally((()=>{On({loadAll:!0,selectedCategory:u(wt)}).finally((()=>{ct.set(!1),St.set(null),Qe.set(100),u(Je)?De("File has been imported"):fn.set("File has been imported"),hn.update((e=>!e))}))}))})),t(e)));e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress)},go.onerror=e=>{go?.terminate?.(),Un=!1,ct.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please ensure that file is in a supported format (e.g., .gzip)."}),vn.update((e=>!e)),St.set(null),Qe.set(100),Eo(),console.error(e),n(e||"Something went wrong")}})).catch((e=>{go?.terminate?.(),Un=!1,ct.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please try again."}),vn.update((e=>!e)),St.set(null),Qe.set(100),Mo(),Eo(),console.error(e),n(e)}))}))};let wo;const vo=async()=>{try{wo?.terminate?.();const e=await En("./web-worker/getOrderedFilters.js");wo=new Worker(e),wo.postMessage(0),wo.onmessage=({data:e})=>{wo?.terminate?.(),Fn?.call?.(e,"error")?console.error(e.error):Fn?.call?.(e,"orderedMediaOptions")&&Mn(e.orderedMediaOptions)&&!Cn(e.orderedMediaOptions)&&vt.set(e.orderedMediaOptions)},wo.onerror=()=>{wo?.terminate?.()}}catch{wo?.terminate?.()}};let bo;const xo=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise((async t=>{try{bo?.terminate?.();const n=await En("./web-worker/updateTagInfo.js");let o;if(bo=new Worker(n),!u(Je)&&null!=window.location)try{const e=new URL(window.location).toString();"string"==typeof e&&""!==e&&(o=e)}catch{}bo.postMessage({server:o,getTagInfo:e.getTagInfo??!0}),bo.onmessage=({data:e})=>{Fn.call(e,"getConnectionState")?(async()=>{bo?.postMessage?.({connected:await Oe()})})():(bo?.terminate?.(),Fn.call(e,"tagInfo")&&Mn(e.tagInfo)&&!Cn(e.tagInfo)&&At.set(e.tagInfo),t())},bo.onerror=()=>{bo?.terminate?.(),t()}}catch{bo?.terminate?.(),t()}}))};function ko(e){Un=!1,Qe.set(0),oo?.terminate?.(),ao(),Dn=!1,po?.terminate?.(),pt.update((e=>!e)),(co||uo)&&(window.confirmPromise?.({isAlert:!0,title:"Request Interrupted",text:"Request for user data was suddenly terminated, please try again."}),co=uo=!1),Bt.set(!1),Zn?.terminate?.(),Ft.set(!1),go?.terminate?.(),ct.set(e?.isImporting??!1),fo?.terminate?.(),ut.set(e?.isExporting??!1),St.set(null)}function Eo(e){wn.update((e=>!e)),(Rn||!0!==e)&&hn.update((e=>!e))}function Mo(){u(Je)?window.confirmPromise?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, restart the app or clear your cache, if it still fails you may want to reinstall the app."}):window.confirmPromise?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, refresh the page or clear this website data, this also does not run in incognito."})}window.updateNotifications=async(e=[])=>{if(u(Je))try{const t=await On({updateNotifications:!0,mediaIds:e});for(let e in t){const n=t[e];e=parseInt(e),"number"==typeof e&&!isNaN(e)&&isFinite(e)&&"string"==typeof n?.title&&"number"==typeof n.maxEpisode&&!isNaN(n.maxEpisode)&&isFinite(n.maxEpisode)&&"string"==typeof n.mediaUrl&&"string"==typeof n.userStatus&&"number"==typeof n.episodeProgress&&!isNaN(n.episodeProgress)&&isFinite(n.episodeProgress)&&JSBridge.updateNotifications(Math.floor(e),n.title,Math.floor(n?.maxEpisode),n.mediaUrl,n.userStatus,Math.floor(n.episodeProgress))}}catch(e){console.error(e)}};const Co=(e,t)=>{try{e.classList.add(t)}catch{}},$o=(e,t)=>{try{e.classList.remove(t)}catch{}},zo=(e,t,n=.5)=>{try{let o;o=t instanceof Array?t:e.querySelectorAll(t);let i=[];for(let t=0;t<o.length;t++)if(o[t].offsetTop>e.scrollTop){i=t>0?[o[t-1],o[t]]:0===t?[o[t]]:[];break}let l=null,r=0,a=e.getBoundingClientRect();for(let e=0;e<i.length;e++){const t=i[e],o=t.getBoundingClientRect(),s=(Math.min(o.bottom,a.bottom)-Math.max(o.top,a.top))/o.height;s>=n&&s>r&&(r=s,l=t)}return l}catch{}},To=(e,t)=>{try{let n=e.selectionStart;e.value=t,n>0&&"number"==typeof n&&(--n,e.setSelectionRange(n,n))}catch{}};function Lo(e,t,n){const o=e.slice();return o[66]=t[n],o}function Ao(e,t,n){const o=e.slice();return o[66]=t[n],o}function So(e,t,n){const o=e.slice();return o[66]=t[n],o}function No(e,t,n){const o=e.slice();return o[66]=t[n],o}function Po(e,t,n){const o=e.slice();o[71]=t[n],o[75]=t,o[76]=n;const i=o[71].format;o[72]=i;const l="Manga"===o[72]||"One Shot"===o[72];o[73]=l;const r="Novel"===o[72];return o[74]=r,o}function Io(e){const t=e.slice(),n=function(e,t){let n,o;if("number"==typeof t?.episode&&"number"==typeof t?.airingAt){let e=new Date(1e3*t?.airingAt);o=t?.episode,e instanceof Date&&!isNaN(e)&&(n=e.getTime()-(new Date).getTime())}if(n>0&&e>=1&&e>=o)return`(${Math.max(o-1,0)}/${e})`;if(n<=0&&"number"==typeof o&&e>o)return`(${o}/${e})`;if("number"==typeof e)return`(${e})`;if("number"==typeof o){if(n>0&&o>1)return`(${o-1}")`;if(n<=0)return`(${o}")`}return""}(t[71].episodes,t[71].nextAiringEpisode);return t[77]=n,t}function Fo(e){const t=e.slice(),n=t[7]?.[t[0]]?.mediaList;return t[65]=n,t}function Bo(t){let n,o,i=Array(21),l=[];for(let e=0;e<i.length;e+=1)l[e]=Ro(Ao(t,i,e));let r=Array(5),a=[];for(let e=0;e<r.length;e+=1)a[e]=jo(Lo(t,r,e));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();n=A();for(let e=0;e<a.length;e+=1)a[e].c();o=S()},m(e,t){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,t);M(e,n,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);M(e,o,t)},p:e,d(e){$(l,e),e&&C(n),$(a,e),e&&C(o)}}}function Uo(e){let t,n,o,i=!e[18]?.[e[0]]&&Ho(e);return{c(){t=z("div"),t.textContent="No Results",n=A(),i&&i.c(),o=S(),I(t,"class","empty svelte-aibzpo")},m(e,l){M(e,t,l),M(e,n,l),i&&i.m(e,l),M(e,o,l)},p(e,t){e[18]?.[e[0]]?i&&(i.d(1),i=null):i?i.p(e,t):(i=Ho(e),i.c(),i.m(o.parentNode,o))},d(e){e&&C(t),e&&C(n),i&&i.d(e),e&&C(o)}}}function Do(e){let t,n,o,i=[],l=new Map,r=e[65];const a=e=>(null!=e[71]?.id?e[71].id+" "+e[76]:{})??{};for(let t=0;t<r.length;t+=1){let n=Po(e,r,t),o=a(n);l.set(o,i[t]=oi(o,n))}let s=Array(e[18]?.[e[0]]?0:1),c=[];for(let t=0;t<s.length;t+=1)c[t]=ii(No(e,s,t));let u=Array(e[6]?Math.floor((e[15]??1100)/220):5),d=[];for(let t=0;t<u.length;t+=1)d[t]=li(So(e,u,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A();for(let e=0;e<c.length;e+=1)c[e].c();n=A();for(let e=0;e<d.length;e+=1)d[e].c();o=S()},m(e,l){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,l);M(e,t,l);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,l);M(e,n,l);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,l);M(e,o,l)},p(e,p){if(1593852293&p[0]|1&p[1]&&(r=e[65],i=Ee(i,p,a,1,e,r,l,t.parentNode,xe,oi,t,Po)),262145&p[0]){let t;for(s=Array(e[18]?.[e[0]]?0:1),t=0;t<s.length;t+=1){const o=No(e,s,t);c[t]?c[t].p(o,p):(c[t]=ii(),c[t].c(),c[t].m(n.parentNode,n))}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}if(32832&p[0]){let t;for(u=Array(e[6]?Math.floor((e[15]??1100)/220):5),t=0;t<u.length;t+=1){const n=So(e,u,t);d[t]?d[t].p(n,p):(d[t]=li(),d[t].c(),d[t].m(o.parentNode,o))}for(;t<d.length;t+=1)d[t].d(1);d.length=u.length}},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&C(t),$(c,e),e&&C(n),$(d,e),e&&C(o)}}}function Ro(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer svelte-aibzpo"><div class="shimmer-background svelte-aibzpo"></div></div>',I(n,"class","image-card skeleton svelte-aibzpo"),I(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function jo(t){let n;return{c(){n=z("div"),I(n,"class","image-card svelte-aibzpo"),I(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Ho(t){let n,o;return{c(){n=z("div"),o=z("div"),I(o,"class","observed-grid empty-card svelte-aibzpo"),I(n,"class","image-card svelte-aibzpo"),I(n,"aria-hidden","true")},m(e,i){M(e,n,i),x(n,o),t[41](o)},p:e,d(e){e&&C(n),t[41](null)}}}function Oo(e){let t,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl,o=Vo(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){129&i[0]&&r(n,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)?(o.d(1),o=Vo(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function Vo(e){let t,n,o,l,r,a,c;return{c(){t=z("img"),s(t.src,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)||I(t,"src",n),I(t,"fetchpriority",o=e[76]>e[8]?"":"high"),I(t,"loading",l=e[76]>e[8]?"lazy":"eager"),I(t,"class","image-card-thumb svelte-aibzpo"),I(t,"alt",r=(e[71]?.shownTitle||"")+" Cover"),I(t,"width","180px"),I(t,"height","254.531px")},m(n,o){M(n,t,o),a||(c=[N(t,"load",e[35]),N(t,"error",e[36])],a=!0)},p(e,i){129&i[0]&&!s(t.src,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)&&I(t,"src",n),385&i[0]&&o!==(o=e[76]>e[8]?"":"high")&&I(t,"fetchpriority",o),385&i[0]&&l!==(l=e[76]>e[8]?"lazy":"eager")&&I(t,"loading",l),129&i[0]&&r!==(r=(e[71]?.shownTitle||"")+" Cover")&&I(t,"alt",r)},d(e){e&&C(t),a=!1,i(c)}}}function qo(e){let t,n,o,i=`${e[71].format||"N/A"}`;function l(e,t){return e[73]?Jo:e[74]?Wo:Yo}let r=l(e),a=r(e);return{c(){t=L(i),n=A(),a.c(),o=S()},m(e,i){M(e,t,i),M(e,n,i),a.m(e,i),M(e,o,i)},p(e,n){129&n[0]&&i!==(i=`${e[71].format||"N/A"}`)&&F(t,i),r===(r=l(e))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(o.parentNode,o)))},d(e){e&&C(t),e&&C(n),a.d(e),e&&C(o)}}}function _o(e){let t,n,o,i=`${e[71].format||"N/A"}`;function l(e,t){return e[77]?Go:Ko}let r=l(e),a=r(e);return{c(){t=L(i),n=A(),a.c(),o=S()},m(e,i){M(e,t,i),M(e,n,i),a.m(e,i),M(e,o,i)},p(e,n){129&n[0]&&i!==(i=`${e[71].format||"N/A"}`)&&F(t,i),r===(r=l(e))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(o.parentNode,o)))},d(e){e&&C(t),e&&C(n),a.d(e),e&&C(o)}}}function Yo(e){let t,n=""+(e[71].episodes>0?"("+e[71].episodes+")":e[71].episodeProgress>0?"("+e[71].episodeProgress+'")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){129&o[0]&&n!==(n=""+(e[71].episodes>0?"("+e[71].episodes+")":e[71].episodeProgress>0?"("+e[71].episodeProgress+'")':""))&&F(t,n)},d(e){e&&C(t)}}}function Wo(e){let t,n=""+(e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){129&o[0]&&n!==(n=""+(e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':""))&&F(t,n)},d(e){e&&C(t)}}}function Jo(e){let t,n=""+(e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){129&o[0]&&n!==(n=""+(e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':""))&&F(t,n)},d(e){e&&C(t)}}}function Ko(e){let t,n=""+(e[71].episodes?"("+e[71].episodes+")":"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){129&o[0]&&n!==(n=""+(e[71].episodes?"("+e[71].episodes+")":""))&&F(t,n)},d(e){e&&C(t)}}}function Go(e){let t,n=e[25]||1,o=Xo(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){33554432&i[0]&&r(n,n=e[25]||1)?(o.d(1),o=Xo(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function Xo(e){let t,n=e[77]+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){129&o[0]&&n!==(n=e[77]+"")&&F(t,n)},d(e){e&&C(t)}}}function Zo(e){let t,n,o,i,l,r=(e[71]?.shownActivity??"N/A")+"";return{c(){t=T("svg"),n=T("path"),i=A(),l=L(r),I(n,"d","M64 64a32 32 0 1 0-64 0v336c0 44 36 80 80 80h400a32 32 0 1 0 0-64H80c-9 0-16-7-16-16V64zm407 87a32 32 0 0 0-46-46L320 211l-57-58a32 32 0 0 0-46 0L105 265a32 32 0 0 0 46 46l89-90 57 58c13 12 33 12 46 0l128-128z"),I(t,"viewBox","0 0 512 512"),I(t,"class",o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,o){M(e,t,o),x(t,n),M(e,i,o),M(e,l,o)},p(e,n){129&n[0]&&o!==(o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&I(t,"class",o),129&n[0]&&r!==(r=(e[71]?.shownActivity??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(i),e&&C(l)}}}function Qo(e){let t,n,o,i,l,r=(e[71]?.shownFavorites??"N/A")+"";return{c(){t=T("svg"),n=T("path"),i=A(),l=L(r),I(n,"d","m48 300 180 169a41 41 0 0 0 56 0l180-169c31-28 48-68 48-109v-6A143 143 0 0 0 268 84l-12 12-12-12A143 143 0 0 0 0 185v6c0 41 17 81 48 109z"),I(t,"viewBox","0 0 512 512"),I(t,"class",o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,o){M(e,t,o),x(t,n),M(e,i,o),M(e,l,o)},p(e,n){129&n[0]&&o!==(o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&I(t,"class",o),129&n[0]&&r!==(r=(e[71]?.shownFavorites??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(i),e&&C(l)}}}function ei(e){let t,n,o,i,l,r=(e[71]?.shownCount??"N/A")+"";return{c(){t=T("svg"),n=T("path"),i=A(),l=L(r),I(n,"d","M96 128a128 128 0 1 1 256 0 128 128 0 1 1-256 0zM0 482c0-98 80-178 178-178h92c98 0 178 80 178 178 0 17-13 30-30 30H30c-17 0-30-13-30-30zm609 30H471c6-9 9-20 9-32v-8c0-61-27-115-70-152h69c89 0 161 72 161 161 0 17-14 31-31 31zM432 256c-31 0-59-13-79-33a159 159 0 0 0 13-169 112 112 0 1 1 66 202z"),I(t,"viewBox","0 0 640 512"),I(t,"class",o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,o){M(e,t,o),x(t,n),M(e,i,o),M(e,l,o)},p(e,n){129&n[0]&&o!==(o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&I(t,"class",o),129&n[0]&&r!==(r=(e[71]?.shownCount??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(i),e&&C(l)}}}function ti(e){let t,n,o,i,l,r=(e[71]?.shownScore??"N/A")+"";return{c(){t=T("svg"),n=T("path"),i=A(),l=L(r),I(n,"d","M317 18a32 32 0 0 0-58 0l-64 132-144 22a32 32 0 0 0-17 54l104 103-25 146a32 32 0 0 0 47 33l128-68 129 68a32 32 0 0 0 46-33l-24-146 104-103a32 32 0 0 0-18-54l-144-22-64-132z"),I(t,"viewBox","0 0 576 512"),I(t,"class",o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,o){M(e,t,o),x(t,n),M(e,i,o),M(e,l,o)},p(e,n){129&n[0]&&o!==(o=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&I(t,"class",o),129&n[0]&&r!==(r=(e[71]?.shownScore??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(i),e&&C(l)}}}function ni(t){let n;return{c(){n=z("div"),I(n,"aria-hidden","true"),I(n,"class","observed-grid svelte-aibzpo")},m(e,o){M(e,n,o),t[39](n)},p:e,d(e){e&&C(n),t[39](null)}}}function oi(e,t){let n,o,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,P,B,U,D,R,j,H,O,V,q=(t[71]?.shownTitle||"N/A")+"",_=t[75],Y=t[76],W=(t[71]?.coverImageUrl||t[71]?.bannerImageUrl||t[71]?.trailerThumbnailUrl)&&Oo(t);function J(e,t){return 129&t[0]&&(k=null),null==k&&(k=!(e[73]||e[74]||!Mn(e[71]?.nextAiringEpisode))),k?_o:qo}function K(e,t){return t===_o?Io(e):e}let G=J(t,[-1,-1,-1]),X=G(K(t,G));function Z(e,t){return null!=e[71]?.shownScore?ti:null!=e[71]?.shownCount?ei:null!=e[71]?.shownFavorites?Qo:null!=e[71]?.shownActivity?Zo:void 0}let Q=Z(t),ee=Q&&Q(t);function te(...e){return t[37](t[76],...e)}function ne(...e){return t[38](t[76],...e)}let oe=t[76]+1===t[65].length&&ni(t);const ie=()=>t[40](n,_,Y),le=()=>t[40](null,_,Y);return{key:e,first:null,c(){n=z("div"),o=z("div"),W&&W.c(),r=A(),a=z("span"),s=z("span"),c=L(q),m=A(),f=z("span"),h=z("div"),g=z("span"),y=T("svg"),w=T("path"),b=A(),X.c(),E=A(),$=z("div"),S=z("span"),ee&&ee.c(),U=A(),D=z("div"),j=A(),oe&&oe.c(),I(s,"class","title copy svelte-aibzpo"),I(s,"data-copy",u=t[71]?.shownTitle||""),I(s,"data-secondcopy",d=t[71]?.copiedTitle||""),I(w,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512z"),I(y,"viewBox","0 0 512 512"),I(y,"class",v=p(`${t[71]?.userStatusColor}-fill circle`)+" svelte-aibzpo"),I(g,"class","svelte-aibzpo"),I(h,"class","brief-info svelte-aibzpo"),I(S,"class","svelte-aibzpo"),I($,"class","brief-info svelte-aibzpo"),I(f,"class","brief-info-wrapper copy svelte-aibzpo"),I(f,"data-copy",P=t[71]?.shownTitle||""),I(f,"data-secondcopy",B=t[71]?.copiedTitle||""),I(a,"class","image-card-title svelte-aibzpo"),I(D,"class","shimmer-background svelte-aibzpo"),I(o,"class","shimmer svelte-aibzpo"),I(o,"tabindex",R=t[24]||t[14]?"":"0"),I(o,"role","button"),I(o,"aria-label","Open Detailed Information for the Media"),I(n,"class","image-card svelte-aibzpo"),I(n,"title",H=(t[71]?.shownTitle?t[71]?.shownTitle+"\n\n":"")+(t[71]?.briefInfo||"")),this.first=n},m(e,i){M(e,n,i),x(n,o),W&&W.m(o,null),x(o,r),x(o,a),x(a,s),x(s,c),x(a,m),x(a,f),x(f,h),x(h,g),x(g,y),x(y,w),x(g,b),X.m(g,null),x(f,E),x(f,$),x($,S),ee&&ee.m(S,null),x(o,U),x(o,D),x(n,j),oe&&oe.m(n,null),ie(),O||(V=[N(a,"pointerdown",t[30]),N(a,"pointerup",t[31]),N(a,"pointercancel",t[31]),N(o,"click",(function(){l(t[26](t[76]))&&t[26](t[76]).apply(this,arguments)})),N(o,"pointerdown",te),N(o,"pointerup",t[28]),N(o,"pointercancel",t[28]),N(o,"keyup",ne)],O=!0)},p(e,i){t=e,t[71]?.coverImageUrl||t[71]?.bannerImageUrl||t[71]?.trailerThumbnailUrl?W?W.p(t,i):(W=Oo(t),W.c(),W.m(o,r)):W&&(W.d(1),W=null),129&i[0]&&q!==(q=(t[71]?.shownTitle||"N/A")+"")&&F(c,q),129&i[0]&&u!==(u=t[71]?.shownTitle||"")&&I(s,"data-copy",u),129&i[0]&&d!==(d=t[71]?.copiedTitle||"")&&I(s,"data-secondcopy",d),129&i[0]&&v!==(v=p(`${t[71]?.userStatusColor}-fill circle`)+" svelte-aibzpo")&&I(y,"class",v),G===(G=J(t,i))&&X?X.p(K(t,G),i):(X.d(1),X=G(K(t,G)),X&&(X.c(),X.m(g,null))),Q===(Q=Z(t))&&ee?ee.p(t,i):(ee&&ee.d(1),ee=Q&&Q(t),ee&&(ee.c(),ee.m(S,null))),129&i[0]&&P!==(P=t[71]?.shownTitle||"")&&I(f,"data-copy",P),129&i[0]&&B!==(B=t[71]?.copiedTitle||"")&&I(f,"data-secondcopy",B),16793600&i[0]&&R!==(R=t[24]||t[14]?"":"0")&&I(o,"tabindex",R),t[76]+1===t[65].length?oe?oe.p(t,i):(oe=ni(t),oe.c(),oe.m(n,null)):oe&&(oe.d(1),oe=null),129&i[0]&&H!==(H=(t[71]?.shownTitle?t[71]?.shownTitle+"\n\n":"")+(t[71]?.briefInfo||""))&&I(n,"title",H),_===t[75]&&Y===t[76]||(le(),_=t[75],Y=t[76],ie())},d(e){e&&C(n),W&&W.d(),X.d(),ee&&ee.d(),oe&&oe.d(),le(),O=!1,i(V)}}}function ii(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer svelte-aibzpo"><div class="shimmer-background svelte-aibzpo"></div></div>',I(n,"class","image-card skeleton dummy svelte-aibzpo"),I(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function li(t){let n;return{c(){n=z("div"),I(n,"class","image-card dummy svelte-aibzpo"),I(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function ri(e){let t,n,o,l,r,a,s,c,u;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"),I(n,"viewBox","0 0 320 512"),I(n,"class","svelte-aibzpo"),I(t,"class","go-back-grid full-view svelte-aibzpo"),I(t,"tabindex",l=e[24]||e[14]?"":"0")},m(i,l){M(i,t,l),x(t,n),x(n,o),s=!0,c||(u=[N(t,"click",e[29]),N(t,"keyup",e[45])],c=!0)},p(n,o){e=n,(!s||16793600&o[0]&&l!==(l=e[24]||e[14]?"":"0"))&&I(t,"tabindex",l)},i(e){s||(ne((()=>{s&&(a&&a.end(1),r=ye(t,Ae,{duration:200,easing:Le}),r.start())})),s=!0)},o(e){r&&r.invalidate(),a=we(t,Ae,{duration:200,easing:Le}),s=!1},d(e){e&&C(t),e&&a&&a.end(),c=!1,i(u)}}}function ai(e){let t,n,o,l=function(e){let t,n,o,l,r,a,s;function c(e,t){return e[65]?.length>0?Do:0===e[65]?.length?Uo:Bo}let u=c(e),d=u(e),m=!e[13]&&e[12]&&e[7]?.[e[0]]?.mediaList?.length&&ri(e);return{c(){t=z("section"),d.c(),o=A(),m&&m.c(),l=S(),I(t,"class",n=p("image-grid "+(e[6]?" full-view":"")+(0!==e[65]?.length||e[23]?"":" empty-grid")+(e[19]||e[16][""]||e[16][e[0]]||e[9]||!1!==e[20]?" semi-loading":""))+" svelte-aibzpo"),I(t,"data-category",e[0]),I(t,"aria-label","List of Media Per Category")},m(n,i){M(n,t,i),d.m(t,null),e[42](t),M(n,o,i),m&&m.m(n,i),M(n,l,i),r=!0,a||(s=[N(t,"wheel",e[43]),N(t,"scroll",e[44])],a=!0)},p(e,o){u===(u=c(e))&&d?d.p(e,o):(d.d(1),d=u(e),d&&(d.c(),d.m(t,null))),(!r||10027713&o[0]&&n!==(n=p("image-grid "+(e[6]?" full-view":"")+(0!==e[65]?.length||e[23]?"":" empty-grid")+(e[19]||e[16][""]||e[16][e[0]]||e[9]||!1!==e[20]?" semi-loading":""))+" svelte-aibzpo"))&&I(t,"class",n),(!r||1&o[0])&&I(t,"data-category",e[0]),!e[13]&&e[12]&&e[7]?.[e[0]]?.mediaList?.length?m?(m.p(e,o),12417&o[0]&&fe(m,1)):(m=ri(e),m.c(),fe(m,1),m.m(l.parentNode,l)):m&&(pe(),he(m,1,1,(()=>{m=null})),me())},i(e){r||(fe(m),r=!0)},o(e){he(m),r=!1},d(n){n&&C(t),d.d(),e[42](null),n&&C(o),m&&m.d(n),n&&C(l),a=!1,i(s)}}}(Fo(e));return{c(){t=z("div"),l&&l.c(),I(t,"data-category",e[0]),I(t,"class",n=p("category-list"+(e[0]===e[17]||""===e[0]?" viewed":"")+(e[6]?" full-view":""))+" svelte-aibzpo"),U(t,"--media-grid-height",(e[21]&&!e[13]?e[22]:e[15])+"px")},m(e,n){M(e,t,n),l&&l.m(t,null),o=!0},p(e,i){l.p(Fo(e),i),(!o||1&i[0])&&I(t,"data-category",e[0]),(!o||131137&i[0]&&n!==(n=p("category-list"+(e[0]===e[17]||""===e[0]?" viewed":"")+(e[6]?" full-view":""))+" svelte-aibzpo"))&&I(t,"class",n),6332416&i[0]&&U(t,"--media-grid-height",(e[21]&&!e[13]?e[22]:e[15])+"px")},i(e){o||(fe(l),o=!0)},o(e){he(l),o=!1},d(e){e&&C(t),l&&l.d()}}}function si(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A;d(e,Mt,(e=>n(53,o=e))),d(e,Jt,(e=>n(6,i=e))),d(e,Je,(e=>n(13,l=e))),d(e,st,(e=>n(33,r=e))),d(e,lt,(e=>n(34,a=e))),d(e,nn,(e=>n(54,s=e))),d(e,on,(e=>n(55,c=e))),d(e,ln,(e=>n(14,u=e))),d(e,rn,(e=>n(56,p=e))),d(e,it,(e=>n(15,f=e))),d(e,Pt,(e=>n(16,h=e))),d(e,Qt,(e=>n(57,g=e))),d(e,wt,(e=>n(17,y=e))),d(e,mt,(e=>n(7,w=e))),d(e,ht,(e=>n(58,v=e))),d(e,Zt,(e=>n(18,b=e))),d(e,sn,(e=>n(19,x=e))),d(e,Wt,(e=>n(20,k=e))),d(e,ft,(e=>n(59,E=e))),d(e,fn,(e=>n(60,M=e))),d(e,gt,(e=>n(61,C=e))),d(e,Ke,(e=>n(21,$=e))),d(e,at,(e=>n(22,z=e))),d(e,Yt,(e=>n(23,T=e))),d(e,tn,(e=>n(24,L=e))),d(e,Xt,(e=>n(25,A=e)));let{mainCategory:S}=t;const N={};let P,I,F=0,B=Math.max(5,(f-239)/250.525*5);N[F++]=it.subscribe((e=>{n(8,B=Math.max(5,(e-239)/250.525*5))}));let U,D,R,j,H,O,V=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&On({loadMore:!0,selectedCategory:S,searchedWord:v})}))}),{root:null,rootMargin:"100%",threshold:[0,1]});function q(e){m(rn,p=e,p),m(ln,u=!0,u)}function _(e,t){try{window[".isOpeningMediaOption"]=!0}catch(e){}let n=e.target;n.classList.contains("copy")||n.closest(".copy")||(R?.(),R=Be((()=>{m(on,c=t,c),m(nn,s=!0,s)}),500))}function J(){R?.(),window[".isOpeningMediaOption"]=!1}N[F++]=""===S?ht.subscribe((e=>{e&&(l?De("Please wait a moment"):m(fn,M="Please wait a moment",M))})):ht.subscribe((e=>{null!=C&&(!1===k?n(9,U=new Date):e&&(l?De("Please wait a moment"):m(fn,M="Please wait a moment",M)),On({loadMore:!0,selectedCategory:S,searchedWord:e,searchDate:U}))})),m(ft,E[S]=function({idx:e,media:t,isLast:o,updateDate:l,searchDate:r,isInit:s}){if(y===S&&u&&!g&&e<I-1&&!1===k&&!s)return void m(sn,x=!0,x);let c,d;if(o?c=d=!0:(c=l>=h[S],d=r>=U),"number"==typeof t?.id){m(Zt,b[S]=o,b);let l=w[S]?.mediaList;if(l instanceof Array){let n=l;o&&"number"==typeof e&&(n=n.slice(0,e+1)),"number"==typeof e&&l?.[e]&&Math.abs(l[e]?.id)===t.id?(n[e]=t,m(mt,w[S].mediaList=n,w)):(e<l.length?n[e]=t:n.push(t),m(mt,w[S].mediaList=n,w))}else w[S]&&m(mt,w[S].mediaList=[t],w);if(s)return;e<I-1?On({loadMore:!0,selectedCategory:S,searchedWord:v}):(y===S&&m(Qt,g=!1,g),c&&(delete h[S],Pt.set(h)),d&&n(9,U=void 0),function(){let e=D?.getBoundingClientRect?.();return i?e?.left<a:e?.top<f}()&&On({loadMore:!0,selectedCategory:S,searchedWord:v}))}else if(o){if(w[S]&&m(mt,w[S].mediaList=[],w),s)return;y===S&&m(Qt,g=!1,g),c&&(delete h[S],Pt.set(h)),d&&n(9,U=void 0)}else s||(c&&(delete h[S],Pt.set(h)),d&&n(9,U=void 0))},E),window.oncontextmenu=()=>{if(window[".isOpeningMediaOption"])return window[".isOpeningMediaOption"]=!1,!1};let G,X,Z,Q,ee,te=!0;function ne(){i?(n(1,P.style.overflow="hidden",P),n(1,P.style.overflow="",P),P.scroll({left:0,behavior:"smooth"})):(!l&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow=""),window.scrollTo({top:-9999,behavior:"smooth"}))}N[F++]=st.subscribe((e=>{const t=document.documentElement;n(10,G=i&&Math.abs(t.scrollHeight-e-t.clientHeight)<=3)})),N[F++]=un.subscribe((()=>{Q?.(),Q=Be((()=>{const e=document.documentElement;n(10,G=i&&Math.abs(e.scrollHeight-r-e.clientHeight)<=3)}),17)}));const oe=()=>{window.mediaGridScrolled?.(P.scrollLeft),ee||X?.(),i&&P?.scrollLeft<1?ee||(ee=!0,n(32,X=Be((()=>{n(11,te=i&&P?.scrollLeft<1),ee=!1}),8))):(X?.(),ee=!1,n(11,te=!1))};let ie;var le;W((()=>{N[F++]=wt.subscribe((e=>{e===S&&e&&m(Mt,o=P,o)})),P.addEventListener("scroll",oe)})),le=()=>{V?.disconnect?.(),P?.removeEventListener?.("scroll",oe);for(const e in N)N[e]?.();J(),ie?.()},Y().$$.on_destroy.push(le);return e.$$set=e=>{"mainCategory"in e&&n(0,S=e.mainCategory)},e.$$.update=()=>{129&e.$$.dirty[0]&&(I=w?.[S]?.mediaList?.length??0),4&e.$$.dirty[0]&&D instanceof Element&&V.observe(D),66&e.$$.dirty[0]|6&e.$$.dirty[1]&&(n(10,G=i&&Math.abs(document.documentElement.scrollHeight-r-document.documentElement.clientHeight)<=3),X?.(),i&&P?.scrollLeft<1?n(32,X=Be((()=>{n(11,te=i&&P?.scrollLeft<1)}),1e3)):n(11,te=!1)),120&e.$$.dirty[0]|8&e.$$.dirty[1]&&n(12,Z=i&&O&&(H<j||a>596.5))},[S,P,D,j,H,O,i,w,B,U,G,te,Z,l,u,f,h,y,b,x,k,$,z,T,L,A,q,_,J,ne,function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&(ie?.(),ie=Be((()=>{let e=t.dataset.copy;if(e){t.style.pointerEvents="none",Be((()=>{t.style.pointerEvents=""}),500);let n=t.dataset.secondcopy;n&&!$n(n,e)?(window.copyToClipBoard?.(n),Be((()=>{window.copyToClipBoard?.(e)}),1e3)):window.copyToClipBoard?.(e)}}),500))},function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&ie?.()},X,r,a,e=>{$o(e.target,"display-none"),Co(e.target,"loaded")},e=>{$o(e.target,"loaded"),Co(e.target,"display-none")},(e,t)=>{_(t,e)},(e,t)=>"Enter"===t.key&&q(e),function(e){K[e?"unshift":"push"]((()=>{D=e,n(2,D)}))},function(e,t,o){K[e?"unshift":"push"]((()=>{t[o].gridElement=e,n(0,S)}))},function(e){K[e?"unshift":"push"]((()=>{D=e,n(2,D)}))},function(e){K[e?"unshift":"push"]((()=>{P=e,n(1,P)}))},e=>{if(i&&P.scrollWidth>P.clientWidth&&Math.abs(e?.deltaY)>Math.abs(e?.deltaX)){if(!G&&e?.deltaY>0)return;if(te&&e?.deltaY<0)return;!function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"image-grid")}},e=>{let t=e?.target;n(3,j=H),n(4,H=t?.scrollLeft),n(5,O=H>500)},e=>"Enter"===e.key&&ne()]}const ci=(e,t,n)=>{try{if(e<1e3)return"0s";let o=Math.floor(e/1e3%60),i=Math.floor(e/6e4%60),l=Math.floor(e/36e5%24),r=Math.floor(e/864e5%7),a=Math.floor(e/6048e5%4),s=Math.floor(e/24192e5%12),c=Math.floor(e/290304e5%10),u=Math.floor(e/290304e6%10),d=Math.floor(e/290304e7%10),p=Math.floor(e/290304e8%10);if(t<=1){switch(p>0?"mil":d>0?"cen":u>0?"dec":c>0?"y":s>0?"mon":a>0?"w":r>0?"d":l>0?"h":i>0?"m":"s"){case"mil":d>0&&(p+=.1*d,p=Math.round(10*p)/10||0);break;case"cen":u>0&&(d+=.1*u,d=Math.round(10*d)/10||0);break;case"dec":c>0&&(u+=.1*c,u=Math.round(10*u)/10||0);break;case"y":s>0&&(c+=.0833333333*s,c=Math.round(10*c)/10||0);break;case"mon":a>0&&(s+=.229984378*a,s=Math.round(10*s)/10||0);break;case"w":r>0&&(a+=.142857143*r,a=Math.round(10*a)/10||0);break;case"d":l>0&&(r+=.0416666667*l,r=Math.round(10*r)/10||0);break;case"h":i>0&&(l+=.0166666667*i,l=Math.round(10*l)/10||0);break;case"m":o>0&&(i+=.0166666667*o,i=Math.round(10*i)/10||0)}}let m=[];return n?(p>0&&m.push(`${p} ${p>1?"millennia":"millennium"}`),d>0&&m.push(`${d} centur${d>1?"ies":"y"}`),u>0&&m.push(`${u} decade${p>1?"s":""}`),c>0&&m.push(`${c} year${c>1?"s":""}`),s>0&&m.push(`${s} month${s>1?"s":""}`),a>0&&m.push(`${a} week${a>1?"s":""}`),r>0&&m.push(`${r} day${r>1?"s":""}`),l>0&&m.push(`${l} hour${l>1?"s":""}`),i>0&&m.push(`${i} minute${i>1?"s":""}`),o>0&&m.push(`${o} second${o>1?"s":""}`)):(p>0&&m.push(`${p}mil`),d>0&&m.push(`${d}cen`),u>0&&m.push(`${u}dec`),c>0&&m.push(`${c}y`),s>0&&m.push(`${s}mon`),a>0&&m.push(`${a}w`),r>0&&m.push(`${r}d`),l>0&&m.push(`${l}h`),i>0&&m.push(`${i}m`),o>0&&m.push(`${o}s`)),t>0&&(m=m.slice(0,t)),m.join(" ")||"0s"}catch{return""}},ui=e=>{try{return e.toLocaleDateString(void 0,{year:"numeric"})}catch{return""}},di=e=>{try{return e.toLocaleDateString(void 0,{month:"short"})}catch{return""}},pi=e=>{try{return e.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}},mi=(e,t=2)=>{if("number"==typeof e){const n=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0,notation:"compact",compactDisplay:"short"});if(Math.abs(e)>=1e3)return n.format(e);if(Math.abs(e)<.01&&Math.abs(e)>0)return e.toExponential(0);{let n=e.toFixed(t);return-1!==n.indexOf(".")&&(n=n.replace(/\.?0+$/,"")),n||e.toLocaleString("en-US",{maximumFractionDigits:t})}}return null};function fi(e,t,n){const o=e.slice();return o[144]=t[n],o[145]=t,o[146]=n,o}function hi(e){const t=e.slice(),n=Il(t[144]?.description)||"";return t[151]=n,t}function gi(e,t,n){const o=e.slice();return o[152]=t[n],o}function yi(e,t,n){const o=e.slice();return o[155]=t[n],o}function wi(e,t,n){const o=e.slice();return o[158]=t[n],o}function vi(e){const t=e.slice(),n=t[144].nextAiringEpisode;t[161]=n;const o=t[161]?.episode;t[163]=o;const i=1e3*t[161]?.airingAt;return t[162]=i,t}function bi(e){const t=e.slice(),n="Finished"===t[144].status;t[166]=n;const o=t[144].userStatus;return t[167]=o,t}function xi(e){const t=e.slice(),n=t[144].format;t[147]=n;const o="Manga"===t[147]||"One Shot"===t[147];t[148]=o;const i="Novel"===t[147];t[149]=i;const l=function(e,t){const n={};let o,i;try{for(let t of["english","romaji","native"]){let l,r=e?.[t]?.trim?.();"string"!=typeof r||""===r||n[l=r.toLowerCase()]||(n[l]=!0,o?(i=!0,o+=" | "+r):o=r)}}catch{}if("string"!=typeof o||""===o)return;i&&(o=`(${o})`);return`https://www.youtube.com/results?search_query=${encodeURIComponent(o+" "+("Manga"===t||"One Shot"===t||"Novel"===t?t:"Anime"))}`}(t[144].title,t[144].format);return t[150]=l,t}function ki(e){const t=e.slice(),n=t[19][t[16]]?.mediaList;return t[143]=n,t}function Ei(e){let t,n,o=[],i=new Map,l=e[143]||[];const r=e=>(null!=e[144]?.id?e[144].id+" "+e[146]:{})??{};for(let t=0;t<l.length;t+=1){let n=fi(e,l,t),a=r(n);i.set(a,o[t]=Ml(a,n))}let a=e[143]?.length&&!e[26]?.[e[16]]&&Cl(e);return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=A(),a&&a.c(),n=S()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);M(e,t,i),a&&a.m(e,i),M(e,n,i)},p(e,s){1946156872&s[0]|376855&s[1]&&(l=e[143]||[],o=Ee(o,s,r,1,e,l,i,t.parentNode,xe,Ml,t,fi)),e[143]?.length&&!e[26]?.[e[16]]?a?a.p(e,s):(a=Cl(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&C(t),a&&a.d(e),e&&C(n)}}}function Mi(t){let n;return{c(){n=z("div"),I(n,"class","popup-header dummy svelte-1i5jzz"),I(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Ci(e){let t,n,o,l,r,a,s,c,u,d,m,h,g,y,w,v,b,k,E,$,P,B,D,R,j,H,O,V,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,oe,ie,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ye,we,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Le,Ae,Se,Ne,Pe,Ie,Fe,Be,Ue,De,Re,je,He,Oe,Ve,qe,_e,Ye,We,Je,Ke,Ge,Xe,Ze,Qe=e[145],et=e[146],tt=(e[144]?.shownTitle||"N/A")+"",nt=(e[144].userStatus||"N/A")+"",ot=e[144].trailerID&&$i(),it=(e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&zi(e);const lt=()=>e[54](n,Qe,et),rt=()=>e[54](null,Qe,et);function at(){return e[55](e[144],e[150])}function st(...t){return e[56](e[144],e[150],...t)}function ct(e,t){return e[24]>=290?Ai:e[24]>=260?Li:void 0}let ut=ct(e),dt=ut&&ut(e),pt=(e[18]||e[20][""]||e[20][e[16]]||e[15])&&Si(e);function mt(e,t){return e[144].trailerID&&e[6][e[144].trailerID]?Pi:Ni}let ft=mt(e),ht=ft(e),gt=null!=e[144].formattedAverageScore&&e[144].formattedAverageScore&&Bi(e),yt=null!=e[144].formattedPopularity&&e[144].formattedPopularity&&Ui(e),wt=e[144]?.recommendedRatingColor&&Di(e);function vt(e,t){return e[144]?.nextAiringEpisode?.airingAt?ji:Ri}function bt(e,t){return t===ji?function(e){const t=e.slice(),n=t[33](t[144],t[148],t[149]);t[176]=n;const o=(t[148]||t[149]?t[144]?.volumes>0?` · ${t[144]?.volumes} Vol${t[144]?.volumes>1?"s":""}`:t[144]?.volumeProgress>0?` · Seen ${t[144]?.volumeProgress} Vol${t[144]?.volumeProgress>1?"s":""}`:"":t[144]?.duration>0?` · ${ci(60*t[144].duration*1e3,2)}`:"")||"";return t[177]=o,t}(e):function(e){const t=e.slice(),n=t[33](t[144],t[148],t[149]);t[176]=n;const o=(t[148]||t[149]?t[144]?.volumes>0?` · ${t[144]?.volumes} Vol${t[144]?.volumes>1?"s":""}`:t[144]?.volumeProgress>0?` · Seen ${t[144]?.volumeProgress} Vol${t[144]?.volumeProgress>1?"s":""}`:"":t[144]?.duration>0?` · ${ci(60*t[144].duration*1e3,2)}`:"")||"";return t[177]=o,t}(e)}let xt=vt(e),kt=xt(bt(e,xt));function Et(e,t){return e[144]?.season||e[144]?.year?_i:qi}let Mt=Et(e),Ct=Mt(e),$t=function(e){let t,n=("Current"===e[167]||"Planning"===e[167]||"Paused"===e[167]||"Repeating"===e[167])&&Yi(vi(e));return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){"Current"===e[167]||"Planning"===e[167]||"Paused"===e[167]||"Repeating"===e[167]?n?n.p(vi(e),o):(n=Yi(vi(e)),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}(bi(e)),zt=null!=e[144].userScore&&ll(e);function Tt(){return e[64](e[144])}function Lt(...t){return e[65](e[144],...t)}function At(e,t){return e[148]||e[149]||!e[144]?.nextAiringEpisode||"Finished"===e[144]?.status?rl:al}function St(e,t){return t===al?function(e){const t=e.slice(),n=t[144].nextAiringEpisode;t[161]=n;const o=t[161]?.airingAt;t[162]=o;const i=t[161]?.episode;t[163]=i;const l=t[144]?.episodes;t[164]=l;const r=t[163]>=t[164]&&t[163]>0&&t[162]>0&&t[164]>0;return t[165]=r,t}(e):e}let Nt=At(e),Pt=Nt(St(e,Nt)),It=e[144]?.shownStudios?.length&&ml(e),Ft=e[144]?.shownGenres?.length&&hl(e),Bt=e[144]?.shownTags?.length&&yl(e),Ut=(e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&vl(e),Dt=e[144]?.description&&xl(hi(e));function Rt(e,t){return e[22]?El:kl}let jt=Rt(e),Ht=jt(e);function Ot(){return e[74](e[144])}function Vt(...t){return e[75](e[144],...t)}function qt(){return e[76](e[144])}function _t(...t){return e[77](e[144],...t)}return{c(){t=z("div"),n=z("div"),o=z("div"),o.innerHTML='<svg viewBox="0 0 320 512" class="svelte-1i5jzz"><path d="M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"></path></svg>',l=A(),ot&&ot.c(),r=A(),a=z("div"),it&&it.c(),u=A(),d=z("div"),m=z("div"),h=z("div"),g=z("label"),y=z("label"),w=L("Auto Play"),b=A(),k=z("input"),$=A(),P=z("span"),P.innerHTML='<div class="round-icon svelte-1i5jzz"></div>',D=A(),R=z("h3"),dt&&dt.c(),j=A(),pt&&pt.c(),H=A(),ht.c(),O=A(),V=z("div"),q=z("div"),_=z("a"),Y=L(tt),te=A(),ne=z("div"),oe=T("svg"),ie=T("path"),le=A(),re=z("h4"),gt&&gt.c(),ae=A(),yt&&yt.c(),se=A(),wt&&wt.c(),ce=A(),ue=z("div"),kt.c(),de=A(),Ct.c(),pe=A(),me=z("div"),fe=z("h4"),he=z("span"),ge=L(nt),we=A(),$t&&$t.c(),ve=A(),zt&&zt.c(),be=A(),Pt.c(),xe=A(),ke=z("div"),It&&It.c(),Ee=A(),Ft&&Ft.c(),Me=A(),Bt&&Bt.c(),Ce=A(),$e=z("div"),Ut&&Ut.c(),ze=A(),Dt&&Dt.c(),Te=A(),Le=z("div"),Ae=z("button"),Se=T("svg"),Ne=T("path"),Pe=A(),Ht.c(),Fe=A(),Be=z("a"),Ue=T("svg"),De=T("path"),Re=L(" YouTube"),qe=A(),_e=z("button"),Ye=T("svg"),We=T("path"),Je=T("path"),Ke=L(" Anilist"),I(o,"class","popup-header-loading svelte-1i5jzz"),I(o,"aria-hidden","true"),I(a,"class","popup-img loaded svelte-1i5jzz"),I(n,"class",s=p("popup-header "+(e[144].trailerID?"loader":""))+" svelte-1i5jzz"),I(n,"tabindex",c=!e[21]&&e[13]?"0":"-1"),I(y,"class","disable-interaction svelte-1i5jzz"),I(y,"for",v="auto-play-"+e[144]?.id),I(k,"id",E="auto-play-"+e[144]?.id),I(k,"type","checkbox"),I(k,"class","auto-play-toggle svelte-1i5jzz"),I(P,"class","slider round svelte-1i5jzz"),I(P,"aria-hidden","true"),I(g,"class","switch svelte-1i5jzz"),I(g,"tabindex",B=!e[21]&&e[13]?"0":"-1"),I(R,"class","auto-play-label svelte-1i5jzz"),I(h,"class","auto-play-container svelte-1i5jzz"),I(m,"class","popup-controls svelte-1i5jzz"),I(_,"tabindex",W=!e[21]&&e[13]?"":"-1"),I(_,"rel",J=e[144].mediaUrl?"noopener noreferrer":""),I(_,"target",K=e[144].mediaUrl?"_blank":""),I(_,"href",G=e[144].mediaUrl||"javascript:void(0)"),I(_,"class",X=p(e[144]?.contentCautionColor+"-color media-title copy")+" svelte-1i5jzz"),I(_,"title",Z=e[144]?.shownTitle||""),I(_,"data-copy",Q=e[144]?.shownTitle||""),I(_,"data-secondcopy",ee=e[144]?.copiedTitle||""),I(_,"aria-label","Open in AniList"),U(_,"overflow",e[14]?"hidden":""),I(ie,"d","M288 0c9 0 17 5 21 14l69 141 153 22c9 2 17 8 20 17s0 18-6 24L434 328l26 156c1 9-2 18-10 24s-17 6-25 1l-137-73-137 73c-8 4-18 4-25-2s-11-14-10-23l26-156L31 218a24 24 0 0 1 14-41l153-22 68-141c4-9 13-14 22-14zm0 79-53 108c-3 7-10 12-18 13L99 219l86 85c5 6 8 13 7 21l-21 120 106-57c7-3 15-3 22 1l105 56-20-120c-1-8 1-15 7-21l86-85-118-17c-8-2-15-7-18-14L288 79z"),I(oe,"viewBox","0 0 576 512"),I(oe,"class","svelte-1i5jzz"),I(re,"class","svelte-1i5jzz"),I(ne,"class","info-rating-wrapper svelte-1i5jzz"),I(q,"class","media-title-container svelte-1i5jzz"),U(q,"overflow",e[14]?"hidden":""),I(ue,"class","info-format svelte-1i5jzz"),U(ue,"overflow",e[14]?"hidden":""),I(he,"class",ye=p(e[144]?.userStatusColor?e[144].userStatusColor+"-color":"")+" svelte-1i5jzz"),I(fe,"class","user-info svelte-1i5jzz"),I(fe,"aria-label","Open in AniList"),I(me,"class","info-status svelte-1i5jzz"),U(me,"overflow",e[14]?"hidden":""),I(ke,"class","info-contents svelte-1i5jzz"),I($e,"class","info-profile svelte-1i5jzz"),I(V,"class","popup-info svelte-1i5jzz"),I(d,"class","popup-body svelte-1i5jzz"),I(Ne,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-72-280h144a24 24 0 1 1 0 48H184a24 24 0 1 1 0-48z"),I(Se,"class","hide-show svelte-1i5jzz"),I(Se,"viewBox","0 0 512 512"),I(Ae,"tabindex",Ie=!e[21]&&e[13]?"":"-1"),I(Ae,"class","hide-show-btn svelte-1i5jzz"),I(Ae,"aria-label","Hide or Show Media"),U(Ae,"overflow",e[14]?"hidden":""),I(De,"d","M550 124c-7-24-25-42-49-49-42-11-213-11-213-11S117 64 75 75c-24 7-42 25-49 49-11 43-11 132-11 132s0 90 11 133c7 23 25 41 49 48 42 11 213 11 213 11s171 0 213-11c24-7 42-25 49-48 11-43 11-133 11-133s0-89-11-132zM232 338V175l143 81-143 82z"),I(Ue,"viewBox","0 0 576 512"),I(Ue,"class","svelte-1i5jzz"),I(Be,"tabindex",je=!e[21]&&e[13]?"":"-1"),I(Be,"class","more-videos svelte-1i5jzz"),I(Be,"rel",He=e[150]?"noopener noreferrer":""),I(Be,"target",Oe=e[150]?"_blank":""),I(Be,"href",Ve=e[150]||"javascript:void(0)"),I(Be,"aria-label","Open Related YouTube Videos"),U(Be,"overflow",e[14]?"hidden":""),I(We,"fill","#3a5a7e"),I(We,"d","M111 111V41c0-4-2-6-6-6H91c-4 0-6 2-6 6v5l32 91h31c4 0 6-2 6-6v-14c0-4-2-6-6-6h-37z"),I(Je,"d","M54 35 18 137h28l6-17h31l6 17h28L81 35H54zm5 62 9-29 9 29H59z"),I(Ye,"viewBox","0 0 172 172"),I(Ye,"class","svelte-1i5jzz"),I(_e,"tabindex",Ge=!e[21]&&e[13]?"":"-1"),I(_e,"class","open-anilist svelte-1i5jzz"),I(_e,"aria-label","Open in AniList"),U(_e,"overflow",e[14]?"hidden":""),I(Le,"class","popup-footer svelte-1i5jzz"),I(t,"class","popup-main svelte-1i5jzz")},m(i,s){M(i,t,s),x(t,n),x(n,o),x(n,l),ot&&ot.m(n,null),x(n,r),x(n,a),it&&it.m(a,null),lt(),x(t,u),x(t,d),x(d,m),x(m,h),x(h,g),x(g,y),x(y,w),x(g,b),x(g,k),k.checked=e[12],x(g,$),x(g,P),x(h,D),x(h,R),dt&&dt.m(R,null),x(m,j),pt&&pt.m(m,null),x(m,H),ht.m(m,null),x(d,O),x(d,V),x(V,q),x(q,_),x(_,Y),x(q,te),x(q,ne),x(ne,oe),x(oe,ie),x(ne,le),x(ne,re),gt&&gt.m(re,null),x(re,ae),yt&&yt.m(re,null),x(re,se),wt&&wt.m(re,null),x(V,ce),x(V,ue),kt.m(ue,null),x(ue,de),Ct.m(ue,null),x(V,pe),x(V,me),x(me,fe),x(fe,he),x(he,ge),x(fe,we),$t&&$t.m(fe,null),x(fe,ve),zt&&zt.m(fe,null),x(me,be),Pt.m(me,null),x(V,xe),x(V,ke),It&&It.m(ke,null),x(ke,Ee),Ft&&Ft.m(ke,null),x(ke,Me),Bt&&Bt.m(ke,null),x(V,Ce),x(V,$e),Ut&&Ut.m($e,null),x($e,ze),Dt&&Dt.m($e,null),x(t,Te),x(t,Le),x(Le,Ae),x(Ae,Se),x(Se,Ne),x(Ae,Pe),Ht.m(Ae,null),x(Le,Fe),x(Le,Be),x(Be,Ue),x(Ue,De),x(Be,Re),x(Le,qe),x(Le,_e),x(_e,Ye),x(Ye,We),x(Ye,Je),x(_e,Ke),Xe||(Ze=[N(n,"click",at),N(n,"keyup",st),N(k,"change",e[57]),N(g,"keyup",e[58]),N(R,"click",e[29]),N(R,"keyup",e[59]),N(_,"scroll",e[35]),N(q,"scroll",e[35]),N(ue,"scroll",e[35]),N(fe,"click",Tt),N(fe,"keyup",Lt),N(me,"scroll",e[35]),N(Ae,"click",Ot),N(Ae,"keyup",Vt),N(_e,"click",qt),N(_e,"keyup",_t),f(e[48].call(null,t))],Xe=!0)},p(t,o){(e=t)[144].trailerID?ot||(ot=$i(),ot.c(),ot.m(n,r)):ot&&(ot.d(1),ot=null),e[144].bannerImageUrl||e[144].trailerThumbnailUrl?it?it.p(e,o):(it=zi(e),it.c(),it.m(a,null)):it&&(it.d(1),it=null),589824&o[0]&&s!==(s=p("popup-header "+(e[144].trailerID?"loader":""))+" svelte-1i5jzz")&&I(n,"class",s),2105344&o[0]&&c!==(c=!e[21]&&e[13]?"0":"-1")&&I(n,"tabindex",c),Qe===e[145]&&et===e[146]||(rt(),Qe=e[145],et=e[146],lt()),589824&o[0]&&v!==(v="auto-play-"+e[144]?.id)&&I(y,"for",v),589824&o[0]&&E!==(E="auto-play-"+e[144]?.id)&&I(k,"id",E),4096&o[0]&&(k.checked=e[12]),2105344&o[0]&&B!==(B=!e[21]&&e[13]?"0":"-1")&&I(g,"tabindex",B),ut!==(ut=ct(e))&&(dt&&dt.d(1),dt=ut&&ut(e),dt&&(dt.c(),dt.m(R,null))),e[18]||e[20][""]||e[20][e[16]]||e[15]?pt?pt.p(e,o):(pt=Si(e),pt.c(),pt.m(m,H)):pt&&(pt.d(1),pt=null),ft===(ft=mt(e))&&ht?ht.p(e,o):(ht.d(1),ht=ft(e),ht&&(ht.c(),ht.m(m,null))),589824&o[0]&&tt!==(tt=(e[144]?.shownTitle||"N/A")+"")&&F(Y,tt),2105344&o[0]&&W!==(W=!e[21]&&e[13]?"":"-1")&&I(_,"tabindex",W),589824&o[0]&&J!==(J=e[144].mediaUrl?"noopener noreferrer":"")&&I(_,"rel",J),589824&o[0]&&K!==(K=e[144].mediaUrl?"_blank":"")&&I(_,"target",K),589824&o[0]&&G!==(G=e[144].mediaUrl||"javascript:void(0)")&&I(_,"href",G),589824&o[0]&&X!==(X=p(e[144]?.contentCautionColor+"-color media-title copy")+" svelte-1i5jzz")&&I(_,"class",X),589824&o[0]&&Z!==(Z=e[144]?.shownTitle||"")&&I(_,"title",Z),589824&o[0]&&Q!==(Q=e[144]?.shownTitle||"")&&I(_,"data-copy",Q),589824&o[0]&&ee!==(ee=e[144]?.copiedTitle||"")&&I(_,"data-secondcopy",ee),16384&o[0]&&U(_,"overflow",e[14]?"hidden":""),null!=e[144].formattedAverageScore&&e[144].formattedAverageScore?gt?gt.p(e,o):(gt=Bi(e),gt.c(),gt.m(re,ae)):gt&&(gt.d(1),gt=null),null!=e[144].formattedPopularity&&e[144].formattedPopularity?yt?yt.p(e,o):(yt=Ui(e),yt.c(),yt.m(re,se)):yt&&(yt.d(1),yt=null),e[144]?.recommendedRatingColor?wt?wt.p(e,o):(wt=Di(e),wt.c(),wt.m(re,null)):wt&&(wt.d(1),wt=null),16384&o[0]&&U(q,"overflow",e[14]?"hidden":""),xt===(xt=vt(e))&&kt?kt.p(bt(e,xt),o):(kt.d(1),kt=xt(bt(e,xt)),kt&&(kt.c(),kt.m(ue,de))),Mt===(Mt=Et(e))&&Ct?Ct.p(e,o):(Ct.d(1),Ct=Mt(e),Ct&&(Ct.c(),Ct.m(ue,null))),16384&o[0]&&U(ue,"overflow",e[14]?"hidden":""),589824&o[0]&&nt!==(nt=(e[144].userStatus||"N/A")+"")&&F(ge,nt),589824&o[0]&&ye!==(ye=p(e[144]?.userStatusColor?e[144].userStatusColor+"-color":"")+" svelte-1i5jzz")&&I(he,"class",ye),$t.p(bi(e),o),null!=e[144].userScore?zt?zt.p(e,o):(zt=ll(e),zt.c(),zt.m(fe,null)):zt&&(zt.d(1),zt=null),Nt===(Nt=At(e))&&Pt?Pt.p(St(e,Nt),o):(Pt.d(1),Pt=Nt(St(e,Nt)),Pt&&(Pt.c(),Pt.m(me,null))),16384&o[0]&&U(me,"overflow",e[14]?"hidden":""),e[144]?.shownStudios?.length?It?It.p(e,o):(It=ml(e),It.c(),It.m(ke,Ee)):It&&(It.d(1),It=null),e[144]?.shownGenres?.length?Ft?Ft.p(e,o):(Ft=hl(e),Ft.c(),Ft.m(ke,Me)):Ft&&(Ft.d(1),Ft=null),e[144]?.shownTags?.length?Bt?Bt.p(e,o):(Bt=yl(e),Bt.c(),Bt.m(ke,null)):Bt&&(Bt.d(1),Bt=null),e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl?Ut?Ut.p(e,o):(Ut=vl(e),Ut.c(),Ut.m($e,ze)):Ut&&(Ut.d(1),Ut=null),e[144]?.description?Dt?Dt.p(hi(e),o):(Dt=xl(hi(e)),Dt.c(),Dt.m($e,null)):Dt&&(Dt.d(1),Dt=null),jt===(jt=Rt(e))&&Ht?Ht.p(e,o):(Ht.d(1),Ht=jt(e),Ht&&(Ht.c(),Ht.m(Ae,null))),2105344&o[0]&&Ie!==(Ie=!e[21]&&e[13]?"":"-1")&&I(Ae,"tabindex",Ie),16384&o[0]&&U(Ae,"overflow",e[14]?"hidden":""),2105344&o[0]&&je!==(je=!e[21]&&e[13]?"":"-1")&&I(Be,"tabindex",je),589824&o[0]&&He!==(He=e[150]?"noopener noreferrer":"")&&I(Be,"rel",He),589824&o[0]&&Oe!==(Oe=e[150]?"_blank":"")&&I(Be,"target",Oe),589824&o[0]&&Ve!==(Ve=e[150]||"javascript:void(0)")&&I(Be,"href",Ve),16384&o[0]&&U(Be,"overflow",e[14]?"hidden":""),2105344&o[0]&&Ge!==(Ge=!e[21]&&e[13]?"":"-1")&&I(_e,"tabindex",Ge),16384&o[0]&&U(_e,"overflow",e[14]?"hidden":"")},d(e){e&&C(t),ot&&ot.d(),it&&it.d(),rt(),dt&&dt.d(),pt&&pt.d(),ht.d(),gt&&gt.d(),yt&&yt.d(),wt&&wt.d(),kt.d(),Ct.d(),$t&&$t.d(),zt&&zt.d(),Pt.d(),It&&It.d(),Ft&&Ft.d(),Bt&&Bt.d(),Ut&&Ut.d(),Dt&&Dt.d(),Ht.d(),Xe=!1,i(Ze)}}}function $i(e){let t;return{c(){t=z("div"),I(t,"class","trailer display-none svelte-1i5jzz")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function zi(e){let t,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl,o=Ti(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){589824&i[0]&&r(n,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)?(o.d(1),o=Ti(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function Ti(e){let t,n,o,l,r;return{c(){t=z("img"),s(t.src,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)||I(t,"src",n),I(t,"loading","lazy"),I(t,"width","640px"),I(t,"height","360px"),I(t,"alt",o=(e[144]?.shownTitle||"")+(e[144].bannerImageUrl?" Banner":" Thumbnail")),I(t,"class","banner-img svelte-1i5jzz")},m(n,o){M(n,t,o),l||(r=[N(t,"load",e[52]),N(t,"error",e[53])],l=!0)},p(e,i){589824&i[0]&&!s(t.src,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&I(t,"src",n),589824&i[0]&&o!==(o=(e[144]?.shownTitle||"")+(e[144].bannerImageUrl?" Banner":" Thumbnail"))&&I(t,"alt",o)},d(e){e&&C(t),l=!1,i(r)}}}function Li(e){let t;return{c(){t=L("Auto")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function Ai(e){let t;return{c(){t=L("Auto Play")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function Si(e){let t,n,o,l,r,a,s,c,u,d=e[24]>=320?"Reload List":e[24]>=205?"Reload":"";return{c(){t=z("div"),n=T("svg"),o=T("path"),l=A(),r=z("h3"),a=L(d),I(o,"d","M105 203a160 160 0 0 1 264-60l17 17h-50a32 32 0 1 0 0 64h128c18 0 32-14 32-32V64a32 32 0 1 0-64 0v51l-18-17a224 224 0 0 0-369 83 32 32 0 0 0 60 22zm-66 86a32 32 0 0 0-23 31v128a32 32 0 1 0 64 0v-51l18 17a224 224 0 0 0 369-83 32 32 0 0 0-60-22 160 160 0 0 1-264 60l-17-17h50a32 32 0 1 0 0-64H48a39 39 0 0 0-9 1z"),I(n,"viewBox","0 0 512 512"),I(n,"class","small-icon svelte-1i5jzz"),I(r,"class","small-icon-label svelte-1i5jzz"),I(t,"class","list-update-container svelte-1i5jzz"),I(t,"tabindex",s=!e[21]&&e[13]?"0":"-1"),I(t,"role","button"),I(t,"aria-label","Reload List")},m(i,s){M(i,t,s),x(t,n),x(n,o),x(t,l),x(t,r),x(r,a),c||(u=[N(t,"click",e[60]),N(t,"keyup",e[61])],c=!0)},p(e,n){16777216&n[0]&&d!==(d=e[24]>=320?"Reload List":e[24]>=205?"Reload":"")&&F(a,d),2105344&n[0]&&s!==(s=!e[21]&&e[13]?"0":"-1")&&I(t,"tabindex",s)},d(e){e&&C(t),c=!1,i(u)}}}function Ni(e){let t,n,o=e[23]&&!1!==e[17]&&e[144].trailerID&&Ii(e),i=(e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&Fi(e);return{c(){o&&o.c(),t=A(),i&&i.c(),n=S()},m(e,l){o&&o.m(e,l),M(e,t,l),i&&i.m(e,l),M(e,n,l)},p(e,l){e[23]&&!1!==e[17]&&e[144].trailerID?o?o.p(e,l):(o=Ii(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[144].bannerImageUrl||e[144].trailerThumbnailUrl?i?i.p(e,l):(i=Fi(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){o&&o.d(e),e&&C(t),i&&i.d(e),e&&C(n)}}}function Pi(e){let t,n,o,i,l,r,a;return{c(){t=z("a"),n=T("svg"),o=T("path"),i=A(),l=z("h3"),l.textContent="Trailer",I(o,"d","M550 124c-7-24-25-42-49-49-42-11-213-11-213-11S117 64 75 75c-24 7-42 25-49 49-11 43-11 132-11 132s0 90 11 133c7 23 25 41 49 48 42 11 213 11 213 11s171 0 213-11c24-7 42-25 49-48 11-43 11-133 11-133s0-89-11-132zM232 338V175l143 81-143 82z"),I(n,"viewBox","0 0 576 512"),I(n,"class","yt-small-icon svelte-1i5jzz"),I(l,"class","small-icon-label svelte-1i5jzz"),I(t,"class","icon-button svelte-1i5jzz"),I(t,"tabindex",r=!e[21]&&e[13]?"0":"-1"),I(t,"rel","noopener noreferrer"),I(t,"target","_blank"),I(t,"href",a=`https://www.youtube.com/watch?v=${e[144].trailerID}`),I(t,"role","button"),I(t,"aria-label","Open Trailer")},m(e,r){M(e,t,r),x(t,n),x(n,o),x(t,i),x(t,l)},p(e,n){2105344&n[0]&&r!==(r=!e[21]&&e[13]?"0":"-1")&&I(t,"tabindex",r),589824&n[0]&&a!==(a=`https://www.youtube.com/watch?v=${e[144].trailerID}`)&&I(t,"href",a)},d(e){e&&C(t)}}}function Ii(e){let t,n,o;return{c(){t=z("a"),n=L("Trailer"),I(t,"class","trailer-link svelte-1i5jzz"),I(t,"href",o=`https://www.youtube.com/watch?v=${e[144].trailerID}`)},m(e,o){M(e,t,o),x(t,n)},p(e,n){589824&n[0]&&o!==(o=`https://www.youtube.com/watch?v=${e[144].trailerID}`)&&I(t,"href",o)},d(e){e&&C(t)}}}function Fi(e){let t,n,o,l,r,a,s,c,u,d=e[144].bannerImageUrl?"Banner":"Thumbnail";function p(){return e[62](e[144])}function m(...t){return e[63](e[144],...t)}return{c(){t=z("div"),n=T("svg"),o=T("path"),l=A(),r=z("h3"),a=L(d),I(o,"d","M0 96c0-35 29-64 64-64h384c35 0 64 29 64 64v320c0 35-29 64-64 64H64c-35 0-64-29-64-64V96zm324 107a24 24 0 0 0-40 0l-87 127-26-33a24 24 0 0 0-37 0l-65 80a24 24 0 0 0 19 39h336c9 0 17-5 21-13s4-17-1-25L324 204zm-212-11a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"),I(n,"viewBox","0 0 512 512"),I(n,"class","small-icon svelte-1i5jzz"),I(r,"class","small-icon-label svelte-1i5jzz"),I(t,"class","icon-button svelte-1i5jzz"),I(t,"tabindex",s=!e[21]&&e[13]?"0":"-1"),I(t,"role","button"),I(t,"aria-label","Open Banner or Thumbnail")},m(e,i){M(e,t,i),x(t,n),x(n,o),x(t,l),x(t,r),x(r,a),c||(u=[N(t,"click",p),N(t,"keyup",m)],c=!0)},p(n,o){e=n,589824&o[0]&&d!==(d=e[144].bannerImageUrl?"Banner":"Thumbnail")&&F(a,d),2105344&o[0]&&s!==(s=!e[21]&&e[13]?"0":"-1")&&I(t,"tabindex",s)},d(e){e&&C(t),c=!1,i(u)}}}function Bi(e){let t,n,o,i=(parseFloat(e[144].formattedAverageScore)>0?e[144].formattedAverageScore:"?")+"";return{c(){t=z("b"),n=L(i),o=L("/10"),I(t,"class","svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n),M(e,o,i)},p(e,t){589824&t[0]&&i!==(i=(parseFloat(e[144].formattedAverageScore)>0?e[144].formattedAverageScore:"?")+"")&&F(n,i)},d(e){e&&C(t),e&&C(o)}}}function Ui(e){let t,n=" · "+e[144].formattedPopularity;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){589824&o[0]&&n!==(n=" · "+e[144].formattedPopularity)&&F(t,n)},d(e){e&&C(t)}}}function Di(e){let t,n,o,i,l;return{c(){t=L(" · "),n=A(),o=T("svg"),i=T("path"),I(i,"d","M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"),I(o,"class",l=p(`general-rating-icon ${e[144]?.recommendedRatingColor}`)+" svelte-1i5jzz"),I(o,"viewBox","0 0 320 512")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=p(`general-rating-icon ${e[144]?.recommendedRatingColor}`)+" svelte-1i5jzz")&&I(o,"class",l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function Ri(e){let t,n,o,i,l,r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""),a=(e[177]||"")+"",s=e[176]&&Hi(e);return{c(){t=z("h4"),n=L(r),o=A(),s&&s.c(),i=A(),l=L(a),I(t,"class","svelte-1i5jzz")},m(e,r){M(e,t,r),x(t,n),x(t,o),s&&s.m(t,null),x(t,i),x(t,l)},p(e,o){589824&o[0]&&r!==(r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""))&&F(n,r),e[176]?s?s.p(e,o):(s=Hi(e),s.c(),s.m(t,i)):s&&(s.d(1),s=null),589824&o[0]&&a!==(a=(e[177]||"")+"")&&F(l,a)},d(e){e&&C(t),s&&s.d()}}}function ji(e){let t,n,o,i,l,r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""),a=(e[177]||"")+"",s=e[176]&&Oi(e);return{c(){t=z("h4"),n=L(r),o=A(),s&&s.c(),i=A(),l=L(a),I(t,"class","svelte-1i5jzz")},m(e,r){M(e,t,r),x(t,n),x(t,o),s&&s.m(t,null),x(t,i),x(t,l)},p(e,o){589824&o[0]&&r!==(r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""))&&F(n,r),e[176]?s?s.p(e,o):(s=Oi(e),s.c(),s.m(t,i)):s&&(s.d(1),s=null),589824&o[0]&&a!==(a=(e[177]||"")+"")&&F(l,a)},d(e){e&&C(t),s&&s.d()}}}function Hi(e){let t,n,o=e[176]+"";return{c(){t=new R(!1),n=S(),t.a=n},m(e,i){t.m(o,e,i),M(e,n,i)},p(e,n){589824&n[0]&&o!==(o=e[176]+"")&&t.p(o)},d(e){e&&C(n),e&&t.d()}}}function Oi(e){let t,n=e[25]||1,o=Vi(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){33554432&i[0]&&r(n,n=e[25]||1)?(o.d(1),o=Vi(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function Vi(e){let t,n,o=e[176]+"";return{c(){t=new R(!1),n=S(),t.a=n},m(e,i){t.m(o,e,i),M(e,n,i)},p(e,n){589824&n[0]&&o!==(o=e[176]+"")&&t.p(o)},d(e){e&&C(n),e&&t.d()}}}function qi(t){let n;return{c(){n=z("h4"),n.textContent="N/A",U(n,"text-align","right"),I(n,"class","svelte-1i5jzz")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function _i(e){let t,n,o=(`${e[144]?.season||""}${e[144]?.season&&e[144]?.year?" "+e[144]?.year:e[144]?.year||""}`||"N/A")+"";return{c(){t=z("h4"),n=L(o),U(t,"text-align","right"),I(t,"class","svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n)},p(e,t){589824&t[0]&&o!==(o=(`${e[144]?.season||""}${e[144]?.season&&e[144]?.year?" "+e[144]?.year:e[144]?.year||""}`||"N/A")+"")&&F(n,o)},d(e){e&&C(t)}}}function Yi(e){let t;function n(e,t){return e[148]||e[149]||!(e[162]>0&&e[163]>0||e[144].episodes>0)?e[166]&&(e[144].chapters>0||e[144].volumes>0)?Wi:void 0:Ji}function o(e,t){return t===Ji?function(e){const t=e.slice(),n=t[162]<=(new Date).getTime();t[168]=n;const o=t[163]>0&&!t[166]?t[168]?t[163]:t[163]-1:t[166]?t[144].episodes:null;t[169]=o;const i=t[144].episodeProgress>0?t[144].episodeProgress:0;t[170]=i;const l=parseInt(t[169])-parseInt(t[170]);return t[171]=l,t}(e):e}let i=n(e),l=i&&i(o(e,i));return{c(){l&&l.c(),t=S()},m(e,n){l&&l.m(e,n),M(e,t,n)},p(e,r){i===(i=n(e))&&l?l.p(o(e,i),r):(l&&l.d(1),l=i&&i(o(e,i)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l&&l.d(e),e&&C(t)}}}function Wi(e){let t;function n(e,t){return e[149]?Xi:e[144].chapters>0?Gi:Ki}function o(e,t){return t===Gi?function(e){const t=e.slice(),n=t[144].episodeProgress>0?t[144].episodeProgress:0;t[174]=n;const o=parseInt(t[144].chapters)-parseInt(t[174]);return t[175]=o,t}(e):t===Ki?function(e){const t=e.slice(),n=t[144].volumeProgress>0?t[144].volumeProgress:0;t[172]=n;const o=parseInt(t[144].volumes)-parseInt(t[172]);return t[173]=o,t}(e):e}let i=n(e),l=i(o(e,i));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){i===(i=n(e))&&l?l.p(o(e,i),r):(l.d(1),l=i(o(e,i)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function Ji(e){let t,n=e[171]>=1&&il(e);return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){e[171]>=1?n?n.p(e,o):(n=il(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Ki(e){let t,n=e[173]>=1&&Zi(e);return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){e[173]>=1?n?n.p(e,o):(n=Zi(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Gi(e){let t,n=e[175]>=1&&Qi(e);return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){e[175]>=1?n?n.p(e,o):(n=Qi(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Xi(e){let t;function n(e,t){return e[144].volumes>0?tl:el}function o(e,t){return t===tl?function(e){const t=e.slice(),n=t[144].volumeProgress>0?t[144].volumeProgress:0;t[172]=n;const o=parseInt(t[144].volumes)-parseInt(t[172]);return t[173]=o,t}(e):function(e){const t=e.slice(),n=t[144].episodeProgress>0?t[144].episodeProgress:0;t[174]=n;const o=parseInt(t[144].chapters)-parseInt(t[174]);return t[175]=o,t}(e)}let i=n(e),l=i(o(e,i));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){i===(i=n(e))&&l?l.p(o(e,i),r):(l.d(1),l=i(o(e,i)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function Zi(e){let t,n,o,i,l=`${e[173]} Vol${e[173]>1?"s":""} Behind`;return{c(){t=L(" · "),n=A(),o=z("span"),i=L(l),U(o,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=`${e[173]} Vol${e[173]>1?"s":""} Behind`)&&F(i,l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function Qi(e){let t,n,o,i,l=`${e[175]} Ch${e[175]>1?"s":""} Behind`;return{c(){t=L(" · "),n=A(),o=z("span"),i=L(l),U(o,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=`${e[175]} Ch${e[175]>1?"s":""} Behind`)&&F(i,l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function el(e){let t,n=e[175]>=1&&nl(e);return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){e[175]>=1?n?n.p(e,o):(n=nl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function tl(e){let t,n=e[173]>=1&&ol(e);return{c(){n&&n.c(),t=S()},m(e,o){n&&n.m(e,o),M(e,t,o)},p(e,o){e[173]>=1?n?n.p(e,o):(n=ol(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function nl(e){let t,n,o,i,l=`${e[175]} Ch${e[175]>1?"s":""} Behind`;return{c(){t=L(" · "),n=A(),o=z("span"),i=L(l),U(o,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=`${e[175]} Ch${e[175]>1?"s":""} Behind`)&&F(i,l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function ol(e){let t,n,o,i,l=`${e[173]} Vol${e[173]>1?"s":""} Behind`;return{c(){t=L(" · "),n=A(),o=z("span"),i=L(l),U(o,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=`${e[173]} Vol${e[173]>1?"s":""} Behind`)&&F(i,l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function il(e){let t,n,o,i,l=`${e[171]} Ep${e[171]>1?"s":""} Behind`;return{c(){t=L(" · "),n=A(),o=z("span"),i=L(l),U(o,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,o,l),x(o,i)},p(e,t){589824&t[0]&&l!==(l=`${e[171]} Ep${e[171]>1?"s":""} Behind`)&&F(i,l)},d(e){e&&C(t),e&&C(n),e&&C(o)}}}function ll(e){let t,n,o,i,l,r,a=e[144].userScore+"";return{c(){t=L(" · "),n=A(),o=T("svg"),i=T("path"),l=A(),r=L(a),I(i,"d","M288 0c9 0 17 5 21 14l69 141 153 22c9 2 17 8 20 17s0 18-6 24L434 328l26 156c1 9-2 18-10 24s-17 6-25 1l-137-73-137 73c-8 4-18 4-25-2s-11-14-10-23l26-156L31 218a24 24 0 0 1 14-41l153-22 68-141c4-9 13-14 22-14zm0 79-53 108c-3 7-10 12-18 13L99 219l86 85c5 6 8 13 7 21l-21 120 106-57c7-3 15-3 22 1l105 56-20-120c-1-8 1-15 7-21l86-85-118-17c-8-2-15-7-18-14L288 79z"),I(o,"viewBox","0 0 576 512"),I(o,"class","svelte-1i5jzz")},m(e,a){M(e,t,a),M(e,n,a),M(e,o,a),x(o,i),M(e,l,a),M(e,r,a)},p(e,t){589824&t[0]&&a!==(a=e[144].userScore+"")&&F(r,a)},d(e){e&&C(t),e&&C(n),e&&C(o),e&&C(l),e&&C(r)}}}function rl(e){let t,n,o=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(o),U(t,"text-align","right"),I(t,"class","year-season svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n)},p(e,t){589824&t[0]&&o!==(o=(e[144].status||"N/A")+"")&&F(n,o)},d(e){e&&C(t)}}}function al(e){let t;function n(e,t){return e[165]?cl:sl}let o=n(e),i=o(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,l){o===(o=n(e))&&i?i.p(e,l):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}function sl(e){let t,n,o=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(o),U(t,"text-align","right"),I(t,"class","year-season svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n)},p(e,t){589824&t[0]&&o!==(o=(e[144].status||"N/A")+"")&&F(n,o)},d(e){e&&C(t)}}}function cl(e){let t,n=e[165]&&e[25]||1,o=pl(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){34144256&i[0]&&r(n,n=e[165]&&e[25]||1)?(o.d(1),o=pl(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function ul(e){let t,n,o=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(o),U(t,"text-align","right"),I(t,"class","year-season svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n)},p(e,t){589824&t[0]&&o!==(o=(e[144].status||"N/A")+"")&&F(n,o)},d(e){e&&C(t)}}}function dl(t){let n;return{c(){n=z("h4"),n.textContent="Finished",U(n,"text-align","right"),I(n,"class","year-season svelte-1i5jzz")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function pl(e){let t,n;function o(e,n){return 589824&n[0]&&(t=null),null==t&&(t=!!(1e3*e[162]<=(new Date).getTime())),t?dl:ul}let i=o(e,[-1,-1,-1,-1,-1,-1]),l=i(e);return{c(){l.c(),n=S()},m(e,t){l.m(e,t),M(e,n,t)},p(e,t){i===(i=o(e,t))&&l?l.p(e,t):(l.d(1),l=i(e),l&&(l.c(),l.m(n.parentNode,n)))},d(e){l.d(e),e&&C(n)}}}function ml(e){let t,n,o,l,r,a,s=[],c=new Map,u=e[144].shownStudios;const d=e=>e[158]?.studio||{};for(let t=0;t<u.length;t+=1){let n=wi(e,u,t),o=d(n);c.set(o,s[t]=fl(o,n))}return{c(){t=z("div"),n=z("div"),n.textContent="Studio",o=A(),l=z("div");for(let e=0;e<s.length;e+=1)s[e].c();I(n,"class","info-categ svelte-1i5jzz"),I(l,"class",p("studio-popup info")+" svelte-1i5jzz"),I(t,"class","svelte-1i5jzz")},m(i,c){M(i,t,c),x(t,n),x(t,o),x(t,l);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(l,null);r||(a=[N(l,"scroll",e[35]),N(l,"mouseenter",e[49])],r=!0)},p(e,t){2695168&t[0]&&(u=e[144].shownStudios,s=Ee(s,t,d,1,e,u,c,l,xe,fl,null,wi))},d(e){e&&C(t);for(let e=0;e<s.length;e+=1)s[e].d();r=!1,i(a)}}}function fl(e,t){let n,o,i,l,r,a,s,c,u=(t[158]?.studio?.studioName||"N/A")+"";return{key:e,first:null,c(){n=z("a"),o=L(u),i=A(),I(n,"tabindex",l=!t[21]&&t[13]?"":"-1"),I(n,"class",r=p(t[158]?.studioColor?`${t[158]?.studioColor}-color`:"")+" svelte-1i5jzz"),I(n,"rel",a=t[158]?.studio?.studioUrl?"noopener noreferrer":""),I(n,"target",s=t[158]?.studio?.studioUrl?"_blank":""),I(n,"href",c=t[158]?.studio?.studioUrl||"javascript:void(0)"),I(n,"aria-label","Open Studio in AniList"),this.first=n},m(e,t){M(e,n,t),x(n,o),x(n,i)},p(e,i){t=e,589824&i[0]&&u!==(u=(t[158]?.studio?.studioName||"N/A")+"")&&F(o,u),2105344&i[0]&&l!==(l=!t[21]&&t[13]?"":"-1")&&I(n,"tabindex",l),589824&i[0]&&r!==(r=p(t[158]?.studioColor?`${t[158]?.studioColor}-color`:"")+" svelte-1i5jzz")&&I(n,"class",r),589824&i[0]&&a!==(a=t[158]?.studio?.studioUrl?"noopener noreferrer":"")&&I(n,"rel",a),589824&i[0]&&s!==(s=t[158]?.studio?.studioUrl?"_blank":"")&&I(n,"target",s),589824&i[0]&&c!==(c=t[158]?.studio?.studioUrl||"javascript:void(0)")&&I(n,"href",c)},d(e){e&&C(n)}}}function hl(e){let t,n,o,l,r,a,s=[],c=new Map,u=e[144].shownGenres;const d=e=>e[155]?.genre||{};for(let t=0;t<u.length;t+=1){let n=yi(e,u,t),o=d(n);c.set(o,s[t]=gl(o,n))}return{c(){t=z("div"),n=z("div"),n.textContent="Genre",o=A(),l=z("div");for(let e=0;e<s.length;e+=1)s[e].c();I(n,"class","info-categ svelte-1i5jzz"),I(l,"class",p("genres-popup info")+" svelte-1i5jzz"),I(t,"class","svelte-1i5jzz")},m(i,c){M(i,t,c),x(t,n),x(t,o),x(t,l);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(l,null);r||(a=[N(l,"scroll",e[35]),N(l,"mouseenter",e[49])],r=!0)},p(e,t){589824&t[0]&&(u=e[144].shownGenres,s=Ee(s,t,d,1,e,u,c,l,xe,gl,null,yi))},d(e){e&&C(t);for(let e=0;e<s.length;e+=1)s[e].d();r=!1,i(a)}}}function gl(e,t){let n,o,i,l,r=(t[155]?.genre||"N/A")+"";return{key:e,first:null,c(){n=z("span"),o=L(r),i=A(),I(n,"class",l=p(t[155]?.genreColor?`${t[155]?.genreColor}-color`:"")+" svelte-1i5jzz"),this.first=n},m(e,t){M(e,n,t),x(n,o),x(n,i)},p(e,i){t=e,589824&i[0]&&r!==(r=(t[155]?.genre||"N/A")+"")&&F(o,r),589824&i[0]&&l!==(l=p(t[155]?.genreColor?`${t[155]?.genreColor}-color`:"")+" svelte-1i5jzz")&&I(n,"class",l)},d(e){e&&C(n)}}}function yl(e){let t,n,o,l,r=[],a=new Map,s=e[144].shownTags;const c=e=>e[152]?.tag||{};for(let t=0;t<s.length;t+=1){let n=gi(e,s,t),o=c(n);a.set(o,r[t]=wl(o,n))}return{c(){t=z("div"),n=z("div");for(let e=0;e<r.length;e+=1)r[e].c();I(n,"class",p("tags-info-content info")+" svelte-1i5jzz"),I(t,"class","tag-info svelte-1i5jzz")},m(i,a){M(i,t,a),x(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null);o||(l=[N(n,"scroll",e[35]),N(n,"mouseenter",e[49])],o=!0)},p(e,t){2697472&t[0]|32768&t[1]&&(s=e[144].shownTags,r=Ee(r,t,c,1,e,s,a,n,xe,wl,null,gi))},d(e){e&&C(t);for(let e=0;e<r.length;e+=1)r[e].d();o=!1,i(l)}}}function wl(e,t){let n,o,l,r,a,s,c,u=(t[152]?.tag||"N/A")+"";function d(){return t[66](t[152])}function m(...e){return t[67](t[152],...e)}return{key:e,first:null,c(){n=z("span"),o=new R(!1),l=A(),o.a=l,I(n,"tabindex",r=!t[21]&&t[13]?"0":""),I(n,"class",a=p(t[152]?.tagColor?`${t[152]?.tagColor}-color`:"")+" svelte-1i5jzz"),I(n,"role","button"),I(n,"aria-label","Open Tag Description"),this.first=n},m(e,t){M(e,n,t),o.m(u,n),x(n,l),s||(c=[N(n,"click",d),N(n,"keyup",m)],s=!0)},p(e,i){t=e,589824&i[0]&&u!==(u=(t[152]?.tag||"N/A")+"")&&o.p(u),2105344&i[0]&&r!==(r=!t[21]&&t[13]?"0":"")&&I(n,"tabindex",r),589824&i[0]&&a!==(a=p(t[152]?.tagColor?`${t[152]?.tagColor}-color`:"")+" svelte-1i5jzz")&&I(n,"class",a)},d(e){e&&C(n),s=!1,i(c)}}}function vl(e){let t,n=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl,o=bl(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,i){589824&i[0]&&r(n,n=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)?(o.d(1),o=bl(e),o.c(),o.m(t.parentNode,t)):o.p(e,i)},d(e){e&&C(t),o.d(e)}}}function bl(e){let t,n,o,l,r,a,c,u,d;function p(){return e[70](e[144])}function m(...t){return e[71](e[144],...t)}return{c(){t=z("div"),n=z("img"),a=A(),c=z("div"),s(n.src,o=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)||I(n,"src",o),I(n,"loading","lazy"),I(n,"width","150px"),I(n,"height","210px"),I(n,"alt",l=(e[144]?.shownTitle||"")+(e[144].coverImageUrl?" Cover":e[144].bannerImageUrl?" Banner":" Thumbnail")),I(n,"tabindex",r=!e[21]&&e[13]?"0":"-1"),I(n,"class","cover-img svelte-1i5jzz"),I(n,"aria-label","Open Cover Image"),I(c,"class","shimmer-background svelte-1i5jzz"),I(t,"class","shimmer svelte-1i5jzz")},m(o,i){M(o,t,i),x(t,n),x(t,a),x(t,c),u||(d=[N(n,"load",e[68]),N(n,"error",e[69]),N(n,"click",p),N(n,"keyup",m)],u=!0)},p(t,i){e=t,589824&i[0]&&!s(n.src,o=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&I(n,"src",o),589824&i[0]&&l!==(l=(e[144]?.shownTitle||"")+(e[144].coverImageUrl?" Cover":e[144].bannerImageUrl?" Banner":" Thumbnail"))&&I(n,"alt",l),2105344&i[0]&&r!==(r=!e[21]&&e[13]?"0":"-1")&&I(n,"tabindex",r)},d(e){e&&C(t),u=!1,i(d)}}}function xl(e){let t,n,o,l,r,a=(e[151]||"")+"";function s(){return e[72](e[151])}function c(...t){return e[73](e[151],...t)}return{c(){t=z("div"),n=z("div"),I(n,"class","media-description svelte-1i5jzz"),I(t,"class","media-description-wrapper svelte-1i5jzz"),I(t,"tabindex",o=!e[21]&&e[13]?"0":"-1"),I(t,"role","button"),I(t,"aria-label","Open Media Synopsis")},m(e,o){M(e,t,o),x(t,n),n.innerHTML=a,l||(r=[N(t,"click",s),N(t,"keyup",c)],l=!0)},p(i,l){e=i,589824&l[0]&&a!==(a=(e[151]||"")+"")&&(n.innerHTML=a),2105344&l[0]&&o!==(o=!e[21]&&e[13]?"0":"-1")&&I(t,"tabindex",o)},d(e){e&&C(t),l=!1,i(r)}}}function kl(t){let n;return{c(){n=L("Loading...")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function El(e){let t,n=" "+(e[22][e[144]?.id]?"Show":"Hide");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){4784128&o[0]&&n!==(n=" "+(e[22][e[144]?.id]?"Show":"Hide"))&&F(t,n)},d(e){e&&C(t)}}}function Ml(e,t){let n;function o(e,t){return e[23]&&!1!==e[17]||e[146]<=e[3]+e[10]&&e[146]>=e[3]-e[9]?Ci:Mi}function i(e,t){return t===Ci?xi(e):e}let l=o(t),r=l(i(t,l));return{key:e,first:null,c(){n=z("div"),r.c(),I(n,"class","popup-content svelte-1i5jzz"),this.first=n},m(e,t){M(e,n,t),r.m(n,null)},p(e,a){l===(l=o(t=e))&&r?r.p(i(t,l),a):(r.d(1),r=l(i(t,l)),r&&(r.c(),r.m(n,null)))},d(e){e&&C(n),r.d()}}}function Cl(e){let t,n,o,i,l=e[143],a=$l(e);return{c(){t=z("div"),n=T("svg"),o=T("path"),i=A(),a.c(),I(o,"d","M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"),I(n,"class","popup-content-loading-icon svelte-1i5jzz"),I(n,"viewBox","0 0 320 512"),I(t,"class","popup-content-loading svelte-1i5jzz"),I(t,"aria-hidden","true")},m(e,l){M(e,t,l),x(t,n),x(n,o),x(t,i),a.m(t,null)},p(e,n){589824&n[0]&&r(l,l=e[143])?(a.d(1),a=$l(e),a.c(),a.m(t,null)):a.p(e,n)},d(e){e&&C(t),a.d(e)}}}function $l(t){let n;return{c(){n=z("div"),I(n,"class","observed-grid svelte-1i5jzz")},m(e,o){M(e,n,o),t[78](n)},p:e,d(e){e&&C(n),t[78](null)}}}function zl(e){let t,n,o,i,l,r;return{c(){t=z("div"),n=z("div"),n.innerHTML='<svg viewBox="0 0 320 512" class="svelte-1i5jzz"><path d="M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"></path></svg>',I(n,"class","go-back-grid svelte-1i5jzz"),I(t,"class",o=p("go-back-grid-highlight"+(e[7]?" will-go-back":""))+" svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n),r=!0},p(n,i){e=n,(!r||128&i[0]&&o!==(o=p("go-back-grid-highlight"+(e[7]?" will-go-back":""))+" svelte-1i5jzz"))&&I(t,"class",o)},i(e){r||(ne((()=>{r&&(l&&l.end(1),i=ye(t,Ae,{duration:200,easing:Le}),i.start())})),r=!0)},o(e){i&&i.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),r=!1},d(e){e&&C(t),e&&l&&l.end()}}}function Tl(e){let t,n,o,l,a,s,c,u=e[0],d=Al(e);return{c(){t=z("div"),n=z("div"),d.c(),I(n,"class","full-popup svelte-1i5jzz"),I(t,"class","full-popup-wrapper svelte-1i5jzz")},m(o,i){M(o,t,i),x(t,n),d.m(n,null),a=!0,s||(c=[N(t,"click",e[87]),N(t,"keyup",e[88]),N(t,"touchstart",e[41],{passive:!0}),N(t,"touchend",e[43],{passive:!0}),N(t,"touchcancel",e[44],{passive:!0})],s=!0)},p(t,o){e=t,1&o[0]&&r(u,u=e[0])?(d.d(1),d=Al(e),d.c(),d.m(n,null)):d.p(e,o)},i(e){a||(ne((()=>{a&&(l&&l.end(1),o=ye(t,Ae,{duration:200,easing:Le}),o.start())})),a=!0)},o(e){o&&o.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),a=!1},d(e){e&&C(t),d.d(e),e&&l&&l.end(),s=!1,i(c)}}}function Ll(e){let t,n,o,l,r,a,s,c,u;return{c(){t=z("div"),n=z("div"),o=z("div"),l=z("div"),I(l,"tabindex","0"),I(l,"class","full-popup-description svelte-1i5jzz"),I(o,"class","full-popup-description-wrapper svelte-1i5jzz"),I(n,"class","full-popup svelte-1i5jzz"),I(t,"class","full-popup-wrapper svelte-1i5jzz")},m(i,r){M(i,t,r),x(t,n),x(n,o),x(o,l),l.innerHTML=e[1],s=!0,c||(u=[f(e[42].call(null,l)),N(l,"keyup",e[82]),N(l,"scroll",e[40]),N(t,"click",e[83]),N(t,"keyup",e[84]),N(t,"touchstart",e[41],{passive:!0}),N(t,"touchend",e[43],{passive:!0}),N(t,"touchcancel",e[44],{passive:!0})],c=!0)},p(t,n){e=t,(!s||2&n[0])&&(l.innerHTML=e[1])},i(e){s||(ne((()=>{s&&(a&&a.end(1),r=ye(t,Ae,{duration:200,easing:Le}),r.start())})),s=!0)},o(e){r&&r.invalidate(),a=we(t,Ae,{duration:200,easing:Le}),s=!1},d(e){e&&C(t),e&&a&&a.end(),c=!1,i(u)}}}function Al(e){let t,n,o,l;return{c(){t=z("img"),s(t.src,n=e[0])||I(t,"src",n),I(t,"tabindex","0"),I(t,"class","full-popup-image svelte-1i5jzz"),I(t,"loading","lazy"),I(t,"alt","Full View")},m(n,i){M(n,t,i),o||(l=[N(t,"keyup",e[85]),N(t,"error",e[86])],o=!0)},p(e,o){1&o[0]&&!s(t.src,n=e[0])&&I(t,"src",n)},d(e){e&&C(t),o=!1,i(l)}}}function Sl(e){let t,n,o,l,r,a,s,c,u,d,p,m=e[19]&&Ei(ki(e)),f=e[13]&&e[14]&&zl(e);const h=[Ll,Tl],g=[];function y(e,t){return e[1]?0:e[0]?1:-1}return~(a=y(e))&&(s=g[a]=h[a](e)),{c(){t=z("div"),n=z("section"),m&&m.c(),l=A(),f&&f.c(),r=A(),s&&s.c(),c=S(),I(n,"id","popup-container"),I(n,"class","popup-container hide svelte-1i5jzz"),I(n,"aria-label","Detailed Information View for Media"),I(t,"id","popup-wrapper"),I(t,"class","popup-wrapper svelte-1i5jzz"),I(t,"tabindex",o=!e[21]&&e[13]?"0":"-1")},m(o,i){M(o,t,i),x(t,n),m&&m.m(n,null),e[79](n),e[81](t),M(o,l,i),f&&f.m(o,i),M(o,r,i),~a&&g[a].m(o,i),M(o,c,i),u=!0,d||(p=[N(n,"touchstart",e[36],{passive:!0}),N(n,"touchmove",e[37],{passive:!0}),N(n,"touchend",e[38],{passive:!0}),N(n,"touchcancel",e[39],{passive:!0}),N(n,"pointerdown",e[50]),N(n,"pointerup",e[51]),N(n,"pointercancel",e[51]),N(n,"scroll",e[34]),N(t,"click",e[27]),N(t,"keyup",e[80])],d=!0)},p(e,i){e[19]?m?m.p(ki(e),i):(m=Ei(ki(e)),m.c(),m.m(n,null)):m&&(m.d(1),m=null),(!u||2105344&i[0]&&o!==(o=!e[21]&&e[13]?"0":"-1"))&&I(t,"tabindex",o),e[13]&&e[14]?f?(f.p(e,i),24576&i[0]&&fe(f,1)):(f=zl(e),f.c(),fe(f,1),f.m(r.parentNode,r)):f&&(pe(),he(f,1,1,(()=>{f=null})),me());let l=a;a=y(e),a===l?~a&&g[a].p(e,i):(s&&(pe(),he(g[l],1,1,(()=>{g[l]=null})),me()),~a?(s=g[a],s?s.p(e,i):(s=g[a]=h[a](e),s.c()),fe(s,1),s.m(c.parentNode,c)):s=null)},i(e){u||(fe(f),fe(s),u=!0)},o(e){he(f),he(s),u=!1},d(n){n&&C(t),m&&m.d(),e[79](null),e[81](null),n&&C(l),f&&f.d(n),n&&C(r),~a&&g[a].d(n),n&&C(c),d=!1,i(p)}}}function Nl(e){"string"==typeof e&&""!==e&&window.open(e,"_blank")}function Pl(e){let t;try{t=YT.PlayerState[e]}catch{}if(null==t){if("PLAYING"===e)return 1;if("PAUSED"===e)return 2;if("ENDED"===e)return 0;if("UNSTARTED"===e)return-1;if("CUED"===e)return 5;if("BUFFERING"===e)return 3}return t}function Il(e){let t=document.createElement("span");t.innerHTML=e;let n=t.querySelectorAll("a");return Array.from(n).forEach((e=>{e?.setAttribute("rel","noopener noreferrer"),e?.setAttribute("target","_blank")})),t.innerHTML}function Fl(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,P;d(e,_t,(e=>n(12,o=e))),d(e,qt,(e=>n(113,i=e))),d(e,Ze,(e=>n(114,l=e))),d(e,ln,(e=>n(13,r=e))),d(e,it,(e=>n(115,a=e))),d(e,cn,(e=>n(14,s=e))),d(e,fn,(e=>n(116,c=e))),d(e,Je,(e=>n(117,u=e))),d(e,qe,(e=>n(118,p=e))),d(e,sn,(e=>n(15,f=e))),d(e,ht,(e=>n(119,h=e))),d(e,wt,(e=>n(16,g=e))),d(e,Qt,(e=>n(120,y=e))),d(e,en,(e=>n(121,w=e))),d(e,Wt,(e=>n(17,v=e))),d(e,an,(e=>n(18,b=e))),d(e,mt,(e=>n(19,x=e))),d(e,st,(e=>n(122,k=e))),d(e,Jt,(e=>n(123,E=e))),d(e,Mt,(e=>n(124,M=e))),d(e,Pt,(e=>n(20,C=e))),d(e,tn,(e=>n(21,$=e))),d(e,pn,(e=>n(125,z=e))),d(e,rn,(e=>n(126,T=e))),d(e,Ct,(e=>n(22,L=e))),d(e,Ge,(e=>n(23,A=e))),d(e,lt,(e=>n(24,S=e))),d(e,Xt,(e=>n(25,N=e))),d(e,Zt,(e=>n(26,P=e)));let I,F,B,U,D,R,j,H,O,V={},q={},_={},Y={};function J(){cancelAnimationFrame(O),r&&(O=requestAnimationFrame((()=>{const e=zo(U,".popup-header",a>360?.5:0)||zo(U,".popup-content",0)?.getElementsByClassName("popup-header")?.[0];I=e,r&&ie()})))}function G(e){const t=e.target;t.classList.contains("popup-container")||t.closest(".popup-container")||m(ln,r=!1,r)}async function X(e,t){if(!1!==v||!L)return ce();t=t?`<span style="color:hsl(var(--ac-color));">${t}</span>`:"this entry",L[e]?await w(`Do you want to unhide ${t} in your recommendation list?`)&&(Xn({showId:e}),delete L[e],Ct.set(L)):await w(`Do you want to hide ${t} in your recommendation list?`)&&(Xn({removeId:e}),m(Ct,L[e]=1,L))}ln.subscribe((async e=>{if(B instanceof Element&&U instanceof Element)if(!0===e){const e=U?.children[T??F??0];if(e instanceof Element){k<=0||$?($o(D,"hide"),Co(B,"visible"),Co(U,"show")):requestAnimationFrame((()=>{Co(D,"stop-transition"),Co(D,"hide"),requestAnimationFrame((()=>{$o(D,"stop-transition"),$o(D,"hide"),Co(B,"visible"),Co(U,"show")}))}));const t=T;n(3,F=t);const o=x[g].mediaList,a=[[o[t],t],[o[t+1],t+1],[o[t-1],t-1]];if(await te(),!r)return m(rn,T=null,T),void window.addHistory?.();((e,t,n="top",o,i=0)=>{try{let l;if("string"==typeof t&&(t=document.querySelector(t)),e===window){const e=t.getBoundingClientRect(),o=window.scrollY;l="bottom"===n?e.bottom+o-window.innerHeight:"center"===n?e.top+o-window.innerHeight/2:e.top+o}else if("string"==typeof e&&(e=document.querySelector(e)),"bottom"===n)l=t.offsetTop+t.offsetHeight-e.offsetHeight;else if("center"===n){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();l=n.top+n.height/2-(o.top+o.height/2)-o.height/2,e.scrollTop}else l=t.getBoundingClientRect().top-e.getBoundingClientRect().top+e.scrollTop;e===window?"smooth"===o?window.scrollTo({top:l+i,behavior:"smooth"}):window.scrollTo({top:l+i}):"smooth"===o?e.scrollBy({top:l+i,behavior:"smooth"}):e.scrollTop=l+i}catch{}})(U,e,"top","instant");const s=o?.[t]?.popupHeader||U?.children[t]?.querySelector(".popup-header");I=s;const c=s?.querySelector(".trailer")||U?.children[t]?.querySelector(".trailer");let u;for(let e=0;e<i.length;e++){const t=i[e]?.ytPlayer,n=t?.g,o=n.id;if(!V[o]&&(n===c&&n)){u=!0,l&&!q[o]&&(t?.getPlayerState?.()===Pl("ENDED")?(t?.seekTo?.(0,!0),t?.playVideo?.()):t?.playVideo?.());break}}a.forEach((([e,t],n)=>{u&&e&&0===n||e&&le(e,t)})),m(rn,T=null,T),window.addHistory?.()}else k<=0?($o(D,"hide"),Co(B,"visible"),Co(U,"show")):requestAnimationFrame((()=>{Co(D,"stop-transition"),Co(D,"hide"),requestAnimationFrame((()=>{$o(D,"stop-transition"),$o(D,"hide"),Co(B,"visible"),Co(U,"show")}))}))}else!1===e&&(window.closeFullScreenItem?.(),window.handleConfirmationCancelled?.(),m(pn,z=!1,z),!$&&k>0&&Co(D,"hide"),$o(U,"show"),Be((()=>{for(let e=0;e<i.length;e++){const t=i[e]?.ytPlayer,n=t?.g?.id;V[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}$o(D,"hide"),$o(B,"visible")}),200),b||C[""]||C[g]?ae(!0):f&&se(!0))}));const Z=new IntersectionObserver((e=>e.forEach((e=>{e.isIntersecting&&On({loadMore:!0,selectedCategory:g,searchedWord:h})}))),{root:null,rootMargin:"100%",threshold:[.5,0]});let Q,ee;async function ne(){const e=x[g||""]?.mediaList;e instanceof Array&&e.length?(R?.disconnect(),await te(),R?.disconnect(),R=new IntersectionObserver((()=>J()),{root:null,rootMargin:"100%",threshold:[.5,0]}),e.forEach(((e,t)=>{const n=e?.popupHeader||U?.children[t]?.querySelector(".popup-header");n instanceof Element&&R?.observe(n)})),ie()):m(ln,r=!1,r)}function oe(){m(_t,o=!o,o)}function ie(){if(!r||document.fullscreenElement)return;const e=I?.querySelector(".trailer"),t=(e=>{try{return Array.from(e.parentElement.children).indexOf(e)}catch{}})(I?.closest(".popup-content"))??-1,o=g;clearTimeout(ee),ee=setTimeout((()=>{if(!r||o!==g)return;const e=x[g]?.mediaList,n=e?.[t]?.gridElement||M?.children?.[t];if(n instanceof Element)if(E)n.scrollIntoView({behavior:"smooth",inline:"nearest"});else{const e=n.getBoundingClientRect().top,t=n.clientHeight;let o;if(e<0?o=k+(e-5):e>a-65-t&&(o=k+e-a+t+70),o){const e=document.documentElement;e.style.overflow="hidden",e.style.overflow="",e.scrollTo({behavior:"smooth",top:o})}}}),300);if(e instanceof Element&&i.some((t=>t?.ytPlayer?.g===e))){if(t>=0){const e=x[g].mediaList;n(3,F=t);const o=[[e?.[t+1],t+1],[e?.[t-1],t-1]];for(let e=0;e<o.length;e++){const[t,n]=o[e];t&&le(t,n)}}for(let t=0;t<i.length;t++){const n=i[t]?.ytPlayer,o=n?.g,a=o?.id;if(V[a])continue;const s=n?.getPlayerState?.();o===e&&o&&l&&r?q[a]||s===Pl("ENDED")||n?.playVideo?.():(a&&(_[a]=!0),n?.pauseVideo?.())}}else{for(let e=0;e<i.length;e++){const t=i[e]?.ytPlayer,n=t?.g?.id;V[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}if(t>=0){n(3,F=t);const e=x[g].mediaList,o=[[e?.[t],t],[e?.[t+1],t+1],[e?.[t-1],t-1]];for(let e=0;e<o.length;e++){const[t,n]=o[e];t&&le(t,n)}}}}function le(e,t){const a=e?.popupHeader||U?.children[t]?.querySelector(".popup-header");let s=a?.querySelector(".trailer");const c=e?.trailerID,u=a?.querySelector(".popup-img");if(s instanceof Element&&c&&"undefined"!=typeof YT&&"function"==typeof YT?.Player){if(i.some((e=>e?.ytPlayer?.g===s)))return;$o(u,"display-none"),Co(u,"loaded"),Co(a,"loader"),Co(s,"display-none"),s.id="yt-player"+Fe(),V[s.id]=!0;const e=new YT.Player(s,{videoId:c,playerVars:{cc_lang_pref:"en",cc_load_policy:1,enablejsapi:1,modestbranding:1,playsinline:1,rel:0},events:{onReady:e=>{!async function(e,t){const o=e?.target,l=o?.g;if(o?.getPlayerState?.()===Pl("UNSTARTED")||"IFRAME"!==l?.tagName||!1===window.navigator?.onLine){null!=t&&n(6,Y[t]=!0,Y),m(qt,i=i.filter((e=>e?.ytPlayer?.g!==l))||[],i);const e=l?.parentElement,r=e?.querySelector(".popup-img");$o(r,"display-none"),Co(r,"loaded"),$o(e,"loader"),Co(l,"display-none"),o?.destroy?.(),delete V[l?.id]}else null!=t&&(delete Y[t],n(6,Y)),o?.mute?.(),o?.seekTo?.(0,!0),o?.playVideo?.(),ie()}(e,c)},onStateChange:e=>{!function(e){const t=e?.target,n=t?.g,i=n?.parentElement,a=i?.querySelector(".popup-img"),s=n?.id,c=t?.getPlayerState?.();if(c===Pl("PLAYING"))V[s]?(delete V[s],I===i&&l&&r?(t?.seekTo?.(0,!0),o?t?.unMute?.():t?.mute?.(),t?.playVideo?.(),$o(n,"display-none"),$o(i,"loader"),$o(a,"loaded"),Be((()=>{Co(a,"display-none")}),200)):($o(i,"loader"),s&&(_[s]=!0),t?.pauseVideo?.(),o?t?.unMute?.():t?.mute?.())):(n?.classList?.contains("display-none")||i?.classList?.contains("loader")||!a?.classList?.contains("display-none"))&&($o(n,"display-none"),$o(i,"loader"),$o(a,"loaded"),Be((()=>{Co(a,"display-none")}),200));else if(c===Pl("CUED"))t?.mute?.(),t?.seekTo?.(0,!0),t?.playVideo?.();else if(c===Pl("PAUSED"))return void(s&&I===i&&!_[s]&&(q[s]=!0));delete q[s],delete _[s]}(e)},onError:e=>{!function(e,t){const o=e?.target,l=o?.g,r=l?.parentElement,a=r?.querySelector(".popup-img"),s=o?.id;null!=t&&n(6,Y[t]=!0,Y);m(qt,i=i.filter((e=>e?.ytPlayer?.g!==l))||[],i),$o(a,"display-none"),Co(a,"loaded"),$o(r,"loader"),Co(l,"display-none"),o?.destroy?.(),delete V[s]}(e,c)}}});i.push({ytPlayer:e,headerIdx:t})}else null!=c&&n(6,Y[c]=!0,Y),$o(u,"display-none"),Co(u,"loaded"),$o(a,"loader"),Co(s,"display-none")}async function re(e,t,o){t?(n(0,j=t),n(1,H=null)):e&&!Y[e]?await w({title:"Open trailer",text:"Do you want to open the trailer in YouTube?",isImportant:!0})&&window.open(`https://www.youtube.com/watch?v=${e}`,"_blank"):o&&await w({title:"See related videos",text:"Do you want to see more related videos in YouTube?",isImportant:!0})&&window.open(o)}async function ae(e){u&&!0===window[p]||(!1===v?(e||await w({title:"Reload List",text:"Do you want to refresh your list to sync changes?"}))&&(m(Qt,y=!0,y),Xn({updateRecommendedMediaList:!0}),m(sn,f=m(an,b=!1,b),f)):e||ce())}async function se(e){u&&!0===window[p]||(!1===v?(e||await w({title:"Reload List",text:"Do you want to refresh your list to sync changes?"}))&&(m(Qt,y=!0,y),On({loadMore:!0,selectedCategory:g,searchedWord:h,reload:!0}),m(sn,f=!1,f)):e||ce())}function ce(){u?De("Please wait a moment"):m(fn,c="Please wait a moment",c)}wt.subscribe(ne),mt.subscribe(ne),_t.subscribe((e=>{if("boolean"==typeof e){Pn("autoPlay",e).catch((()=>In("autoPlay"))).finally((()=>Sn("autoPlay",e)));const t=I?.querySelector(".trailer");for(let n=0;n<i.length;n++){const o=i[n]?.ytPlayer,a=o?.g,s=a?.id;if(V[s])continue;const c=o?.isMuted?.();!0===e?o?.unMute?.():o?.mute?.(),a===t&&a&&l&&r?!0!==e||!1===c||q[s]||(o?.seekTo?.(0,!0),o?.playVideo?.()):(!0===e&&o?.seekTo?.(0,!0),s&&(_[s]=!0),o?.pauseVideo?.())}}}));const ue=864e5,de=7*ue;function pe(e,t,n){return"boolean"==typeof n?n?`${ci(t,t<=ue||!t?2:1)}, ${di(e)} ${ui(e)}`:`${ci(t,t<=ue||!t?2:1)}, ${ui(e)}`:t>de?`${ci(t,1)}, ${di(e)} ${(e=>{try{return e.toLocaleDateString(void 0,{day:"numeric"})}catch{return""}})(e)} ${ui(e)}`:t<=de&&t>ue?`${ci(t,1)}, ${(e=>{try{return e.toLocaleDateString(void 0,{weekday:"short"})}catch{return""}})(e)}, ${pi(e).toLowerCase()}`:`${ci(t,2)}, ${pi(e).toLowerCase()}`}function me(){new Promise((e=>{let t="https://www.youtube.com/iframe_api?v=16",n=document.querySelector(`#www-widgetapi-script[src="${t}"]`);n||(n=document.querySelector(`script[src="${t}"]`)),n&&n.parentElement.removeChild(n);let o=document.createElement("script");o.src=t,o.id="www-widgetapi-script",o.onerror=()=>{e()},o.onload=()=>{window.onYouTubeIframeAPIReady?.(),e()};let i=document.getElementsByTagName("script")[0];i.parentElement.insertBefore(o,i)})).then((()=>{m(qt,i=i.filter((e=>{const t=e?.ytPlayer,n=t?.getPlayerState?.();if(t&&t?.g instanceof Element&&"function"==typeof t?.playVideo&&n!==Pl("UNSTARTED")&&"number"==typeof n&&!isNaN(n))return!0;{t?.destroy?.();const e=t?.g?.closest?.(".popup-header")?.querySelector?.(".popup-img");return e&&$o(e,"display-none"),!1}}))||[],i),ie()}))}window.returnedAppIsVisible=e=>{if(!u)return;m(Ze,l=e,l);const t=I?.querySelector(".trailer");if(e&&r&&t)for(let e=0;e<i.length;e++){const n=i[e]?.ytPlayer,o=n?.g,l=o?.id;V[l]||(o===t&&o?q[l]||n?.getPlayerState?.()===Pl("ENDED")||n?.playVideo?.():(l&&(_[l]=!0),n?.pauseVideo?.()))}else for(let e=0;e<i.length;e++){const t=i[e]?.ytPlayer,n=t?.g?.id;V[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}},document.addEventListener("visibilitychange",(()=>{if(u)return;m(Ze,l="visible"===document.visibilityState,l);const e=I?.querySelector?.(".trailer");if(l&&r&&e)for(let t=0;t<i.length;t++){const n=i[t]?.ytPlayer,o=n?.g,l=o?.id;V[l]||(o===e&&o?q[l]||n?.getPlayerState?.()===Pl("ENDED")||n?.playVideo?.():(l&&(_[l]=!0),n?.pauseVideo?.()))}else for(let e=0;e<i.length;e++){const t=i[e]?.ytPlayer,n=t?.g?.id;V[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}})),window.playMostVisibleTrailer=ie,window.reloadYoutube=me;let fe,he,ge,ye,we,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Le,Ae=window.navigator?.onLine;async function Se(e){await te(),Le=e||Le,Le instanceof Element?Le?.scrollHeight>Le?.clientHeight?Co(Le,"scrollable"):$o(Le,"scrollable"):Co(Le,"scrollable")}function Ne(){Ee=Me=Ce=$e=ze=Te=!1}function Pe(e){if(!e)return;let t=e||"";n(1,H=H===t?null:t),n(0,j=null)}function Ie(e){if(!e)return;let t=Il(e)||"";n(1,H=H===t?null:t),n(0,j=null)}function Ue(e){e&&(n(0,j=j===e?null:e),n(1,H=null))}window.addEventListener("online",(()=>{if(!0!==window[p]){if(u)try{JSBridge.isOnline(!0)}catch(e){console.error(e)}else!1===Ae&&(Ae=!0,m(fn,c="Your internet has been restored",c));document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),me()}})),window.addEventListener("offline",(()=>{if(!0!==window[p])if(u)try{JSBridge.isOnline(!1)}catch(e){console.error(e)}else!0===Ae&&(Ae=!1,m(fn,c="You are currently offline",c))})),window.showFullScreenInfo=Ie,window.checkOpenFullScreenItem=()=>j||H,window.closeFullScreenItem=()=>{n(1,H=n(0,j=null))};let Re,je=a>=1e3?2:1,He=Math.floor(Math.max(1,a/640))||1;it.subscribe((e=>{n(9,je=e>=1e3?2:1),n(10,He=Math.floor(Math.max(1,e/640))||1)}));const Oe=e=>{try{if(!0!==matchMedia("(hover:hover)").matches)return;let t=e.target;if(t.removeEventListener(e.type,Oe),t.addedCustomDragScroll)return;t.addedCustomDragScroll=!0,((e,t="xy",n=(()=>!1))=>{try{let o,i,l,r,a,s,c,u,d;const p=n=>{o&&"mouse"===n.pointerType&&(t.toLowerCase().includes("y")&&(e.scrollTop=s-n.clientY-i),t.toLowerCase().includes("x")&&(e.scrollLeft=c-n.clientX-l))},m=p=>{"mouse"!==p.pointerType||n(p)||(r=0,cancelAnimationFrame(u),a=0,cancelAnimationFrame(d),t.toLowerCase().includes("y")&&(i=p.clientY,s=e.scrollTop),t.toLowerCase().includes("x")&&(l=p.clientX,c=e.scrollLeft),o=!0)},f=n=>{o&&(t.toLowerCase().includes("y")&&"mouse"===n.pointerType&&(r=n.clientY-i,e.scrollTop=s-r,g(e)),t.toLowerCase().includes("x")&&"mouse"===n.pointerType&&(a=n.clientX-l,e.scrollLeft=c-a,y(e))),o=!1},h=()=>o=!1,g=(e,t)=>{(null==t||e.scrollTop===t)&&"number"==typeof r&&e&&Math.abs(r)>.1?(e.scrollTop-=.1*r,u=requestAnimationFrame((()=>g(e,e.scrollTop))),r*=.9):(r=0,cancelAnimationFrame(u))},y=(e,t)=>{(null==t||e.scrollLeft===t)&&"number"==typeof a&&e&&Math.abs(a)>.1?(e.scrollLeft-=.1*a,d=requestAnimationFrame((()=>y(e,e.scrollLeft))),a*=.9):(a=0,cancelAnimationFrame(d))};return e.addEventListener("pointermove",p),e.addEventListener("pointerdown",m),e.addEventListener("pointerup",f),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),()=>{a=r=0,cancelAnimationFrame(u),cancelAnimationFrame(d),e.removeEventListener("pointermove",p),e.removeEventListener("pointerdown",m),e.removeEventListener("pointerup",f),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h)}}catch{return()=>{}}})(t,"x"),null==Re&&n(11,Re=!0)}catch{}};let Ve;W((async()=>{n(4,B=B||document.getElementById("popup-wrapper")),n(5,U=U||B.querySelector("#popup-container")),D=document.getElementById("nav-container"),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||ie()}),!1),document.addEventListener("keydown",(e=>{" "===e.key&&r&&e.preventDefault()})),document.addEventListener("keyup",(e=>{if(" "===e.key&&r){e.preventDefault();const t=I?.querySelector(".trailer");for(let e=0;e<i.length;e++){const n=i[e]?.ytPlayer,o=n?.g,r=o?.id;if(!V[r])if(t===o&&o){const e=n?.getPlayerState?.();e===Pl("PLAYING")?(r&&(q[r]=!0),n?.pauseVideo?.()):l&&(e===Pl("ENDED")?(n?.seekTo?.(0,!0),n?.playVideo?.()):n?.playVideo?.())}else r&&(_[r]=!0),n?.pauseVideo?.()}}})),new MutationObserver((e=>{for(let t of e)if("childList"===t.type)for(let e of t.removedNodes)if(e?.matches?.("iframe.trailer")){const t=e,n=t?.id;m(qt,i=i.filter((e=>{const t=e?.ytPlayer,o=t?.g;return o!==t&&o?.id!==n||(t?.destroy?.(),!1)}))||[],i),delete q[n],delete _[n],delete V[n]}})).observe(U,{childList:!0,subtree:!0}),m(_t,o=o??await An("autoPlay"),o),null==o&&Pn("autoPlay",m(_t,o=!1,o)).catch((()=>In("autoPlay"))).finally((()=>Sn("autoPlay",!1)))}));return e.$$.update=()=>{4&e.$$.dirty[0]&&Q instanceof Element&&Z.observe(Q),2&e.$$.dirty[0]&&Se(),3&e.$$.dirty[0]&&(H||j)&&window.addHistory?.()},[j,H,Q,F,B,U,Y,be,xe,je,He,Re,o,r,s,f,g,v,b,x,C,$,L,A,S,N,P,G,X,oe,re,ae,se,function({episodes:e,chapters:t,nextAiringEpisode:n,episodeProgress:o,season:i},l,r){let a,s,c,u;if(!l&&!r&&"number"==typeof n?.airingAt)if("number"==typeof n?.episode)u=new Date(1e3*n?.airingAt),c=n?.episode,u instanceof Date&&!isNaN(u)&&(s=u.getTime()-(new Date).getTime());else if(!0===n?.estimated)return u=new Date(1e3*n?.airingAt),(u instanceof Date||isNaN(u))&&(s=u.getTime()-(new Date).getTime()),e>0&&(a=` · ${e} Ep${e>1?"s":""}`),s>0&&(a=`${a||""} · <span style="color:hsl(var(--ac-color));">${pe(u,s,"Winter"===i||"Spring"===i||"Summer"===i||"Fall"===i)}</span>`),a;if(s>0&&"number"==typeof c&&e>c)a=` · <span style="color:hsl(var(--ac-color));">${c}/${e} in ${pe(u,s)}</span>`;else if(s>0&&"number"==typeof c){let t="";t=null!=e&&c===e?`Fin ${c}`:`Ep ${c}`,a=` · <span style="color:hsl(var(--ac-color));">${t} in ${pe(u,s)}</span>`}else s<=0&&"number"==typeof c&&e>c?a=` · ${c}/${e}`:e>0&&!l&&!r?a=` · ${e} Ep${e>1?"s":""}`:t>0&&(l||r)?a=` · ${t} Ch${t>1?"s":""}`:o>0&&(a=` · Seen ${o} ${l||r?"Ch":"Ep"}${o>1?"s":""}`);return a},function(){r&&J(),n(8,xe=!0),clearTimeout(ke),ke=setTimeout((()=>{n(8,xe=!1)}),50),fe=null,n(7,be=he=m(cn,s=!1,s))},function(){n(8,xe=!0),clearTimeout(ke),ke=setTimeout((()=>{n(8,xe=!1)}),500)},function(e){if(xe)return;ge=e.touches[0].clientX,we=e.touches[0].clientY,fe=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="popup-container"!==t.id;break}t=t.parentElement}n||(he=!0)},function(e){if(he){he=!1,ye=e.touches[0].clientX,ve=e.touches[0].clientY;const t=ye-ge,n=ve-we;Math.abs(t)>Math.abs(n)&&t>0&&m(cn,s=!0,s)}else if(s){ye=e.touches[0].clientX;n(7,be=ye-ge>48)}},function(e){if(s){if(ye=Array.from(e.changedTouches)?.find((e=>e.identifier===fe))?.clientX,"number"==typeof ye){s&&ye-ge>=48&&m(ln,r=!1,r)}fe=null,n(7,be=he=m(cn,s=!1,s))}else fe=null,n(7,be=he=m(cn,s=!1,s))},function(){fe=null,n(7,be=he=m(cn,s=!1,s))},function(){$e=!0},function(e){if(!U)return;let t=e.target,n=t;for(;n&&n!==document.body;){if(ze=t.scrollTop<1,Te=Math.abs(t.scrollHeight-t.clientHeight-t.scrollTop)<1,ze||Te)break;n=n?.parentElement}Ee=e?.touches?.[0]?.identifier,Me=e?.touches?.[0]?.clientY,Ce=e?.touches?.[0]?.clientX},Se,function(e){if(!$e){let t=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===Ee))?.clientY,o=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===Ee))?.clientX,i=t-Me,l=o-Ce;if("number"==typeof i&&!isNaN(i)&&"number"==typeof l&&!isNaN(l)){(Math.abs(l)>Math.abs(i)||i<0&&Te||i>0&&ze)&&n(1,H=n(0,j=null))}}Ne()},Ne,Pe,Ie,Ue,function(e){return{destroy(){const t=e?.querySelector?.(".trailer"),n=t?.id;m(qt,i=i.filter((e=>{const o=e?.ytPlayer,i=o?.g;return i!==t&&i?.id!==n||(o?.destroy?.(),!1)}))||[],i),delete q[n],delete _[n],delete V[n]}}},Oe,function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&(Ve?.(),Ve=Be((()=>{let e=t.dataset.copy;if(e){t.style.pointerEvents="none",Be((()=>{t.style.pointerEvents=""}),500);let n=t.dataset.secondcopy;n&&!$n(n,e)?(window.copyToClipBoard?.(n),Be((()=>{window.copyToClipBoard?.(e)}),1e3)):window.copyToClipBoard?.(e)}}),500))},function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&Ve?.()},e=>{$o(e.target,"display-none"),Co(e.target,"loaded")},e=>{$o(e.target,"loaded"),Co(e.target,"display-none")},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupHeader=e}))},(e,t)=>{r&&re(e.trailerID,e.bannerImageUrl||e.trailerThumbnailUrl,t)},(e,t,n)=>{r&&"Enter"===n.key&&re(e.trailerID,e.bannerImageUrl||e.trailerThumbnailUrl,t)},function(){o=this.checked,_t.set(o)},e=>"Enter"===e.key&&oe(),e=>"Enter"===e.key&&oe(),()=>{b||C[""]||C[g]?ae():se()},e=>{"Enter"!==e.key&&(b||C[""]||C[g]?ae():se())},e=>{r&&Ue(e.bannerImageUrl||e.trailerThumbnailUrl)},(e,t)=>{r&&"Enter"===t.key&&Ue(e.bannerImageUrl||e.trailerThumbnailUrl)},e=>Nl(e.mediaUrl),(e,t)=>"Enter"===t.key&&Nl(e.mediaUrl),e=>{r&&(null!=Re&&xe||Ie(window.getTagInfoHTML?.(e?.tagName)))},(e,t)=>{r&&("Enter"!==t.key||null!=Re&&xe||Ie(window.getTagInfoHTML?.(e?.tagName)))},e=>{$o(e.target,"display-none"),Co(e.target,"loaded")},e=>{$o(e.target,"loaded"),Co(e.target,"display-none")},e=>{r&&Ue(e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl)},(e,t)=>{r&&"Enter"===t.key&&Ue(e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl)},e=>{r&&Pe(e)},(e,t)=>{r&&"Enter"===t.key&&Pe(e)},e=>{r&&X(e.id,e?.shownTitle)},(e,t)=>{r&&"Enter"===t.key&&(t.stopImmediatePropagation(),X(e.id,e?.shownTitle),t.stopImmediatePropagation())},e=>Nl(e.mediaUrl),(e,t)=>"Enter"===t.key&&Nl(e.mediaUrl),function(e){K[e?"unshift":"push"]((()=>{Q=e,n(2,Q)}))},function(e){K[e?"unshift":"push"]((()=>{U=e,n(5,U)}))},e=>"Enter"===e.key&&G(e),function(e){K[e?"unshift":"push"]((()=>{B=e,n(4,B)}))},e=>"Enter"===e.key&&n(0,j=n(1,H=null)),()=>n(0,j=n(1,H=null)),e=>"Enter"===e.key&&n(0,j=n(1,H=null)),e=>"Enter"===e.key&&n(1,H=n(0,j=null)),e=>{Co(e.target,"display-none")},()=>n(1,H=n(0,j=null)),e=>"Enter"===e.key&&n(1,H=n(0,j=null))]}function Bl(e){let t,n,o,l,r,a,s,c,u,d,p,m,h,g,y,w,v,b,k,E,$,S,P,B,U,D,R,j,H,O,V,q,_,Y=e[7]?(e[7][e[2]]?"Show":"Hide")+" Entry":"Please Wait...",W=e[1]&&Ul(e);return{c(){t=z("div"),n=z("div"),o=z("div"),l=z("span"),r=z("h1"),a=L(e[0]),s=A(),c=T("svg"),u=T("path"),p=A(),m=z("span"),h=z("h2"),h.textContent="Information",y=A(),w=z("span"),v=z("h2"),v.textContent="Open in Anilist",k=A(),E=z("span"),$=z("h2"),$.textContent="Open in YouTube",P=A(),W&&W.c(),B=A(),U=z("span"),D=z("h2"),R=L(Y),I(r,"class","svelte-nro706"),I(l,"class","media-title svelte-nro706"),I(u,"fill","#fff"),I(u,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(c,"viewBox","0 0 24 24"),I(c,"class","closing-x svelte-nro706"),I(c,"tabindex",d=e[8]?"":"0"),I(c,"role","button"),I(c,"aria-label","Close Media Options Popup"),I(o,"class","option-header svelte-nro706"),I(h,"class","option-title svelte-nro706"),I(m,"tabindex",g=e[8]?"":"0"),I(m,"class","media-option svelte-nro706"),I(m,"role","button"),I(m,"aria-label","Open Detailed Information for the Media"),I(v,"class","option-title svelte-nro706"),I(w,"tabindex",b=e[8]?"":"0"),I(w,"class","media-option svelte-nro706"),I(w,"role","button"),I(w,"aria-label","Open in AniList"),I($,"class","option-title svelte-nro706"),I(E,"tabindex",S=e[8]?"":"0"),I(E,"class","media-option svelte-nro706"),I(E,"role","button"),I(E,"aria-label","Open Related YouTube Videos"),I(D,"class","option-title svelte-nro706"),I(U,"tabindex",j=e[8]?"":"0"),I(U,"class","media-option svelte-nro706"),I(U,"role","button"),I(U,"aria-label","Hide or Show Media"),I(n,"class","media-options-container svelte-nro706"),I(t,"class","fixed-media-options svelte-nro706")},m(i,d){M(i,t,d),x(t,n),x(n,o),x(o,l),x(l,r),x(r,a),x(o,s),x(o,c),x(c,u),x(n,p),x(n,m),x(m,h),e[19](m),x(n,y),x(n,w),x(w,v),x(n,k),x(n,E),x(E,$),x(n,P),W&&W.m(n,null),x(n,B),x(n,U),x(U,D),x(D,R),V=!0,q||(_=[N(c,"click",e[10]),N(c,"keydown",e[17]),N(m,"click",e[11]),N(m,"keydown",e[18]),N(w,"click",e[12]),N(w,"keydown",e[20]),N(E,"click",e[13]),N(E,"keydown",e[21]),N(U,"click",e[15]),N(U,"keydown",e[23]),f(e[16].call(null,t)),N(t,"click",e[10]),N(t,"touchend",e[9],{passive:!0}),N(t,"keydown",e[24])],q=!0)},p(t,o){e=t,(!V||1&o[0])&&F(a,e[0]),(!V||256&o[0]&&d!==(d=e[8]?"":"0"))&&I(c,"tabindex",d),(!V||256&o[0]&&g!==(g=e[8]?"":"0"))&&I(m,"tabindex",g),(!V||256&o[0]&&b!==(b=e[8]?"":"0"))&&I(w,"tabindex",b),(!V||256&o[0]&&S!==(S=e[8]?"":"0"))&&I(E,"tabindex",S),e[1]?W?W.p(e,o):(W=Ul(e),W.c(),W.m(n,B)):W&&(W.d(1),W=null),(!V||132&o[0])&&Y!==(Y=e[7]?(e[7][e[2]]?"Show":"Hide")+" Entry":"Please Wait...")&&F(R,Y),(!V||256&o[0]&&j!==(j=e[8]?"":"0"))&&I(U,"tabindex",j)},i(e){V||(ne((()=>{V&&(O&&O.end(1),H=ye(t,Ae,{duration:200,easing:Le}),H.start())})),V=!0)},o(e){H&&H.invalidate(),O=we(t,Ae,{duration:200,easing:Le}),V=!1},d(n){n&&C(t),e[19](null),W&&W.d(),n&&O&&O.end(),q=!1,i(_)}}}function Ul(e){let t,n,o,l,r;return{c(){t=z("span"),n=z("h2"),n.textContent="Copy Title",I(n,"class","option-title svelte-nro706"),I(t,"tabindex",o=e[8]?"":"0"),I(t,"class","media-option svelte-nro706"),I(t,"role","button"),I(t,"aria-label","Copy Title")},m(o,i){M(o,t,i),x(t,n),l||(r=[N(t,"click",e[14]),N(t,"keydown",e[22])],l=!0)},p(e,n){256&n[0]&&o!==(o=e[8]?"":"0")&&I(t,"tabindex",o)},d(e){e&&C(t),l=!1,i(r)}}}function Dl(e){let t,n,o=e[4]&&!e[8]&&e[6]?.[e[5]]&&Bl(e);return{c(){o&&o.c(),t=S()},m(e,i){o&&o.m(e,i),M(e,t,i),n=!0},p(e,n){e[4]&&!e[8]&&e[6]?.[e[5]]?o?(o.p(e,n),368&n[0]&&fe(o,1)):(o=Bl(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(pe(),he(o,1,1,(()=>{o=null})),me())},i(e){n||(fe(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&C(t)}}}function Rl(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E;function M(e){"Tab"===e.key&&(e.preventDefault(),e.stopPropagation(),E?.focus?.(),window.removeEventListener("keydown",M))}d(e,nn,(e=>n(4,o=e))),d(e,on,(e=>n(31,i=e))),d(e,wt,(e=>n(5,l=e))),d(e,mt,(e=>n(6,r=e))),d(e,Ct,(e=>n(7,a=e))),d(e,en,(e=>n(32,s=e))),d(e,fn,(e=>n(33,c=e))),d(e,Je,(e=>n(34,u=e))),d(e,Wt,(e=>n(35,p=e))),d(e,ln,(e=>n(8,f=e))),d(e,rn,(e=>n(36,h=e)));let C,$=!0;function z(e){if($&&"keydown"!==e.type)return;let t=e.target,n=t.classList;(n.contains("closing-x")||t.closest(".closing-x")||!t.closest(".media-options-container")&&!n.contains("media-options-container"))&&m(nn,o=!1,o)}function T(e){$&&"keydown"!==e.type||(m(rn,h=k,h),m(ln,f=!0,f),m(nn,o=!1,o))}function L(e){$&&"keydown"!==e.type||"string"==typeof b&&""!==b&&window.open(b,"_blank")}async function A(e){$&&"keydown"!==e.type||"string"==typeof y&&""!==y&&"string"==typeof x&&""!==x&&window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(y+" "+x)}`,"_blank")}function S(e){if((!$||"keydown"===e.type)&&g){if(w&&!$n(w,g))if(u)try{"string"==typeof w&&JSBridge.copyToClipBoard(w),Be((()=>{"string"==typeof g&&JSBridge.copyToClipBoard(g)}),1e3)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(w),Be((()=>{navigator?.clipboard?.writeText?.(g)}),1e3);else if(u)try{"string"==typeof g&&JSBridge.copyToClipBoard(g)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(g);m(nn,o=!1,o)}}async function N(e){if($&&"keydown"!==e.type)return;if(!1!==p||!a)return void(u?De("Please wait a moment"):m(fn,c="Please wait a moment",c));let t=g?`<span style="color:hsl(var(--ac-color));">${g}</span>`:"this entry";a[v]?await s(`Do you want to unhide ${t} in your recommendation list?`)&&(Xn({showId:v}),delete a?.[v],Ct.set(a),m(nn,o=!1,o)):await s(`Do you want to hide ${t} in your recommendation list?`)&&(Xn({removeId:v}),m(Ct,a[v]=1,a),m(nn,o=!1,o))}function P(){let e=r?.[l]?.mediaList?.[i??-1];if(e){n(0,g=e?.shownTitle),n(1,w=e?.copiedTitle);let t,o={};y=null;try{for(let n of["english","romaji","native"]){let i,l=e?.title?.[n]?.trim?.();"string"!=typeof l||""===l||o[i=l.toLowerCase()]||(o[i]=!0,y?(t=!0,y+=" | "+l):y=l)}}catch{}t&&"string"==typeof y&&""!==y&&(y=`(${y})`),n(2,v=e.id),b=e.mediaUrl;let l=e?.format;x="Manga"===l||"One Shot"===l||"Novel"===l?l:"Anime",k=i}else m(nn,o=!1,o)}nn.subscribe((e=>{!0===e?(window.addEventListener("keydown",M),$=!0,C=Be((()=>{$=!1}),100),window.addHistory?.()):(window.removeEventListener("keydown",M),C?.(),$=!1)})),mt.subscribe((()=>{o&&P()})),Ct.subscribe((()=>{o&&P()}));return[g,w,v,E,o,l,r,a,f,function(e){if($)return;let t=e.target,n=t.classList;t.closest(".media-options-container")||n.contains("media-options-container")||m(nn,o=!1,o)},z,T,L,A,S,N,P,e=>"Enter"===e.key&&z(e),e=>"Enter"===e.key&&T(e),function(e){K[e?"unshift":"push"]((()=>{E=e,n(3,E)}))},e=>"Enter"===e.key&&L(e),e=>"Enter"===e.key&&A(e),e=>"Enter"===e.key&&S(e),e=>"Enter"===e.key&&N(e),e=>"Enter"===e.key&&z(e)]}function jl(e,t,n){const o=e.slice();return o[39]=t[n],o}function Hl(e,t){let n,o,r,a,s,c,u,d,m=(t[39].trim()||"")+"";function f(...e){return t[17](t[39],...e)}return{key:e,first:null,c(){n=z("span"),o=L(m),r=A(),I(n,"tabindex",a=t[10]||t[7]?"":"0"),I(n,"data-category",s=t[39]),I(n,"class",c=p("category"+(t[39]===t[8]?" selected":""))+" svelte-yiaup7"),I(n,"role","button"),I(n,"aria-label","category"),this.first=n},m(e,i){M(e,n,i),x(n,o),x(n,r),u||(d=[N(n,"click",(function(){l(t[12](t[39]))&&t[12](t[39]).apply(this,arguments)})),N(n,"keyup",f)],u=!0)},p(e,i){t=e,2&i[0]&&m!==(m=(t[39].trim()||"")+"")&&F(o,m),1152&i[0]&&a!==(a=t[10]||t[7]?"":"0")&&I(n,"tabindex",a),2&i[0]&&s!==(s=t[39])&&I(n,"data-category",s),258&i[0]&&c!==(c=p("category"+(t[39]===t[8]?" selected":""))+" svelte-yiaup7")&&I(n,"class",c)},d(e){e&&C(n),u=!1,i(d)}}}function Ol(t){let n,o,l,r,a,s,c,u,d,m,f,h,g=[],y=new Map,w=t[1]||[];const v=e=>e[39]||{};for(let e=0;e<w.length;e+=1){let n=jl(t,w,e),o=v(n);y.set(o,g[e]=Hl(o,n))}return{c(){n=z("div"),o=z("nav"),l=z("div"),r=A();for(let e=0;e<g.length;e+=1)g[e].c();s=A(),c=z("div"),u=A(),d=z("div"),I(l,"class","selected-category-indicator svelte-yiaup7"),U(l,"--width",t[3]+"px"),U(l,"--translateY",t[4]+"px"),I(o,"id","categories-nav"),I(o,"class",a=p("nav"+(t[9]?" hasWheel":"")+(t[13]&&t[0]?" android":""))+" svelte-yiaup7"),I(o,"aria-label","Select a category"),I(c,"class","prev-category svelte-yiaup7"),I(c,"aria-label","Select Previous Category"),I(d,"class","next-category svelte-yiaup7"),I(d,"aria-label","Select Next Category"),I(n,"class",m=p("bottom-nav-container"+(t[6]?"":" hide")+(t[5]?" immediate":"")+(t[0]?" android":""))+" svelte-yiaup7")},m(e,i){M(e,n,i),x(n,o),x(o,l),x(o,r);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(o,null);t[18](o),x(n,s),x(n,c),x(n,u),x(n,d),f||(h=[N(o,"wheel",t[19]),N(c,"click",t[20]),N(c,"keyup",t[21]),N(d,"click",t[22]),N(d,"keyup",t[23])],f=!0)},p(e,t){8&t[0]&&U(l,"--width",e[3]+"px"),16&t[0]&&U(l,"--translateY",e[4]+"px"),5506&t[0]&&(w=e[1]||[],g=Ee(g,t,v,1,e,w,y,o,xe,Hl,null,jl)),513&t[0]&&a!==(a=p("nav"+(e[9]?" hasWheel":"")+(e[13]&&e[0]?" android":""))+" svelte-yiaup7")&&I(o,"class",a),97&t[0]&&m!==(m=p("bottom-nav-container"+(e[6]?"":" hide")+(e[5]?" immediate":"")+(e[0]?" android":""))+" svelte-yiaup7")&&I(n,"class",m)},i:e,o:e,d(e){e&&C(n);for(let e=0;e<g.length;e+=1)g[e].d();t[18](null),f=!1,i(h)}}}function Vl(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y;d(e,Je,(e=>n(0,o=e))),d(e,yt,(e=>n(1,i=e))),d(e,fn,(e=>n(30,l=e))),d(e,ln,(e=>n(7,r=e))),d(e,Mt,(e=>n(31,a=e))),d(e,Jt,(e=>n(16,s=e))),d(e,un,(e=>n(32,c=e))),d(e,dn,(e=>n(33,u=e))),d(e,wt,(e=>n(8,p=e))),d(e,Zt,(e=>n(34,f=e))),d(e,tt,(e=>n(9,h=e))),d(e,tn,(e=>n(10,g=e)));let w,v,b,x,k,E,M,C,$,z=!0;function T(e,t=!0){if(!e?.target?.classList?.contains("category")){if(!i?.length)return I();clearTimeout(k),k=setTimeout((()=>{let e=i.indexOf(p);if(e<0)return;let n=e+(t?1:-1);if(n>=0&&i?.length>n){let e=i?.[n];e&&L(e)}}),8)}}function L(e){if(!i?.length)return I();clearTimeout(E),async function(e){let t,n;M===e?(M=e,$?(t=!0,$=!1):($=!0,C=setTimeout((()=>{$=!1}),500))):(clearTimeout(C),M===e&&($=!0,C=setTimeout((()=>{$=!1}),500)),M=e);n=c&&s?-9999:s?74:57;const i=document.documentElement;!o&&matchMedia("(hover:hover)").matches||(i.style.overflow="hidden",i.style.overflow="");t?s?a&&m(Mt,a.scrollLeft=0,a):window.scrollY=i.scrollTop=n:$&&(s?a&&a.scrollTo({behavior:"smooth",left:0}):window.scrollTo({top:n,behavior:"smooth"}));r&&(w.scrollTop=0)}(e),e!==p&&(m(wt,p=e,p),m(dn,u=!1,u))}st.subscribe((e=>{n(15,v=e>=document?.documentElement?.scrollHeight-window.innerHeight-1&&f?.[p]),v&&n(14,z=!0)})),window.scrollToSelectedCategory=async function(e=p){await te();let t=Array.from(y?.children||[]).find((t=>t?.dataset?.category===e&&t?.classList?.contains?.("category")));if(t instanceof Element){let e=(e=>{try{const t=window.getComputedStyle(e);let n=e.getBoundingClientRect().width;return n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n}catch{}})(t)||26;n(3,b=e),n(4,x=t?.offsetLeft+parseFloat(window.getComputedStyle?.(t,null)?.paddingLeft)+(e-b)/2);let o=t?.offsetLeft-y?.clientWidth/2+t?.offsetWidth/2;y?.scrollTo?.({left:o,behavior:"smooth"})}else n(4,x=n(3,b=-99))};let A,S,N,P=Nn("nonScrollSnapFilters")??!0;function I(){o?De("Please wait a moment"):m(fn,l="Please wait a moment",l)}if(window.showCategoriesNav=(e,t=!1)=>{t?(n(5,A=!0),n(14,z=e),S?.(),S=Be((()=>{n(5,A=!1)}),200)):(S?.(),n(5,A=!1),n(14,z=e))},o){let F,B,U,D,R;function j(){F=null}window.addEventListener("touchstart",(e=>{if(null!=F||(e?.target?.classList?.contains?.("category")??1))return;let t=e?.target,n=t,o=!0;for(;n&&n!==document.body;){if(n.scrollHeight>n.clientHeight){o=!1;break}n=n?.parentElement}if(!o)return;let i=e?.touches?.[0];B=i?.clientY,D=i?.clientX,F=i?.identifier}),{passive:!0}),window.addEventListener("touchmove",(e=>{if(null==F||null==B||!o)return;let t=Array.from(e.changedTouches)?.find((e=>e.identifier===F));if(U=t?.clientY,R=t?.clientX,"number"==typeof U&&"number"==typeof R){let e=R-D,t=U-B;0!==t&&Math.abs(t)>Math.abs(e)&&n(14,z=t>0)}}),{passive:!0}),window.addEventListener("touchend",j,{passive:!0}),window.addEventListener("touchcancel",j,{passive:!0})}W((()=>{n(2,y=y||document.getElementById("categories-nav")),w=document?.getElementById("popup-container")}));return e.$$.update=()=>{65536&e.$$.dirty[0]&&s&&n(14,z=!0),49155&e.$$.dirty[0]&&n(6,N=!!i?.length&&(!o||z||v))},[o,i,y,b,x,A,N,r,p,h,g,T,L,P,z,v,s,(e,t)=>{"Enter"===t.key&&L(e)},function(e){K[e?"unshift":"push"]((()=>{y=e,n(2,y)}))},e=>{!function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"nav")},e=>T(e,!1),e=>{"Enter"===e.key&&T(e,!1)},e=>T(e,!0),e=>{"Enter"===e.key&&T(!0)}]}function ql(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","m144 7-2 2-1 1c-2 0-9 7-9 9l-2 2-1 1-1 2-3 5c-1 3-3 4-4 5l-1 3-1 1v1l-1 1-15 1-12 1c-11 1-12 1-18-4l-7-6-6-6-4-2s-2-1-2-3-3-2-3-2l-2-2-2-1-1-1-2-1-2-1-8-4c-3 0-7 5-6 6l-1 1v24a350 350 0 0 0 7 36c0 2-1 3-2 3v2l-1 1-3 7-1 2-3 9a61 61 0 0 0 4 30v2l2 3 3 7 1 1v1l1 2 1 1 1 1c0 1 0 2 2 3l2 4 2 2 2 2 6 7 5 7 1 1 1 1v3l4 10 1 14a75 75 0 0 0 2 19l1 4v2l2 3v2a205 205 0 0 0 15 29l1 1v1a128 128 0 0 1 11 22v1l1 1 1 1v3l1 2 2 5a480 480 0 0 1-2 93c0 1-4 6-6 6l-11 11-1 4c-2 3 0 7 8 14 1 1 2 2 1 3l1 3v1l1 2 1 2 3 3h3l1 1 4 1 2 1c0 1 16 2 19 1l2-1h2l7-5 1-1c2 0 11-10 12-13l1-2 1-1c-1-3 0-3 8-2l5 1 2 1-1 3-1 9 2 3 1 2 1 2 3 3 2 1 2 1 4 2 14 1a232 232 0 0 0 56-9l4-1 4-1h8l3 2h1l2 1a93 93 0 0 0 30-1l6-3 4-1 1-1 1-1h2l1-1 1-1 3-1 4-2h3l1-1h2l1-1h2l2-1h2l2-1h2l2-1 3-1h6c12-2 16-2 30-2a174 174 0 0 1 45 5l2 1h3l5 3 5 2 1 1 3 3 3 3 1 1 1 4c0 3-1 4-4 7l-4 3-1 1-8 4-5 2-8 2-5 2h-1l-2 1h-2l-3 1-1 1h-2l-3 1h-4l-10 2c-2 1-11 9-11 11-1 5 0 8 2 10l4 3 2 1 16 1 18-1 5-1 2-1h2l2-1h2l2-1h2l1-1h2l1-1 2-1h2l3-1 3-2h2l1-1 1-1c1 1 13-5 13-6h1l1-1 2-1 1-1h1l2-1 2-2 2-1 1-2c2 0 9-7 9-9l2-1 1-2v-1l1-1v-1l1-1v-1l1-2v-2c1-2 1-8-1-12v-1l-1-1-1-1c0-2-11-14-13-14l-2-2-2-2-2-1-5-3c-3-1-4-3-5-4l-3-1-1-1h-1l-1-1c0-1-4-3-5-2l-1-1h-1l-1-1-1-1-4-1-3-1-1-1h-1l-1-1h-2c-1 1-1 0-1-1h-2l-1-1-1-1h-2l-2-1h-2l-4-1-6-2-6-1-4-1-3-1-12-1a252 252 0 0 0-76 1v-2l1-3 1-5 1-2v-1l1-3 1-4 2-11 1-6c4-24 4-56 1-78l-1-5-1-3-1-7-1-2-1-3-1-5v-1l-1-1v-2l-1-1v-2l-1-2-1-3-1-2-1-3-1-1v-1l-1-1v-1l-1-1-2-4-3-5-1-1-1-2-1-1-1-2-1-1-1-3-2-1-9-11a68 68 0 0 0-15-12l-4-3-1-1-1-1-2-1-2-2-3-1-5-2-1-1h-1l-1-1-1-1-4-1-3-1-2-2h-3l-1-1h-2l-1-1h-2l-1-1h-2l-1-1-3-1h-3l-1-2-2-1-1-1-2-1h-1l-2-2-2-1-2-2c-1 0-10-9-10-11l-2-2-1-1-1-3a66 66 0 0 0-16-15l-1-1-2-1-1-1-3-1v-2l-1-1v-2l-1-1-1-2v-2l-2-3v-3l-1-1-1-1-4-9-2-2c-1-2-1-4 1-12a233 233 0 0 0 1-52v-2l-2-5c-2-3-3-3-6-3h-7z"),I(o,"class","svelte-nxebcy"),I(n,"viewBox","0 0 500 500"),I(n,"class","logo-icon svelte-nxebcy"),I(n,"role","button"),I(n,"aria-label","Open Menu"),I(n,"tabindex",l=e[0]&&e[10]>750?"-1":"0"),I(t,"class","logo-icon-container svelte-nxebcy")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(n,"keyup",e[28]),N(t,"pointerdown",e[15]),N(t,"pointerup",e[16]),N(t,"pointercancel",e[16])],r=!0)},p(e,t){1025&t[0]&&l!==(l=e[0]&&e[10]>750?"-1":"0")&&I(n,"tabindex",l)},d(e){e&&C(t),r=!1,i(a)}}}function _l(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M75 75 41 41C26 26 0 37 0 58v110c0 13 11 24 24 24h110c21 0 32-26 17-41l-31-31a191 191 0 0 1 328 136 192 192 0 0 1-302 158 32 32 0 0 0-36 52A256 256 0 1 0 75 75zm181 53c-13 0-24 11-24 24v104c0 6 3 13 7 17l72 72c9 9 25 9 34 0s9-25 0-34l-65-65v-94c0-13-11-24-24-24z"),I(o,"class","svelte-nxebcy"),I(n,"viewBox","0 0 512 512"),I(n,"class","media-release-icon svelte-nxebcy"),I(n,"role","button"),I(n,"aria-label","Media Releases"),I(n,"tabindex",l=e[0]&&e[10]>750?"-1":"0"),I(t,"class","media-release-icon-container svelte-nxebcy")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(n,"keyup",e[27]),N(t,"click",e[17]),N(t,"pointerdown",e[15]),N(t,"pointerup",e[16]),N(t,"pointercancel",e[16])],r=!0)},p(e,t){1025&t[0]&&l!==(l=e[0]&&e[10]>750?"-1":"0")&&I(n,"tabindex",l)},d(e){e&&C(t),r=!1,i(a)}}}function Yl(t){let n,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,P,U,D=(t[2]||"Your Anilist Username")+"";function R(e,t){return e[9]?_l:ql}let j=R(t),H=j(t);return{c(){n=z("header"),o=z("nav"),l=z("div"),r=T("svg"),a=T("path"),s=A(),c=T("svg"),u=T("path"),d=A(),m=z("search"),f=z("label"),f.textContent="Anilist Username",h=A(),g=z("input"),v=A(),b=z("div"),k=L(D),E=A(),H.c(),I(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(a,"class","svelte-nxebcy"),I(r,"class","closing-x svelte-nxebcy"),I(r,"viewBox","0 0 24 24"),I(r,"tabindex","0"),I(r,"role","button"),I(r,"aria-label","Close Fixed Popup Element"),I(u,"d","M 30.047 225.832 C 17.045 238.409 17.045 259.255 30.047 271.832 L 190.047 431.832 C 207.752 449.537 237.985 441.437 244.465 417.251 C 247.473 406.026 244.264 394.049 236.047 385.832 L 130.047 280.832 L 437.047 280.832 C 461.68 280.832 477.076 254.165 464.76 232.832 C 459.043 222.931 448.479 216.832 437.047 216.832 L 130.047 216.832 L 236.047 111.832 C 253.752 94.127 245.651 63.894 221.465 57.413 C 210.241 54.406 198.264 57.615 190.047 65.832 L 30.047 225.832 Z"),I(u,"class","svelte-nxebcy"),I(c,"class","go-back svelte-nxebcy"),I(c,"tabindex","0"),I(c,"viewBox","0 0 500 500"),I(c,"role","button"),I(c,"aria-label","Cancel Username Search"),I(l,"class","go-back-container svelte-nxebcy"),I(f,"class","disable-interaction svelte-nxebcy"),I(f,"for","username-input"),I(g,"id","username-input"),I(g,"type","search"),I(g,"tabindex",y=t[0]&&t[10]>750?"-1":"0"),I(g,"enterkeyhint","search"),I(g,"autocomplete","off"),I(g,"placeholder","Your Anilist Username"),I(g,"class",w=p(t[9]?"android":"")+" svelte-nxebcy"),g.disabled=t[0],I(b,"class","username-text svelte-nxebcy"),I(m,"class","search-username svelte-nxebcy"),I(m,"aria-label","anilist username"),I(o,"id","nav"),I(o,"class",$=p("nav "+(t[6]?" popup-visible":"")+(t[5]===document?.activeElement?" input-focused":""))+" svelte-nxebcy"),I(n,"id","nav-container"),I(n,"class",S=p("nav-container"+(t[7]?" menu-visible":"")+(t[7]||t[6]||!t[8]&&(t[0]||t[1])?" delayed-full-screen-popup":""))+" svelte-nxebcy")},m(e,i){M(e,n,i),x(n,o),x(o,l),x(l,r),x(r,a),x(l,s),x(l,c),x(c,u),x(o,d),x(o,m),x(m,f),x(m,h),x(m,g),B(g,t[2]),t[24](g),x(m,v),x(m,b),x(b,k),x(o,E),H.m(o,null),t[29](o),t[30](n),P||(U=[N(r,"keyup",t[20]),N(c,"keyup",t[21]),N(l,"click",t[14]),N(g,"keyup",t[22]),N(g,"focusin",t[18]),N(g,"focusout",t[18]),N(g,"input",t[23]),N(b,"click",t[25]),N(b,"keyup",t[26]),N(n,"keyup",t[31]),N(n,"click",t[12])],P=!0)},p(e,t){1025&t[0]&&y!==(y=e[0]&&e[10]>750?"-1":"0")&&I(g,"tabindex",y),512&t[0]&&w!==(w=p(e[9]?"android":"")+" svelte-nxebcy")&&I(g,"class",w),1&t[0]&&(g.disabled=e[0]),4&t[0]&&g.value!==e[2]&&B(g,e[2]),4&t[0]&&D!==(D=(e[2]||"Your Anilist Username")+"")&&F(k,D),j===(j=R(e))&&H?H.p(e,t):(H.d(1),H=j(e),H&&(H.c(),H.m(o,null))),96&t[0]&&$!==($=p("nav "+(e[6]?" popup-visible":"")+(e[5]===document?.activeElement?" input-focused":""))+" svelte-nxebcy")&&I(o,"class",$),451&t[0]&&S!==(S=p("nav-container"+(e[7]?" menu-visible":"")+(e[7]||e[6]||!e[8]&&(e[0]||e[1])?" delayed-full-screen-popup":""))+" svelte-nxebcy")&&I(n,"class",S)},i:e,o:e,d(e){e&&C(n),t[24](null),H.d(),t[29](null),t[30](null),P=!1,i(U)}}}function Wl(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x;d(e,ln,(e=>n(0,i=e))),d(e,tn,(e=>n(1,l=e))),d(e,dt,(e=>n(38,r=e))),d(e,Je,(e=>n(9,a=e))),d(e,Mt,(e=>n(39,s=e))),d(e,Jt,(e=>n(40,c=e))),d(e,an,(e=>n(41,u=e))),d(e,fn,(e=>n(42,p=e))),d(e,Pt,(e=>n(43,f=e))),d(e,Bt,(e=>n(44,h=e))),d(e,St,(e=>n(45,g=e))),d(e,en,(e=>n(46,y=e))),d(e,Wt,(e=>n(47,w=e))),d(e,Yt,(e=>n(48,v=e))),d(e,qe,(e=>n(49,b=e))),d(e,lt,(e=>n(10,x=e)));let k,E,M,C,$,z,T,L,A,S,N,P="",I=!1;async function F(e,t=!1){if(a&&!0===window[b])return;if(v||!1!==w)return a?De("Please wait a moment"):m(fn,p="Please wait a moment",p),void new Promise((e=>{$={resolve:e}})).then((()=>{F(e,!0)}));let o=e.target,l=o.classList;if("Enter"===e.key||"click"===e.type&&(l.contains("searchBtn")||o?.closest?.(".searchBtn"))){if(!P)return;if(P!==r){if(!1===window.navigator?.onLine)return document?.activeElement!==C&&n(2,P=r||P||""),void(a?De("You are currently offline"):m(fn,p="You are currently offline",p));await y(`Do you${t?" still":""} want to connect to <span style="color:hsl(var(--ac-color));">${P}</span>?`)?(i||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo?.({top:-9999,behavior:"smooth"})),m(St,g="Getting User Entries",g),m(Bt,h=!0,h),In("username"),m(Pt,f[""]=new Date,f),mo({username:P}).then((({newusername:e})=>{n(2,P=e?m(dt,r=e||r||P||"",r):r||P||""),gn.update((e=>!e))})).catch((e=>{document.activeElement!==C&&n(2,P=r||P||""),a?De("Failed to retrieve user data"):m(fn,p="Failed to retrieve user data",p),m(an,u=!0,u),console.error(e)})).finally((()=>{Pn("username",r).catch((()=>In("username")))})),et.update((e=>!e))):t?n(2,P=r||""):(n(2,P=r||P||""),U())}else C?.blur?.(),n(19,I=!1)}}function B(e){if(T)return void(T=!1);let t=e.target,o=t.classList;o.contains("go-back-container")||t.closest(".go-back-container")||(o.contains("search-username")||o.contains("nav")||o.contains("nav-container")||o.contains("logo-icon")||t.closest(".logo-icon")||(l||i)&&t.closest(".search-username"))&&(!I||o.contains("logo-icon")||t.closest(".logo-icon")||(C?.blur?.(),n(19,I=!1),i||l))&&m(tn,l=!l,l)}async function U(){C?.focus?.()}function D(){C===document.activeElement||I?(C?.blur?.(),n(19,I=!1)):l?m(tn,l=!l,l):i&&m(ln,i=!1,i)}async function R(){if(a){"Notification"in window&&"denied"!==window.Notification?.permission&&await(window.Notification?.requestPermission?.());try{JSBridge.showRecentReleases()}catch(e){console.error(e)}}}function j(e){let t=e?.type,a="focusin"===t;a?window.addHistory?.():"focusout"===t&&""===P&&n(2,P=r||""),null!=N&&(a?I:!I)||(N=t??"focusout",S?.(),a?(n(19,I=!0),l||i||Co(E,"layout-change"),S=Be((()=>{Co(M,"input-focused"),$o(E,"layout-change"),N=null}),100)):(l||i||!o||Co(E,"layout-change"),S=Be((()=>{$o(M,"input-focused"),n(19,I=!1),$o(E,"layout-change"),N=null}),100)))}W((()=>{n(3,E=E||document.getElementById("nav-container")),n(4,M=M||document?.getElementById("nav")),n(5,C=C||document?.getElementById("username-input")),k=k||document?.getElementById("popup-container"),dt.subscribe((e=>{n(2,P=e||P||"")})),pt.subscribe((e=>{null!=e&&document?.activeElement!==C&&n(2,P=r||P||"")}))})),Yt.subscribe((e=>{!1!==w||e||$?.resolve?.()})),Wt.subscribe((e=>{!1!==e||v||$?.resolve?.()})),ln.subscribe((e=>{e||l?(n(6,L=e),o&&(e||l)&&(Co(E,"layout-change"),Be((()=>{n(6,L=e),$o(E,"layout-change")}),100))):(I||Co(E,"layout-change"),Be((()=>{n(6,L=e),$o(E,"layout-change")}),100))})),tn.subscribe((e=>{e||i?(n(7,A=e),o&&(e||i)&&(Co(E,"layout-change"),Be((()=>{$o(E,"layout-change")}),100))):(I||Co(E,"layout-change"),Be((()=>{n(7,A=e),$o(E,"layout-change")}),100))})),window.onfocusUsernameInput=j;return e.$$.update=()=>{524291&e.$$.dirty[0]&&n(8,o=!l&&!i&&!I)},[i,l,P,E,M,C,L,A,o,a,x,F,B,U,D,function(){clearTimeout(z),z=setTimeout((()=>{T=!0,i?(k.style.overflow="hidden",k.style.overflow="",k.scroll({top:0,behavior:"smooth"})):c&&s?(m(Mt,s.style.overflow="hidden",s),m(Mt,s.style.overflow="",s),s.scroll({left:0,behavior:"smooth"})):(window.showCategoriesNav?.(!0),document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo({top:-9999,behavior:"smooth"}))}),500)},function(){clearTimeout(z),T&&(z=setTimeout((()=>{T=!1}),50))},R,j,I,e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&F(e),function(){P=this.value,n(2,P)},function(e){K[e?"unshift":"push"]((()=>{C=e,n(5,C)}))},()=>{i||U()},e=>{"Enter"===e.key&&(i||U())},e=>{"Enter"===e.key&&(e.stopPropagation(),R())},e=>{"Enter"===e.key?(e.stopPropagation(),m(tn,l=!l,l)):"Escape"!==e.key&&e.stopPropagation()},function(e){K[e?"unshift":"push"]((()=>{M=e,n(4,M)}))},function(e){K[e?"unshift":"push"]((()=>{E=e,n(3,E)}))},e=>"Enter"===e.key&&B(e)]}const Jl=477;let Kl;async function Gl(){return Kl||(Kl=new Promise((async e=>{try{const t=window.location;if(t.protocol?.includes?.("file"))return e(Jl),void(Kl=null);const n=await fetch(new URL("version.json",t),{cache:"no-cache"}),o=await n.json();return"number"==typeof o&&!isNaN(o)&&isFinite(o)?e(o||Jl):e(Jl),void(Kl=null)}catch{return e(Jl),void(Kl=null)}})),Kl)}function Xl(e){let t,n,o,l,r,a,s,c,u,d,m,h,g,y,w,v,b,k,E,$,L,S,P,F,B,D,R,j,H,O,V,q,_,Y,W,J,K,G,X,Z,Q,ee,te,oe,ie,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Se,Ne,Pe,Ie,Fe,Be,Ue,De,Re,je,He,Oe,Ve,qe,_e,Ye,We,Je,Ke,Ge,Xe,Ze,Qe,et,tt,nt,ot,it,lt=e[10]&&Zl(e),rt=e[10]&&er(e),at=e[10]&&tr(e),st=e[14]&&!e[10]&&(e[3]||e[4]&&"function"==typeof e[4]?.prompt)&&nr(e);return{c(){t=z("div"),n=z("div"),o=z("span"),o.textContent="LIST ACTIONS",l=A(),r=z("div"),a=z("div"),s=T("svg"),c=T("path"),u=A(),d=z("span"),d.textContent="Update Entries",m=A(),h=z("label"),g=z("input"),y=A(),w=z("span"),w.innerHTML='<div class="round-icon svelte-l5mci9"></div>',k=A(),E=z("div"),$=T("svg"),L=T("path"),S=A(),P=z("span"),P.textContent="Show All Hidden Entries",B=A(),D=z("span"),D.textContent="BACKUP AND RESTORE",R=A(),j=z("div"),H=z("div"),O=T("svg"),V=T("path"),q=A(),_=z("span"),_.textContent="Restore Backup",W=A(),J=z("div"),K=T("svg"),G=T("path"),X=A(),Z=z("span"),Z.textContent="Back Up Data",Q=A(),lt&&lt.c(),oe=A(),ie=z("span"),ie.textContent="TOOL CONFIGS",le=A(),re=z("div"),rt&&rt.c(),ae=A(),se=z("div"),ce=T("svg"),ue=T("path"),de=A(),pe=z("span"),pe.textContent="Show Status Updates",me=A(),fe=z("label"),he=z("input"),ge=A(),ve=z("span"),ve.innerHTML='<div class="round-icon svelte-l5mci9"></div>',xe=A(),ke=z("div"),Ee=T("svg"),Me=T("path"),Ce=A(),$e=z("span"),$e.textContent="Show Rate Limit",ze=A(),Te=z("label"),Se=z("input"),Ne=A(),Pe=z("span"),Pe.innerHTML='<div class="round-icon svelte-l5mci9"></div>',Fe=A(),at&&at.c(),Be=A(),Ue=z("span"),Ue.textContent="OTHERS",De=A(),Re=z("div"),st&&st.c(),je=A(),He=z("div"),Oe=T("svg"),Ve=T("path"),qe=A(),_e=z("span"),_e.textContent="Create an AniList Account",We=A(),Je=z("div"),Ke=T("svg"),Ge=T("path"),Xe=A(),Ze=z("span"),Ze.textContent="Notice!",I(o,"class","menu-category svelte-l5mci9"),I(c,"d","M464 224h8c13 0 24-11 24-24V72a24 24 0 0 0-41-17l-42 42a224 224 0 1 0 1 317 32 32 0 0 0-45-45 160 160 0 1 1-1-227l-41 41a24 24 0 0 0 17 41h120z"),I(s,"viewBox","0 0 512 512"),I(s,"class","svelte-l5mci9"),I(d,"class","option-label svelte-l5mci9"),I(g,"type","checkbox"),I(g,"class","switch-toggle svelte-l5mci9"),I(w,"class","slider round svelte-l5mci9"),I(h,"class","switch svelte-l5mci9"),I(h,"tabindex",v=e[15]?"0":"-1"),I(a,"class","option switchable svelte-l5mci9"),I(a,"tabindex",b=e[15]?"0":"-1"),I(a,"role","menuitem"),I(L,"d","M288 32c-81 0-145 37-193 81-46 43-78 95-92 131-4 8-4 16 0 24 14 36 46 88 92 131 48 44 112 81 193 81s146-37 193-81c46-43 78-95 93-131 3-8 3-16 0-24-15-36-47-88-93-131-47-44-112-81-193-81zM144 256a144 144 0 1 1 288 0 144 144 0 1 1-288 0zm144-64a64 64 0 0 1-84 61c-6-2-12 1-12 7l3 21a96 96 0 1 0 97-121c-6 0-9 6-7 12s3 13 3 20z"),I($,"viewBox","0 0 576 512"),I($,"class","svelte-l5mci9"),I(P,"class","option-label svelte-l5mci9"),I(E,"class","option svelte-l5mci9"),I(E,"tabindex",F=e[15]?"0":"-1"),I(E,"role","menuitem"),I(r,"class","menu-options svelte-l5mci9"),I(r,"role","group"),I(r,"aria-label","list actions"),I(D,"class","menu-category svelte-l5mci9"),I(V,"d","M247 9a32 32 0 0 0-46 0L73 137a32 32 0 0 0 46 46l73-74v211a32 32 0 1 0 64 0V109l73 74a32 32 0 0 0 46-46L247 9zM64 352a32 32 0 1 0-64 0v64c0 53 43 96 96 96h256c53 0 96-43 96-96v-64a32 32 0 1 0-64 0v64c0 18-14 32-32 32H96c-18 0-32-14-32-32v-64z"),I(O,"viewBox","0 0 448 512"),I(O,"class","svelte-l5mci9"),U(O,"--width","18px"),I(_,"class","option-label svelte-l5mci9"),I(H,"class","option svelte-l5mci9"),I(H,"tabindex",Y=e[15]?"0":"-1"),I(H,"role","menuitem"),I(G,"d","M288 32a32 32 0 1 0-64 0v243l-73-74a32 32 0 0 0-46 46l128 128c13 12 33 12 46 0l128-128a32 32 0 0 0-46-46l-73 74V32zM64 352c-35 0-64 29-64 64v32c0 35 29 64 64 64h384c35 0 64-29 64-64v-32c0-35-29-64-64-64H347l-46 45a64 64 0 0 1-90 0l-45-45H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"),I(K,"viewBox","0 0 512 512"),I(K,"class","svelte-l5mci9"),I(Z,"class","option-label svelte-l5mci9"),I(J,"class",ee=p("option "+(e[10]?e[9]?"export-switchable":"export":""))+" svelte-l5mci9"),I(J,"tabindex",te=e[15]?"0":"-1"),I(J,"role","menuitem"),I(j,"class","menu-options svelte-l5mci9"),I(j,"role","group"),I(j,"aria-label","backup and restore"),I(ie,"class","menu-category svelte-l5mci9"),I(ue,"d","M272 384c10-32 30-59 49-86l16-22a176 176 0 1 0-289 0c4 8 10 15 15 22 20 27 40 54 49 86h160zm-80 128c44 0 80-36 80-80v-16H112v16c0 44 36 80 80 80zm-80-336c0 9-7 16-16 16s-16-7-16-16c0-62 50-112 112-112 9 0 16 7 16 16s-7 16-16 16c-44 0-80 36-80 80z"),I(ce,"viewBox","0 0 384 512"),I(ce,"class","svelte-l5mci9"),U(ce,"--width","18px"),I(pe,"class","option-label svelte-l5mci9"),I(he,"type","checkbox"),I(he,"class","switch-toggle svelte-l5mci9"),I(ve,"class","slider round svelte-l5mci9"),I(fe,"class","switch svelte-l5mci9"),I(fe,"tabindex",be=e[15]?"0":"-1"),I(se,"class","option switchable svelte-l5mci9"),I(Me,"d","M176 0a32 32 0 1 0 0 64h16v34a208 208 0 1 0 207 93l24-24a32 32 0 0 0-46-46l-21 22c-28-23-63-39-100-45V64h16a32 32 0 1 0 0-64h-96zm72 192v128a24 24 0 1 1-48 0V192a24 24 0 1 1 48 0z"),I(Ee,"viewBox","0 0 448 512"),I(Ee,"class","svelte-l5mci9"),U(Ee,"--width","18px"),I($e,"class","option-label svelte-l5mci9"),I(Se,"type","checkbox"),I(Se,"class","switch-toggle svelte-l5mci9"),I(Pe,"class","slider round svelte-l5mci9"),I(Te,"class","switch svelte-l5mci9"),I(Te,"tabindex",Ie=e[15]?"0":"-1"),I(ke,"class","option switchable svelte-l5mci9"),I(re,"class","menu-options svelte-l5mci9"),I(re,"role","group"),I(re,"aria-label","tool configs"),I(Ue,"class","menu-category svelte-l5mci9"),I(Ve,"d","M96 128a128 128 0 1 1 256 0 128 128 0 1 1-256 0zM0 482c0-98 80-178 178-178h92c98 0 178 80 178 178 0 17-13 30-30 30H30c-17 0-30-13-30-30zm504-170v-64h-64a24 24 0 1 1 0-48h64v-64a24 24 0 1 1 48 0v64h64a24 24 0 1 1 0 48h-64v64a24 24 0 1 1-48 0z"),I(Oe,"viewBox","0 0 640 512"),I(Oe,"class","svelte-l5mci9"),I(_e,"class","option-label svelte-l5mci9"),I(He,"class","option svelte-l5mci9"),I(He,"tabindex",Ye=e[15]?"0":"-1"),I(He,"role","menuitem"),I(Ge,"d","M256 32c14 0 27 8 35 20l216 368a40 40 0 0 1-35 60H40a40 40 0 0 1-34-60L222 52c7-12 20-20 34-20zm0 128c-13 0-24 11-24 24v112a24 24 0 1 0 48 0V184c0-13-11-24-24-24zm32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0z"),I(Ke,"viewBox","0 0 512 512"),I(Ke,"class","svelte-l5mci9"),I(Ze,"class","option-label svelte-l5mci9"),I(Je,"class","option svelte-l5mci9"),I(Je,"tabindex",Qe=e[15]?"0":"-1"),I(Je,"role","menuitem"),I(Re,"class","menu-options svelte-l5mci9"),I(Re,"role","group"),I(Re,"aria-label","other option"),I(n,"class","menu svelte-l5mci9"),I(n,"role","menu"),I(t,"class","fixed-menu-container svelte-l5mci9")},m(i,p){M(i,t,p),x(t,n),x(n,o),x(n,l),x(n,r),x(r,a),x(a,s),x(s,c),x(a,u),x(a,d),x(a,m),x(a,h),x(h,g),g.checked=e[11],x(h,y),x(h,w),x(r,k),x(r,E),x(E,$),x($,L),x(E,S),x(E,P),x(n,B),x(n,D),x(n,R),x(n,j),x(j,H),x(H,O),x(O,V),x(H,q),x(H,_),x(j,W),x(j,J),x(J,K),x(K,G),x(J,X),x(J,Z),x(J,Q),lt&&lt.m(J,null),x(n,oe),x(n,ie),x(n,le),x(n,re),rt&&rt.m(re,null),x(re,ae),x(re,se),x(se,ce),x(ce,ue),x(se,de),x(se,pe),x(se,me),x(se,fe),x(fe,he),he.checked=e[7],x(fe,ge),x(fe,ve),x(re,xe),x(re,ke),x(ke,Ee),x(Ee,Me),x(ke,Ce),x(ke,$e),x(ke,ze),x(ke,Te),x(Te,Se),Se.checked=e[6],x(Te,Ne),x(Te,Pe),x(n,Fe),at&&at.m(n,null),x(n,Be),x(n,Ue),x(n,De),x(n,Re),st&&st.m(Re,null),x(Re,je),x(Re,He),x(He,Oe),x(Oe,Ve),x(He,qe),x(He,_e),x(Re,We),x(Re,Je),x(Je,Ke),x(Ke,Ge),x(Je,Xe),x(Je,Ze),nt=!0,ot||(it=[N(g,"change",e[32]),N(g,"change",e[33]),N(h,"keyup",e[34]),N(a,"click",e[19]),N(a,"keyup",e[35]),N(E,"click",e[22]),N(E,"keyup",e[36]),N(H,"click",e[37]),N(H,"keyup",e[38]),N(J,"click",e[18]),N(J,"keyup",e[43]),N(he,"change",e[47]),N(fe,"keyup",e[48]),N(se,"click",e[49]),N(se,"keyup",cr),N(Se,"change",e[50]),N(Te,"keyup",e[51]),N(ke,"click",e[52]),N(ke,"keyup",ur),N(He,"click",e[23]),N(He,"keyup",e[57]),N(Je,"keyup",e[58]),N(Je,"click",e[24]),N(n,"touchstart",e[28],{passive:!0}),N(n,"touchmove",e[29],{passive:!0}),N(n,"touchend",e[30],{passive:!0}),N(n,"touchcancel",e[31],{passive:!0}),N(n,"scroll",e[27]),f(e[21].call(null,n)),N(t,"click",e[20]),N(t,"keyup",e[59])],ot=!0)},p(t,o){e=t,2048&o[0]&&(g.checked=e[11]),(!nt||32768&o[0]&&v!==(v=e[15]?"0":"-1"))&&I(h,"tabindex",v),(!nt||32768&o[0]&&b!==(b=e[15]?"0":"-1"))&&I(a,"tabindex",b),(!nt||32768&o[0]&&F!==(F=e[15]?"0":"-1"))&&I(E,"tabindex",F),(!nt||32768&o[0]&&Y!==(Y=e[15]?"0":"-1"))&&I(H,"tabindex",Y),e[10]?lt?lt.p(e,o):(lt=Zl(e),lt.c(),lt.m(J,null)):lt&&(lt.d(1),lt=null),(!nt||1536&o[0]&&ee!==(ee=p("option "+(e[10]?e[9]?"export-switchable":"export":""))+" svelte-l5mci9"))&&I(J,"class",ee),(!nt||32768&o[0]&&te!==(te=e[15]?"0":"-1"))&&I(J,"tabindex",te),e[10]?rt?rt.p(e,o):(rt=er(e),rt.c(),rt.m(re,ae)):rt&&(rt.d(1),rt=null),128&o[0]&&(he.checked=e[7]),(!nt||32768&o[0]&&be!==(be=e[15]?"0":"-1"))&&I(fe,"tabindex",be),64&o[0]&&(Se.checked=e[6]),(!nt||32768&o[0]&&Ie!==(Ie=e[15]?"0":"-1"))&&I(Te,"tabindex",Ie),e[10]?at?at.p(e,o):(at=tr(e),at.c(),at.m(n,Be)):at&&(at.d(1),at=null),e[14]&&!e[10]&&(e[3]||e[4]&&"function"==typeof e[4]?.prompt)?st?st.p(e,o):(st=nr(e),st.c(),st.m(Re,je)):st&&(st.d(1),st=null),(!nt||32768&o[0]&&Ye!==(Ye=e[15]?"0":"-1"))&&I(He,"tabindex",Ye),(!nt||32768&o[0]&&Qe!==(Qe=e[15]?"0":"-1"))&&I(Je,"tabindex",Qe)},i(e){nt||(ne((()=>{nt&&(tt&&tt.end(1),et=ye(t,Ae,{duration:200,easing:Le}),et.start())})),nt=!0)},o(e){et&&et.invalidate(),tt=we(t,Ae,{duration:200,easing:Le}),nt=!1},d(e){e&&C(t),lt&&lt.d(),rt&&rt.d(),at&&at.d(),st&&st.d(),e&&tt&&tt.end(),ot=!1,i(it)}}}function Zl(e){let t,n,o,l,r,a,s,c,u=e[9]&&Ql(e);return{c(){t=z("div"),n=T("svg"),o=T("path"),r=A(),u&&u.c(),a=S(),I(o,"d","M89 224 0 376V96c0-35 29-64 64-64h118c17 0 33 7 45 19l26 26c12 12 29 19 46 19h117c35 0 64 29 64 64v32H144c-23 0-44 12-55 32zm27 16c6-10 17-16 28-16h400c12 0 22 6 28 16s5 22 0 32L460 464c-6 10-17 16-28 16H32c-11 0-22-6-28-16s-5-22 0-32l112-192z"),I(n,"viewBox","0 0 576 512"),I(n,"tabindex",l=e[15]?"0":"-1"),I(n,"class","svelte-l5mci9"),I(t,"class","change-folder svelte-l5mci9")},m(i,l){M(i,t,l),x(t,n),x(n,o),M(i,r,l),u&&u.m(i,l),M(i,a,l),s||(c=[N(n,"click",ar),N(n,"keyup",e[39])],s=!0)},p(e,t){32768&t[0]&&l!==(l=e[15]?"0":"-1")&&I(n,"tabindex",l),e[9]?u?u.p(e,t):(u=Ql(e),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(e){e&&C(t),e&&C(r),u&&u.d(e),e&&C(a),s=!1,i(c)}}}function Ql(e){let t,n,o,l,r,a,s;return{c(){t=z("label"),n=z("input"),o=A(),l=z("span"),l.innerHTML='<div class="round-icon svelte-l5mci9"></div>',I(n,"type","checkbox"),I(n,"class","switch-toggle svelte-l5mci9"),I(l,"class","slider round svelte-l5mci9"),I(t,"class","switch svelte-l5mci9"),I(t,"tabindex",r=e[15]?"0":"-1")},m(i,r){M(i,t,r),x(t,n),n.checked=e[8],x(t,o),x(t,l),a||(s=[N(n,"change",e[40]),N(n,"change",e[41]),N(t,"keyup",e[42])],a=!0)},p(e,o){256&o[0]&&(n.checked=e[8]),32768&o[0]&&r!==(r=e[15]?"0":"-1")&&I(t,"tabindex",r)},d(e){e&&C(t),a=!1,i(s)}}}function er(e){let t,n,o,l,r,a,s,c,u,d,p,m,f;return{c(){t=z("div"),n=T("svg"),o=T("path"),l=A(),r=z("span"),r.textContent="Enable Background Updates",a=A(),s=z("label"),c=z("input"),u=A(),d=z("span"),d.innerHTML='<div class="round-icon svelte-l5mci9"></div>',I(o,"d","M309 135c7-6 9-16 6-25l-8-15-3-6-10-14c-6-8-16-10-25-7l-28 9c-10-9-23-16-36-21l-6-29c-2-9-9-17-18-18l-21-1-20 1c-10 1-17 9-19 18l-6 29c-13 5-25 12-36 21l-28-9c-9-3-19-1-25 7L16 89l-3 6-8 15c-3 9-1 19 7 25l22 20a129 129 0 0 0 0 42l-22 20c-8 6-10 16-7 25l8 15 3 6 10 14c5 8 15 10 24 7l29-9c10 9 23 16 36 21l6 29c2 9 9 17 19 18a172 172 0 0 0 40 0c10-1 17-9 19-18l6-29c13-5 25-12 36-21l28 9c9 3 19 1 25-7l10-14 3-6 8-15c3-9 0-19-7-25l-22-20a131 131 0 0 0 0-42l22-20zm-197 41a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm393 325c6 7 16 9 25 6l15-8 6-3 14-10c8-6 10-16 7-25l-9-28c9-10 16-23 21-36l29-6c9-2 17-9 18-19a172 172 0 0 0 0-40c-1-10-9-17-18-19l-29-6c-5-13-12-25-21-36l9-28c3-9 1-19-7-25l-14-10-6-3-15-8c-9-3-19 0-25 7l-20 22a131 131 0 0 0-42 0l-20-22c-6-7-16-10-25-7l-15 8-6 3-14 10c-8 6-10 16-7 25l9 28c-9 11-16 23-21 36l-29 6c-9 2-17 9-18 19a172 172 0 0 0 0 40c1 10 9 17 18 19l29 6c5 13 12 25 21 36l-9 28c-3 9-1 19 7 25l15 10 5 3 15 7c9 4 19 1 25-6l20-22a131 131 0 0 0 42 0l20 22zm-41-197a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"),I(n,"viewBox","0 0 640 512"),I(n,"class","svelte-l5mci9"),U(n,"--width","25px"),I(r,"class","option-label svelte-l5mci9"),I(c,"type","checkbox"),I(c,"class","switch-toggle svelte-l5mci9"),I(d,"class","slider round svelte-l5mci9"),I(s,"class","switch svelte-l5mci9"),I(s,"tabindex",p=e[15]?"0":"-1"),I(t,"class","option switchable svelte-l5mci9")},m(i,p){M(i,t,p),x(t,n),x(n,o),x(t,l),x(t,r),x(t,a),x(t,s),x(s,c),c.checked=e[12],x(s,u),x(s,d),m||(f=[N(c,"change",e[44]),N(s,"keyup",e[45]),N(t,"click",e[46]),N(t,"keyup",sr)],m=!0)},p(e,t){4096&t[0]&&(c.checked=e[12]),32768&t[0]&&p!==(p=e[15]?"0":"-1")&&I(s,"tabindex",p)},d(e){e&&C(t),m=!1,i(f)}}}function tr(e){let t,n,o,l,r,a,s,c,u,d,p,m,f,h,g,y,w,v;return{c(){t=z("span"),t.textContent="TOOL ACTIONS",n=A(),o=z("div"),l=z("div"),r=T("svg"),a=T("path"),s=A(),c=z("span"),c.textContent="Check for Updates",d=A(),p=z("div"),m=T("svg"),f=T("path"),h=A(),g=z("span"),g.textContent="Clear Cache",I(t,"class","menu-category svelte-l5mci9"),I(a,"d","M421 302a24 24 0 1 1 24-24 24 24 0 0 1-24 24m-265 0a24 24 0 1 1 24-24 24 24 0 0 1-24 24m273-145 48-83a10 10 0 1 0-17-10l-49 84a301 301 0 0 0-246 0l-49-83a10 10 0 1 0-17 10l48 83A283 283 0 0 0 0 384h576c-8-98-64-182-147-227"),I(r,"viewBox","0 0 576 512"),I(r,"class","svelte-l5mci9"),I(c,"class","option-label svelte-l5mci9"),I(l,"class","option svelte-l5mci9"),I(l,"tabindex",u=e[15]?"0":"-1"),I(l,"role","menuitem"),I(f,"d","m135 18-7 14H32a32 32 0 1 0 0 64h384a32 32 0 1 0 0-64h-96l-7-14c-6-11-17-18-29-18H164c-12 0-23 7-29 18zm281 110H32l21 339c2 25 23 45 48 45h246c25 0 46-20 48-45l21-339z"),I(m,"viewBox","0 0 448 512"),I(m,"class","svelte-l5mci9"),U(m,"--width","17px"),I(g,"class","option-label svelte-l5mci9"),I(p,"class","option svelte-l5mci9"),I(p,"tabindex",y=e[15]?"0":"-1"),I(p,"role","menuitem"),I(o,"class","menu-options svelte-l5mci9"),I(o,"role","group"),I(o,"aria-label","tool actions")},m(i,u){M(i,t,u),M(i,n,u),M(i,o,u),x(o,l),x(l,r),x(r,a),x(l,s),x(l,c),x(o,d),x(o,p),x(p,m),x(m,f),x(p,h),x(p,g),w||(v=[N(l,"keyup",e[53]),N(l,"click",e[26]),N(p,"keyup",e[54]),N(p,"click",e[25])],w=!0)},p(e,t){32768&t[0]&&u!==(u=e[15]?"0":"-1")&&I(l,"tabindex",u),32768&t[0]&&y!==(y=e[15]?"0":"-1")&&I(p,"tabindex",y)},d(e){e&&C(t),e&&C(n),e&&C(o),w=!1,i(v)}}}function nr(e){let t,n,o,l;function r(e,t){return e[3]?ir:or}let a=r(e),s=a(e);return{c(){t=z("div"),s.c(),I(t,"class","option svelte-l5mci9"),I(t,"tabindex",n=e[15]?"0":"-1"),I(t,"role","menuitem")},m(n,i){M(n,t,i),s.m(t,null),o||(l=[N(t,"click",e[55]),N(t,"keyup",e[56])],o=!0)},p(e,o){a!==(a=r(e))&&(s.d(1),s=a(e),s&&(s.c(),s.m(t,null))),32768&o[0]&&n!==(n=e[15]?"0":"-1")&&I(t,"tabindex",n)},d(e){e&&C(t),s.d(),o=!1,i(l)}}}function or(e){let t,n,o,i;return{c(){t=T("svg"),n=T("path"),o=A(),i=z("span"),i.textContent="Install Web App",I(n,"d","M16 64C16 29 45 0 80 0h224c35 0 64 29 64 64v384c0 35-29 64-64 64H80c-35 0-64-29-64-64V64zm208 384a32 32 0 1 0-64 0 32 32 0 1 0 64 0zm80-384H80v320h224V64z"),I(t,"viewBox","0 0 384 512"),I(t,"class","svelte-l5mci9"),U(t,"--width","18px"),I(i,"class","option-label svelte-l5mci9")},m(e,l){M(e,t,l),x(t,n),M(e,o,l),M(e,i,l)},d(e){e&&C(t),e&&C(o),e&&C(i)}}}function ir(e){let t,n,o,i;return{c(){t=T("svg"),n=T("path"),o=A(),i=z("span"),i.textContent="Install Android App",I(n,"d","M421 302a24 24 0 1 1 24-24 24 24 0 0 1-24 24m-265 0a24 24 0 1 1 24-24 24 24 0 0 1-24 24m273-145 48-83a10 10 0 1 0-17-10l-49 84a301 301 0 0 0-246 0l-49-83a10 10 0 1 0-17 10l48 83A283 283 0 0 0 0 384h576c-8-98-64-182-147-227"),I(t,"viewBox","0 0 576 512"),I(t,"class","svelte-l5mci9"),I(i,"class","option-label svelte-l5mci9")},m(e,l){M(e,t,l),x(t,n),M(e,o,l),M(e,i,l)},d(e){e&&C(t),e&&C(o),e&&C(i)}}}function lr(e){let t,n,o,i,l,r;return{c(){t=z("div"),n=z("div"),n.innerHTML='<svg viewBox="0 0 320 512" class="svelte-l5mci9"><path d="M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"></path></svg>',I(n,"class","go-back-grid svelte-l5mci9"),I(t,"class",o=p("go-back-grid-highlight"+(e[2]?" will-go-back":""))+" svelte-l5mci9")},m(e,o){M(e,t,o),x(t,n),r=!0},p(n,i){e=n,(!r||4&i[0]&&o!==(o=p("go-back-grid-highlight"+(e[2]?" will-go-back":""))+" svelte-l5mci9"))&&I(t,"class",o)},i(e){r||(ne((()=>{r&&(l&&l.end(1),i=ye(t,Ae,{duration:200,easing:Le}),i.start())})),r=!0)},o(e){i&&i.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),r=!1},d(e){e&&C(t),e&&l&&l.end()}}}function rr(e){let t,n,o,i,l,r,a,s=e[15]&&Xl(e),c=e[15]&&e[1]&&lr(e);return{c(){s&&s.c(),t=A(),n=z("input"),o=A(),c&&c.c(),i=S(),I(n,"aria-hidden","true"),I(n,"type","file"),I(n,"accept",".gzip"),U(n,"display","none")},m(u,d){s&&s.m(u,d),M(u,t,d),M(u,n,d),e[60](n),M(u,o,d),c&&c.m(u,d),M(u,i,d),l=!0,r||(a=N(n,"change",e[17]),r=!0)},p(e,n){e[15]?s?(s.p(e,n),32768&n[0]&&fe(s,1)):(s=Xl(e),s.c(),fe(s,1),s.m(t.parentNode,t)):s&&(pe(),he(s,1,1,(()=>{s=null})),me()),e[15]&&e[1]?c?(c.p(e,n),32770&n[0]&&fe(c,1)):(c=lr(e),c.c(),fe(c,1),c.m(i.parentNode,i)):c&&(pe(),he(c,1,1,(()=>{c=null})),me())},i(e){l||(fe(s),fe(c),l=!0)},o(e){he(s),he(c),l=!1},d(l){s&&s.d(l),l&&C(t),l&&C(n),e[60](null),l&&C(o),c&&c.d(l),l&&C(i),r=!1,a()}}}function ar(){try{JSBridge.chooseExportFolder()}catch(e){console.error(e)}}const sr=()=>{},cr=()=>{},ur=()=>{};function dr(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,P,I,F,B,U,D,R,j;async function H(e){!1===k?T instanceof Element?await p("Do you want to import your backup file?")&&(n(0,T.value=null,T),T.click()):a?De("Import feature failed"):m(fn,u="Import feature failed",u):e&&Y()}async function O(e){if(a){const t=e?.target,n=t?.classList;if(n.contains("switch")||t?.closest?.(".switch")||n.contains("change-folder")||t?.closest?.(".change-folder"))return;if(!r)return ar()}if(!1!==k)return Y();await p("Do you want to back up your data?")&&ho({isManual:!0})}async function V(e){if(a&&!0===window[E])return;if(!1===window.navigator?.onLine)return void(a?De("You are currently offline"):m(fn,u="You are currently offline",u));if(!1!==k||C)return Y();const t=e?.target,n=t?.classList;if(!n.contains("switch")&&!t?.closest?.(".switch")&&await p("Do you want to update existing entries?"))if(et.update((e=>!e)),M)so();else{try{await mo({reload:!0})}catch(e){console.error(e)}so()}}function q(e){let t=e.target;t.classList.contains("menu")||t.closest(".menu")||m(tn,y=!y,y)}async function _(){if(!a||!0!==window[E])return!1!==k?Y():void(Cn(b)?a?De("No hidden entries were found"):m(fn,u="No hidden entries were found",u):await p("Do you want to show all your hidden entries?")&&(m(Pt,x[""]=new Date,x),Xn({showId:"all"}),m(Ct,b={},b),et.update((e=>!e))))}function Y(){a?De("Please wait a moment"):m(fn,u="Please wait a moment",u)}async function J(){await p({text:"Do you want to sign up an AniList account?",isImportant:!0})&&window.open("https://anilist.co/signup","_blank")}async function G(){let e=await(navigator?.storage?.persisted?.()),t="granted"===window.Notification?.permission;a?await p({isAlert:!0,title:"Possibility for Future Data Loss",text:`<div id="kanshi-show-notice">You may want to <span style='color:hsl(345deg, 75%, 60%);'>Regularly Back Up</span> your data or <span style='color:hsl(345deg, 75%, 60%);'>Enable Automatic Back Up</span> to prevent future data loss.\n\nCurrently, the storage can be <span style='color:hsl(345deg, 75%, 60%);'>Automatically Cleared by Chrome</span> when your <span style='color:hsl(345deg, 75%, 60%);'>Disk is Nearly Full.</span>\n\n<span ${e?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.navigator?.storage?.persisted?.();await window.navigator?.storage?.persist?.();window.refreshKanshiNotice?.()})()'"}>Persistent Storage Status: ${e?"<span style='color:hsl(185deg, 65%, 50%);'>Enabled</span>":"<span style='color:hsl(345deg, 75%, 60%);'>Disabled</span>"}</span></div>`}):await p({isAlert:!0,title:"Possibility for Future Data Loss",text:`<div id="kanshi-show-notice">You may want to <span style='color:hsl(345deg, 75%, 60%);'>Enable Persistent Storage</span> or <span style='color:hsl(345deg, 75%, 60%);'>Regularly Back Up</span> your data to prevent future data loss. Currently, browsers can <span style='color:hsl(345deg, 75%, 60%);'>Automatically Clear your Data</span> when your <span style='color:hsl(345deg, 75%, 60%);'>Disk is Nearly Full.</span>\n\nPersistent Storage Status: ${e?"<span style='color:hsl(185deg, 65%, 50%);'>Enabled</span>":"<span style='color:hsl(345deg, 75%, 60%);'>Disabled</span>"}\n\nTo enable persistent storage:\n\n<span ${e?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.navigator?.storage?.persisted?.();await window.navigator?.storage?.persist?.();window.refreshKanshiNotice?.()})()'"}>1) Grant permission for <span style="${e?"":"text-decoration: underline;"}${e?"color:hsl(185deg, 65%, 50%)":"color:hsl(345deg, 75%, 60%)"};">Persistent Storage</span></span>.\n2) OR Grant permission for <span ${t?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.Notification?.requestPermission?.();window.refreshKanshiNotice?.()})()'"}><span style="${t?"":"text-decoration: underline;"}${t?"color:hsl(185deg, 65%, 50%)":"color:hsl(345deg, 75%, 60%)"};">Notification</span></span>.\n3) OR Bookmark this Website.</div>`})}function X(){document.getElementById("kanshi-show-notice")&&G()}d(e,Gt,(e=>n(6,o=e))),d(e,Kt,(e=>n(7,i=e))),d(e,Ht,(e=>n(8,l=e))),d(e,jt,(e=>n(9,r=e))),d(e,Je,(e=>n(10,a=e))),d(e,Ut,(e=>n(11,s=e))),d(e,mn,(e=>n(12,c=e))),d(e,fn,(e=>n(13,u=e))),d(e,en,(e=>n(69,p=e))),d(e,Ke,(e=>n(14,f=e))),d(e,st,(e=>n(70,h=e))),d(e,ln,(e=>n(71,g=e))),d(e,tn,(e=>n(15,y=e))),d(e,Xe,(e=>n(72,w=e))),d(e,St,(e=>n(73,v=e))),d(e,Ct,(e=>n(74,b=e))),d(e,Pt,(e=>n(75,x=e))),d(e,Wt,(e=>n(76,k=e))),d(e,qe,(e=>n(77,E=e))),d(e,Bt,(e=>n(78,M=e))),d(e,Yt,(e=>n(79,C=e))),d(e,an,(e=>n(80,$=e))),window.importAndroidUserData=H,window.setExportPathAvailability=async(e=!0)=>{Pn("exportPathIsAvailable",m(jt,r=e,r)).catch((()=>In("exportPathIsAvailable"))).finally((()=>Sn("exportPathIsAvailable",e)))},Kt.subscribe((e=>{"boolean"==typeof e&&Pn("showStatus",e).catch((()=>In("showStatus"))).finally((()=>Sn("showStatus",e)))})),Gt.subscribe((e=>{"boolean"==typeof e&&(!e&&v?.includes?.("Rate Limit:")&&m(St,v=null,v),Pn("showRateLimit",e).catch((()=>In("showRateLimit"))).finally((()=>Sn("showRateLimit",e))))})),mn.subscribe((e=>{if("boolean"==typeof e)try{JSBridge.setKeepAppRunningInBackground(e)}catch(e){console.error(e)}})),window.setKeepAppRunningInBackground=e=>{m(mn,c=e,c)};try{window.navigator?.permissions?.query?.({name:"notifications"})?.then?.((e=>e.onchange=X)),window.navigator?.permissions?.query?.({name:"persistent-storage"})?.then?.((e=>e.onchange=X))}catch(e){}async function Z(){if(a&&await p({text:"Do you want to clear your cache?",isImportant:!0}))try{JSBridge.clearCache()}catch(e){console.error(e)}}async function Q(){if(a){if(!1===window.navigator?.onLine)return void De("You are currently offline");try{"number"==typeof w&&!isNaN(w)&&isFinite(w)||m(Xe,w=await Gl(),w),"number"==typeof w&&!isNaN(w)&&isFinite(w)&&JSBridge.checkAppID(Math.floor(w),!0)}catch(e){console.error(e)}}}window.refreshKanshiNotice=X,tn.subscribe((e=>{null==z&&(z=document.getElementById("nav-container")),e?(h<=0||g?$o(z,"hide"):requestAnimationFrame((()=>{Co(z,"stop-transition"),Co(z,"hide"),requestAnimationFrame((()=>{$o(z,"stop-transition"),$o(z,"hide")}))})),window.addHistory?.()):(!g&&h>0&&Co(z,"hide"),Be((()=>{$o(z,"hide")}),200))})),!a&&f&&(D=/android/i.test(window.navigator?.userAgent||window.navigator?.vendor||window.opera),window.addEventListener("beforeinstallprompt",(e=>{n(4,R=e)})),j=async()=>{if(await p({text:`Do you want to ${D?"install the android application for your device":"add the application to your device"}?`,isImportant:!0})){if(D)return void Ue("https://github.com/u-Kuro/Kanshi-Anime-Recommender/raw/main/Kanshi.apk","Kanshi.apk");if("function"==typeof R?.prompt)try{await R.prompt()}catch{a?De("Something went wrong"):m(fn,u="Something went wrong",u)}else a?De("Something went wrong"):m(fn,u="Something went wrong",u)}}),W((async()=>{"boolean"==typeof window.keepAppRunningInBackground&&"boolean"!=typeof c&&m(mn,c=window.keepAppRunningInBackground,c),m(Ut,s=s??await An("autoUpdate"),s),null==s&&Pn("autoUpdate",m(Ut,s=!0,s)).catch((()=>In("autoUpdate"))).finally((()=>Sn("autoUpdate",!0))),a&&(m(jt,r=r??await An("exportPathIsAvailable"),r),null==r&&Pn("exportPathIsAvailable",m(jt,r=!1,r)).catch((()=>In("exportPathIsAvailable"))).finally((()=>Sn("exportPathIsAvailable",!1))),m(Ht,l=l??await An("autoExport"),l),null==l&&Pn("autoExport",m(Ht,l=!1,l)).catch((()=>In("autoExport"))).finally((()=>Sn("autoExport",!1)))),m(Kt,i=i??await An("showStatus"),i),null==i&&Pn("showStatus",m(Kt,i=!0,i)).catch((()=>In("showStatus"))).finally((()=>Sn("showStatus",!0))),m(Gt,o=o??await An("showRateLimit"),o),null==o&&Pn("showRateLimit",m(Gt,o=!0,o)).catch((()=>In("showRateLimit"))).finally((()=>Sn("showRateLimit",!0)))}));return[T,A,U,D,R,j,o,i,l,r,a,s,c,u,f,y,H,async function(){if(a&&!0===window[E])return;if(!(T instanceof Element))return void(a?De("Failed to capture the backup file"):m(fn,u="Failed to capture the backup file",u));let e=T.files?.[0];if(e){let t=e.name,o=t?`named <span style="color:hsl(var(--ac-color));">${t}</span> `:"";await p({text:`File ${o}was found, do you want to import the file?`,isPersistent:!0})?(g||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo?.({top:-9999,behavior:"smooth"})),m(Pt,x[""]=new Date,x),yo({importedFile:e}).catch((()=>{m(an,$=!0,$)})).finally((()=>{T instanceof Element&&n(0,T.value=null,T)})),et.update((e=>!e))):T instanceof Element&&n(0,T.value=null,T)}else T instanceof Element&&n(0,T.value=null,T)},O,V,q,async function(e){await te(),L=e||L,L instanceof Element?L?.scrollHeight>L?.clientHeight?Co(L,"scrollable"):$o(L,"scrollable"):Co(L,"scrollable")},_,J,G,Z,Q,function(){let e=this;e instanceof Element||(e=menuContainer),S=null,n(2,U=N=n(1,A=!1))},function(e){P=e.touches[0].clientX,F=e.touches[0].clientY,S=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="menu"!==t.id;break}t=t.parentElement}n||(N=!0)},function(e){if(N){N=!1,I=e.touches[0].clientX,B=e.touches[0].clientY;const t=I-P,o=B-F;Math.abs(t)>Math.abs(o)&&t>0&&n(1,A=!0)}else if(A){I=e.touches[0].clientX;n(2,U=I-P>48)}},function(e){if(A){if(I=Array.from(e.changedTouches)?.find((e=>e.identifier===S))?.clientX,"number"==typeof I){A&&I-P>=48&&m(tn,y=!1,y)}S=null,n(2,U=N=n(1,A=!1))}else S=null,n(2,U=N=n(1,A=!1))},function(){S=null,n(2,U=N=n(1,A=!1))},function(){s=this.checked,Ut.set(s)},()=>{const e=(s?"Enabled":"Disabled")+" automatic update";a?De(e):m(fn,u=e,u)},e=>{if("Enter"===e.key){m(Ut,s=!s,s);const e=(s?"Enabled":"Disabled")+" automatic update";a?De(e):m(fn,u=e,u)}},e=>"Enter"===e.key&&V(e),e=>"Enter"===e.key&&_(),()=>H(!0),e=>"Enter"===e.key&&H(!0),e=>"Enter"===e.key&&ar(),function(){l=this.checked,Ht.set(l)},()=>{const e=(l?"Enabled":"Disabled")+" automatic back up";a?De(e):m(fn,u=e,u)},e=>{if("Enter"===e.key){m(Ht,l=!l,l);const e=(l?"Enabled":"Disabled")+" automatic back up";a?De(e):m(fn,u=e,u)}},e=>"Enter"===e.key&&O(e),function(){c=this.checked,mn.set(c)},e=>{"Enter"===e.key&&m(mn,c=!c,c)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(mn,c=!c,c)},function(){i=this.checked,Kt.set(i)},e=>{"Enter"===e.key&&m(Kt,i=!i,i)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(Kt,i=!i,i)},function(){o=this.checked,Gt.set(o)},e=>{"Enter"===e.key&&m(Gt,o=!o,o)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(Gt,o=!o,o)},e=>"Enter"===e.key&&Q(),e=>"Enter"===e.key&&Z(),()=>j?.(),e=>"Enter"===e.key&&j?.(),e=>"Enter"===e.key&&J(),e=>"Enter"===e.key&&G(),e=>"Enter"===e.key&&q(e),function(e){K[e?"unshift":"push"]((()=>{T=e,n(0,T)}))}]}function pr(e,t,n){const o=e.slice();return o[167]=t[n],o}function mr(e,t,n){const o=e.slice();o[170]=t[n].filterType,o[171]=t[n].optionName,o[172]=t[n].optionCategory,o[173]=t[n].status,o[174]=t[n].optionValue,o[178]=n;const i="Tag"===o[172]&&"All"!==o[171];o[175]=i;const l="Tag Category"===o[172]&&"All"!==o[171];return o[176]=l,o}function fr(e,t,n){const o=e.slice();return o[181]=t[n],o}function hr(e,t,n){const o=e.slice();o[184]=t[n];const i=o[184]===o[2];o[185]=i;const l=o[11][o[184]]?.bool;o[186]=l;const r=o[11][o[184]]?.number;return o[187]=r,o}function gr(e,t,n){const o=e.slice();return o[190]=t[n].name,o[191]=t[n].defaultValue,o[192]=t[n].maxValue,o[193]=t[n].minValue,o}function yr(e){const t=e.slice(),n=t[184]+t[190];t[196]=n;const o="Media Filter"===t[184]?t[0]:"Algorithm Filter"===t[184]?t[10]:"Content Caution"===t[184]?t[9]:[];return t[197]=o,t}function wr(e,t,n){const o=e.slice();return o[198]=t[n],o}function vr(e){const t=e.slice(),n=t[184]+t[198];return t[201]=n,t}function br(e,t,n){const o=e.slice();o[204]=t[n];const i=o[184]+"_"+o[204];o[205]=i;const l=o[185]&&o[204]===o[22];return o[206]=l,o}function xr(e,t,n){const o=e.slice();return o[171]=t[n],o[214]=n,o}function kr(e){const t=e.slice(),n=t[197]?.find?.((function(...n){return e[116](t[171],t[204],...n)}))?.status;return t[173]=n,t}function Er(e){const t=e.slice(),n="Country Of Origin"===t[204];t[209]=n;const o=t[17][t[205]]?.trim?.().replace(/[\uFF01-\uFF60\uFFE0-\uFFE6\u3000]/g,(e=>"　"===e?"":String.fromCharCode(e.charCodeAt(0)-65248))).normalize("NFD").replace(/[^a-zA-Z0-9\p{Lo}]/gu,"").toLowerCase();t[210]=o;const i=t[210]?t[49]?.[t[204]]?.filter?.((function(...n){return e[115](t[210],...n)})):t[49]?.[t[204]];return t[211]=i,t}function Mr(e){const t=e.slice(),n="Algorithm Filter"===t[184];t[202]=n;const o=t[1][t[184]]||[];return t[203]=o,t}function Cr(e,t,n){const o=e.slice();return o[184]=t[n],o}function $r(e,t,n){const o=e.slice();return o[217]=t[n],o}function zr(e){let t,n,o,i,l=e[41]&&Tr(e);return{c(){t=z("div"),l&&l.c(),I(t,"class",n=p("options-wrap "+(e[3]?"":"display-none hide"))+" svelte-9ebu9g")},m(n,r){M(n,t,r),l&&l.m(t,null),o||(i=N(t,"touchend",e[61],{passive:!0}),o=!0)},p(e,o){e[41]?l?l.p(e,o):(l=Tr(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),8&o[0]&&n!==(n=p("options-wrap "+(e[3]?"":"display-none hide"))+" svelte-9ebu9g")&&I(t,"class",n)},d(e){e&&C(t),l&&l.d(),o=!1,i()}}}function Tr(e){let t,n,o,l,r,a,s,c,u,d,m,f,h=[],g=new Map,y=e[42]||[];const w=e=>e[217]||{};for(let t=0;t<y.length;t+=1){let n=$r(e,y,t),o=w(n);g.set(o,h[t]=Lr(o,n))}return{c(){t=z("div"),n=z("div"),o=z("div"),o.textContent="Category",l=A(),r=T("svg"),a=T("path"),c=A(),u=z("div");for(let e=0;e<h.length;e+=1)h[e].c();I(o,"class","filter-title svelte-9ebu9g"),I(a,"fill","#fff"),I(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(a,"class","svelte-9ebu9g"),I(r,"viewBox","0 0 24 24"),I(r,"class","closing-x svelte-9ebu9g"),I(r,"tabindex",s=!e[46]&&!e[44]&&e[3]&&e[39]<=425?"0":"-1"),I(n,"class","header svelte-9ebu9g"),I(u,"class","options svelte-9ebu9g"),I(t,"class",d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-9ebu9g")},m(i,s){M(i,t,s),x(t,n),x(n,o),x(n,l),x(n,r),x(r,a),x(t,c),x(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);m||(f=[N(r,"keyup",e[89]),N(r,"click",e[72])],m=!0)},p(e,n){8&n[0]|41216&n[1]&&s!==(s=!e[46]&&!e[44]&&e[3]&&e[39]<=425?"0":"-1")&&I(r,"tabindex",s),2048&n[1]|2048&n[2]&&(y=e[42]||[],h=Ee(h,n,w,1,e,y,g,u,xe,Lr,null,$r)),8&n[0]&&d!==(d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-9ebu9g")&&I(t,"class",d)},d(e){e&&C(t);for(let e=0;e<h.length;e+=1)h[e].d();m=!1,i(f)}}}function Lr(e,t){let n,o,l,r,a,s,c=(t[217].trim()||"")+"";function u(){return t[90](t[217])}function d(...e){return t[91](t[217],...e)}return{key:e,first:null,c(){n=z("div"),o=z("h3"),l=L(c),r=A(),I(o,"class","svelte-9ebu9g"),I(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,o),x(o,l),x(n,r),a||(s=[N(n,"click",u),N(n,"keyup",d)],a=!0)},p(e,n){t=e,2048&n[1]&&c!==(c=(t[217].trim()||"")+"")&&F(l,c)},d(e){e&&C(n),a=!1,i(s)}}}function Ar(e){let t,n,o,l,r,a,s,c,u,d,m,f=e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]&&Sr(e);return{c(){f&&f.c(),t=A(),n=z("div"),o=T("svg"),l=T("path"),I(l,"d",r=e[25]?"m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z":"M472 22a56 56 0 0 0-80 0l-30 30 98 98 30-30c22-22 22-58 0-80l-18-18zM172 242c-6 6-10 13-13 22l-30 88a24 24 0 0 0 31 31l89-30c8-3 15-7 21-13l168-168-98-98-168 168zM96 64c-53 0-96 43-96 96v256c0 53 43 96 96 96h256c53 0 96-43 96-96v-96a32 32 0 1 0-64 0v96c0 18-14 32-32 32H96c-18 0-32-14-32-32V160c0-18 14-32 32-32h96a32 32 0 1 0 0-64H96z"),I(l,"class","svelte-9ebu9g"),I(o,"class",a=p(e[25]?"cancel-custom-category-name":"edit-custom-category-name")+" svelte-9ebu9g"),I(o,"tabindex",s=e[46]||e[44]||!e[33]?"-1":"0"),I(o,"viewBox",c="0 0"+(e[25]?" 24 24":" 512 512")),I(n,"class","category-icon-wrap svelte-9ebu9g"),I(n,"title",u=e[25]?"Cancel Categories Editor":"Edit Categories")},m(i,r){f&&f.m(i,r),M(i,t,r),M(i,n,r),x(n,o),x(o,l),d||(m=[N(o,"click",e[94]),N(o,"keyup",e[95])],d=!0)},p(e,i){e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]?f?f.p(e,i):(f=Sr(e),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),33554432&i[0]&&r!==(r=e[25]?"m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z":"M472 22a56 56 0 0 0-80 0l-30 30 98 98 30-30c22-22 22-58 0-80l-18-18zM172 242c-6 6-10 13-13 22l-30 88a24 24 0 0 0 31 31l89-30c8-3 15-7 21-13l168-168-98-98-168 168zM96 64c-53 0-96 43-96 96v256c0 53 43 96 96 96h256c53 0 96-43 96-96v-96a32 32 0 1 0-64 0v96c0 18-14 32-32 32H96c-18 0-32-14-32-32V160c0-18 14-32 32-32h96a32 32 0 1 0 0-64H96z")&&I(l,"d",r),33554432&i[0]&&a!==(a=p(e[25]?"cancel-custom-category-name":"edit-custom-category-name")+" svelte-9ebu9g")&&I(o,"class",a),40964&i[1]&&s!==(s=e[46]||e[44]||!e[33]?"-1":"0")&&I(o,"tabindex",s),33554432&i[0]&&c!==(c="0 0"+(e[25]?" 24 24":" 512 512"))&&I(o,"viewBox",c),33554432&i[0]&&u!==(u=e[25]?"Cancel Categories Editor":"Edit Categories")&&I(n,"title",u)},d(e){f&&f.d(e),e&&C(t),e&&C(n),d=!1,i(m)}}}function Sr(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M48 96v320c0 9 7 16 16 16h320c9 0 16-7 16-16V171c0-5-2-9-5-12l34-34c12 12 19 29 19 46v245c0 35-29 64-64 64H64c-35 0-64-29-64-64V96c0-35 29-64 64-64h246c17 0 33 7 45 19l74 74-34 34-74-74-1-1v100c0 13-11 24-24 24H104c-13 0-24-11-24-24V80H64c-9 0-16 7-16 16zm80-16v80h144V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1-128 0z"),I(o,"class","svelte-9ebu9g"),I(n,"class","save-custom-category-name svelte-9ebu9g"),I(n,"tabindex",l=e[46]||e[44]?"-1":"0"),I(n,"viewBox","0 0 448 512"),I(t,"class","category-icon-wrap svelte-9ebu9g"),I(t,"title","Save Category Name")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(n,"click",e[92]),N(n,"keyup",e[93])],r=!0)},p(e,t){40960&t[1]&&l!==(l=e[46]||e[44]?"-1":"0")&&I(n,"tabindex",l)},d(e){e&&C(t),r=!1,i(a)}}}function Nr(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer-background svelte-9ebu9g"></div>',I(n,"class","skeleton shimmer svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Pr(e){let t,n,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,P=(e[2]||"")+"",B=[],U=new Map,D=e[15]||[];const R=e=>e[184]||{};for(let t=0;t<D.length;t+=1){let n=Cr(e,D,t),o=R(n);U.set(o,B[t]=Ir(o,n))}return{c(){t=z("span"),n=z("h2"),o=L(P),l=A(),r=T("svg"),a=T("path"),c=A(),u=z("div"),d=z("div"),m=z("div"),f=z("div"),f.textContent="Filter",h=A(),g=T("svg"),y=T("path"),v=A(),b=z("div");for(let e=0;e<B.length;e+=1)B[e].c();I(a,"d","M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),I(a,"class","svelte-9ebu9g"),I(r,"viewBox","0 140 320 512"),I(r,"tabindex",s=e[46]||e[44]||!e[33]||e[4]?"":"0"),I(r,"class","svelte-9ebu9g"),I(n,"class","filter-category-dropdown svelte-9ebu9g"),I(f,"class","filter-title svelte-9ebu9g"),I(y,"fill","#fff"),I(y,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(y,"class","svelte-9ebu9g"),I(g,"viewBox","0 0 24 24"),I(g,"class","closing-x svelte-9ebu9g"),I(g,"tabindex",w=!e[46]&&!e[44]&&e[4]&&e[39]<=425?"0":"-1"),I(m,"class","header svelte-9ebu9g"),I(b,"class","options svelte-9ebu9g"),I(d,"class",k=p("options-wrap-filter-info"+(e[4]?"":" hide"))+" svelte-9ebu9g"),I(u,"class",E=p("options-wrap"+(e[4]?"":" display-none hide"))+" svelte-9ebu9g"),I(t,"class","filter-category svelte-9ebu9g")},m(i,s){M(i,t,s),x(t,n),x(n,o),x(n,l),x(n,r),x(r,a),x(t,c),x(t,u),x(u,d),x(d,m),x(m,f),x(m,h),x(m,g),x(g,y),x(d,v),x(d,b);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(b,null);$||(S=[N(g,"keyup",e[99]),N(g,"click",e[58]),N(u,"touchend",e[61],{passive:!0}),N(t,"click",e[58]),N(t,"keyup",e[102])],$=!0)},p(e,t){4&t[0]&&P!==(P=(e[2]||"")+"")&&F(o,P),16&t[0]|40964&t[1]&&s!==(s=e[46]||e[44]||!e[33]||e[4]?"":"0")&&I(r,"tabindex",s),16&t[0]|41216&t[1]&&w!==(w=!e[46]&&!e[44]&&e[4]&&e[39]<=425?"0":"-1")&&I(g,"tabindex",w),32768&t[0]|67108864&t[1]&&(D=e[15]||[],B=Ee(B,t,R,1,e,D,U,b,xe,Ir,null,Cr)),16&t[0]&&k!==(k=p("options-wrap-filter-info"+(e[4]?"":" hide"))+" svelte-9ebu9g")&&I(d,"class",k),16&t[0]&&E!==(E=p("options-wrap"+(e[4]?"":" display-none hide"))+" svelte-9ebu9g")&&I(u,"class",E)},d(e){e&&C(t);for(let e=0;e<B.length;e+=1)B[e].d();$=!1,i(S)}}}function Ir(e,t){let n,o,l,r,a,s,c=(t[184]||"")+"";function u(...e){return t[100](t[184],...e)}function d(...e){return t[101](t[184],...e)}return{key:e,first:null,c(){n=z("div"),o=z("h3"),l=L(c),r=A(),I(o,"class","svelte-9ebu9g"),I(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,o),x(o,l),x(n,r),a||(s=[N(n,"click",u),N(n,"keyup",d)],a=!0)},p(e,n){t=e,32768&n[0]&&c!==(c=(t[184]||"")+"")&&F(l,c)},d(e){e&&C(n),a=!1,i(s)}}}function Fr(e){let t,n,o,i=(e[39]>=300?"Error: ":e[39]>=275?"E: ":"")+mi(e[30])+"%";return{c(){t=z("div"),n=L(i),I(t,"class",o=p("mean-error"+(e[47]?" loading":""))+" svelte-9ebu9g"),U(t,"--mean-error-color",!0===e[31]?"hsl(185deg,65%,50%)":!1===e[31]?"hsl(345deg,75%,60%)":"")},m(e,o){M(e,t,o),x(t,n)},p(e,l){1073741824&l[0]|256&l[1]&&i!==(i=(e[39]>=300?"Error: ":e[39]>=275?"E: ":"")+mi(e[30])+"%")&&F(n,i),65536&l[1]&&o!==(o=p("mean-error"+(e[47]?" loading":""))+" svelte-9ebu9g")&&I(t,"class",o),1&l[1]&&U(t,"--mean-error-color",!0===e[31]?"hsl(185deg,65%,50%)":!1===e[31]?"hsl(345deg,75%,60%)":"")},d(e){e&&C(t)}}}function Br(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M432 256c0 18-14 32-32 32H48a32 32 0 1 1 0-64h352c18 0 32 14 32 32z"),I(o,"class","svelte-9ebu9g"),I(n,"class","filter-category-wrap-icon svelte-9ebu9g"),I(n,"viewBox","0 0 448 512"),I(t,"tabindex",l=e[46]||e[44]?"":"0"),I(t,"class","remove-custom-category svelte-9ebu9g"),I(t,"title","Delete Category"),U(t,"visibility",e[42]?.length>1?"":"hidden")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(t,"click",e[103]),N(t,"keyup",e[104])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&I(t,"tabindex",l),2048&n[1]&&U(t,"visibility",e[42]?.length>1?"":"hidden")},d(e){e&&C(t),r=!1,i(a)}}}function Ur(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M256 80a32 32 0 1 0-64 0v144H48a32 32 0 1 0 0 64h144v144a32 32 0 1 0 64 0V288h144a32 32 0 1 0 0-64H256V80z"),I(o,"class","svelte-9ebu9g"),I(n,"class","filter-category-wrap-icon svelte-9ebu9g"),I(n,"viewBox","0 0 448 512"),I(t,"tabindex",l=e[46]||e[44]?"":"0"),I(t,"class","add-custom-category svelte-9ebu9g"),I(t,"title","Add Custom Category")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(t,"click",e[105]),N(t,"keyup",e[106])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&I(t,"tabindex",l)},d(e){e&&C(t),r=!1,i(a)}}}function Dr(e){let t,n=[],o=new Map,i=e[15]||[];const l=e=>e[184]||{};for(let t=0;t<i.length;t+=1){let r=hr(e,i,t),a=l(r);o.set(a,n[t]=sa(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);M(e,t,o)},p(e,r){1020173959&r[0]|1929687812&r[1]|229383&r[2]&&(i=e[15]||[],n=Ee(n,r,l,1,e,i,o,t.parentNode,xe,sa,t,hr))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function Rr(e){let t,n=[],o=new Map,i=e[203]||[];const l=e=>e[184]+e[204]||{};for(let t=0;t<i.length;t+=1){let r=br(e,i,t),a=l(r);o.set(a,n[t]=na(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);M(e,t,o)},p(e,r){12752391&r[0]|1896129284&r[1]|229377&r[2]&&(i=e[203]||[],n=Ee(n,r,l,1,e,i,o,t.parentNode,xe,na,t,br))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function jr(t){let n,o;return{c(){n=T("svg"),o=T("path"),I(o,"d","M201 343c13 12 33 12 46 0l160-160a32 32 0 0 0-46-46L224 275 87 137a32 32 0 0 0-46 46l160 160z"),I(o,"class","svelte-9ebu9g"),I(n,"class","angle-down svelte-9ebu9g"),I(n,"viewBox","0 0 512 512")},m(e,t){M(e,n,t),x(n,o)},p:e,d(e){e&&C(n)}}}function Hr(t){let n,o,l,r;return{c(){n=T("svg"),o=T("path"),I(o,"d","M201 137c13-12 33-12 46 0l160 160a32 32 0 0 1-46 46L224 205 87 343a32 32 0 0 1-46-46l160-160z"),I(o,"class","svelte-9ebu9g"),I(n,"class","angle-up svelte-9ebu9g"),I(n,"viewBox","0 0 512 512")},m(e,i){M(e,n,i),x(n,o),l||(r=[N(n,"keyup",t[109]),N(n,"click",t[60])],l=!0)},p:e,d(e){e&&C(n),l=!1,i(r)}}}function Or(e){let t;function n(e,t){return e[211]?.length?qr:Vr}function o(e,t){return t===qr?function(e){const t=e.slice(),n="Media Filter"===t[184]&&t[12].readOnly[t[204]];t[212]=n;const o="Media Filter"===t[184]?t[0]:"Algorithm Filter"===t[184]?t[10]:"Content Caution"===t[184]?t[9]:[];return t[197]=o,t}(e):e}let i=n(e),l=i(o(e,i));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){i===(i=n(e))&&l?l.p(o(e,i),r):(l.d(1),l=i(o(e,i)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function Vr(t){let n;return{c(){n=z("div"),n.innerHTML='<h3 class="svelte-9ebu9g">No Results</h3>',I(n,"class","option svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function qr(e){let t,n=[],o=new Map,i=e[211]||[];const l=e=>e[171]||{};for(let t=0;t<i.length;t+=1){let r=xr(e,i,t),a=l(r);o.set(a,n[t]=ta(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);M(e,t,o)},p(e,r){8558083&r[0]|17039872&r[1]|229377&r[2]&&(i=e[211]||[],n=Ee(n,r,l,1,e,i,o,t.parentNode,xe,ta,t,xr))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function _r(e){let t,n;function o(...t){return e[117](e[214],...t)}let i={ctx:e,current:null,token:null,hasCatch:!1,pending:ea,then:Wr,catch:Yr};return be(n=e[23]?1:new Promise(o),i),{c(){t=S(),i.block.c()},m(e,n){M(e,t,n),i.block.m(e,i.anchor=n),i.mount=()=>t.parentNode,i.anchor=t},p(t,l){e=t,i.ctx=e,8552450&l[0]|262144&l[1]&&n!==(n=e[23]?1:new Promise(o))&&be(n,i)||function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(i,e,l)},d(e){e&&C(t),i.block.d(e),i.token=null,i=null}}}function Yr(t){return{c:e,m:e,p:e,d:e}}function Wr(e){let t,n,o,r,a,s,c,u,d="function"==typeof window.showFullScreenInfo&&("Tag"===e[204]&&e[77]({tag:e[171]},"category and description")||"Tag Category"===e[204]&&!Cn(e[40]?.[e[171]]));function p(e,t){return e[209]?Kr:Jr}function m(e,t){return t===Kr?function(e){const t=e.slice(),n=t[171]?.toUpperCase?.();t[179]=n;const o=t[55][t[179]];return t[180]=o,t}(e):e}let f=p(e),h=f(m(e,f)),g=("included"===e[173]||"excluded"===e[173]&&!e[212])&&Zr(e),y=d&&Qr(e);function w(...t){return e[120](e[171],e[204],e[184],e[212],...t)}return{c(){t=z("div"),n=z("h3"),h.c(),o=A(),g&&g.c(),r=A(),y&&y.c(),s=A(),I(n,"class","svelte-9ebu9g"),I(t,"title",a=e[77]("Tag Category"===e[204]?{category:e[171]}:"Tag"===e[204]?{tag:e[171]}:{},"Tag Category"===e[204]?"all tags":"Tag"===e[204]?"category and description":"")),I(t,"class","option svelte-9ebu9g")},m(i,a){M(i,t,a),x(t,n),h.m(n,null),x(t,o),g&&g.m(t,null),x(t,r),y&&y.m(t,null),M(i,s,a),c||(u=[N(t,"click",(function(){l(e[62](e[171],e[204],e[184],e[212]))&&e[62](e[171],e[204],e[184],e[212]).apply(this,arguments)})),N(t,"keyup",w)],c=!0)},p(o,i){f===(f=p(e=o))&&h?h.p(m(e,f),i):(h.d(1),h=f(m(e,f)),h&&(h.c(),h.m(n,null))),"included"===e[173]||"excluded"===e[173]&&!e[212]?g?g.p(e,i):(g=Zr(e),g.c(),g.m(t,r)):g&&(g.d(1),g=null),163842&i[0]|262656&i[1]&&(d="function"==typeof window.showFullScreenInfo&&("Tag"===e[204]&&e[77]({tag:e[171]},"category and description")||"Tag Category"===e[204]&&!Cn(e[40]?.[e[171]]))),d?y?y.p(e,i):(y=Qr(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null),163842&i[0]|262144&i[1]&&a!==(a=e[77]("Tag Category"===e[204]?{category:e[171]}:"Tag"===e[204]?{tag:e[171]}:{},"Tag Category"===e[204]?"all tags":"Tag"===e[204]?"category and description":""))&&I(t,"title",a)},d(e){e&&C(t),h.d(),g&&g.d(),y&&y.d(),e&&C(s),c=!1,i(u)}}}function Jr(e){let t,n=(e[171]||"")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){163842&o[0]|262144&o[1]&&n!==(n=(e[171]||"")+"")&&F(t,n)},d(e){e&&C(t)}}}function Kr(e){let t;function n(e,t){return e[180]?Xr:Gr}let o=n(e),i=o(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,l){o===(o=n(e))&&i?i.p(e,l):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}function Gr(e){let t,n=(e[179]||e[171]||"")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){163842&o[0]|262144&o[1]&&n!==(n=(e[179]||e[171]||"")+"")&&F(t,n)},d(e){e&&C(t)}}}function Xr(e){let t,n=`${e[180]} (${e[179]})`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){163842&o[0]|262144&o[1]&&n!==(n=`${e[180]} (${e[179]})`)&&F(t,n)},d(e){e&&C(t)}}}function Zr(e){let t,n,o;return{c(){t=T("svg"),n=T("path"),I(n,"class","item-info-path svelte-9ebu9g"),I(n,"d",o="excluded"===e[173]||"Content Caution"===e[184]?"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-81-337c-9 9-9 25 0 34l47 47-47 47c-9 9-9 24 0 34s25 9 34 0l47-47 47 47c9 9 24 9 34 0s9-25 0-34l-47-47 47-47c9-10 9-25 0-34s-25-9-34 0l-47 47-47-47c-10-9-25-9-34 0z":"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303c9-9 9-25 0-34s-25-9-34 0L224 286l-47-47c-9-9-24-9-34 0s-9 25 0 34l64 64c10 9 25 9 34 0l128-128z"),I(t,"class","item-info svelte-9ebu9g"),I(t,"viewBox","0 0 512 512"),U(t,"--option-color","included"===e[173]?"#5f9ea0":"#e85d75")},m(e,o){M(e,t,o),x(t,n)},p(e,i){165379&i[0]|262144&i[1]&&o!==(o="excluded"===e[173]||"Content Caution"===e[184]?"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-81-337c-9 9-9 25 0 34l47 47-47 47c-9 9-9 24 0 34s25 9 34 0l47-47 47 47c9 9 24 9 34 0s9-25 0-34l-47-47 47-47c9-10 9-25 0-34s-25-9-34 0l-47 47-47-47c-10-9-25-9-34 0z":"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303c9-9 9-25 0-34s-25-9-34 0L224 286l-47-47c-9-9-24-9-34 0s-9 25 0 34l64 64c10 9 25 9 34 0l128-128z")&&I(n,"d",o),165379&i[0]|262144&i[1]&&U(t,"--option-color","included"===e[173]?"#5f9ea0":"#e85d75")},d(e){e&&C(t)}}}function Qr(e){let t,n,o,l;function r(){return e[118](e[204],e[171])}function a(...t){return e[119](e[204],e[171],...t)}return{c(){t=T("svg"),n=T("path"),I(n,"class","item-info-path svelte-9ebu9g"),I(n,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-40-176h24v-64h-24a24 24 0 1 1 0-48h48c13 0 24 11 24 24v88h8a24 24 0 1 1 0 48h-80a24 24 0 1 1 0-48zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"),I(t,"class","extra-item-info svelte-9ebu9g"),I(t,"viewBox","0 0 512 512")},m(e,i){M(e,t,i),x(t,n),o||(l=[N(t,"click",P(r)),N(t,"keyup",P(a))],o=!0)},p(t,n){e=t},d(e){e&&C(t),o=!1,i(l)}}}function ea(t){let n;return{c(){n=L("")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function ta(e,t){let n,o,i=(t[202]||"All"!==t[171])&&_r(kr(t));return{key:e,first:null,c(){n=S(),i&&i.c(),o=S(),this.first=n},m(e,t){M(e,n,t),i&&i.m(e,t),M(e,o,t)},p(e,n){(t=e)[202]||"All"!==t[171]?i?i.p(kr(t),n):(i=_r(kr(t)),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&C(n),i&&i.d(e),e&&C(o)}}}function na(e,t){let n,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,U,D,R,j,H,O,V,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,oe,ie,le,re=(t[204]||"")+"",ae=t[205]+"",se=(t[204]||"")+"",ce="Search "+t[205];function ue(){t[107].call(h,t[205])}function de(e,t){return e[206]?Hr:jr}let pe=de(t),me=pe(t);function fe(...e){return t[110](t[204],...e)}function he(...e){return t[111](t[204],...e)}function ge(){t[113].call(J,t[205])}let ye=t[206]&&Or(Er(t));return{key:e,first:null,c(){n=z("div"),o=z("div"),l=z("h2"),r=L(re),a=A(),s=z("div"),c=z("div"),u=z("label"),d=L(ae),f=A(),h=z("input"),v=A(),me.c(),k=A(),E=z("div"),$=z("div"),S=z("div"),U=z("div"),D=L(se),R=A(),j=T("svg"),H=T("path"),V=A(),q=z("label"),_=L(ce),W=A(),J=z("input"),Z=A(),Q=z("div"),ye&&ye.c(),ne=A(),I(l,"class","svelte-9ebu9g"),I(o,"class","filter-name svelte-9ebu9g"),I(u,"class","disable-interaction svelte-9ebu9g"),I(u,"for",m=t[205]),I(h,"tabindex",g=t[46]||t[44]||!t[33]?"-1":"0"),I(h,"id",y=t[205]),I(h,"placeholder","Any"),I(h,"type","search"),I(h,"enterkeyhint","search"),I(h,"autocomplete","off"),I(h,"class","value-input svelte-9ebu9g"),h.disabled=w=!t[33]||t[39]<=425||!t[185],I(c,"class","value-wrap svelte-9ebu9g"),I(s,"class","select svelte-9ebu9g"),I(s,"tabindex",b=!t[46]&&!t[44]&&t[33]&&t[39]<=425&&t[185]?"0":"-1"),I(U,"class","filter-title svelte-9ebu9g"),I(H,"fill","#fff"),I(H,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(H,"class","svelte-9ebu9g"),I(j,"viewBox","0 0 24 24"),I(j,"class","closing-x svelte-9ebu9g"),I(j,"tabindex",O=!t[46]&&!t[44]&&t[33]&&t[206]?"0":"-1"),I(S,"class","header svelte-9ebu9g"),I(q,"class","disable-interaction svelte-9ebu9g"),I(q,"for",Y="Search "+t[205]),I(J,"tabindex",K=t[46]||t[44]||!t[33]?"-1":"0"),I(J,"id",G="Search "+t[205]),I(J,"placeholder","Any"),I(J,"type","search"),I(J,"enterkeyhint","search"),I(J,"autocomplete","off"),J.disabled=X=!t[33]||!t[185]||!t[206],I(J,"class","svelte-9ebu9g"),I(Q,"class","options svelte-9ebu9g"),I($,"class",ee=p("options-wrap-filter-info"+(t[206]?"":" hide"))+" svelte-9ebu9g"),I(E,"class",te=p("options-wrap"+(t[206]?"":" display-none hide"))+" svelte-9ebu9g"),I(n,"class",oe=p("filter-select"+(t[185]?"":" display-none"))+" svelte-9ebu9g"),this.first=n},m(e,i){M(e,n,i),x(n,o),x(o,l),x(l,r),x(n,a),x(n,s),x(s,c),x(c,u),x(u,d),x(c,f),x(c,h),B(h,t[17][t[205]]),x(s,v),me.m(s,null),x(n,k),x(n,E),x(E,$),x($,S),x(S,U),x(U,D),x(S,R),x(S,j),x(j,H),x($,V),x($,q),x(q,_),x($,W),x($,J),B(J,t[17][t[205]]),x($,Z),x($,Q),ye&&ye.m(Q,null),x(n,ne),ie||(le=[N(h,"input",ue),N(h,"focusin",t[108]),N(s,"keyup",fe),N(s,"click",he),N(j,"keyup",t[112]),N(j,"click",t[60]),N(J,"input",ge),N(J,"focusin",t[114]),N(Q,"wheel",P(Ta),{passive:!0}),N(E,"wheel",P(La),{passive:!0}),N(E,"touchend",t[61],{passive:!0})],ie=!0)},p(e,o){t=e,32770&o[0]&&re!==(re=(t[204]||"")+"")&&F(r,re),32770&o[0]&&ae!==(ae=t[205]+"")&&F(d,ae),32770&o[0]&&m!==(m=t[205])&&I(u,"for",m),40964&o[1]&&g!==(g=t[46]||t[44]||!t[33]?"-1":"0")&&I(h,"tabindex",g),32770&o[0]&&y!==(y=t[205])&&I(h,"id",y),32772&o[0]|260&o[1]&&w!==(w=!t[33]||t[39]<=425||!t[185])&&(h.disabled=w),163842&o[0]&&h.value!==t[17][t[205]]&&B(h,t[17][t[205]]),pe===(pe=de(t))&&me?me.p(t,o):(me.d(1),me=pe(t),me&&(me.c(),me.m(s,null))),32772&o[0]|41220&o[1]&&b!==(b=!t[46]&&!t[44]&&t[33]&&t[39]<=425&&t[185]?"0":"-1")&&I(s,"tabindex",b),32770&o[0]&&se!==(se=(t[204]||"")+"")&&F(D,se),4227078&o[0]|40964&o[1]&&O!==(O=!t[46]&&!t[44]&&t[33]&&t[206]?"0":"-1")&&I(j,"tabindex",O),32770&o[0]&&ce!==(ce="Search "+t[205])&&F(_,ce),32770&o[0]&&Y!==(Y="Search "+t[205])&&I(q,"for",Y),40964&o[1]&&K!==(K=t[46]||t[44]||!t[33]?"-1":"0")&&I(J,"tabindex",K),32770&o[0]&&G!==(G="Search "+t[205])&&I(J,"id",G),4227078&o[0]|4&o[1]&&X!==(X=!t[33]||!t[185]||!t[206])&&(J.disabled=X),163842&o[0]&&J.value!==t[17][t[205]]&&B(J,t[17][t[205]]),t[206]?ye?ye.p(Er(t),o):(ye=Or(Er(t)),ye.c(),ye.m(Q,null)):ye&&(ye.d(1),ye=null),4227078&o[0]&&ee!==(ee=p("options-wrap-filter-info"+(t[206]?"":" hide"))+" svelte-9ebu9g")&&I($,"class",ee),4227078&o[0]&&te!==(te=p("options-wrap"+(t[206]?"":" display-none hide"))+" svelte-9ebu9g")&&I(E,"class",te),32772&o[0]&&oe!==(oe=p("filter-select"+(t[185]?"":" display-none"))+" svelte-9ebu9g")&&I(n,"class",oe)},d(e){e&&C(n),me.d(),ye&&ye.d(),ie=!1,i(le)}}}function oa(e){let t,n,o,l,r,a,s,c,u,d,p,m,f,h,g,y,w,v,b=e[201]+"",k=(e[198]||"")+"";function E(...t){return e[121](e[198],e[184],...t)}function $(){e[122].call(u,e[201])}function T(...t){return e[123](e[198],e[184],...t)}function S(...t){return e[124](e[198],e[184],...t)}return{c(){t=z("div"),n=z("div"),o=A(),l=z("div"),r=z("label"),a=L(b),c=A(),u=z("input"),f=A(),h=z("div"),g=L(k),y=A(),I(n,"class","svelte-9ebu9g"),U(n,"visibility","none"),I(r,"class","disable-interaction svelte-9ebu9g"),I(r,"for",s="Checkbox: "+e[201]),I(u,"tabindex",d=e[46]||e[44]||!e[33]?"-1":"0"),I(u,"id",p="Checkbox: "+e[201]),I(u,"type","checkbox"),I(u,"class","filter-bool svelte-9ebu9g"),u.disabled=m=!e[33]||e[43],I(h,"class","filter-bool-label svelte-9ebu9g"),I(l,"class","filter-bool-wrap svelte-9ebu9g"),I(t,"class","filter-bool-container svelte-9ebu9g")},m(i,s){M(i,t,s),x(t,n),x(t,o),x(t,l),x(l,r),x(r,a),x(l,c),x(l,u),u.checked=e[19][e[201]],x(l,f),x(l,h),x(h,g),x(t,y),w||(v=[N(u,"change",E),N(u,"change",$),N(l,"click",T),N(l,"keyup",S)],w=!0)},p(t,n){e=t,34816&n[0]&&b!==(b=e[201]+"")&&F(a,b),34816&n[0]&&s!==(s="Checkbox: "+e[201])&&I(r,"for",s),40964&n[1]&&d!==(d=e[46]||e[44]||!e[33]?"-1":"0")&&I(u,"tabindex",d),34816&n[0]&&p!==(p="Checkbox: "+e[201])&&I(u,"id",p),4100&n[1]&&m!==(m=!e[33]||e[43])&&(u.disabled=m),559104&n[0]&&(u.checked=e[19][e[201]]),34816&n[0]&&k!==(k=(e[198]||"")+"")&&F(g,k)},d(e){e&&C(t),w=!1,i(v)}}}function ia(e,t){let n,o,i=t[185]&&null!=t[19][t[184]+t[198]]&&oa(vr(t));return{key:e,first:null,c(){n=S(),i&&i.c(),o=S(),this.first=n},m(e,t){M(e,n,t),i&&i.m(e,t),M(e,o,t)},p(e,n){(t=e)[185]&&null!=t[19][t[184]+t[198]]?i?i.p(vr(t),n):(i=oa(vr(t)),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&C(n),i&&i.d(e),e&&C(o)}}}function la(e){let t,n,o,i,l,a,s,c,u,d,p,m=(e[190]||"")+"",f="Number Filter: "+e[196],h=e[7]+e[33]+(e[197]instanceof Array?1:0),g=ra(e);return{c(){t=z("div"),n=z("div"),o=z("h2"),i=L(m),l=A(),a=z("div"),s=z("label"),c=L(f),d=A(),g.c(),p=A(),I(o,"class","svelte-9ebu9g"),I(n,"class","filter-input-number-name svelte-9ebu9g"),I(s,"class","disable-interaction svelte-9ebu9g"),I(s,"for",u="Number Filter: "+e[196]),I(a,"class","value-input-number-wrap svelte-9ebu9g"),I(t,"class","filter-input-number svelte-9ebu9g"),U(t,"display",e[185]?"":"none")},m(e,r){M(e,t,r),x(t,n),x(n,o),x(o,i),x(t,l),x(t,a),x(a,s),x(s,c),x(a,d),g.m(a,null),x(t,p)},p(e,n){34816&n[0]&&m!==(m=(e[190]||"")+"")&&F(i,m),34816&n[0]&&f!==(f="Number Filter: "+e[196])&&F(c,f),34816&n[0]&&u!==(u="Number Filter: "+e[196])&&I(s,"for",u),34433&n[0]|4&n[1]&&r(h,h=e[7]+e[33]+(e[197]instanceof Array?1:0))?(g.d(1),g=ra(e),g.c(),g.m(a,null)):g.p(e,n),32772&n[0]&&U(t,"display",e[185]?"":"none")},d(e){e&&C(t),g.d(e)}}}function ra(e){let t,n,o,r,a,s,c,u;function d(...t){return e[126](e[190],...t)}function p(...t){return e[127](e[196],e[197],e[190],e[192],e[193],e[184],...t)}return{c(){t=z("input"),I(t,"tabindex",n=e[46]||e[44]||!e[33]?"-1":"0"),I(t,"id",o="Number Filter: "+e[196]),I(t,"class","value-input-number svelte-9ebu9g"),I(t,"type","text"),I(t,"placeholder",r="Scoring System"===e[190]?"Default: User Scoring":("Average Score"===e[190]||"Min Average Score"===e[190])&&"number"==typeof e[26]&&e[26]>0?"Average: "+mi(e[26]):"Popularity"===e[190]&&("number"==typeof e[27]&&e[27]>0||"number"==typeof e[28]&&e[28]>0||"number"==typeof e[29]&&e[29]>0)?[e[27],e[28],e[29]].map(e[125]).join(" | "):"Min Anime Popularity"===e[190]&&"number"==typeof e[27]&&e[27]>0?"Average: "+mi(e[27],e[27]>=1e3?1:0):"Min Manga Popularity"===e[190]&&"number"==typeof e[28]&&e[28]>0?"Average: "+mi(e[28],e[28]>=1e3?1:0):"Min Novel Popularity"===e[190]&&"number"==typeof e[29]&&e[29]>0?"Average: "+mi(e[29],e[29]>=1e3?1:0):null!=e[191]?"Default: "+e[191]:e[56].includes(e[190])?">123 or 123":"123"),t.disabled=a=!e[33]||e[43]},m(n,o){M(n,t,o),c||(u=[f(s=za.call(null,t,e[197]?.find?.(d)?.optionValue)),N(t,"input",p),N(t,"focusin",e[128])],c=!0)},p(i,c){e=i,40964&c[1]&&n!==(n=e[46]||e[44]||!e[33]?"-1":"0")&&I(t,"tabindex",n),34816&c[0]&&o!==(o="Number Filter: "+e[196])&&I(t,"id",o),1006667776&c[0]&&r!==(r="Scoring System"===e[190]?"Default: User Scoring":("Average Score"===e[190]||"Min Average Score"===e[190])&&"number"==typeof e[26]&&e[26]>0?"Average: "+mi(e[26]):"Popularity"===e[190]&&("number"==typeof e[27]&&e[27]>0||"number"==typeof e[28]&&e[28]>0||"number"==typeof e[29]&&e[29]>0)?[e[27],e[28],e[29]].map(e[125]).join(" | "):"Min Anime Popularity"===e[190]&&"number"==typeof e[27]&&e[27]>0?"Average: "+mi(e[27],e[27]>=1e3?1:0):"Min Manga Popularity"===e[190]&&"number"==typeof e[28]&&e[28]>0?"Average: "+mi(e[28],e[28]>=1e3?1:0):"Min Novel Popularity"===e[190]&&"number"==typeof e[29]&&e[29]>0?"Average: "+mi(e[29],e[29]>=1e3?1:0):null!=e[191]?"Default: "+e[191]:e[56].includes(e[190])?">123 or 123":"123")&&I(t,"placeholder",r),4100&c[1]&&a!==(a=!e[33]||e[43])&&(t.disabled=a),s&&l(s.update)&&36353&c[0]&&s.update.call(null,e[197]?.find?.(d)?.optionValue)},d(e){e&&C(t),c=!1,i(u)}}}function aa(e,t){let n,o,i=t[185]&&la(yr(t));return{key:e,first:null,c(){n=S(),i&&i.c(),o=S(),this.first=n},m(e,t){M(e,n,t),i&&i.m(e,t),M(e,o,t)},p(e,n){(t=e)[185]?i?i.p(yr(t),n):(i=la(yr(t)),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(e){e&&C(n),i&&i.d(e),e&&C(o)}}}function sa(e,t){let n,o,i,l,r=[],a=new Map,s=[],c=new Map,u=t[49]&&t[1]&&Rr(Mr(t)),d=t[186]||[];const p=e=>e[184]+e[198]||{};for(let e=0;e<d.length;e+=1){let n=wr(t,d,e),o=p(n);a.set(o,r[e]=ia(o,n))}let m=t[187]||[];const f=e=>e[184]+e[190]||{};for(let e=0;e<m.length;e+=1){let n=gr(t,m,e),o=f(n);c.set(o,s[e]=aa(o,n))}return{key:e,first:null,c(){n=S(),u&&u.c(),o=A();for(let e=0;e<r.length;e+=1)r[e].c();i=A();for(let e=0;e<s.length;e+=1)s[e].c();l=S(),this.first=n},m(e,t){M(e,n,t),u&&u.m(e,t),M(e,o,t);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,t);M(e,i,t);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,t);M(e,l,t)},p(e,n){(t=e)[49]&&t[1]?u?u.p(Mr(t),n):(u=Rr(Mr(t)),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null),559108&n[0]|45060&n[1]|2&n[2]&&(d=t[186]||[],r=Ee(r,n,p,1,t,d,a,i.parentNode,xe,ia,i,wr)),1006931589&n[0]|33599492&n[1]|4&n[2]&&(m=t[187]||[],s=Ee(s,n,f,1,t,m,c,l.parentNode,xe,aa,l,gr))},d(e){e&&C(n),u&&u.d(e),e&&C(o);for(let t=0;t<r.length;t+=1)r[t].d(e);e&&C(i);for(let t=0;t<s.length;t+=1)s[t].d(e);e&&C(l)}}}function ca(t){let n,o=Array(10),i=[];for(let e=0;e<o.length;e+=1)i[e]=ua(fr(t,o,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=S()},m(e,t){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,t);M(e,n,t)},p:e,d(e){$(i,e),e&&C(n)}}}function ua(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="filter-name skeleton shimmer svelte-9ebu9g"><div class="shimmer-background svelte-9ebu9g"></div></div> \n                    <div class="select skeleton shimmer svelte-9ebu9g"><div class="shimmer-background svelte-9ebu9g"></div></div> \n                ',I(n,"class","filter-select svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function da(e){let t,n,o=(e[171]||"")+"";return{c(){t=z("h3"),n=L(o),I(t,"class","svelte-9ebu9g")},m(e,o){M(e,t,o),x(t,n)},p(e,t){65536&t[0]&&o!==(o=(e[171]||"")+"")&&F(n,o)},d(e){e&&C(t)}}}function pa(e){let t;function n(e,t){return"Country Of Origin"===e[172]?ha:fa}function o(e,t){return t===ha?function(e){const t=e.slice(),n=t[171]?.toUpperCase?.();t[179]=n;const o=t[55][t[179]];return t[180]=o,t}(e):e}let i=n(e),l=i(o(e,i));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){i===(i=n(e))&&l?l.p(o(e,i),r):(l.d(1),l=i(o(e,i)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function ma(e){let t,n,o=(e[171]+" : "+e[174]||"")+"";return{c(){t=z("h3"),n=L(o),I(t,"class","svelte-9ebu9g")},m(e,o){M(e,t,o),x(t,n)},p(e,t){65536&t[0]&&o!==(o=(e[171]+" : "+e[174]||"")+"")&&F(n,o)},d(e){e&&C(t)}}}function fa(e){let t,n,o=`${e[172]} : ${e[171]||""}`;return{c(){t=z("h3"),n=L(o),I(t,"class","svelte-9ebu9g")},m(e,o){M(e,t,o),x(t,n)},p(e,t){65536&t[0]&&o!==(o=`${e[172]} : ${e[171]||""}`)&&F(n,o)},d(e){e&&C(t)}}}function ha(e){let t;function n(e,t){return e[180]&&e[179]?ya:ga}let o=n(e),i=o(e);return{c(){t=z("h3"),i.c(),I(t,"class","svelte-9ebu9g")},m(e,n){M(e,t,n),i.m(t,null)},p(e,l){o===(o=n(e))&&i?i.p(e,l):(i.d(1),i=o(e),i&&(i.c(),i.m(t,null)))},d(e){e&&C(t),i.d()}}}function ga(e){let t,n=`${e[172]} : ${e[180]||e[179]||""}`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){65536&o[0]&&n!==(n=`${e[172]} : ${e[180]||e[179]||""}`)&&F(t,n)},d(e){e&&C(t)}}}function ya(e){let t,n=`${e[172]} : ${e[180]} (${e[179]})`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){65536&o[0]&&n!==(n=`${e[172]} : ${e[180]} (${e[179]})`)&&F(t,n)},d(e){e&&C(t)}}}function wa(e,t){let n,o,l,r,a,s,c,u,d,p,m;function f(e,t){return"number"===e[170]?ma:e[172]?pa:da}let h=f(t),g=h(t);function y(){return t[131](t[178])}function w(...e){return t[132](t[178],...e)}function v(...e){return t[133](t[170],t[171],t[178],t[173],t[172],...e)}function b(...e){return t[134](t[170],t[171],t[178],t[173],t[172],...e)}return{key:e,first:null,c(){n=z("div"),o=z("div"),g.c(),l=A(),r=T("svg"),a=T("path"),c=A(),I(o,"class","active-filter svelte-9ebu9g"),I(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(a,"class","svelte-9ebu9g"),I(r,"class","remove-active-filter svelte-9ebu9g"),I(r,"viewBox","0 0 24 24"),I(r,"tabindex",s=t[46]||t[44]||!t[33]?"-1":"0"),I(n,"class","active-tag-filter svelte-9ebu9g"),I(n,"title",u=t[175]?t[77]({tag:t[171]},"category and description")||"":t[176]&&t[77]({category:t[171]},"all tags")||""),I(n,"tabindex",d=t[46]||t[44]||!t[33]?"-1":"0"),U(n,"--active-tag-filter-color","included"===t[173]?"hsl(185deg, 65%, 50%)":"excluded"===t[173]?"hsl(345deg, 75%, 60%)":"hsl(0deg, 0%, 50%)"),this.first=n},m(e,t){var i;M(e,n,t),x(n,o),g.m(o,null),x(n,l),x(n,r),x(r,a),x(n,c),p||(m=[N(r,"click",(i=y,function(e){return e.preventDefault(),i.call(this,e)})),N(r,"keyup",w),N(n,"click",v),N(n,"keyup",b)],p=!0)},p(e,i){h===(h=f(t=e))&&g?g.p(t,i):(g.d(1),g=h(t),g&&(g.c(),g.m(o,null))),40964&i[1]&&s!==(s=t[46]||t[44]||!t[33]?"-1":"0")&&I(r,"tabindex",s),65536&i[0]&&u!==(u=t[175]?t[77]({tag:t[171]},"category and description")||"":t[176]&&t[77]({category:t[171]},"all tags")||"")&&I(n,"title",u),40964&i[1]&&d!==(d=t[46]||t[44]||!t[33]?"-1":"0")&&I(n,"tabindex",d),65536&i[0]&&U(n,"--active-tag-filter-color","included"===t[173]?"hsl(185deg, 65%, 50%)":"excluded"===t[173]?"hsl(345deg, 75%, 60%)":"hsl(0deg, 0%, 50%)")},d(e){e&&C(n),g.d(),p=!1,i(m)}}}function va(t){let n,o=(t[84]()||"Please Wait")+"";return{c(){n=L(o)},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function ba(e){let t,n=(e[50]||"Please Wait")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,o){524288&o[1]&&n!==(n=(e[50]||"Please Wait")+"")&&F(t,n)},d(e){e&&C(t)}}}function xa(e){let t,n,o,l,r,a;return{c(){t=z("div"),n=T("svg"),o=T("path"),I(o,"d","M105 203a160 160 0 0 1 264-60l17 17h-50a32 32 0 1 0 0 64h128c18 0 32-14 32-32V64a32 32 0 1 0-64 0v51l-18-17a224 224 0 0 0-369 83 32 32 0 0 0 60 22zm-66 86a32 32 0 0 0-23 31v128a32 32 0 1 0 64 0v-51l18 17a224 224 0 0 0 369-83 32 32 0 0 0-60-22 160 160 0 0 1-264 60l-17-17h50a32 32 0 1 0 0-64H48a39 39 0 0 0-9 1z"),I(o,"class","svelte-9ebu9g"),I(n,"viewBox","0 0 512 512"),I(n,"class","svelte-9ebu9g"),I(t,"tabindex",l=e[46]||e[44]?"":"0"),I(t,"class","refresh-list svelte-9ebu9g"),I(t,"role","button"),I(t,"aria-label","Reload List")},m(i,l){M(i,t,l),x(t,n),x(n,o),r||(a=[N(t,"click",e[140]),N(t,"keyup",e[141])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&I(t,"tabindex",l)},d(e){e&&C(t),r=!1,i(a)}}}function ka(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer-background svelte-9ebu9g"></div>',I(n,"class","sort-filter skeleton shimmer svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Ea(e){let t,n,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,P,B,U,D=(e[13]||"")+"",R=[],j=new Map,H=e[49]?.sortFilter||[];const O=e=>e[167]||{};for(let t=0;t<H.length;t+=1){let n=pr(e,H,t),o=O(n);j.set(o,R[t]=Ca(o,n))}return{c(){t=z("div"),n=T("svg"),o=T("path"),s=A(),c=z("h2"),u=L(D),m=A(),f=z("div"),h=z("div"),g=z("div"),y=z("div"),y.textContent="Sort By",w=A(),v=T("svg"),b=T("path"),E=A(),$=z("div");for(let e=0;e<R.length;e+=1)R[e].c();I(o,"d",l="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),I(o,"class","svelte-9ebu9g"),I(n,"class","sort-order-icon svelte-9ebu9g"),I(n,"viewBox",r=`0 ${"asc"===e[14]?"-":""}140 320 512`),I(n,"tabindex",a=e[46]||e[44]||e[6]?"":"0"),I(n,"role","button"),I(n,"aria-label","Change Sort Order"),I(c,"tabindex",d=e[46]||e[44]||e[6]?"":"0"),I(c,"aria-label","Select Sort Type"),I(c,"class","svelte-9ebu9g"),I(y,"class","filter-title svelte-9ebu9g"),I(b,"fill","#fff"),I(b,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),I(b,"class","svelte-9ebu9g"),I(v,"viewBox","0 0 24 24"),I(v,"class","closing-x svelte-9ebu9g"),I(v,"tabindex",k=!e[46]&&!e[44]&&e[6]&&e[39]<=425?"0":""),I(g,"class","header svelte-9ebu9g"),I($,"class","options svelte-9ebu9g"),I(h,"class",S=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-9ebu9g"),I(f,"class",P=p("options-wrap "+(e[6]?"":"display-none hide"))+" svelte-9ebu9g"),I(t,"class","sort-filter svelte-9ebu9g")},m(i,l){M(i,t,l),x(t,n),x(n,o),x(t,s),x(t,c),x(c,u),x(t,m),x(t,f),x(f,h),x(h,g),x(g,y),x(g,w),x(g,v),x(v,b),x(h,E),x(h,$);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m($,null);B||(U=[N(n,"click",e[70]),N(n,"keyup",e[142]),N(c,"click",e[68]),N(c,"keyup",e[143]),N(v,"keyup",e[144]),N(v,"click",e[68]),N(f,"touchend",e[61],{passive:!0})],B=!0)},p(e,t){16384&t[0]&&l!==(l="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z")&&I(o,"d",l),16384&t[0]&&r!==(r=`0 ${"asc"===e[14]?"-":""}140 320 512`)&&I(n,"viewBox",r),64&t[0]|40960&t[1]&&a!==(a=e[46]||e[44]||e[6]?"":"0")&&I(n,"tabindex",a),8192&t[0]&&D!==(D=(e[13]||"")+"")&&F(u,D),64&t[0]|40960&t[1]&&d!==(d=e[46]||e[44]||e[6]?"":"0")&&I(c,"tabindex",d),64&t[0]|41216&t[1]&&k!==(k=!e[46]&&!e[44]&&e[6]&&e[39]<=425?"0":"")&&I(v,"tabindex",k),24576&t[0]|262144&t[1]|128&t[2]&&(H=e[49]?.sortFilter||[],R=Ee(R,t,O,1,e,H,j,$,xe,Ca,null,pr)),64&t[0]&&S!==(S=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-9ebu9g")&&I(h,"class",S),64&t[0]&&P!==(P=p("options-wrap "+(e[6]?"":"display-none hide"))+" svelte-9ebu9g")&&I(f,"class",P)},d(e){e&&C(t);for(let e=0;e<R.length;e+=1)R[e].d();B=!1,i(U)}}}function Ma(e){let t,n,o,i;return{c(){t=T("svg"),n=T("path"),I(n,"d",o="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),I(n,"class","svelte-9ebu9g"),I(t,"viewBox",i=`0 ${"asc"===e[14]?"-180":"100"} 320 512`),I(t,"class","svelte-9ebu9g")},m(e,o){M(e,t,o),x(t,n)},p(e,l){16384&l[0]&&o!==(o="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z")&&I(n,"d",o),16384&l[0]&&i!==(i=`0 ${"asc"===e[14]?"-180":"100"} 320 512`)&&I(t,"viewBox",i)},d(e){e&&C(t)}}}function Ca(e,t){let n,o,l,r,a,s,c,u=(t[167]||"")+"",d=t[13]===t[167]&&Ma(t);function p(){return t[145](t[167])}function m(...e){return t[146](t[167],...e)}return{key:e,first:null,c(){n=z("div"),o=z("h3"),l=L(u),r=A(),d&&d.c(),a=A(),I(o,"class","svelte-9ebu9g"),I(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,o),x(o,l),x(n,r),d&&d.m(n,null),x(n,a),s||(c=[N(n,"click",p),N(n,"keyup",m)],s=!0)},p(e,o){t=e,262144&o[1]&&u!==(u=(t[167]||"")+"")&&F(l,u),t[13]===t[167]?d?d.p(t,o):(d=Ma(t),d.c(),d.m(n,a)):d&&(d.d(1),d=null)},d(e){e&&C(n),d&&d.d(),s=!1,i(c)}}}function $a(t){let n,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,L,S,P,F,D,R,j,H,O,V,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,oe,ie,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ye,we,ve,be,ke,Me,Ce,$e=[],ze=new Map,Te=`${t[20]}px`,Le=(!t[25]||!t[33])&&zr(t),Ae=t[33]&&Ar(t);function Se(e,t){return e[15]?.length?Pr:Nr}let Ne=Se(t),Pe=Ne(t),Ie=t[30]>0&&Fr(t),Fe=t[33]&&t[42]?.length>1&&Br(t),Be=t[33]&&t[24]&&t[41]&&!t[41]?.[t[24]]&&Ur(t),Ue=t[15]&&t[49]&&Dr(t),De=(!t[15]||!t[49])&&ca(t),Re=t[16]||[];const je=e=>e[170]+e[171]+(e[172]??"")||{};for(let e=0;e<Re.length;e+=1){let n=mr(t,Re,e),o=je(n);ze.set(o,$e[e]=wa(o,n))}function He(e,t){return e[51]&&(e[50]||e[53]||e[54]||e[45][""]||e[45][e[7]])?ba:va}let Oe=He(t),Ve=Oe(t),qe=(t[34]||t[38]||t[45][""]||t[45][t[7]])&&!1===t[36]&&xa(t);function _e(e,t){return e[49]?.sortFilter&&e[8]?.[e[7]]?.sortBy?Ea:ka}let Ye=_e(t),We=Ye(t);return{c(){n=z("section"),o=z("div"),l=z("label"),l.textContent="Search Title",r=A(),a=z("input"),u=A(),Le&&Le.c(),d=A(),Ae&&Ae.c(),m=A(),f=z("div"),h=T("svg"),g=T("path"),b=A(),k=z("div"),Pe.c(),E=A(),Ie&&Ie.c(),$=A(),Fe&&Fe.c(),L=A(),Be&&Be.c(),P=A(),F=z("div"),Ue&&Ue.c(),D=A(),De&&De.c(),j=A(),H=z("div"),O=z("div"),V=z("div"),q=T("svg"),_=T("path"),W=A();for(let e=0;e<$e.length;e+=1)$e[e].c();K=A(),G=z("div"),X=T("svg"),Z=T("path"),te=A(),ne=z("div"),oe=z("span"),ie=z("h2"),Ve.c(),re=A(),ae=z("search"),se=z("label"),se.textContent="Search Title",ce=A(),ue=z("input"),pe=A(),me=z("div"),fe=z("div"),he=T("svg"),ge=T("path"),be=A(),qe&&qe.c(),ke=A(),We.c(),I(l,"class","disable-interaction svelte-9ebu9g"),I(l,"for","category-name"),I(a,"id","category-name"),I(a,"class","category svelte-9ebu9g"),I(a,"type","text"),I(a,"autocomplete","off"),I(a,"placeholder",s=null==t[7]?"Kanshi":"Category"),a.disabled=c=!t[25],I(a,"aria-label","Category Name to Add or Edit"),U(a,"pointer-events",t[25]?"":"none"),I(g,"d","M0 416c0 18 14 32 32 32h55a80 80 0 0 0 146 0h247a32 32 0 1 0 0-64H233a80 80 0 0 0-146 0H32c-18 0-32 14-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm192-160a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm32-80c-33 0-61 20-73 48H32a32 32 0 1 0 0 64h247a80 80 0 0 0 146 0h55a32 32 0 1 0 0-64h-55a80 80 0 0 0-73-48zm-160-48a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73-64a80 80 0 0 0-146 0H32a32 32 0 1 0 0 64h87a80 80 0 0 0 146 0h215a32 32 0 1 0 0-64H265z"),I(g,"class","svelte-9ebu9g"),I(h,"class","show-filter-options svelte-9ebu9g"),I(h,"tabindex",y=t[46]||t[44]?"":"0"),I(h,"viewBox","0 0 512 512"),I(h,"role","button"),I(h,"aria-label","Show Filter Options"),I(f,"class","category-icon-wrap svelte-9ebu9g"),I(o,"id","category-wrap"),I(o,"class",w=p("category-wrap"+(t[25]?" editing":""))+" svelte-9ebu9g"),I(o,"tabindex",v=t[25]||t[46]||t[44]||t[3]?"":"0"),I(o,"role","button"),I(o,"aria-label","Select a Recommendation Category"),U(o,"--edit-cancel-icon",t[33]?"25px":""),U(o,"--save-icon",t[33]&&t[25]&&t[24]&&t[41]&&!t[41]?.[t[24]]?"25px":""),I(k,"class",S=p("category-settings-wrap"+(t[33]?"":" display-none"))+" svelte-9ebu9g"),I(k,"aria-label","Select a Type of Filter"),U(k,"--add-icon-size",t[33]&&t[24]&&t[41]&&!t[41]?.[t[24]]?"25px":""),U(k,"--remove-icon-size",t[42]?.length>1?t[30]>0?"25px":"1fr":""),U(k,"--mape-size",t[30]>0?"1fr":""),I(F,"aria-label","List of Filters"),I(F,"class",R=p("filters"+(t[33]?"":" display-none")+(t[48]?" has-wheel":"")+(t[80]&&t[37]?" android":""))+" svelte-9ebu9g"),I(F,"id","filters"),U(F,"--max-padding-height",t[5]?t[20]+65+"px":"0"),I(_,"d","M367 413 100 145a192 192 0 0 0 268 268zm45-46A192 192 0 0 0 145 99l269 268zM1 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0z"),I(_,"class","svelte-9ebu9g"),I(q,"viewBox","0 0 512 512"),I(q,"class","svelte-9ebu9g"),I(V,"tabindex",Y=t[46]||t[44]||!t[33]?"-1":"0"),I(V,"class","empty-tag-filter svelte-9ebu9g"),I(V,"title","Remove Filters"),I(O,"id","tag-filters"),I(O,"class","tag-filters svelte-9ebu9g"),I(H,"aria-label","List of Active Filters"),I(H,"id","active-filters"),I(H,"class",J=p("active-filters"+(t[33]&&t[16]?.length?"":" display-none"))+" svelte-9ebu9g"),I(Z,"d","M201 137c13-12 33-12 46 0l160 160a32 32 0 0 1-46 46L224 205 87 343a32 32 0 0 1-46-46l160-160z"),I(Z,"class","svelte-9ebu9g"),I(X,"viewBox","0 0 512 512"),I(X,"class","svelte-9ebu9g"),I(G,"aria-label","Expand/Hide Filter Controls"),I(G,"class",Q=p("close-filters"+(t[33]?"":" display-none"))+" svelte-9ebu9g"),I(G,"tabindex",ee=t[46]||t[44]||!t[33]?"-1":"0"),I(ie,"class",le=p(t[50]&&t[51]||!t[52]?"":" loading")+" svelte-9ebu9g"),I(ie,"role","status"),I(oe,"class","status-and-trivia svelte-9ebu9g"),I(ne,"class","status-and-trivia-wrapper svelte-9ebu9g"),I(ne,"aria-label","Status of Page and Extra Trivia"),I(se,"class","disable-interaction svelte-9ebu9g"),I(se,"for","search-media"),I(ue,"id","search-media"),I(ue,"class","search-media svelte-9ebu9g"),I(ue,"type","search"),I(ue,"enterkeyhint","search"),I(ue,"autocomplete","off"),I(ue,"placeholder","Search"),I(ue,"tabindex",de=t[46]||t[44]?"-1":"0"),I(ae,"class","search-media-wrap svelte-9ebu9g"),I(ae,"aria-label","Anime, Manga, Novel"),I(ge,"d",ye=t[32]?"M183 9a32 32 0 0 0-46 0l-96 96a32 32 0 0 0 46 46l41-42v294l-41-42a32 32 0 0 0-46 46l96 96c13 12 33 12 46 0l96-96a32 32 0 0 0-46-46l-41 42V109l41 42a32 32 0 0 0 46-46L183 9z":"m407 375 96-96c12-13 12-33 0-46l-96-96a32 32 0 0 0-46 46l42 41H109l42-41a32 32 0 0 0-46-46L9 233a32 32 0 0 0 0 46l96 96a32 32 0 0 0 46-46l-42-41h294l-42 41a32 32 0 0 0 46 46z"),I(ge,"class","svelte-9ebu9g"),I(he,"viewBox",we=`0 0 ${t[32]?"312":"512"} 512`),I(he,"class","svelte-9ebu9g"),I(fe,"tabindex",ve=t[46]||t[44]?"":"0"),I(fe,"class","change-grid-view svelte-9ebu9g"),I(fe,"role","button"),I(fe,"aria-label","Change List View"),I(me,"class","last-filter-option svelte-9ebu9g"),I(n,"id","controls"),I(n,"aria-label","List of Control Actions for the App"),I(n,"class","svelte-9ebu9g"),U(n,"--filters-space",t[33]?"80px":""),U(n,"--active-tag-filter-space",t[33]?"auto":""),U(n,"--category-settings-space",t[33]?"30px":""),U(n,"--close-filters-space",t[33]?"42px":""),U(n,"--max-filter-selection-height",Te)},m(e,i){M(e,n,i),x(n,o),x(o,l),x(o,r),x(o,a),B(a,t[24]),x(o,u),Le&&Le.m(o,null),x(o,d),Ae&&Ae.m(o,null),x(o,m),x(o,f),x(f,h),x(h,g),x(n,b),x(n,k),Pe.m(k,null),x(k,E),Ie&&Ie.m(k,null),x(k,$),Fe&&Fe.m(k,null),x(k,L),Be&&Be.m(k,null),x(n,P),x(n,F),Ue&&Ue.m(F,null),x(F,D),De&&De.m(F,null),x(n,j),x(n,H),x(H,O),x(O,V),x(V,q),x(q,_),x(O,W);for(let e=0;e<$e.length;e+=1)$e[e]&&$e[e].m(O,null);x(n,K),x(n,G),x(G,X),x(X,Z),x(n,te),x(n,ne),x(ne,oe),x(oe,ie),Ve.m(ie,null),x(n,re),x(n,ae),x(ae,se),x(ae,ce),x(ae,ue),B(ue,t[35]),x(n,pe),x(n,me),x(me,fe),x(fe,he),x(he,ge),x(me,be),qe&&qe.m(me,null),x(me,ke),We.m(me,null),Me||(Ce=[N(a,"input",t[87]),N(a,"focusin",t[88]),N(h,"click",t[96]),N(h,"keyup",t[97]),N(o,"keyup",t[98]),N(o,"click",t[72]),N(F,"wheel",t[129]),N(V,"click",t[67]),N(V,"keyup",t[130]),N(G,"click",t[135]),N(G,"keyup",t[136]),N(ie,"keyup",Aa),N(ue,"input",t[137]),N(ue,"focusin",t[138]),N(fe,"click",t[81]),N(fe,"keyup",t[139])],Me=!0)},p(e,t){128&t[0]&&s!==(s=null==e[7]?"Kanshi":"Category")&&I(a,"placeholder",s),33554432&t[0]&&c!==(c=!e[25])&&(a.disabled=c),16777216&t[0]&&a.value!==e[24]&&B(a,e[24]),33554432&t[0]&&U(a,"pointer-events",e[25]?"":"none"),e[25]&&e[33]?Le&&(Le.d(1),Le=null):Le?Le.p(e,t):(Le=zr(e),Le.c(),Le.m(o,d)),e[33]?Ae?Ae.p(e,t):(Ae=Ar(e),Ae.c(),Ae.m(o,m)):Ae&&(Ae.d(1),Ae=null),40960&t[1]&&y!==(y=e[46]||e[44]?"":"0")&&I(h,"tabindex",y),33554432&t[0]&&w!==(w=p("category-wrap"+(e[25]?" editing":""))+" svelte-9ebu9g")&&I(o,"class",w),33554440&t[0]|40960&t[1]&&v!==(v=e[25]||e[46]||e[44]||e[3]?"":"0")&&I(o,"tabindex",v),4&t[1]&&U(o,"--edit-cancel-icon",e[33]?"25px":""),50331648&t[0]|1028&t[1]&&U(o,"--save-icon",e[33]&&e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]?"25px":""),Ne===(Ne=Se(e))&&Pe?Pe.p(e,t):(Pe.d(1),Pe=Ne(e),Pe&&(Pe.c(),Pe.m(k,E))),e[30]>0?Ie?Ie.p(e,t):(Ie=Fr(e),Ie.c(),Ie.m(k,$)):Ie&&(Ie.d(1),Ie=null),e[33]&&e[42]?.length>1?Fe?Fe.p(e,t):(Fe=Br(e),Fe.c(),Fe.m(k,L)):Fe&&(Fe.d(1),Fe=null),e[33]&&e[24]&&e[41]&&!e[41]?.[e[24]]?Be?Be.p(e,t):(Be=Ur(e),Be.c(),Be.m(k,null)):Be&&(Be.d(1),Be=null),4&t[1]&&S!==(S=p("category-settings-wrap"+(e[33]?"":" display-none"))+" svelte-9ebu9g")&&I(k,"class",S),16777216&t[0]|1028&t[1]&&U(k,"--add-icon-size",e[33]&&e[24]&&e[41]&&!e[41]?.[e[24]]?"25px":""),1073741824&t[0]|2048&t[1]&&U(k,"--remove-icon-size",e[42]?.length>1?e[30]>0?"25px":"1fr":""),1073741824&t[0]&&U(k,"--mape-size",e[30]>0?"1fr":""),e[15]&&e[49]?Ue?Ue.p(e,t):(Ue=Dr(e),Ue.c(),Ue.m(F,D)):Ue&&(Ue.d(1),Ue=null),e[15]&&e[49]?De&&(De.d(1),De=null):De?De.p(e,t):(De=ca(e),De.c(),De.m(F,null)),131140&t[1]&&R!==(R=p("filters"+(e[33]?"":" display-none")+(e[48]?" has-wheel":"")+(e[80]&&e[37]?" android":""))+" svelte-9ebu9g")&&I(F,"class",R),1048608&t[0]&&U(F,"--max-padding-height",e[5]?e[20]+65+"px":"0"),40964&t[1]&&Y!==(Y=e[46]||e[44]||!e[33]?"-1":"0")&&I(V,"tabindex",Y),69632&t[0]|16818180&t[1]|32792&t[2]&&(Re=e[16]||[],$e=Ee($e,t,je,1,e,Re,ze,O,xe,wa,null,mr)),65536&t[0]|4&t[1]&&J!==(J=p("active-filters"+(e[33]&&e[16]?.length?"":" display-none"))+" svelte-9ebu9g")&&I(H,"class",J),4&t[1]&&Q!==(Q=p("close-filters"+(e[33]?"":" display-none"))+" svelte-9ebu9g")&&I(G,"class",Q),40964&t[1]&&ee!==(ee=e[46]||e[44]||!e[33]?"-1":"0")&&I(G,"tabindex",ee),Oe===(Oe=He(e))&&Ve?Ve.p(e,t):(Ve.d(1),Ve=Oe(e),Ve&&(Ve.c(),Ve.m(ie,null))),3670016&t[1]&&le!==(le=p(e[50]&&e[51]||!e[52]?"":" loading")+" svelte-9ebu9g")&&I(ie,"class",le),40960&t[1]&&de!==(de=e[46]||e[44]?"-1":"0")&&I(ue,"tabindex",de),16&t[1]&&ue.value!==e[35]&&B(ue,e[35]),2&t[1]&&ye!==(ye=e[32]?"M183 9a32 32 0 0 0-46 0l-96 96a32 32 0 0 0 46 46l41-42v294l-41-42a32 32 0 0 0-46 46l96 96c13 12 33 12 46 0l96-96a32 32 0 0 0-46-46l-41 42V109l41 42a32 32 0 0 0 46-46L183 9z":"m407 375 96-96c12-13 12-33 0-46l-96-96a32 32 0 0 0-46 46l42 41H109l42-41a32 32 0 0 0-46-46L9 233a32 32 0 0 0 0 46l96 96a32 32 0 0 0 46-46l-42-41h294l-42 41a32 32 0 0 0 46 46z")&&I(ge,"d",ye),2&t[1]&&we!==(we=`0 0 ${e[32]?"312":"512"} 512`)&&I(he,"viewBox",we),40960&t[1]&&ve!==(ve=e[46]||e[44]?"":"0")&&I(fe,"tabindex",ve),(e[34]||e[38]||e[45][""]||e[45][e[7]])&&!1===e[36]?qe?qe.p(e,t):(qe=xa(e),qe.c(),qe.m(me,ke)):qe&&(qe.d(1),qe=null),Ye===(Ye=_e(e))&&We?We.p(e,t):(We.d(1),We=Ye(e),We&&(We.c(),We.m(me,null))),4&t[1]&&U(n,"--filters-space",e[33]?"80px":""),4&t[1]&&U(n,"--active-tag-filter-space",e[33]?"auto":""),4&t[1]&&U(n,"--category-settings-space",e[33]?"30px":""),4&t[1]&&U(n,"--close-filters-space",e[33]?"42px":""),1048576&t[0]&&Te!==(Te=`${e[20]}px`)&&U(n,"--max-filter-selection-height",Te)},i:e,o:e,d(e){e&&C(n),Le&&Le.d(),Ae&&Ae.d(),Pe.d(),Ie&&Ie.d(),Fe&&Fe.d(),Be&&Be.d(),Ue&&Ue.d(),De&&De.d();for(let e=0;e<$e.length;e+=1)$e[e].d();Ve.d(),qe&&qe.d(),We.d(),Me=!1,i(Ce)}}}function za(e,t){try{"string"==typeof t&&(e.value=t)}catch(e){}}const Ta=()=>{},La=()=>{},Aa=()=>{};function Sa(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,P,I,F,B,U,D,R,j,H,O,V,q,_;d(e,Jt,(e=>n(32,o=e))),d(e,un,(e=>n(33,i=e))),d(e,sn,(e=>n(34,l=e))),d(e,ht,(e=>n(35,r=e))),d(e,wt,(e=>n(7,a=e))),d(e,Qt,(e=>n(152,s=e))),d(e,en,(e=>n(153,c=e))),d(e,Wt,(e=>n(36,u=e))),d(e,qe,(e=>n(154,p=e))),d(e,Je,(e=>n(37,f=e))),d(e,an,(e=>n(38,h=e))),d(e,fn,(e=>n(155,g=e))),d(e,lt,(e=>n(39,y=e))),d(e,dn,(e=>n(156,w=e))),d(e,At,(e=>n(40,v=e))),d(e,mt,(e=>n(8,b=e))),d(e,gt,(e=>n(41,x=e))),d(e,yt,(e=>n(42,k=e))),d(e,Yt,(e=>n(43,E=e))),d(e,ln,(e=>n(44,M=e))),d(e,Mt,(e=>n(157,C=e))),d(e,st,(e=>n(158,$=e))),d(e,kt,(e=>n(9,z=e))),d(e,Et,(e=>n(10,T=e))),d(e,Tt,(e=>n(159,L=e))),d(e,Pt,(e=>n(45,A=e))),d(e,Lt,(e=>n(160,S=e))),d(e,zt,(e=>n(85,N=e))),d(e,$t,(e=>n(86,P=e))),d(e,it,(e=>n(161,I=e))),d(e,bt,(e=>n(11,F=e))),d(e,xt,(e=>n(12,B=e))),d(e,tn,(e=>n(46,U=e))),d(e,Ft,(e=>n(47,D=e))),d(e,tt,(e=>n(48,R=e))),d(e,vt,(e=>n(49,j=e))),d(e,St,(e=>n(50,H=e))),d(e,Kt,(e=>n(51,O=e))),d(e,Nt,(e=>n(52,V=e))),d(e,ct,(e=>n(53,q=e))),d(e,ut,(e=>n(54,_=e)));let Y,J,K,G,X,Z,Q,ee,ne,oe,ie,le,re,ae,se=Nn("selectedFilterCategoryName"),ce=Et.subscribe((e=>{e&&(m(Lt,S=e,S),ce?.(),ce=null)})),ue=kt.subscribe((e=>{e&&(m(Tt,L=e,L),ue?.(),ue=null)})),de={},pe={},me={},fe=.3*I,he=["Weighted Score","Score","Average Score","User Score","Popularity","Year"];async function ge(e,t){if(!1!==u||E)return Ke();if(!Mn(t))return;const n=t?.selectedCategory;if(n&&m(Pt,A[n]=new Date,A),et.update((e=>!e)),"Media Filter"===e)try{t.updateMediaFilter=!0,await ye(t)}catch{b?.[n]&&P[n]&&m(mt,b[n].mediaFilters=P[n],b)}else if("sortBy"===e)try{t.updateMediaFilter=!0,await ye(t)}catch{b?.[n]&&N[n]&&m(mt,b[n].sortBy=N[n],b)}else if("Algorithm Filter"===e)try{m(Pt,A[""]=new Date,A),await async function(e){if(f&&!0===window[p])throw new Error("Something went wrong...");await no(e)}(t),m(Lt,S=t.algorithmFilters,S);try{await ye({updateRecommendedMediaList:!0})}catch{}}catch{S&&m(Et,T=S,T)}else if("Content Caution"===e)try{m(Pt,A[""]=new Date,A),await ye(t),m(Tt,L=t.mediaCautions,L)}catch{L&&m(kt,z=L,z)}}async function ye(e){if(f&&!0===window[p])throw new Error("Something went wrong...");await Xn(e)}function we(e,t){e.stopPropagation(),Pn("selectedFilterCategoryName",n(2,se=t)).catch((()=>In("selectedFilterCategoryName"))),le instanceof Element&&le.closest(".filter-category")&&($o(le,"highlight"),le=null),n(4,ne=!1)}function ve(e){let t=e.target,o=t?.classList||[],i=t?.closest?.(".filter-category"),l=t?.closest?.(".options-wrap");if(!o.contains("filter-category")&&!i||ne||o.contains("closing-x")||t.closest(".closing-x")){if((!l||o.contains("closing-x")||t.closest(".closing-x"))&&!o.contains("options-wrap")){let e=ne?.querySelector?.(".options-wrap");e?(Co(e,"hide"),Be((()=>{$o(e,"hide"),le instanceof Element&&le.closest(".filter-category")&&($o(le,"highlight"),le=null),n(4,ne=!1)}),200)):(le instanceof Element&&le.closest(".filter-category")&&($o(le,"highlight"),le=null),n(4,ne=!1))}}else n(4,ne=i||t||!0)}function be(e,t){let o=e.target,i=o?.closest?.(".filter-select");i!==oe&&(oe instanceof Element&&n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&($o(le,"highlight"),le=null),n(22,ae=t),n(5,oe=i||o||!0))}function xe(){let e=oe?.querySelector?.(".options-wrap");e?(Co(e,"hide"),Be((()=>{$o(e,"hide"),n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&($o(le,"highlight"),le=null),n(22,ae=n(5,oe=null))}),200)):(n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&($o(le,"highlight"),le=null),n(22,ae=n(5,oe=null)))}async function ke(e){let t=e?.target,o=t?.classList||[];if(o.contains("options-wrap")&&"fixed"===getComputedStyle(t).position){let e=ee||ne||ie||oe,t=e?.querySelector?.(".options-wrap");t?(Co(t,"hide"),Be((()=>{$o(t,"hide"),le instanceof Element&&($o(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,ie=!1),n(22,ae=n(5,oe=null))}),200)):(le instanceof Element&&($o(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,ie=!1),n(22,ae=n(5,oe=null)))}else if(!(o.contains("options-wrap")||t?.closest?.(".options-wrap")||o.contains("full-popup-wrapper")||t?.closest?.(".full-popup-wrapper")||o.contains("item-info")||o.contains("extra-item-info")||o.contains("item-info-path")||t?.closest?.(".item-info")||t?.closest?.(".extra-item-info"))){let e=t?.closest?.(".category-wrap");o.contains("category-wrap")||e||(le instanceof Element&&le.closest(".category-wrap")&&($o(le,"highlight"),le=null),n(3,ee=!1));let i=t?.closest(".filter-category");o.contains("filter-category")||i||(le instanceof Element&&le.closest(".filter-category")&&($o(le,"highlight"),le=null),n(4,ne=!1));let l=t?.closest(".sort-filter");o.contains("sort-filter")||l||(le instanceof Element&&le.closest(".sort-filter")&&($o(le,"highlight"),le=null),n(6,ie=!1));let r=t?.closest(".select"),a=t?.closest(".angle-down");o.contains("select")||o.contains("angle-down")||a||r||(le instanceof Element&&le.closest(".filter-select")&&($o(le,"highlight"),le=null),n(22,ae=n(5,oe=null)))}}it.subscribe((e=>{n(20,fe=.3*e)}));let Ee,Me,Ce=!1;function $e(e,t,o,i){if(E||!1!==u||!0===x?.[a])return Ke();let l;if("Media Filter"===o?l=b?.[a]?.mediaFilters:"Algorithm Filter"===o?l=T:"Content Caution"===o&&(l=z),!(l instanceof Array))return;let r,s,c="selection",d=l.findIndex((n=>n?.optionName===e&&n?.optionCategory===t&&n?.filterType===c))??-1,p=l[d],f=p?.status;"none"!==f&&f?"included"!==f||i||(r="excluded"):r="included",r?Mn(p)?l[d].status=r:(l=l.filter((n=>!(n?.optionName===e&&n?.optionCategory===t&&n?.filterType===c))),l.unshift({optionName:e,optionCategory:t,filterType:c,status:"included"})):d>=0&&l.splice(d,1),n(23,Ce=!0),"Media Filter"===o?s={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=l,b)}:"Algorithm Filter"===o?s={algorithmFilters:m(Et,T=l,T)}:"Content Caution"===o&&(s={mediaCautions:m(kt,z=l,z)}),ge(o,s)}function ze(e,t,n){if(E||!1!==u)return Ke();let o,i=e.target,l=i?.classList||[],r=e.key;if(l.contains("filter-bool")&&"click"===e.type||l.contains("filter-bool")&&"Enter"!==r&&"keyup"===e.type)return;if(!0===x?.[a])return Ke();if("Media Filter"===n?o=b?.[a]?.mediaFilters:"Algorithm Filter"===n?o=T:"Content Caution"===n&&(o=z),!(o instanceof Array))return;let s,c,d="bool",p=o.findIndex((e=>e?.optionName===t&&e?.filterType===d))??-1,f=o[p],h=f?.status;"none"!==h&&h||(s="included"),s?Mn(f)?o[p].status=s:(o=o.filter((e=>!(e?.optionName===t&&e?.filterType===d))),o.unshift({optionName:t,filterType:d,status:"included"})):p>=0&&o.splice(p,1),"Media Filter"===n?c={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=o,b)}:"Algorithm Filter"===n?c={algorithmFilters:m(Et,T=o,T)}:"Content Caution"===n&&(c={mediaCautions:m(kt,z=o,z)}),ge(n,c)}function Te(e,t,o,i,l,r,s){let c,d=s+t;if(E||!1!==u)return To(e.target,o),n(18,pe[d]=o,pe),Ke();if(!0===x?.[a])return To(e.target,o),n(18,pe[d]=o,pe),Ke();if("Media Filter"===s?c=b?.[a]?.mediaFilters:"Algorithm Filter"===s?c=T:"Content Caution"===s&&(c=z),!(c instanceof Array))return To(e.target,o),void n(18,pe[d]=o,pe);let p,f="number",h=c.findIndex((e=>e?.optionName===t&&e?.filterType===f))??-1,g=!1;if(he.includes(t)&&/^(>=|<=|<|>).*($)/.test(i)){const a=i?.split(/(<=|>=|<|>)/)?.filter?.((e=>e));if(i!==o&&a.length<=2){const s=a[0].trim(),u=a[1];if(i!==o&&(!isNaN(u)&&(parseFloat(u)>=r||"number"!=typeof r)&&(parseFloat(u)<=l||"number"!=typeof l)||!u))if(g=!0,u){h>=0?(c[h].optionValue=i,c[h].CMPOperator=s,c[h].CMPNumber=u,c[h].status="included"):(c=c.filter((e=>!(e?.optionName===t&&e?.filterType===f))),c.unshift({optionName:t,filterType:f,optionValue:i,CMPOperator:s,CMPNumber:u,status:"included"}))}else h>=0&&c.splice(h,1);else To(e.target,o),n(18,pe[d]=o,pe)}else To(e.target,o),n(18,pe[d]=o,pe)}else{if("="===i)return;if("="===i?.[0]&&(i=i.replace("=","")),i!==o&&(!isNaN(i)&&(parseFloat(i)>=r||"number"!=typeof r)&&(parseFloat(i)<=l||"number"!=typeof l)||""===i))if(g=!0,""===i)h>=0&&c.splice(h,1);else{h>=0?(delete c[h].CMPOperator,delete c[h].CMPNumber,c[h].optionValue=i,c[h].status="included"):(c=c.filter((e=>!(e?.optionName===t&&e?.filterType===f))),c.unshift({optionName:t,filterType:f,optionValue:i,status:"included"}))}else To(e.target,o),n(18,pe[d]=o,pe)}g&&("Media Filter"===s?p={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=c,b)}:"Algorithm Filter"===s?p={algorithmFilters:m(Et,T=c,T)}:"Content Caution"===s&&(p={mediaCautions:m(kt,z=c,z)}),ge(s,p))}function Le(e,t,o,i,l,r){if(E||!1!==u||!0===x?.[a])return Ke();if(!(Z instanceof Array&&Z[i]))return;let s=e?.target,c=s?.classList;if(c?.contains?.("remove-active-filter")||s?.closest?.(".remove-active-filter"))return;let d,p=se;"number"===t?i>=0&&("included"===l?n(16,Z[i].status="none",Z):null!=l&&n(16,Z[i].status="included",Z)):"bool"===t?"included"===l?(n(19,me[p+o]=!1,me),n(16,Z[i].status="none",Z)):null!=l&&(n(19,me[p+o]=!0,me),n(16,Z[i].status="included",Z)):"selection"===t&&n(16,Z[i].status="included"!==l||r?"none"===l?"included":"none":"excluded",Z),"Media Filter"===p?d={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=Z,b)}:"Algorithm Filter"===p?d={algorithmFilters:m(Et,T=Z,T)}:"Content Caution"===p&&(d={mediaCautions:m(kt,z=Z,z)}),ge(p,d)}function Ae(e){if(E||!1!==u||!0===x?.[a])return Ke();if(!(Z instanceof Array&&Z[e]))return;Z.splice(e,1);let t,n=se;"Media Filter"===n?t={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=Z,b)}:"Algorithm Filter"===n?t={algorithmFilters:m(Et,T=Z,T)}:"Content Caution"===n&&(t={mediaCautions:m(kt,z=Z,z)}),ge(n,t)}async function Se(){if(E||!1!==u)return Ke();let e=a;if(!0===x?.[e])return Ke();let t=se;if(await c("Do you want to remove all the active tags?")){if(E||!1!==u||!0===x?.[e])return Ke();let n;"Media Filter"===t?n={selectedCategory:e,mediaFilters:m(mt,b[e].mediaFilters=[],b)}:"Algorithm Filter"===t?n={algorithmFilters:m(Et,T=[],T)}:"Content Caution"===t&&(n={mediaCautions:m(kt,z=[],z)}),ge(t,n)}}function Ne(e){if(E||!1!==u)return Ke();let t=e.target,o=t.classList,i=t.closest(".sort-filter"),l=t.closest(".options-wrap");if(!o.contains("sort-filter")&&!i||ie){if((!l||o.contains("closing-x")||t.closest(".closing-x"))&&!o.contains("options-wrap")){let e=ie?.querySelector?.(".options-wrap");e?(Co(e,"hide"),Be((()=>{$o(e,"hide"),le instanceof Element&&le.closest(".sort-filter")&&($o(le,"highlight"),le=null),n(6,ie=!1)}),200)):(le instanceof Element&&le.closest(".sort-filter")&&($o(le,"highlight"),le=null),n(6,ie=!1))}}else n(6,ie=i||t||!0)}function Pe(e){if(E||!1!==u||!0===x?.[a]||!b?.[a]?.sortBy)return Ke();let t;J!==e?(m(mt,b[a].sortBy={sortName:e,sortType:"desc"},b),t={selectedCategory:a,sortBy:b[a].sortBy}):"desc"===K?(m(mt,b[a].sortBy.sortType="asc",b),t={selectedCategory:a,sortBy:b[a].sortBy}):"asc"===K&&(m(mt,b[a].sortBy.sortType="desc",b),t={selectedCategory:a,sortBy:b[a].sortBy}),ge("Media Filter",t),le instanceof Element&&le.closest(".sort-filter")&&($o(le,"highlight"),le=null),n(6,ie=!1)}function Ie(){if(E||!1!==u||!0===x?.[a]||!b?.[a]?.sortBy)return Ke();let e;"desc"===K?(m(mt,b[a].sortBy.sortType="asc",b),e={selectedCategory:a,sortBy:b[a].sortBy}):"asc"===K&&(m(mt,b[a].sortBy.sortType="desc",b),e={selectedCategory:a,sortBy:b[a].sortBy}),ge("Media Filter",e)}async function Fe(){n(3,ee=!1),n(24,Ee=a),n(25,We=!1),Pn("showFilterOptions",m(un,i=!i,i)).catch((()=>In("showFilterOptions")))}function Ue(e){let t=e.target,o=t.classList;if(t.closest(".category-icon-wrap")||o.contains("category-icon-wrap"))return;if(!x)return Ke(),le instanceof Element&&le.closest(".category-wrap")&&($o(le,"highlight"),le=null),void n(3,ee=!1);if(t.closest(".option")||o.contains("option"))return;let i=t.closest(".category-wrap"),l=t.closest(".options-wrap");if(!o.contains("category-wrap")&&!i||ee||o.contains("closing-x")||t.closest(".closing-x")){if((!l||o.contains("closing-x")||t.closest(".closing-x"))&&!o.contains("options-wrap")){let e=ee?.querySelector?.(".options-wrap");e?(Co(e,"hide"),Be((()=>{$o(e,"hide"),le instanceof Element&&le.closest(".category-wrap")&&($o(le,"highlight"),le=null),n(3,ee=!1)}),200)):(le instanceof Element&&le.closest(".category-wrap")&&($o(le,"highlight"),le=null),n(3,ee=!1))}}else n(3,ee=i||t||!0)}async function Re(e){if(!x)return Ke();i&&o||!($>57)||(window.scrollY=document.documentElement.scrollTop=57),o&&C&&(m(Mt,C.style.overflow="hidden",C),m(Mt,C.style.overflow="",C),C.scroll({left:0,behavior:"smooth"})),M&&(Q.scrollTop=0),m(wt,a=e,a),n(3,ee=!1)}async function je(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();let t=Ee;if(t&&e!==t&&x?.[e]){let o=`<span style="color:hsl(var(--ac-color));">${t.trim()}</span>`;if(await c({title:"Save category",text:`Do you want to change the category name to ${o}?`})){if(!0===x?.[e])return Ke();x&&t&&e!==t&&x?.[e]&&(window.deletedCategory?.(e),delete x?.[e],m(gt,x[t]=!0,x),m(wt,a=t,a),n(25,We=!1),ye({renamedCategoryKey:t,replacedCategoryKey:e}))}}}async function He(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();let t=Ee;if(t&&!x?.[t]){let o=`<span style="color:hsl(var(--ac-color));">${t.trim()}</span>`;if(await c({title:"Add custom category",text:`Do you want to add a custom category named ${o}?`})){if(!0===x?.[e])return Ke();x&&!x?.[t]&&(m(gt,x[t]=!0,x),m(wt,a=t,a),n(25,We=!1),ye({addedCategoryKey:t,copiedCategoryKey:e}))}}}async function Oe(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();if(x?.[e]&&Object.values(x||{}).length>1){let t=`<span style="color:hsl(var(--ac-color));">${e.trim()}</span>`;if(await c({title:"Delete category",text:`Do you want to delete the category named ${t}?`})){if(!0===x?.[e])return Ke();if(x&&x?.[e]&&Object.values(x||{}).length>1){n(25,We=!1);let t,o=k?.findIndex?.((t=>t===e));if(o>0)t=k[o-1];else if(0===o&&k?.length>1)t=k[1];else for(let n in x)if(n!==e){t=n;break}window.deletedCategory?.(e),delete x?.[e],delete b?.[e],gt.set(x),mt.set(b),m(wt,a=t,a),ye({deletedCategoryKey:e})}}}else f?De("Requires atleast one category"):m(fn,g="Requires atleast one category",g)}function Ve({tag:e,category:t},n){if("tag category"===n&&null!=e){for(let t in v)for(let n in v[t])if(n===e)return t||""}else if("category and description"===n&&null!=e){null==t&&(t=Ve({tag:e},"tag category"));let n=v?.[t]?.[e];if(n)return`Description: ${n}\n\nCategory: ${t}`}else if("all tags"===n&&null!=t){let e=v?.[t],n=Object.keys(e||{});if(!Cn(e))return n.join(", ")}return""}function _e(e){let t=v?.[e];if(!e||!Mn(t)||Cn(t))return"";let n="",o=Object.keys(v?.[e])||[];for(let t=0,i=o.length;t<i;t++)n+=`\n                <li onclick="window.showTagInfoHTML?.(event,'${o[t]}','${e}')">\n                    ${o[t]}\n                </li>\n            `;return`\n            <div class="is-custom-table">\n                <header class="custom-header">\n                    <h1 class="custom-h1">${e}</h1>\n                </header>\n                <ul class="custom-table-list">\n                    ${n}\n                </ul> \n            </div>\n        `}function Ye(e,t){null==t&&(t=Ve({tag:e},"tag category"));let n=v?.[t]?.[e];return t&&n?`\n            <div class="is-custom-table">\n                <header class="custom-header">\n                    <h1 class="custom-h1">${e}</h1>\n                    <h4 class="custom-extra" onclick="window.showTagCategoryInfoHTML?.(event,'${t}')">${t}</h4>\n                </header>\n                <div class="custom-description">${n}</div>\n            </div>\n        `:""}wt.subscribe((e=>{e&&(Me&&Me!==e?(On({categorySelected:e}),n(24,Ee=e),Pn("selectedCategory",e).catch((()=>In("selectedCategory"))).finally((()=>Sn("selectedCategory",e)))):null==Ee&&n(24,Ee=e),Me=e)})),window.getTagInfoHTML=Ye,window.showTagInfoHTML=(e,t,n)=>{e.stopPropagation();let o=Ye(t,n);o&&window.showFullScreenInfo?.(o)},window.showTagCategoryInfoHTML=(e,t)=>{e.stopPropagation();let n=_e(t);n&&window.showFullScreenInfo?.(n)};let We=!1;function Ke(){f?De("Please wait a moment"):m(fn,g="Please wait a moment",g)}dn.subscribe((e=>{if(e)window.addHistory?.();else if(!1===e&&y<=425){let e=ee||ne||ie||oe,t=e?.querySelector?.(".options-wrap");t?(Co(t,"hide"),Be((()=>{$o(t,"hide"),le instanceof Element&&($o(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,ie=!1),n(22,ae=n(5,oe=null))}),200)):(le instanceof Element&&($o(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,ie=!1),n(22,ae=n(5,oe=null)))}}));let Ge,Xe,Ze=Nn("nonScrollSnapFilters")??!0,Qe=Nn("meanAverageScore"),nt=Nn("meanAnimePopularity"),ot=Nn("meanMangaPopularity"),rt=Nn("meanNovelPopularity");function at(){const e=!o;Pn("gridFullView",m(Jt,o=e,o)).catch((()=>In("gridFullView"))).finally((()=>Sn("gridFullView",e)))}async function dt(){if(!f||!0!==window[p])return!1!==u?Ke():void(await c({title:"Reload List",text:"Do you want to refresh your list to sync changes?"})&&(m(Qt,s=!0,s),Xn({updateRecommendedMediaList:!0}),m(sn,l=m(an,h=!1,h),l)))}async function pt(){if(!f||!0!==window[p])return!1!==u?Ke():void(await c({title:"Reload List",text:"Do you want to refresh your list to sync changes?"})&&(m(Qt,s=!0,s),On({loadMore:!0,selectedCategory:a,searchedWord:r,reload:!0}),m(sn,l=!1,l)))}window.updateMeanNumberInfos=(e,t,o,i)=>{e&&e>0&&(n(26,Qe=e),Pn("meanAverageScore",Qe).catch((()=>In("meanAverageScore")))),t&&t>0&&(n(27,nt=t),Pn("meanAnimePopularity",nt).catch((()=>In("meanAnimePopularity")))),o&&o>0&&(n(28,ot=o),Pn("meanMangaPopularity",ot).catch((()=>In("meanMangaPopularity")))),i&&i>0&&(n(29,rt=i),Pn("meanNovelPopularity",rt).catch((()=>In("meanNovelPopularity"))))},(async()=>{n(30,Ge=await An("recommendationError"))})(),window.updateRecommendationError=e=>{Ge>0&&Ge!==e?(n(31,Xe=e<Ge||!(e>Ge)&&null),n(30,Ge=e)):e>0?n(30,Ge=e):n(31,Xe=n(30,Ge=null))},W((async()=>{n(2,se=se||"Media Filter"),m(un,i=i??!1,i),m(Jt,o=o??await An("gridFullView"),o),null==o&&Pn("gridFullView",m(Jt,o=!1,o)).catch((()=>In("gridFullView"))).finally((()=>Sn("gridFullView",!1))),Q=document.getElementById("popup-container"),window.addEventListener("click",ke),document.addEventListener("keydown",(async e=>{let t=e.key;if("ArrowUp"===t||"ArrowDown"===t){let o=Array.from(document?.getElementsByClassName?.("options-wrap")||[])?.find?.((e=>!e?.classList?.contains?.("display-none")));if(o?.closest?.(".filter-category")||o?.closest?.(".sort-filter")||o?.closest?.(".filter-select")||o?.closest?.(".category-wrap"))if(e.preventDefault(),le instanceof Element&&le?.closest?.(".options")?.children?.length){let e=le.closest(".options");"ArrowUp"===t&&oe&&!le?.previousElementSibling&&(n(23,Ce=!0),await te());let o,i,l,r,a=Array.from(e.querySelectorAll(".option")),s=a.indexOf(le);for(let e=0,n=a.length;e<n;e++)if(!a[e].classList.contains("display-none"))if("ArrowUp"===t){if(r=a[e],e<s)i=a[e];else if(i){o=i;break}}else if(l||(l=a[e]),e>s){o=a[e];break}let c=!1;o instanceof Element||(l instanceof Element?(o=l,c=!0):r instanceof Element&&(o=r,c=!0)),o instanceof Element&&($o(le,"highlight"),le=o,Co(le,"highlight"),le.scrollIntoView({behavior:c?"auto":"smooth",block:"nearest"}))}else{let e=o.querySelectorAll(".option:not(.display-none)");le=e[0],le instanceof Element&&(Co(le,"highlight"),le.scrollIntoView({behavior:"smooth",block:"nearest"}))}}else if("Enter"===t){if(le instanceof Element){let e=new KeyboardEvent("keyup",{key:"Enter"});le.dispatchEvent(e)}}else{let e=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("display-none")));if(e?.closest?.(".filter-select")&&"Tab"!==t||e instanceof Element&&"fixed"===getComputedStyle(e).position)return;n(3,ee=null),n(4,ne=null),n(6,ie=null),n(22,ae=n(5,oe=null)),le instanceof Element&&($o(le,"highlight"),le=null)}}))}));return e.$$.update=()=>{if(385&e.$$.dirty[0]|25165824&e.$$.dirty[2]){let e=b?.[a];n(0,Y=e?.mediaFilters),null==P[a]&&m($t,P[a]=Y,P);let t=e?.sortBy;null==N[a]&&m(zt,N[a]=t,N),n(13,J=t?.sortName),n(14,K=t?.sortType)}if(1541&e.$$.dirty[0]&&n(16,Z="Media Filter"===se?Y:"Algorithm Filter"===se?T:"Content Caution"===se?z:null),4098&e.$$.dirty[0]&&(n(1,G=B.selection),n(15,X=Object.keys(G))),3073&e.$$.dirty[0]){const e=Y?.filter?.((e=>"bool"===e?.filterType))||[],t=T?.filter?.((e=>"bool"===e?.filterType))||[];n(19,me=Object.entries({"Media Filter":F["Media Filter"].bool,"Algorithm Filter":F["Algorithm Filter"].bool}).reduce(((n,[o,i])=>{let l="Media Filter"===o?e:t;for(let e=0;e<i?.length;e++){let t=i[e],r=l?.find?.((e=>e?.optionName===t)),a=r?.status,s="included"===a;n[o+t]=s}return n}),{}))}32&e.$$.dirty[0]&&(oe instanceof Element||n(23,Ce=!1)),120&e.$$.dirty[0]&&m(dn,w=ee||oe||ne||ie,w)},[Y,G,se,ee,ne,oe,ie,a,b,z,T,F,B,J,K,X,Z,de,pe,me,fe,re,ae,Ce,Ee,We,Qe,nt,ot,rt,Ge,Xe,o,i,l,r,u,f,h,y,v,x,k,E,M,A,U,D,R,j,H,O,V,q,_,{JP:"Japan",KR:"South Korea",CN:"China",TW:"Taiwan"},he,we,ve,be,xe,function(e){if(y>425)return;let t=e.target,o=t.classList;if(t.closest(".options-wrap-filter-info")||o.contains("options-wrap-filter-info"))return;let i=this;if(!(i instanceof Element)){let e=ee||ne||ie||oe;i=e?.querySelector?.(".options-wrap")}i instanceof Element&&"fixed"===getComputedStyle(i).position&&(Co(i,"hide"),Be((()=>{$o(i,"hide"),le instanceof Element&&($o(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,ie=!1),n(22,ae=n(5,oe=null))}),200))},$e,ze,Te,Le,Ae,Se,Ne,Pe,Ie,Fe,Ue,Re,je,He,Oe,Ve,_e,Ye,Ze,at,dt,pt,function(){const e=new Date,t=e.getFullYear(),n={winter:new Date(parseInt(t),0,1),spring:new Date(parseInt(t),3,1),summer:new Date(parseInt(t),6,1),fall:new Date(parseInt(t),9,1)};let o,i,l;return e>=n.winter&&e<n.spring?(i=n.spring.getTime()-1,o=new Date(i),l="Winter"):e>=n.spring&&e<n.summer?(i=n.summer.getTime()-1,o=new Date(i),l="Spring"):e>=n.summer&&e<n.fall?(i=n.fall.getTime()-1,o=new Date(i),l="Summer"):(i=new Date(parseInt(t+1),0,1).getTime()-1,o=new Date(i),l="Fall"),`${ci(o.getTime()-(new Date).getTime(),1,!0)} until ${l} Season Ends`},N,P,function(){Ee=this.value,n(24,Ee)},()=>window.addHistory?.(),e=>"Enter"===e.key&&Ue(e),e=>Re(e),(e,t)=>"Enter"===t.key&&Re(e),()=>je(),e=>"Enter"===e.key&&je(),async()=>{n(25,We=!We),n(24,Ee=a),n(3,ee=!1),await te(),document?.getElementById?.("category-name")?.focus?.()},async e=>{"Enter"===e.key&&(n(25,We=!We),n(24,Ee=a),n(3,ee=!1),await te(),document?.getElementById?.("category-name")?.focus?.())},()=>Fe(),e=>"Enter"===e.key&&Fe(),e=>"Enter"===e.key&&Ue(e),e=>"Enter"===e.key&&ve(e),(e,t)=>we(t,e),(e,t)=>"Enter"===t.key&&we(t,e),e=>"Enter"===e.key&&ve(e),()=>k?.length>1&&Oe(),e=>"Enter"===e.key&&k?.length>1&&Oe(),()=>He(),e=>"Enter"===e.key&&He(),function(e){de[e]=this.value,n(17,de)},()=>window.addHistory?.(),e=>"Enter"===e.key&&xe(),(e,t)=>("Enter"===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)&&be(t,e),(e,t)=>{be(t,e)},e=>"Enter"===e.key&&xe(),function(e){de[e]=this.value,n(17,de)},()=>window.addHistory?.(),(e,t)=>function(e,t){if("string"==typeof e&&"string"==typeof t)return e.trim().replace(/[\uFF01-\uFF60\uFFE0-\uFFE6\u3000]/g,(e=>"　"===e?"":String.fromCharCode(e.charCodeAt(0)-65248))).normalize("NFD").replace(/[^a-zA-Z0-9\p{Lo}]/gu,"").toLowerCase().includes(t)}(t,e),(e,t,n)=>n?.optionName===e&&n?.optionCategory===t&&"selection"===n?.filterType,(e,t)=>setTimeout(t,Math.min(17*e,2e9)),(e,t)=>{let n="";"Tag"===e?n=Ye(t):"Tag Category"===e&&(n=_e(t)),window.showFullScreenInfo?.(n)},(e,t,n)=>{if("Enter"===n.key){let n="";"Tag"===e?n=Ye(t):"Tag Category"===e&&(n=_e(t)),window.showFullScreenInfo?.(n)}},(e,t,n,o,i)=>"Enter"===i.key&&$e(e,t,n,o),(e,t,n)=>ze(n,e,t),function(e){me[e]=this.checked,n(19,me),n(0,Y),n(10,T),n(11,F),n(8,b),n(7,a),n(86,P),n(85,N)},(e,t,n)=>ze(n,e,t),(e,t,n)=>"Enter"===n.key&&ze(n,e,t),e=>"number"==typeof e&&e>0?mi(e,0):"N/A",(e,t)=>t?.optionName===e&&"number"===t?.filterType,(e,t,o,i,l,r,a)=>{let s=a.target.value,c=pe[e]??t?.find?.((e=>e?.optionName===o&&"number"===e?.filterType))?.optionValue??"";n(18,pe[e]=s,pe),Te(a,o,c,s,i,l,r)},()=>window.addHistory?.(),e=>{if(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"filters"),o&&!re&&e.deltaY<0){n(21,re=!0);let e=0;document.documentElement.scrollTop=e,n(21,re=!1)}},e=>"Enter"===e.key&&Se(),e=>Ae(e),(e,t)=>"Enter"===t.key&&Ae(e),(e,t,n,o,i,l)=>Le(l,e,t,n,o,B.readOnly[i]),(e,t,n,o,i,l)=>"Enter"===l.key&&Le(l,e,t,n,o,B.readOnly[i]),()=>Fe(),e=>"Enter"===e.key&&Fe(),function(){r=this.value,ht.set(r)},()=>window.addHistory?.(),e=>"Enter"===e.key&&at(),()=>{h||A[""]||A[a]?dt():pt()},e=>{"Enter"!==e.key&&(h||A[""]||A[a]?dt():pt())},e=>"Enter"===e.key&&Ie(),e=>"Enter"===e.key&&Ne(e),e=>"Enter"===e.key&&Ne(e),e=>Pe(e),(e,t)=>"Enter"===t.key&&Pe(e)]}function Na(e){const t=e.slice(),n=t[6]?"Initializing resources":t[2];t[24]=n;const o=t[6]?"Please wait a moment...":t[3];return t[25]=o,t}function Pa(e){let t,n,o,l,r,a,s,c,u,d,p,m,h,g,y,w,v,b,k,E,$,T=e[24]+"",S=e[25]+"",P=!e[1]&&!e[6]&&Ia(e);return{c(){t=z("div"),n=z("div"),o=z("div"),l=z("div"),r=z("h2"),a=L(T),s=A(),c=z("div"),u=z("h2"),d=A(),p=z("div"),P&&P.c(),m=A(),h=z("button"),g=L(e[4]),I(r,"class","confirm-title svelte-1upy7mp"),I(l,"class","confirm-title-wrapper svelte-1upy7mp"),I(u,"class","confirm-text svelte-1upy7mp"),I(c,"class","confirm-info-container svelte-1upy7mp"),I(h,"class","button svelte-1upy7mp"),I(p,"class","confirm-button-container svelte-1upy7mp"),I(o,"class","confirm-container svelte-1upy7mp"),I(n,"class","confirm-wrapper svelte-1upy7mp"),I(t,"class","fixed-confirm-dialog svelte-1upy7mp"),I(t,"role","alertdialog"),I(t,"aria-labelledby",y=e[24]),I(t,"aria-describedby",w=Ba(e[25]))},m(i,y){M(i,t,y),x(t,n),x(n,o),x(o,l),x(l,r),x(r,a),x(o,s),x(o,c),x(c,u),u.innerHTML=S,x(o,d),x(o,p),P&&P.m(p,null),x(p,m),x(p,h),x(h,g),e[15](h),k=!0,E||($=[f(e[11].call(null,c)),N(h,"click",e[8]),N(h,"keydown",e[16]),N(t,"click",e[10]),N(t,"touchend",e[10],{passive:!0}),N(t,"keydown",e[17])],E=!0)},p(n,o){e=n,(!k||68&o)&&T!==(T=e[24]+"")&&F(a,T),(!k||72&o)&&S!==(S=e[25]+"")&&(u.innerHTML=S),e[1]||e[6]?P&&(P.d(1),P=null):P?P.p(e,o):(P=Ia(e),P.c(),P.m(p,m)),(!k||16&o)&&F(g,e[4]),(!k||68&o&&y!==(y=e[24]))&&I(t,"aria-labelledby",y),(!k||72&o&&w!==(w=Ba(e[25])))&&I(t,"aria-describedby",w)},i(e){k||(ne((()=>{k&&(b&&b.end(1),v=ye(t,Ae,{duration:200,easing:Le}),v.start())})),k=!0)},o(e){v&&v.invalidate(),b=we(t,Ae,{duration:200,easing:Le}),k=!1},d(n){n&&C(t),P&&P.d(),e[15](null),n&&b&&b.end(),E=!1,i($)}}}function Ia(e){let t,n,o,l;return{c(){t=z("button"),n=L(e[5]),I(t,"class","button svelte-1upy7mp")},m(i,r){M(i,t,r),x(t,n),o||(l=[N(t,"click",e[9]),N(t,"keydown",e[14])],o=!0)},p(e,t){32&t&&F(n,e[5])},d(e){e&&C(t),o=!1,i(l)}}}function Fa(e){let t,n,o=e[0]&&Pa(Na(e));return{c(){o&&o.c(),t=S()},m(e,i){o&&o.m(e,i),M(e,t,i),n=!0},p(e,[n]){e[0]?o?(o.p(Na(e),n),1&n&&fe(o,1)):(o=Pa(Na(e)),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(pe(),he(o,1,1,(()=>{o=null})),me())},i(e){n||(fe(o),n=!0)},o(e){he(o),n=!1},d(e){o&&o.d(e),e&&C(t)}}}function Ba(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}function Ua(e,t,n){let o,i;d(e,Yt,(e=>n(13,i=e)));const l=function(){const e=Y();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const l=D(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,l)})),!l.defaultPrevented}return!0}}();let r,a,s,c,{showConfirm:u=!1}=t,{isAlert:p=!1}=t,{confirmTitle:m="Confirmation"}=t,{confirmText:f="Do you want to continue?"}=t,{confirmLabel:h="OK"}=t,{cancelLabel:g="CANCEL"}=t,{isImportant:y=!1}=t,w=!1;function v(e){a||w&&"keydown"!==e.type||(n(0,u=!1),l(o?"cancelled":"confirmed"))}function b(e){a||w&&"keydown"!==e.type||(n(0,u=!1),l("cancelled"))}function x(e){if(w&&"keydown"!==e.type)return;let t=e.target,o=t.classList;t.closest(".confirm-container")||o.contains("confirm-container")||(n(0,u=!1),l("cancelled"))}async function k(e){await te(),c=e||c,c instanceof Element?c?.scrollHeight>c?.clientHeight?Co(c,"scrollable"):$o(c,"scrollable"):Co(c,"scrollable")}var E;Yt.subscribe((e=>{!1===e&&"Initializing resources"===m&&p&&(n(0,u=!1),l("cancelled"))})),window.addEventListener("keydown",(e=>{if(null==a){let t=e?.target,n=t?.classList;a=!n?.contains?.("confirm-button-container")&&!t?.closest?.(".confirm-button-container")}})),window.addEventListener("keyup",(()=>{a=null})),E=()=>{u?(window.addHistory?.(),r?.focus?.(),w=!0,s=Be((()=>{w=!1}),200)):(s?.(),w=!1)},Y().$$.after_update.push(E);return e.$$set=e=>{"showConfirm"in e&&n(0,u=e.showConfirm),"isAlert"in e&&n(1,p=e.isAlert),"confirmTitle"in e&&n(2,m=e.confirmTitle),"confirmText"in e&&n(3,f=e.confirmText),"confirmLabel"in e&&n(4,h=e.confirmLabel),"cancelLabel"in e&&n(5,g=e.cancelLabel),"isImportant"in e&&n(12,y=e.isImportant)},e.$$.update=()=>{12290&e.$$.dirty&&n(6,o=i&&!p&&!y),72&e.$$.dirty&&k()},[u,p,m,f,h,g,o,r,v,b,x,k,y,i,e=>"Enter"===e.key&&b(e),function(e){K[e?"unshift":"push"]((()=>{r=e,n(7,r)}))},e=>"Enter"===e.key&&v(e),e=>"Enter"===e.key&&x(e)]}var Da={Fixed:{Categories:class extends Te{constructor(e){super(),ze(this,e,Vl,Ol,r,{},null,[-1,-1])}},Navigator:class extends Te{constructor(e){super(),ze(this,e,Wl,Yl,r,{},null,[-1,-1])}},Menu:class extends Te{constructor(e){super(),ze(this,e,dr,rr,r,{},null,[-1,-1,-1])}}},Media:{MediaGrid:class extends Te{constructor(e){super(),ze(this,e,si,ai,r,{mainCategory:0},null,[-1,-1,-1])}},Fixed:{MediaPopup:class extends Te{constructor(e){super(),ze(this,e,Fl,Sl,r,{},null,[-1,-1,-1,-1,-1,-1])}},MediaOptionsPopup:class extends Te{constructor(e){super(),ze(this,e,Rl,Dl,r,{},null,[-1,-1])}}}},Others:{Search:class extends Te{constructor(e){super(),ze(this,e,Sa,$a,r,{},null,[-1,-1,-1,-1,-1,-1,-1,-1])}},Confirm:class extends Te{constructor(e){super(),ze(this,e,Ua,Fa,r,{showConfirm:0,isAlert:1,confirmTitle:2,confirmText:3,confirmLabel:4,cancelLabel:5,isImportant:12})}}}},Ra="@vercel/analytics",ja="1.1.1",Ha=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function Oa(){return"undefined"!=typeof window}function Va(){try{const e=process.env.NODE_ENV;if("development"===e||"test"===e)return"development"}catch(e){}return"production"}function qa(){return"development"===((Oa()?window.vam:Va())||"production")}function _a(e={debug:!0}){var t;if(!Oa())return;!function(e="auto"){window.vam="auto"!==e?e:Va()}(e.mode),Ha(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=qa()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;const o=document.createElement("script");o.src=n,o.defer=!0,o.setAttribute("data-sdkn",Ra),o.setAttribute("data-sdkv",ja),o.onerror=()=>{const e=qa()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${e}`)},qa()&&!1===e.debug&&o.setAttribute("data-debug","false"),document.head.appendChild(o)}function Ya(e,t,n){const o=e.slice();return o[84]=t[n],o}function Wa(e){let t,n,o,i,l,r;return{c(){t=z("div"),I(t,"role","progressbar"),I(t,"class",n=p("fixed-progress"+(e[4]?" is-below-absolute-progress":""))+" svelte-19a9uc1"),U(t,"--progress","-"+(100-e[7])+"%")},m(e,n){M(e,t,n),i=!0,l||(r=N(t,"outrostart",Qa),l=!0)},p(e,o){(!i||16&o[0]&&n!==(n=p("fixed-progress"+(e[4]?" is-below-absolute-progress":""))+" svelte-19a9uc1"))&&I(t,"class",n),128&o[0]&&U(t,"--progress","-"+(100-e[7])+"%")},i(e){i||(o&&o.end(1),i=!0)},o(e){o=we(t,Ae,{duration:0,delay:400}),i=!1},d(e){e&&C(t),e&&o&&o.end(),l=!1,r()}}}function Ja(t){let n,o;return n=new Da.Media.MediaGrid({props:{mainCategory:""}}),{c(){Me(n.$$.fragment)},m(e,t){Ce(n,e,t),o=!0},p:e,i(e){o||(fe(n.$$.fragment,e),o=!0)},o(e){he(n.$$.fragment,e),o=!1},d(e){$e(n,e)}}}function Ka(e){let t,n,o=[],i=new Map,l=e[16]||[];const r=e=>e[84];for(let t=0;t<l.length;t+=1){let n=Ya(e,l,t),a=r(n);i.set(a,o[t]=Ga(a,n))}return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=S()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);M(e,t,i),n=!0},p(e,n){65536&n[0]&&(l=e[16]||[],pe(),o=Ee(o,n,r,1,e,l,i,t.parentNode,ke,Ga,t,Ya),me())},i(e){if(!n){for(let e=0;e<l.length;e+=1)fe(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)he(o[e]);n=!1},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&C(t)}}}function Ga(e,t){let n,o,i;return o=new Da.Media.MediaGrid({props:{mainCategory:t[84]}}),{key:e,first:null,c(){n=S(),Me(o.$$.fragment),this.first=n},m(e,t){M(e,n,t),Ce(o,e,t),i=!0},p(e,n){t=e;const i={};65536&n[0]&&(i.mainCategory=t[84]),o.$set(i)},i(e){i||(fe(o.$$.fragment,e),i=!0)},o(e){he(o.$$.fragment,e),i=!1},d(e){e&&C(n),$e(o,e)}}}function Xa(e){let t,n,o,i;return{c(){t=z("div"),n=L(e[20]),I(t,"role","alert"),I(t,"class","message-toast svelte-19a9uc1")},m(e,o){M(e,t,o),x(t,n),i=!0},p(e,t){(!i||1048576&t[0])&&F(n,e[20])},i(e){i||(ne((()=>{i&&(o||(o=ve(t,Ae,{duration:200},!0)),o.run(1))})),i=!0)},o(e){o||(o=ve(t,Ae,{duration:200},!1)),o.run(0),i=!1},d(e){e&&C(t),e&&o&&o.end()}}}function Za(e){let t,n,o,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,T,L,S=e[7]>0&&e[7]<100&&Wa(e);o=new Da.Fixed.Navigator({}),r=new Da.Media.Fixed.MediaPopup({}),s=new Da.Others.Search({});const N=[Ka,Ja],P=[];function F(e,t){return e[16]?.length>0?0:1}d=F(e),m=P[d]=N[d](e),g=new Da.Fixed.Categories({}),w=new Da.Fixed.Menu({}),b=new Da.Media.Fixed.MediaOptionsPopup({}),E=new Da.Others.Confirm({props:{showConfirm:e[18],isAlert:e[8],confirmTitle:e[9],confirmText:e[10],confirmLabel:e[11],cancelLabel:e[12],isImportant:e[13]}}),E.$on("confirmed",e[21]),E.$on("cancelled",e[22]);let B=e[20]&&Xa(e);return{c(){t=z("div"),S&&S.c(),n=A(),Me(o.$$.fragment),i=A(),l=z("main"),Me(r.$$.fragment),a=A(),Me(s.$$.fragment),c=A(),u=z("section"),m.c(),h=A(),Me(g.$$.fragment),y=A(),Me(w.$$.fragment),v=A(),Me(b.$$.fragment),k=A(),Me(E.$$.fragment),$=A(),B&&B.c(),I(u,"id","media-list-pager"),I(u,"class",f=p("media-list-pager"+(e[14]?" pager-is-changing":"")+(e[3]?" is-changing-top-position":"")+(e[17]?" remove-snap-scroll":""))+" svelte-19a9uc1"),I(u,"aria-label","List of Category of Media"),U(u,"--grid-position",e[5]+"px"),U(u,"--grid-max-height",e[6]+"px"),U(u,"--media-list-pager-pad",e[1]+"px"),I(l,"class","svelte-19a9uc1"),I(t,"id","app"),I(t,"class",T=p((e[15]?"android":"")+(e[2]?" max-window-height":"")+(e[19]?" popup-visible":""))+" svelte-19a9uc1")},m(p,m){M(p,t,m),S&&S.m(t,null),x(t,n),Ce(o,t,null),x(t,i),x(t,l),Ce(r,l,null),x(l,a),Ce(s,l,null),x(l,c),x(l,u),P[d].m(u,null),e[23](u),x(t,h),Ce(g,t,null),x(t,y),Ce(w,t,null),x(t,v),Ce(b,t,null),x(t,k),Ce(E,t,null),x(t,$),B&&B.m(t,null),L=!0},p(e,o){e[7]>0&&e[7]<100?S?(S.p(e,o),128&o[0]&&fe(S,1)):(S=Wa(e),S.c(),fe(S,1),S.m(t,n)):S&&(pe(),he(S,1,1,(()=>{S=null})),me());let i=d;d=F(e),d===i?P[d].p(e,o):(pe(),he(P[i],1,1,(()=>{P[i]=null})),me(),m=P[d],m?m.p(e,o):(m=P[d]=N[d](e),m.c()),fe(m,1),m.m(u,null)),(!L||147464&o[0]&&f!==(f=p("media-list-pager"+(e[14]?" pager-is-changing":"")+(e[3]?" is-changing-top-position":"")+(e[17]?" remove-snap-scroll":""))+" svelte-19a9uc1"))&&I(u,"class",f),32&o[0]&&U(u,"--grid-position",e[5]+"px"),64&o[0]&&U(u,"--grid-max-height",e[6]+"px"),2&o[0]&&U(u,"--media-list-pager-pad",e[1]+"px");const l={};262144&o[0]&&(l.showConfirm=e[18]),256&o[0]&&(l.isAlert=e[8]),512&o[0]&&(l.confirmTitle=e[9]),1024&o[0]&&(l.confirmText=e[10]),2048&o[0]&&(l.confirmLabel=e[11]),4096&o[0]&&(l.cancelLabel=e[12]),8192&o[0]&&(l.isImportant=e[13]),E.$set(l),e[20]?B?(B.p(e,o),1048576&o[0]&&fe(B,1)):(B=Xa(e),B.c(),fe(B,1),B.m(t,null)):B&&(pe(),he(B,1,1,(()=>{B=null})),me()),(!L||557060&o[0]&&T!==(T=p((e[15]?"android":"")+(e[2]?" max-window-height":"")+(e[19]?" popup-visible":""))+" svelte-19a9uc1"))&&I(t,"class",T)},i(e){L||(fe(S),fe(o.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),fe(m),fe(g.$$.fragment,e),fe(w.$$.fragment,e),fe(b.$$.fragment,e),fe(E.$$.fragment,e),fe(B),L=!0)},o(e){he(S),he(o.$$.fragment,e),he(r.$$.fragment,e),he(s.$$.fragment,e),he(m),he(g.$$.fragment,e),he(w.$$.fragment,e),he(b.$$.fragment,e),he(E.$$.fragment,e),he(B),L=!1},d(n){n&&C(t),S&&S.d(),$e(o),$e(r),$e(s),P[d].d(),e[23](null),$e(g),$e(w),$e(b),$e(E),B&&B.d()}}}const Qa=e=>{e.target.style.setProperty("--progress","0%")};function es(e,t,n){let o,i,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,P,I,F,B,U,D,R,j,H,O,V,q,_,Y,J,G,X,Z;d(e,wt,(e=>n(42,o=e))),d(e,Je,(e=>n(15,i=e))),d(e,yt,(e=>n(16,l=e))),d(e,st,(e=>n(43,r=e))),d(e,Jt,(e=>n(17,a=e))),d(e,Pt,(e=>n(44,s=e))),d(e,qe,(e=>n(45,c=e))),d(e,Wt,(e=>n(46,u=e))),d(e,Yt,(e=>n(47,p=e))),d(e,zt,(e=>n(48,f=e))),d(e,$t,(e=>n(49,h=e))),d(e,Zt,(e=>n(50,g=e))),d(e,ft,(e=>n(51,y=e))),d(e,mt,(e=>n(52,w=e))),d(e,pn,(e=>n(18,v=e))),d(e,en,(e=>n(53,b=e))),d(e,tt,(e=>n(54,x=e))),d(e,Qe,(e=>n(55,k=e))),d(e,Mt,(e=>n(56,E=e))),d(e,dn,(e=>n(57,M=e))),d(e,nn,(e=>n(58,C=e))),d(e,ln,(e=>n(19,$=e))),d(e,tn,(e=>n(59,z=e))),d(e,lt,(e=>n(60,T=e))),d(e,Vt,(e=>n(61,L=e))),d(e,Rt,(e=>n(62,A=e))),d(e,Ot,(e=>n(63,S=e))),d(e,Ht,(e=>n(64,N=e))),d(e,Dt,(e=>n(65,P=e))),d(e,Ut,(e=>n(66,I=e))),d(e,Bt,(e=>n(67,F=e))),d(e,an,(e=>n(68,B=e))),d(e,Xe,(e=>n(69,U=e))),d(e,it,(e=>n(70,D=e))),d(e,at,(e=>n(71,R=e))),d(e,St,(e=>n(72,j=e))),d(e,jt,(e=>n(73,H=e))),d(e,At,(e=>n(74,O=e))),d(e,Et,(e=>n(75,V=e))),d(e,vt,(e=>n(76,q=e))),d(e,dt,(e=>n(77,_=e))),d(e,_e,(e=>n(78,Y=e))),d(e,Ye,(e=>n(79,J=e))),d(e,fn,(e=>n(20,G=e))),(async()=>{try{if(i||m(Xe,U=await Gl(),U),i)if(!0===window[Y]){if(!0!==await An("visited")){window[J]=!0;try{JSBridge.notifyDataEviction(),!0===window[c]&&JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}}}else!1===window[Y]&&Sn("visited",!0,!0).then((()=>{try{JSBridge.pageVisited()}catch(e){console.error(e)}})).catch((e=>console.error(e)));if(!i||!0!==window[c])try{m(Wt,u=(await On({loadAll:!0,selectedCategory:o??Nn("selectedCategory")??await An("selectedCategory"),initList:!0}))?.shouldReloadList,u),!1===u&&(e(),t())}catch(e){console.error(e)}if(await(async()=>{if(await Ln(["mediaEntries","mediaEntriesInfo","orderedMediaOptions","excludedMediaIds","tagInfo"])||(m(Wt,u=!0,u),await new Promise(((e,t)=>{Qe.set(0),En("./web-worker/retrieveInitialData.js",3264,"Checking Anime, Manga, and Novel Entries").then((async n=>{const o=new Worker(n);o.postMessage({initialDataBlob:await En("./data/initial-data.gzip",28017313,"Getting Anime, Manga, and Novel Entries",!0)}),o.onmessage=({data:n})=>{if(Fn?.call?.(n,"progress"))n?.progress>=0&&n?.progress<=100&&Qe.set(n.progress);else{if(Fn?.call?.(n,"status"))return Un=!0,void St.set(n.status);o?.terminate?.(),St.set(null),Qe.set(100),Un=!1,wn.update((e=>!e)),Fn?.call?.(n,"error")?(console.error(n.error),t(n.error)):e(n)}},o.onerror=e=>{o?.terminate?.(),Un=!1,St.set(null),Qe.set(100),Mo(),wn.update((e=>!e)),console.error(e),t(e)}})).catch((e=>{Un=!1,St.set(null),Qe.set(100),Mo(),wn.update((e=>!e)),console.error(e),t(e)}))}))),!i||!0!==window[c]){const t=await(e=["username","orderedMediaOptions","algorithmFilters","tagInfo"],new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly");t(Object.fromEntries(await Promise.all(e.map((e=>new Promise((t=>{const o=n.objectStore(e).get(e);o.onsuccess=async()=>{let n=o.result;n instanceof Blob&&(n=await new Response(n.stream().pipeThrough(new DecompressionStream("gzip"))).json()),t([e,n])},o.onerror=n=>{console.error(n),t([e])}})))))))}catch(e){console.error(e),t()}})));if(!t)throw new Error("Failed to load initial data");{const e=t.username;e!==_&&(m(dt,_=e,_),Pn("username",e||"").catch((()=>In("username")))),m(vt,q=t.orderedMediaOptions,q),m(Et,V=t.algorithmFilters||[{filterType:"bool",optionName:"Content Focused",status:"none"},{filterType:"bool",optionName:"Inc. All Factors",status:"none"},{filterType:"bool",optionName:"Inc. Average Score",status:"none"},{filterType:"bool",optionName:"Exclude Year",status:"none"}],V),m(At,O=t.tagInfo||{},O),xo()}}var e})(),m(Yt,p=!1,p),i&&!0===window[c])try{let e;St.subscribe((t=>{e||"string"!=typeof t||(e=!0,setTimeout((()=>{try{JSBridge.sendBackgroundStatus(t)}catch(e){console.error(e)}e=!1}),750))}));let t,n,o=await ge();if(m(jt,H=H??await An("exportPathIsAvailable"),H),m(Ht,N=N??await An("autoExport"),N),o&&H&&N)try{await ho({initList:!0}),o=!1}catch(e){console.error(e)}try{JSBridge.setShouldProcessRecommendedEntries(!0)}catch(e){console.error(e)}try{await mo({initList:!0})}catch(e){console.error(e)}t=window.KanshiBackgroundshouldProcessRecommendedEntries;try{await so({initList:!0})}catch(e){console.error(e)}t=t||window.KanshiBackgroundshouldProcessRecommendedEntries;try{await xo({initList:!0,getTagInfo:!1})}catch(e){console.error(e)}if(t)try{window.shouldUpdateNotifications=!0,await no({initList:!0});try{JSBridge.setShouldProcessRecommendedEntries(!1)}catch(e){console.error(e)}n=!0}catch(e){console.error(e)}else try{JSBridge.setShouldProcessRecommendedEntries(!1)}catch(e){console.error(e)}try{if(n)try{await Xn({updateRecommendedMediaList:!0,initList:!0});try{JSBridge.setshouldManageMedia(!1)}catch(e){console.error(e)}}catch(e){console.error(e)}else try{JSBridge.setshouldManageMedia(!1)}catch(e){console.error(e)}}catch(e){console.error(e)}if(o=o||t,o&&H&&N)try{await ho({initList:!0}),o=!1}catch(e){console.error(e)}JSBridge.backgroundUpdateIsFinished(!0)}catch(e){try{JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}console.error(e)}else{let n;const i=Nn("nearestMediaReleaseAiringAt")??await An("nearestMediaReleaseAiringAt");if("number"==typeof i&&!isNaN(i)){const e=new Date(1e3*i);!isNaN(e)&&e<=new Date?n=!0:window.setMediaReleaseUpdateTimeout?.(i)}let l;n||(n=await An("shouldProcessRecommendedEntries")||!await Ln(["recommendedMediaEntries"])),n&&(m(Pt,s[""]=new Date,s),window.shouldUpdateNotifications=!0,await no({initList:!0}),l=!0),l=l||!1!==u||await An("shouldManageMedia"),l?!1!==u?(await Xn({updateRecommendedMediaList:!0,initList:!0}),await On({loadAll:!0,selectedCategory:o??Nn("selectedCategory")??await An("selectedCategory"),initList:!0}),m(Wt,u=!1,u),e(),t(),me("first-visit")):(m(Pt,s[""]=new Date,s),await Xn({updateRecommendedMediaList:!0}),me(!0)):me(!0)}}catch(n){if(i){try{JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}b?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, restart the app or clear your cache, if it still fails you may want to reinstall the app."})}else b?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, refresh the page or clear this website data, this also does not run in incognito."});p&&m(Yt,p=!1,p),!1!==u&&m(Wt,u=!1,u),e(),m(St,j="Something went wrong",j),me(!0),t(),console.error(n)}function e(){window.onYouTubeIframeAPIReady=()=>{window.playMostVisibleTrailer?.()};const e=document.createElement("script");e.onload=()=>{window.onYouTubeIframeAPIReady()},e.src="https://www.youtube.com/iframe_api?v=16",e.id="www-widgetapi-script",e.defer=!0,document.head.appendChild(e)}function t(){const e="https://kanshi.vercel.app"===window.location?.origin,t=document.createElement("script");t.onload=()=>{function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",e?"G-F5E8XNQS20":"G-PPMY92TJCE")},e?(_a?.(),t.src="https://www.googletagmanager.com/gtag/js?id=G-F5E8XNQS20"):t.src="https://www.googletagmanager.com/gtag/js?id=G-PPMY92TJCE",t.defer=!0,document.head.appendChild(t)}})();const Q={};let ee,ne=D;window.addEventListener("resize",(()=>{m(it,D=Math.max(window.visualViewport?.height||0,window.innerHeight||0),D),m(lt,T=Math.max(window.document?.documentElement?.getBoundingClientRect?.()?.width||0,window.visualViewport?.width||0,window.innerWidth||0),T),window.scrollToSelectedCategory?.(),document.fullscreenElement||(D>R||null==R)&&m(at,R=D,R)})),it.subscribe((e=>{const t=Q[window.screen?.orientation?.type];if(t>0&&Math.abs(ne-e)>Math.max(100,.15*t)){const t=e>ne;window.showCategoriesNav(t,!t);const n=document.activeElement,o=n?.tagName;t&&n&&("INPUT"===o||"TEXTAREA"===o)&&(n.blur?.(),"username-input"===n.id&&window.onfocusUsernameInput())}ne=D})),at.subscribe((e=>{if(null==e)return;const t=window.screen?.orientation?.type;if(t){const o=Q[t];n(2,ee=e>=(o||0)),(null==o||e>o)&&(Q[t]=e)}})),lt.subscribe((e=>{n(1,Z=e>660?70:0)}));let oe,ie,le,re,ae,se,ce,ue={},de=!1,pe=0;async function me(e=!1,t=!1){if(!(p||i&&!0===window[c]))if(e){try{await mo({visibilityChange:t})}catch(e){console.error(e)}if("first-visit"===e)try{await so()}catch(e){console.error(e)}fe(t)}else if(I&&await he()){try{if(F)so();else{try{await mo({visibilityChange:t})}catch(e){console.error(e)}so()}}catch(e){console.error(e)}fe(t)}else if(N&&await ge()&&i){try{await ho({visibilityChange:t})}catch(e){console.error(e)}t&&!F&&mo({visibilityChange:!0})}else t&&!F&&mo({visibilityChange:!0})}async function fe(e){i&&!0===window[c]||N&&i&&await ge()&&ho({visibilityChange:e})}async function he(){let e=!1;if(m(Rt,A=await An("runnedAutoUpdateAt"),A),null==A)e=!0;else if("number"==typeof A&&!isNaN(A)){const t=36e5;(new Date).getTime()-A>=t&&(e=!0)}return e}async function ge(){let e=!1;if(m(Vt,L=await An("runnedAutoExportAt"),L),null==L)e=!0;else if("number"==typeof L&&!isNaN(L)){const t=36e5;(new Date).getTime()-L>=t&&(e=!0)}return e}window.addEventListener("scroll",(()=>{m(st,r=window.document?.documentElement?.scrollTop||0,r)})),st.subscribe((e=>{if(!a&&X){const t=X.querySelector(".category-list.viewed .image-grid");if(t){const i=t.getBoundingClientRect().top;e!==ae&&(i<=1||se<=1)&&(re?.(),n(3,le=!0)),ae=e,se=i;const l=t?.dataset?.category;if(l&&ie&&ie!==l&&m(wt,o=ie,o),i>1){n(5,pe=0),Array.from(X.children).forEach((e=>{e.scrollTop=0}));for(const e in ue)ue[e]=null}else{n(5,pe=Math.abs(i));const e=t.dataset.category,o=r+t.getBoundingClientRect().top;ue[e]=r-o}n(6,ce=t?.clientHeight??ce),re=Be((async()=>{await te(),n(3,le=!1)}),30)}}B&&!$&&!1===u&&(p||i&&!0===window[c]||(m(an,B=!1,B),Xn({updateRecommendedMediaList:!0}))),n(4,de=e>54),E?.getBoundingClientRect?.()?.top<0&&!we&&window.addHistory?.()})),document.addEventListener("visibilitychange",(()=>{p||i||"visible"!==document.visibilityState||me(!1,!0)})),window.checkEntries=()=>{p||me(!1,!0)},Yt.subscribe((async e=>{if(!1===e&&i&&!1!==window.navigator?.onLine)try{m(Xe,U=await Gl(),U),!0!==window[c]&&"number"==typeof U&&!isNaN(U)&&isFinite(U)&&JSBridge.checkAppID(Math.floor(U),!1)}catch(e){console.error(e)}})),yn.subscribe((e=>{"boolean"!=typeof e||p||!1!==u||i&&!0===window[c]||(m(an,B=!1,B),Xn({updateRecommendedMediaList:!0}))})),gn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1!==u||i&&!0===window[c])){m(an,B=!1,B);try{await no()}catch(e){console.error(e)}yn.update((e=>!e))}})),wn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1!==u||i&&!0===window[c])){try{await no()}catch(e){console.error(e)}vn.update((e=>!e))}})),window.loadlang=()=>{vn.update((e=>!e))},window.processlang=()=>{wn.update((e=>!e))},vn.subscribe((async e=>{"boolean"!=typeof e||p||i&&!0===window[c]||(!1!==u||$&&w?.[o]?.mediaList?.length?m(an,B=!0,B):Xn({updateRecommendedMediaList:!0}))})),hn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1===window.navigator?.onLine||i&&!0===window[c]))if(F)so();else{try{await mo()}catch(e){console.error(e)}so()}})),Ut.subscribe((async e=>{if(!i||!0!==window[c])if(!0===e){const t=36e5;if(Pn("autoUpdate",e).catch((()=>In("autoUpdate"))).finally((()=>Sn("autoUpdate",e))),await he())me(),clearTimeout(P),clearInterval(P),m(Dt,P=setInterval((()=>{I&&me()}),t),P);else{const e=t-((new Date).getTime()-A)||0;clearTimeout(P),clearInterval(P),m(Dt,P=setTimeout((()=>{!1!==I&&(me(),clearTimeout(P),clearInterval(P),m(Dt,P=setInterval((()=>{I&&me()}),t),P))}),Math.min(e,2e9)),P)}}else!1===e&&(clearTimeout(P),clearInterval(P),Pn("autoUpdate",e).catch((()=>In("autoUpdate"))).finally((()=>Sn("autoUpdate",e))))})),Ht.subscribe((async e=>{if(!i||!0!==window[c])if(!0===e){const t=36e5;if(Pn("autoExport",e).catch((()=>In("autoExport"))).finally((()=>Sn("autoExport",e))),await ge())me(),clearTimeout(S),clearInterval(S),m(Ot,S=setInterval((()=>{N&&me()}),t),S);else{const e=t-((new Date).getTime()-L)||0;clearTimeout(S),clearInterval(S),m(Ot,S=setTimeout((()=>{!1!==N&&(me(),clearTimeout(S),clearInterval(S),m(Ot,S=setInterval((()=>{N&&me()}),t),S))}),Math.min(e,2e9)),S)}}else!1===e&&(clearTimeout(S),clearInterval(S),m(Ot,S=null,S),Pn("autoExport",e).catch((()=>In("autoExport"))).finally((()=>Sn("autoExport",e))))}));let ye,we=!1;"history"in window&&(window.history.scrollRestoration="manual"),window.onbeforeunload=()=>{if(!(we&&"visited"!==window.history?.state||i||matchMedia("(hover:hover)").matches))return"Do you want to leave the site?"},window.addHistory=()=>{if(we=!1,i){if(!0!==window[c])try{JSBridge.setShouldGoBack(!1)}catch(e){console.error(e)}}else"visited"!==window.history?.state&&window.history?.pushState?.("visited","")},window.backPressed=()=>{if(we&&!i)window.history?.go?.(-1);else{i||window.history?.pushState?.("visited","");const e=document?.activeElement,t=e?.tagName;if(v)Se(),m(pn,v=!1,v),we=!1;else if(("INPUT"===t||"TEXTAREA"===t)&&T<=750)e.blur?.(),"username-input"===e.id&&window.onfocusUsernameInput?.(),we=!1;else if(z)m(tn,z=!1,z),we=!1;else if(window.checkOpenFullScreenItem?.())window.closeFullScreenItem?.(),we=!1;else if($)m(ln,$=!1,$),we=!1;else if(C)m(nn,C=!1,C),we=!1;else if(M)m(dn,M=!1,M),we=!1;else{if(a&&E)m(Mt,E.style.overflow="hidden",E),m(Mt,E.scrollLeft=0,E),ye?.(),ye=Be((()=>{m(Mt,E.style.overflow="",E)}),100);else{window.showCategoriesNav?.(!0);const e=document.documentElement;!i&&matchMedia("(hover:hover)").matches||(e.style.overflow="hidden"),e.scrollTop=0,document.body.scrollTop=0,window.scrollY=0,!i&&matchMedia("(hover:hover)").matches||(ye?.(),ye=Be((()=>{e.style.overflow=""}),100))}if(i)if(we){we=!1;try{JSBridge.willExit(),JSBridge.setShouldGoBack(!0)}catch(e){console.error(e)}}else we=!0;else we=!0}}},window.addEventListener("popstate",(()=>window.backPressed())),Jt.subscribe((async e=>{await te(),e?E?.scrollLeft>500&&window.addHistory?.():E?.getBoundingClientRect?.()?.top<0&&window.addHistory?.()})),window.mediaGridScrolled=e=>{e>500&&!we&&window.addHistory?.()};let ve,be,xe=0;Qe.subscribe((e=>{if(xe<100&&xe>0)n(7,xe=Math.max(e,xe));else{if(ve)return;ve=!0,setTimeout((()=>{n(7,xe=e),ve=!1}),200)}})),et.subscribe((()=>{n(7,xe=.01),m(Qe,k=0,k)})),fn.subscribe((e=>{e&&(clearTimeout(be),be=setTimeout((()=>{fn.set(null)}),3500))}));let ke,Ee,Me,Ce,$e,ze,Te,Le,Ae=()=>{m(tt,x=!0,x),window.removeEventListener("wheel",Ae,{passive:!0}),Ae=void 0};function Se(){Le=!1,Te?.resolve?.(!1),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))),m(pn,v=!1,v)}window.addEventListener("wheel",Ae,{passive:!0}),m(en,b=window.confirmPromise=e=>new Promise((t=>{Le&&!e?.isPersistent||(Le=e?.isPersistent,n(8,ke=e?.isAlert||!1),n(9,Ee=e?.title||(ke?"Heads Up":"Confirmation")),n(10,Me=("string"==typeof e?e:e?.text)||"Do you want to continue?"),n(11,Ce=e?.confirmLabel||"OK"),n(12,$e=e?.cancelLabel||"CANCEL"),n(13,ze=e?.isImportant??!1),m(pn,v=!0,v),Te={resolve:t})})),b),window.handleConfirmationCancelled=Se,pn.subscribe((e=>{!1===e&&(Le=!1,Te?.resolve?.(!1),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))))})),window.deletedCategory=e=>{delete ue?.[e],ie===e&&(ie=void 0)},gt.subscribe((e=>{if(e)if(l instanceof Array){const t=JSON.parse(JSON.stringify(l));m(yt,l=Object.keys(e).sort(),l);for(let n=0;n<t.length;n++){const o=t[n];null==e?.[o]&&(delete w?.[o],delete s?.[o],delete y?.[o],delete g?.[o],delete h?.[o],delete f?.[o],delete ue?.[o],ie===o&&(ie=void 0),mt.set(w),Pt.set(s),ft.set(y),Zt.set(g),$t.set(h),zt.set(f))}}else m(yt,l=Object.keys(e).sort(),l)})),yt.subscribe((async e=>{if(await te(),e instanceof Array&&e.length>0&&"string"==typeof o)if(e.includes(o))window.scrollToSelectedCategory?.(o);else{let t=e[0];"string"==typeof t&&m(wt,o=t,o)}})),window.shouldRefreshMediaList=async(e,t)=>{if(p||!1!==u)return;if(i&&!0===window[c])return;let n;if(e)try{m(Pt,s[""]=new Date,s),await no(),n=!0}catch(e){console.error(e)}else n=!1;if(!t&&!n){try{m(Pt,s[""]=new Date,s),await On({updateRecommendedMediaList:!0,updateUserData:!0})}catch(e){console.error(e)}window.checkEntries?.()}else{try{m(Pt,s[""]=new Date,s),await Xn({updateRecommendedMediaList:!0})}catch(e){console.error(e)}window.checkEntries?.()}},window.copyToClipBoard=e=>{if("string"==typeof e||e)if(i)try{JSBridge.copyToClipBoard(e)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(e)};let Ne,Pe,Ie=!0;wt.subscribe((async e=>{if(e){if(window.scrollToSelectedCategory?.(e),await te(),!(l instanceof Array))return;const t=l.findIndex((t=>t===e))??-1;if(-1===t)return m(wt,o=l[0]||o,o),void(Pe=e);if(Pe!==e){const e=t*X.getBoundingClientRect().width+Math.max(0,t-1)*Z;n(0,X.scrollLeft=e,X),n(14,Ne=!1)}if(a)return void(Pe=e);if(Ie)return Ie=!1,void(Pe=e);const i=Array.from(X.children).find((t=>t.dataset.category===e));if(i){const t=i.getBoundingClientRect().top+20,n=r+t,o=ue[e],l=document.documentElement;null!=o?l.scrollTop=n+o:t<1&&(l.scrollTop=n),Array.from(X.children).forEach((t=>{const n=t.dataset.category;if(e===n)return;const o=ue[n];o&&(t.scrollTop=o)}))}}Pe=e}));let Fe=window.visualViewport?.width;return window.visualViewport?.addEventListener?.("resize",(()=>{const e=window.visualViewport?.width;if(Ne&&o&&Fe!==e){const e=oe??l.findIndex((e=>e===o)),t=X.scrollLeft,n=e*X.getBoundingClientRect().width+Math.max(0,e-1)*Z;n>t?X.scrollBy({left:Number.EPSILON}):n<t&&X.scrollBy({left:-Number.EPSILON})}Fe=e})),W((async()=>{X.addEventListener("scroll",(()=>{n(14,Ne=!0),window.showCategoriesNav?.(!0,!0);const e=parseInt(X.scrollLeft),t=X.getBoundingClientRect().width,l=t+Z,r=Math.round(e/(t+Z));if(r>=0&&r!==oe){const e=Array.from(X?.children),t=e?.[r],n=t?.dataset?.category;null!=n&&(window.scrollToSelectedCategory?.(n),ie=n),oe=r}const a=e%l;let s;try{const e=getComputedStyle(X),{marginLeft:t,marginRight:n}=e;s=t&&t===n?0===a:a<1||l-a<1}catch{s=i?0===a:a<1||l-a<1}if(s){const e=Array.from(X?.children),t=e?.[oe],i=t?.dataset?.category;i&&i!==o&&m(wt,o=i,o),n(14,Ne=!1)}})),X.addEventListener("scrollend",(()=>{if(Ne){const e=Array.from(X?.children),t=e?.[oe],i=t?.dataset?.category;i&&i!==o&&m(wt,o=i,o),n(14,Ne=!1)}}))})),[X,Z,ee,le,de,pe,ce,xe,ke,Ee,Me,Ce,$e,ze,Ne,i,l,a,v,$,G,function(){Le=!1,Te?.resolve?.(!0),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))),m(pn,v=!1,v)},Se,function(e){K[e?"unshift":"push"]((()=>{X=e,n(0,X)}))}]}try{if(!u(Je)){const e=new BroadcastChannel("tab");e.postMessage("changed-tab"),e.addEventListener("message",(e=>{if("changed-tab"===e.data){const e="https://kanshi.changed.tab";try{window.location.href=e}catch{}try{window.location.assign("https://kanshi.changed.tab")}catch{}try{window.open(e,"_self")}catch{}}}))}}catch{}return new class extends Te{constructor(e){super(),ze(this,e,es,Za,r,{},null,[-1,-1,-1])}}({target:document.body})}();//# sourceMappingURL=bundle.js.map