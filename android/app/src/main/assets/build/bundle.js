var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(n)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function s(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function c(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function u(e){let t;return c(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function p(e){return null==e?"":e}function m(e,t,n){return e.set(n),t}function f(t){return t&&l(t.destroy)?t.destroy:e}const h="undefined"!=typeof window;let g=h?()=>window.performance.now():()=>Date.now(),y=h?e=>requestAnimationFrame(e):e;const w=new Set;function v(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&y(v)}function b(e){let t;return 0===w.size&&y(v),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function x(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=z("style");return function(e,t){x(e.head||e,t),t.sheet}(k(e),t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function A(){return L(" ")}function S(){return L("")}function N(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function I(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function P(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t){e.value=null==t?"":t}function U(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function D(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,i,t),o}class R{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=T(t.nodeName):this.e=z(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const j=new Map;let H,V=0;function O(e,t,n,i,o,l,r,a=0){const s=16.666/i;let c="{\n";for(let e=0;e<=1;e+=s){const i=t+(n-t)*l(e);c+=100*e+`%{${r(i,1-i)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=k(e),{stylesheet:m,rules:f}=j.get(p)||function(e,t){const n={stylesheet:E(t),rules:{}};return j.set(e,n),n}(p,e);f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${i}ms linear ${o}ms 1 both`,V+=1,d}function q(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-i.length;o&&(e.style.animation=i.join(", "),V-=o,V||y((()=>{V||(j.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)})),j.clear())})))}function _(e){H=e}function Y(){if(!H)throw new Error("Function called outside component initialization");return H}function W(e){Y().$$.on_mount.push(e)}const J=[],K=[];let G=[];const X=[],Z=Promise.resolve();let Q=!1;function ee(){Q||(Q=!0,Z.then(re))}function te(){return ee(),Z}function ne(e){G.push(e)}const ie=new Set;let oe,le=0;function re(){if(0!==le)return;const e=H;do{try{for(;le<J.length;){const e=J[le];le++,_(e),ae(e.$$)}}catch(e){throw J.length=0,le=0,e}for(_(null),J.length=0,le=0;K.length;)K.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];ie.has(t)||(ie.add(t),t())}G.length=0}while(J.length);for(;X.length;)X.pop()();Q=!1,ie.clear(),_(e)}function ae(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function se(){return oe||(oe=Promise.resolve(),oe.then((()=>{oe=null}))),oe}function ce(e,t,n){e.dispatchEvent(D(`${t?"intro":"outro"}${n}`))}const ue=new Set;let de;function pe(){de={r:0,c:[],p:de}}function me(){de.r||o(de.c),de=de.p}function fe(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function he(e,t,n,i){if(e&&e.o){if(ue.has(e))return;ue.add(e),de.c.push((()=>{ue.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}const ge={duration:0};function ye(n,i,o){const r={direction:"in"};let a,s,c=i(n,o,r),u=!1,d=0;function p(){a&&q(n,a)}function m(){const{delay:i=0,duration:o=300,easing:l=t,tick:r=e,css:m}=c||ge;m&&(a=O(n,0,1,o,i,l,m,d++)),r(0,1);const f=g()+i,h=f+o;s&&s.abort(),u=!0,ne((()=>ce(n,!0,"start"))),s=b((e=>{if(u){if(e>=h)return r(1,0),ce(n,!0,"end"),p(),u=!1;if(e>=f){const t=l((e-f)/o);r(t,1-t)}}return u}))}let f=!1;return{start(){f||(f=!0,q(n),l(c)?(c=c(r),se().then(m)):m())},invalidate(){f=!1},end(){u&&(p(),u=!1)}}}function we(n,i,r){const a={direction:"out"};let s,c=i(n,r,a),u=!0;const d=de;function p(){const{delay:i=0,duration:l=300,easing:r=t,tick:a=e,css:p}=c||ge;p&&(s=O(n,1,0,l,i,r,p));const m=g()+i,f=m+l;ne((()=>ce(n,!1,"start"))),b((e=>{if(u){if(e>=f)return a(0,1),ce(n,!1,"end"),--d.r||o(d.c),!1;if(e>=m){const t=r((e-m)/l);a(1-t,t)}}return u}))}return d.r+=1,l(c)?se().then((()=>{c=c(a),p()})):p(),{end(e){e&&c.tick&&c.tick(1,0),u&&(s&&q(n,s),u=!1)}}}function ve(n,i,r,a){const s={direction:"both"};let c=i(n,r,s),u=a?0:1,d=null,p=null,m=null;function f(){m&&q(n,m)}function h(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(i){const{delay:l=0,duration:r=300,easing:a=t,tick:s=e,css:y}=c||ge,w={start:g()+l,b:i};i||(w.group=de,de.r+=1),d||p?p=w:(y&&(f(),m=O(n,u,i,r,l,a,y)),i&&s(0,1),d=h(w,r),ne((()=>ce(n,i,"start"))),b((e=>{if(p&&e>p.start&&(d=h(p,r),p=null,ce(n,d.b,"start"),y&&(f(),m=O(n,u,d.b,d.duration,0,a,c.css))),d)if(e>=d.end)s(u=d.b,1-u),ce(n,d.b,"end"),p||(d.b?f():--d.group.r||o(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*a(t/d.duration),s(u,1-u)}return!(!d&&!p)})))}return{run(e){l(c)?se().then((()=>{c=c(s),y(e)})):y(e)},end(){f(),d=p=null}}}function be(e,t){const n=t.token={};function i(e,i,o,l){if(t.token!==n)return;t.resolved=l;let r=t.ctx;void 0!==o&&(r=r.slice(),r[o]=l);const a=e&&(t.current=e)(r);let s=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==i&&e&&(pe(),he(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),me())})):t.block.d(1),a.c(),fe(a,1),a.m(t.mount(),t.anchor),s=!0),t.block=a,t.blocks&&(t.blocks[i]=a),s&&re()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return i(t.then,1,t.value,e),!0;t.resolved=e}else{const n=Y();if(e.then((e=>{_(n),i(t.then,1,t.value,e),_(null)}),(e=>{if(_(n),i(t.catch,2,t.error,e),_(null),!t.hasCatch)throw e})),t.current!==t.pending)return i(t.pending,0),!0}var o}function xe(e,t){e.d(1),t.delete(e.key)}function ke(e,t){he(e,1,1,(()=>{t.delete(e.key)}))}function Ee(e,t,n,i,l,r,a,s,c,u,d,p){let m=e.length,f=r.length,h=m;const g={};for(;h--;)g[e[h].key]=h;const y=[],w=new Map,v=new Map,b=[];for(h=f;h--;){const e=p(l,r,h),o=n(e);let s=a.get(o);s?i&&b.push((()=>s.p(e,t))):(s=u(o,e),s.c()),w.set(o,y[h]=s),o in g&&v.set(o,Math.abs(h-g[o]))}const x=new Set,k=new Set;function E(e){fe(e,1),e.m(s,d),a.set(e.key,e),d=e.first,f--}for(;m&&f;){const t=y[f-1],n=e[m-1],i=t.key,o=n.key;t===n?(d=t.first,m--,f--):w.has(o)?!a.has(i)||x.has(i)?E(t):k.has(o)?m--:v.get(i)>v.get(o)?(k.add(i),E(t)):(x.add(o),m--):(c(n,a),m--)}for(;m--;){const t=e[m];w.has(t.key)||c(t,a)}for(;f;)E(y[f-1]);return o(b),y}function Me(e){e&&e.c()}function Ce(e,t,i,r){const{fragment:a,after_update:s}=e.$$;a&&a.m(t,i),r||ne((()=>{const t=e.$$.on_mount.map(n).filter(l);e.$$.on_destroy?e.$$.on_destroy.push(...t):o(t),e.$$.on_mount=[]})),s.forEach(ne)}function $e(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];G.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),G=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ze(t,n,l,r,a,s,c,u=[-1]){const d=H;_(t);const p=t.$$={fragment:null,ctx:[],props:s,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let m=!1;if(p.ctx=l?l(t,n.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),m&&function(e,t){-1===e.$$.dirty[0]&&(J.push(e),ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(C)}else p.fragment&&p.fragment.c();n.intro&&fe(t.$$.fragment),Ce(t,n.target,n.anchor,n.customElement),re()}_(d)}class Te{$destroy(){$e(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Le(e){return Math.sin(e*Math.PI/2)}function Ae(e,{delay:n=0,duration:i=400,easing:o=t}={}){const l=+getComputedStyle(e).opacity;return{delay:n,duration:i,easing:o,css:e=>"opacity: "+e*l}}const Se=[];function Ne(e,t){return{subscribe:Ie(e,t).subscribe}}function Ie(t,n=e){let i;const o=new Set;function l(e){if(r(t,e)&&(t=e,i)){const e=!Se.length;for(const e of o)e[1](),Se.push(e,t);if(e){for(let e=0;e<Se.length;e+=2)Se[e][0](Se[e+1]);Se.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(r,a=e){const s=[r,a];return o.add(s),1===o.size&&(i=n(l)||e),r(t),()=>{o.delete(s),0===o.size&&i&&(i(),i=null)}}}}let Pe=-Number.MAX_SAFE_INTEGER;const Fe=()=>Pe<Number.MAX_SAFE_INTEGER||"bigint"==typeof Pe?""+ ++Pe:(Pe&&"function"==typeof window.BigInt?(Pe=BigInt(Number.MAX_SAFE_INTEGER),++Pe):Pe=-Number.MAX_SAFE_INTEGER,`${Pe}`),Be=(e,t=0)=>{let n,i,o;const l=r=>{let a=0;r?void 0!==i&&(a=r-i):a=16,i=r,(t-=a)>0?n=requestAnimationFrame(l):(clearTimeout(o),n=requestAnimationFrame((()=>{try{e()}catch{}})))};if(t>0)o=setTimeout((()=>{cancelAnimationFrame(n);try{e()}catch{}}),t),n=requestAnimationFrame(l);else try{e()}catch{}return()=>{cancelAnimationFrame(n),clearTimeout(o)}},Ue=(e,t)=>{try{const n=document.createElement("a");n.href=e,n.target="_blank",n.rel="noopener noreferrer",n.download=t,n.click(),URL.revokeObjectURL(e)}catch{}},De=(e,t=!0)=>{try{"string"==typeof e&&e.length>0&&"boolean"==typeof t&&JSBridge.openToast(e,t)}catch(e){console.error(e)}},Re=()=>{try{return"function"==typeof JSBridge.exportUserData}catch{return!1}},je=async()=>{try{if(!1!==window.navigator?.onLine){const e=window.location;if(null==e)return!0;if(Re()){const t=e.origin;return null==t||await fetch(new URL("assets/check-connection",t),{method:"HEAD",cache:"no-store"}).ok}return await fetch(e,{method:"HEAD",cache:"no-store"}).ok}}catch{}return!1};let He;const Ve=async()=>He||(He=new Promise((async e=>{if(await je())return He=null,e(!0);await new Promise((e=>setTimeout(e,5e3))),await je()?(He=null,e(!0)):(He=null,e(!1))})),He),Oe=Ne("Kanshi.Media.Recommendations.AniList.W~uPtWCq=vG$TR:Zl^#t<vdS]I~N70"),qe=Ne(u(Oe)+".isBackgroundUpdate"),_e=Ne(u(Oe)+".visited"),Ye=Ne(u(Oe)+".evicted");let We=e=>{try{let t;e=u(Oe)+e;let n=localStorage.getItem(e);return t=JSON.parse(n),t}catch{}};const Je=Ne(Re()),Ke=Ne((()=>{try{const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substring(0,4))}catch{return!1}})()),Ge=Ne(!u(Je)&&(()=>{try{return new RegExp(atob("523239765a32786c596d393066474a70626d646962335238575746755a475634516d3930664552315932744564574e72516d3930664552315932744263334e706333524362335238516e4a68646d5669623352385757466f6232386849464e7364584a7766466b6853693138516d46705a48567a63476c6b5a584a3857573931516d393066456476623264735a53314a626e4e775a574e30615739755647397662413d3d".match(/.{1,2}/g).map((e=>String.fromCharCode(parseInt(e,16)))).join("")),"i").test(window.navigator.userAgent)}catch{return!1}})()),Xe=Ie(null),Ze=Ie(!0),Qe=Ie(0),et=Ie(0),tt=Ie(!1),nt=Math.max(window.visualViewport?.height||0,window.innerHeight||0),it=Math.max(window.document?.documentElement?.getBoundingClientRect?.()?.width||0,window.visualViewport?.width||0,window.innerWidth||0),ot=Ie(nt),lt=Ie(it),rt=window.document?.fullscreenElement,at=Ie(rt?null:nt),st=Ie(window.document?.documentElement?.scrollTop||0),ct=Ie(!1),ut=Ie(!1),dt=Ie(We("username")||""),pt=Ie(null),mt=Ie({}),ft=Ie({}),ht=Ie(""),gt=Ie(null),yt=Ie(null),wt=Ie(null),vt=Ie(null),bt=Ne({"Media Filter":{bool:["Hide My List","Hide My Finished List","Show My List","Show All Sequels","Show Next Sequel","Show Anime Adapted","Has Unseen Progress","Hidden List"],number:[{name:"Average Score",maxValue:1/0,minValue:0},{name:"User Score",maxValue:1/0,minValue:0},{name:"Year",max:1/0,min:0},{name:"Popularity",maxValue:1/0,minValue:0},{name:"Score",maxValue:1/0,minValue:0},{name:"Weighted Score",max:1/0,min:0}]},"Algorithm Filter":{bool:["Content Focused","Inc. Average Score","Inc. All Factors","Exclude Year"],number:[{name:"Min Tag Percentage",defaultValue:0,maxValue:1/0,minValue:0},{name:"Scoring System",maxValue:1/0,minValue:0},{name:"Sample Size",maxValue:1/0,minValue:1},{name:"Min Sample Size",maxValue:1/0,minValue:1},{name:"Min Average Score",minValue:1},{name:"Min Anime Popularity",maxValue:1/0,minValue:1},{name:"Min Manga Popularity",maxValue:1/0,minValue:1},{name:"Min Novel Popularity",maxValue:1/0,minValue:1}]}}),xt=Ne({readOnly:{"Flexible Inclusion":1,"Shown Metric":1},selection:{"Media Filter":["Genre","Tag","Season","Release Status","User Status","Format","Country Of Origin","Shown Metric","Shown List","Flexible Inclusion","Year","Studio"],"Content Caution":["Genre","Tag"],"Algorithm Filter":["Genre","Tag","Tag Category"]}}),kt=Ie(null),Et=Ie(null),Mt=Ie(null),Ct=Ie(null),$t=Ie({}),zt=Ie({}),Tt=Ie(null),Lt=Ie(null),At=Ie({}),St=Ie(null),Nt=Ie(null),It=Ie({}),Pt=Ie(!1),Ft=Ie(!1),Bt=Ie(null),Ut=Ie(We("autoUpdate")??!0),Dt=Ie(null),Rt=Ie(null),jt=Ie(We("exportPathIsAvailable")??null),Ht=Ie(We("autoExport")??null),Vt=Ie(null),Ot=Ie(null),qt=Ie([]),_t=Ie(We("autoPlay")??null),Yt=Ie(!0),Wt=Ie(null),Jt=Ie(We("gridFullView")??null),Kt=Ie(We("showStatus")??!0),Gt=Ie(We("showRateLimit")??!0),Xt=Ie(null),Zt=Ie({}),Qt=Ie(!1),en=Ie(null),tn=Ie(!1),nn=Ie(!1),on=Ie(null),ln=Ie(!1),rn=Ie(null),an=Ie(!1),sn=Ie(!1),cn=Ie(!1),un=Ie(We("showFilterOptions")??null),dn=Ie(null),pn=Ie(null),mn=Ie(null),fn=Ie(null),hn=Ie(null),gn=Ie(null),yn=Ie(null),wn=Ie(null),vn=Ie(null);We=void 0;let bn,xn=!0;const kn={},En=(e,t,n,i)=>(kn[e]||(kn[e]=(async()=>{xn&&(xn=!1,bn=u(Xe));try{let o=await fetch("number"==typeof bn?`${e}?v=${bn}`:e);if(t&&n)try{o=new Response(new ReadableStream({async start(e){let i,l,r=0;for await(const a of o.body)e.enqueue(a),r+=a.byteLength??0,l||(l=!0,i=setTimeout((()=>{const e=r/t*100,i=u(Qe);e>0&&e<=100&&(!i||e>i||i>=100)&&(Qe.set(e),e>=100?St.set("100% "+n):St.set(`${e.toFixed(2)}% `+n)),l=!1}),200));clearTimeout(i),St.set(null),Qe.set(30),Qe.set(100),e.close()}}))}catch(t){return console.error(t),await En(e,null,null,i)}return i?await o.blob():e}catch(t){if(console.error(t),i){if(u(Je)||await Ve())return await((e=5e3)=>new Promise((t=>setTimeout(t,e))))(5e3),await En(e,null,null,i);throw delete kn[e],new Error("Server unreachable")}return e}})()),kn[e]),Mn=e=>"[object Object]"===Object.prototype.toString.call(e),Cn=e=>{for(const t in e)return!1;return!0},$n=(e,t)=>{try{return e.toLowerCase()===t.toLowerCase()}catch{}};let zn;const Tn=()=>new Promise(((e,t)=>{try{const n=indexedDB.open(u(Oe),1);n.onsuccess=({target:t})=>{zn=t.result,e()},n.onupgradeneeded=({target:n})=>{try{const{result:t,transaction:i}=n,o=["mediaEntries","mediaEntriesInfo","excludedMediaIds","mediaUpdateAt","mediaOptions","orderedMediaOptions","tagInfo","tagInfoUpdateAt","username","userMediaEntries","userMediaUpdateAt","recommendedMediaEntries","algorithmFilters","mediaCautions","hiddenMediaEntries","categories","selectedCategory","autoPlay","gridFullView","showRateLimit","showStatus","autoUpdate","autoExport","runnedAutoUpdateAt","runnedAutoExportAt","exportPathIsAvailable","shouldManageMedia","shouldProcessRecommendedEntries","nearestMediaReleaseAiringAt","recommendationError","visited"];for(const e of o)t.createObjectStore(e);i.oncomplete=()=>{zn=t,e()}}catch(e){console.error(e),t(e),transaction.abort()}},n.onerror=e=>{console.error(e),t(e)}}catch(e){console.error(e),t(e)}})),Ln=e=>new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly");t((await Promise.all(e.map((e=>new Promise((t=>{const i=n.objectStore(e).getKey(e);i.onsuccess=async()=>{t(void 0!==i.result)},i.onerror=e=>{console.error(e),t(!1)}})))))).every((e=>e)))}catch(e){console.error(e),t(!1)}})),An=e=>new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly").objectStore(e).get(e);n.onsuccess=async()=>{let e=n.result;e instanceof Blob&&(e=await new Response(e.stream().pipeThrough(new DecompressionStream("gzip"))).json()),t(e)},n.onerror=e=>{console.error(e),t()}}catch(e){console.error(e),t()}})),Sn=(e,t,n)=>{if(!u(Je)||!0!==window[u(qe)]||n)return new Promise((async(n,i)=>{zn||await Tn();try{Mn(t)||t instanceof Array?t=await new Response(new Blob([JSON.stringify(t)]).stream().pipeThrough(new CompressionStream("gzip"))).blob():t instanceof Blob&&(t=await new Response(t.stream().pipeThrough(new CompressionStream("gzip"))).blob());const o=zn.transaction(e,"readwrite");o.objectStore(e).put(t,e).onerror=e=>{console.error(e),i(e),o.abort()},o.oncomplete=()=>n()}catch(e){console.error(e),i(e)}}))},Nn=e=>{try{let t;e=u(Oe)+e;let n=localStorage.getItem(e);return t=JSON.parse(n),t}catch{}},In=async(e,t)=>{localStorage.setItem(u(Oe)+e,JSON.stringify(t))},Pn=e=>{try{localStorage.removeItem(u(Oe)+e)}catch{}},Fn=Object.prototype.hasOwnProperty;let Bn,Un=!1,Dn=!1,Rn=!1,jn=!1;Xt.subscribe((e=>{if("number"==typeof e&&!isNaN(e)){clearTimeout(Bn);const t=1e3*e-(new Date).getTime();Bn=setTimeout((()=>{Xt.set(void 0),Hn?.postMessage?.({getEarlisetReleaseDate:!0})}),Math.min(t,2e9))}}));let Hn,Vn={};const On=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise((async(t,n)=>{let i=Fe();e.postId=i,Vn[i]={resolve:t,reject:n};try{Hn=Hn||new Worker(await En("./web-worker/mediaLoader.js",25777,"Checking Existing List"))}catch(e){return Hn?.terminate?.(),Hn=null,$i(),console.error(e),n(e)}Hn.postMessage(e),Hn.onmessage||(Hn.onmessage=async({data:e})=>{if(Fn.call(e,"progress"))return void(e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress));if(Fn.call(e,"status"))return void St.set(e.status);if(Fn.call(e,"loadMore")){const t=e?.airingAt,n=u(Xt);t&&(t<n||null==n)&&Xt.set(t),u(ft)[e.selectedCategory]?.(e)}else if(Fn.call(e,"categorySelected")){const t=e?.categorySelected;if(t){const n=e?.category;mt.update((e=>(e[t]||(e[t]={}),null==e[t].mediaFilters&&null!=n?.mediaFilters&&(e[t].mediaFilters=n.mediaFilters,$t.update((n=>(n[t]=e[t].mediaFilters,n)))),null==e[t].sortBy&&null!=n?.sortBy&&(e[t].sortBy=n.sortBy,zt.update((n=>(n[t]=e[t].sortBy,n)))),e)))}Vn[e.postId]?.resolve?.()}else if(Fn.call(e,"updatedCategories")){e.categories&&gt.set(e.categories);const t=e.updatedCategories;mt.update((e=>{for(const n in t){e[n]||(e[n]={});const i=t[n];e[n].mediaFilters=i?.mediaFilters,$t.update((t=>(t[n]=e[n].mediaFilters,t))),e[n].sortBy=i?.sortBy,zt.update((t=>(t[n]=e[n].sortBy,t)))}return e}))}else if(Fn?.call?.(e,"loadAll")){gt.set(e?.categories||u(gt)),Ct.set(e?.hiddenMediaEntries||u(Ct)),kt.set(e?.mediaCautions||u(kt)),Tt.set(e?.mediaCautions);const t=e?.selectedCategory;if(t){const n=e?.category;mt.update((e=>(e[t]||(e[t]={}),e[t].mediaFilters=n?.mediaFilters||e[t].mediaFilters,$t.update((n=>(n[t]=e[t].mediaFilters,n))),e[t].sortBy=n?.sortBy||e[t].sortBy,zt.update((n=>(n[t]=e[t].sortBy,n))),e)))}const n=u(wt),i=e?.selectedCategory,o=u(gt);null==o?.[n]&&null!=o?.[i]&&wt.set(i),Vn[e.postId]?.resolve?.(e)}else if(Fn.call(e,"updateNotifications"))Vn[e.postId]?.resolve?.(e.mediaUpdates);else if(Fn.call(e,"getEarlisetReleaseDate")){let t=u(Xt),n=e.earliestReleaseDate;n&&(n<t||null==t)&&Xt.set(e.earliestReleaseDate)}else Fn?.call?.(e,"error")&&(Hn?.terminate?.(),Hn=null,St.set(null),Qe.set(100),$i(),console.error(e.error),Vn[e?.postId]?.reject?.());e?.updateDate>=u(It)[""]&&It.update((e=>(delete e[""],e)));const t=u(wt),n=!u(ln)&&u(sn);(Fn?.call?.(e,"reloadList")||n)&&(Cn(u(mt))&&(Hn?Hn.postMessage({loadAll:!0,selectedCategory:t}):On({loadAll:!0,selectedCategory:t})),Hn.postMessage({reload:!0,loadMore:!0,selectedCategory:t,searchedWord:u(ht)}),n&&sn.set(!1),Vn[e?.postId]?.resolve?.()),delete Vn[e?.postId]},Hn.onerror=e=>{Hn?.terminate?.(),Hn=null,St.set(null),Qe.set(100),$i(),console.error(e)})}))};let qn,_n,Yn,Wn,Jn={},Kn={},Gn={},Xn=[];const Zn=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(qn?.terminate?.(),u(ct)&&!e?.isImporting)return n("Process is interrupted, currently importing");if(_n=Fe(),Fn.call(e,"updateMediaFilter")){const t=e.selectedCategory;t&&(e.mediaFilters||e.sortBy)&&(Jn[t]||(Jn[t]={}),e.mediaFilters&&(Jn[t].mediaFilters=e.mediaFilters),e.sortBy&&(Jn[t].sortBy=e.sortBy),It.update((e=>(e[t]=new Date,e))))}else if(Fn.call(e,"removeId")){const t=e.removeId;if(Kn[t]=!0,delete Gn[t],It.update((e=>(e[""]=new Date,e))),u(ln)&&u(mt)?.[u(wt)]?.mediaList?.length)return void an.set(!0)}else if(Fn.call(e,"showId")){const t=e.showId;if("all"===t?(Gn={all:!0},Kn={}):(Gn[t]=!0,delete Kn[t]),It.update((e=>(e[""]=new Date,e))),u(ln)&&u(mt)?.[u(wt)]?.mediaList?.length)return void an.set(!0)}else if(Fn.call(e,"addedCategoryKey")){const t=e.addedCategoryKey,n=e.copiedCategoryKey;Xn.push({add:{[t]:n}})}else if(Fn.call(e,"renamedCategoryKey")){const t=e.renamedCategoryKey,n=e.replacedCategoryKey;Xn.push({rename:{[t]:n}})}else if(Fn.call(e,"deletedCategoryKey")){const t=e.deletedCategoryKey;Xn.push({delete:t})}else Yn=e?.updateRecommendedMediaList||Yn,e?.mediaCautions instanceof Array&&(Wn=e.mediaCautions),It.update((e=>(e[""]=new Date,e)));Qe.set(0),En("./web-worker/mediaManager.js",54808,"Updating Categories and List").then((i=>{qn?.terminate?.(),Pt.set(!0),qn=new Worker(i),qn.postMessage({updateRecommendedMediaList:Yn,mediaFilters:Jn,mediaCautions:Wn,categoriesToEdit:Xn,entriesToHide:Kn,entriesToShow:Gn,postId:_n,initList:e?.initList}),qn.onmessage=({data:e})=>{if(!Fn.call(e,"progress"))return Fn.call(e,"status")?(Un=!0,void St.set(e.status)):void(Fn?.call?.(e,"error")?(qn?.terminate?.(),qn=null,Un=!1,an.set(!0),Pt.set(!1),St.set(null),Qe.set(100),$i(),console.error(e.error),n(e.error)):(qn?.terminate?.(),u(Je)&&!0===window[u(qe)]||(e.postId===_n&&(_n=Yn=Wn=void 0,Jn={},Kn={},Gn={},Xn=[]),delete e.postId,Hn?Hn.postMessage(e||{}):On(e||{})),Un=!1,Pt.set(!1),St.set(null),Qe.set(100),t()));e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress)},qn.onerror=e=>{qn?.terminate?.(),qn=null,Un=!1,an.set(!0),Pt.set(!1),St.set(null),Qe.set(100),$i(),console.error(e),n(e)}})).catch((e=>{qn?.terminate?.(),qn=null,Un=!1,an.set(!0),Pt.set(!1),St.set(null),Qe.set(100),$i(),console.error(e),n(e)}))}))};let Qn,ei,ti,ni;window.setMediaReleaseUpdateTimeout=e=>{if("number"==typeof e&&!isNaN(e)){clearTimeout(ei);let t=1e3*e-(new Date).getTime();ei=setTimeout((()=>{wn.update((e=>!e))}),Math.min(t,2e9))}};const ii=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(u(ct)&&!e?.isImporting)return n("Process is interrupted, currently importing");Qn?.terminate?.(),e?.algorithmFilters?(ti=e.algorithmFilters,e.passedAlgorithmFilterId=ni=Fe()):ti&&(e.algorithmFilters=ti,e.algorithmFiltersId=ni),Qe.set(0),En("./web-worker/processRecommendedMediaEntries.js",44122,"Updating Recommendation List").then((i=>{Qn?.terminate?.();const o=parseInt((new Date).getTime()/1e3);let l;Ft.set(!0),Qn=new Worker(i),Qn.postMessage(e),Qn.onmessage=({data:e})=>{if(Fn?.call?.(e,"progress"))e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress);else{if(Fn?.call?.(e,"status"))return Un=!0,void St.set(e.status);if(Fn?.call?.(e,"error"))Qn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),$i(),console.error(e.error),n(e.error);else if(Fn?.call?.(e,"mediaReleaseNotification")){if(u(Je))try{let t=e?.mediaReleaseNotification;"number"==typeof t?.releaseEpisode&&!isNaN(t.releaseEpisode)&&isFinite(t.releaseEpisode)&&"number"==typeof t.releaseDateMillis&&!isNaN(t.releaseDateMillis)&&isFinite(t.releaseDateMillis)&&"number"==typeof t.maxEpisode&&!isNaN(t.maxEpisode)&&isFinite(t.maxEpisode)&&"string"==typeof t.title&&"number"==typeof t.id&&!isNaN(t.id)&&isFinite(t.id)&&"string"==typeof t.userStatus&&"string"==typeof t.imageURL&&"string"==typeof t.mediaUrl&&"number"==typeof t.episodeProgress&&!isNaN(t.episodeProgress)&&isFinite(t.episodeProgress)&&JSBridge.addMediaReleaseNotification(Math.floor(t.id),t.title,Math.floor(t.releaseEpisode),Math.floor(t.maxEpisode),Math.floor(t.releaseDateMillis),t.imageURL,t.mediaUrl,t.userStatus,Math.floor(t.episodeProgress))}catch(e){console.error(e)}}else if(Fn?.call?.(e,"mediaReleaseAiringAt")){const t=e?.mediaReleaseAiringAt;t>o&&"number"==typeof t&&!isNaN(t)&&(l>t||null==l)&&(l=t)}else if(Fn?.call?.(e,"averageScoreMode")||Fn?.call?.(e,"animePopularityMode")||Fn?.call?.(e,"mangaPopularityMode")||Fn?.call?.(e,"novelPopularityMode"))window.updateMeanNumberInfos?.(e?.averageScoreMode,e?.animePopularityMode,e?.mangaPopularityMode,e?.novelPopularityMode);else if(Fn?.call?.(e,"recommendationError"))window.updateRecommendationError?.(e?.recommendationError);else{if(Qn?.terminate?.(),In("nearestMediaReleaseAiringAt",l).catch((()=>Pn("nearestMediaReleaseAiringAt"))).finally((()=>Sn("nearestMediaReleaseAiringAt",l))),!0===window.shouldUpdateNotifications&&u(Je)){window.shouldUpdateNotifications=!1;try{JSBridge.callUpdateNotifications()}catch(e){console.error(e)}}ni===e?.passedAlgorithmFilterId&&null!=ni&&(ni=ti=void 0),e?.hasNewFilterOption&&xi(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),l&&window.setMediaReleaseUpdateTimeout?.(l),t(),u(ct)&&On({loadAll:!0,selectedCategory:u(wt)})}}},Qn.onerror=e=>{Qn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),console.error(e),n(e)}})).catch((e=>{Qn?.terminate?.(),Un=!1,Ft.set(!1),St.set(null),Qe.set(100),$i(),console.error(e),n(e)}))}))};let oi,li,ri;function ai(e){oi?.postMessage?.({minimizeTransaction:e})}function si(){if(u(Je)&&!0!==window[u(Ye)])try{"number"==typeof li&&!isNaN(li)&&isFinite(li)&&"number"==typeof ri&&!isNaN(ri)&&isFinite(ri)&&(li>0||ri>0)&&(wn.update((e=>!e)),JSBridge.showNewUpdatedMediaNotification(Math.floor(li),Math.floor(ri)),li=ri=void 0)}catch(e){li=ri=void 0,console.error(e)}}Pt.subscribe((e=>{ai(e)})),Ft.subscribe((e=>{!0===e&&ai(e)})),window.notifyUpdatedMediaNotification=si;const ci=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{Rn?t():(oi?.terminate?.(),si(),u(Yt)||!(Dn||u(ut)||u(ct))?(Qe.set(0),En("./web-worker/requestMediaEntries.js").then((i=>{if(oi?.terminate?.(),si(),oi=new Worker(i),!u(Je)&&null!=window.location)try{const t=new URL(window.location).toString();"string"==typeof t&&""!==t&&(e.server=t)}catch{}oi.postMessage(e),jn=Rn=!0,oi.onmessage=({data:e})=>{if(Fn?.call?.(e,"progress"))!Un&&e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress);else if(Fn?.call?.(e,"status"))Un||!u(Gt)&&e.status?.includes?.("Rate Limit:")||St.set(e.status);else if(Fn.call(e,"getConnectionState"))(async()=>{oi?.postMessage?.({connected:await Ve()})})();else if(Fn?.call?.(e,"error"))oi?.terminate?.(),jn=Rn=!1,si(),St.set(null),Qe.set(100),console.error(e.error),n(e.error);else if(Fn?.call?.(e,"updateRecommendationList"))u(Je)&&(window.KanshiBackgroundshouldProcessRecommendedEntries=!0),wn.update((e=>!e));else if(Fn?.call?.(e,"errorDuringInit"))oi?.terminate?.(),jn=Rn=!1,si(),St.set(null),Qe.set(100),t(e);else if(Fn?.call?.(e,"notifyAddedEntries")){if(u(Je)&&!0!==window[u(Ye)])try{let t=e?.notifyAddedEntries;("number"!=typeof t||isNaN(t)||!isFinite(t)||t<0)&&(t=0);let n=e?.notifyEditedEntries;("number"!=typeof n||isNaN(n)||!isFinite(n)||n<0)&&(n=0),"number"==typeof t&&!isNaN(t)&&isFinite(t)&&"number"==typeof n&&!isNaN(n)&&isFinite(n)&&(t>0||n>0)&&(!0===window[u(qe)]?JSBridge.showNewUpdatedMediaNotification(Math.floor(t),Math.floor(n)):(li=t,ri=n))}catch(e){console.error(e)}}else oi?.terminate?.(),e?.noEntriesFound?(console.error("No entries found"),$i()):!0===e?.getEntries&&(Dn=!0,Mi({isGettingNewEntries:!0}),vi().finally((()=>{Dn=!1,Ci()}))),jn=Rn=!1,si(),St.set(null),Qe.set(100),t(e)},oi.onerror=e=>{oi?.terminate?.(),jn=Rn=!1,Dn=!1,si(),St.set(null),Qe.set(100),console.error(e),n(e)}})).catch((e=>{oi?.terminate?.(),jn=Rn=!1,Dn=!1,si(),St.set(null),Qe.set(100),$i(),console.error(e),n(e)}))):t())}))};let ui,di,pi;const mi=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(e?.username)pi?.terminate?.(),ui=!0;else{if(ui)return;if(e?.reload)pi?.terminate?.(),di=!0;else{if(di)return;pi?.terminate?.()}}if(!u(Yt)&&(u(ut)||u(ct)||Dn))return ui=di=!1,Bt.set(!1),n();Bt.set(!0),Qe.set(0),En("./web-worker/requestUserEntries.js").then((i=>{if(pi?.terminate?.(),pi=new Worker(i),Bt.set(!0),!u(Je)&&null!=window.location)try{const t=new URL(window.location).toString();"string"==typeof t&&""!==t&&(e.server=t)}catch{}pi.postMessage(e),pi.onmessage=({data:e})=>{Fn?.call?.(e,"progress")?(!Un||ui||di)&&e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress):Fn?.call?.(e,"status")?ui||di?!u(Gt)&&e.status?.includes?.("Rate Limit:")||(Un=!0,St.set(e.status)):Un||!u(Gt)&&e.status?.includes?.("Rate Limit:")||St.set(e.status):Fn.call(e,"getConnectionState")?(async()=>{pi?.postMessage?.({connected:await Ve()})})():Fn?.call?.(e,"error")?(pi?.terminate?.(),(ui||di)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"string"==typeof e.error&&e.error?e.error:"Request for user data has failed, please try again."}),ui=di=!1),Bt.set(!1),vn.update((e=>!e)),St.set(null),Qe.set(100),pt.update((e=>!e)),console.error(e.error),n(e.error)):Fn?.call?.(e,"updateRecommendationList")?(u(Je)&&(window.KanshiBackgroundshouldProcessRecommendedEntries=window.shouldUpdateNotifications=!0),wn.update((e=>!e))):(pi?.terminate?.(),(ui||di)&&(Un=!1,ui=di=!1),Bt.set(!1),St.set(null),Qe.set(100),t(e))},pi.onerror=e=>{pi?.terminate?.(),(ui||di)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"Request for user data has failed, please try again."}),ui=di=!1),Bt.set(!1),vn.update((e=>!e)),St.set(null),Qe.set(100),pt.update((e=>!e)),console.error(e),n(e)}})).catch((e=>{pi?.terminate?.(),(ui||di)&&(Un=!1,window.confirmPromise?.({isAlert:!0,title:"Failed to Request User Data",text:"Request for user data has failed, please try again."}),ui=di=!1),Bt.set(!1),St.set(null),Qe.set(100),vn.update((e=>!e)),$i(),pt.update((e=>!e)),console.error(e),n(e)}))}))};let fi,hi;window.isExported=(e=!0)=>{e?hi?.resolve?.():hi?.reject?.()};const gi=e=>{if(!1===u(Wt)||e?.initList)return new Promise(((t,n)=>{if(u(ut)&&e?.visibilityChange)t();else{if(fi?.terminate?.(),!u(Yt)){if(u(ct)||Dn)return;ut.set(!0),Mi({isExporting:!0})}hi?.reject?.(),hi=null,Qe.set(0),et.update((e=>!e)),En("./web-worker/exportUserData.js").then((i=>{fi?.terminate?.(),hi?.reject?.(),hi=null,fi=new Worker(i),u(Je)?fi.postMessage("android"):fi.postMessage("browser");let o=new TextDecoder;fi.onmessage=async({data:i})=>{if(Fn?.call?.(i,"progress"))i?.progress>=0&&i?.progress<=100&&Qe.set(i.progress);else{if(Fn?.call?.(i,"status"))return Un=!0,void St.set(i.status);if(Fn?.call?.(i,"missingData")||Fn?.call?.(i,"error"))fi?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),hi?.reject?.(i.error),hi=null,i.missingData?window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:`Data may be incomplete or corrupted. If this always occurs during export, please restore from a backup file or clear the ${u(Je)?"application":"website"} data.`}):(console.error(i.error),window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"string"==typeof i.error&&"Something went wrong"!==i.error&&i.error?i.error:"Something went wrong while processing your backup (B1)."})),Ci(e?.isManual),n(i.error);else if(u(Je))try{const{state:l,chunk:r,loaded:a}=i||{};a>0&&a<100&&(Qe.set(a),St.set(`${a.toFixed(2)}% Exporting User Data`)),0===l?(o.decode(),o=new TextDecoder,JSBridge.exportUserData(null,0)):1===l&&r instanceof Uint8Array?JSBridge.exportUserData(o.decode(r,{stream:!0}),1):2===l?(fi?.terminate?.(),JSBridge.exportUserData(o.decode(),1),JSBridge.exportUserData(`Kanshi.${i.username?.toLowerCase?.()||"backup"}.gzip`,2),Un=!1,ut.set(!1),new Promise(((e,t)=>{hi={resolve:e,reject:t}})).then((()=>{e?.isManual&&De("Data has been exported")})).catch((t=>{e?.isManual&&(async()=>{await(window.confirmPromise?.({title:"Back up failed",text:"Do you want to try again?"}))&&gi({isManual:!0})})(),n(t)})).finally((()=>{hi=null,St.set(null),Qe.set(100),Ci(e?.isManual),t()}))):(fi?.terminate?.(),Un=!1,ut.set(!1),hi?.reject?.(),hi=null,window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"Something went wrong while processing your backup (B2)."}),St.set(null),Qe.set(100),Ci(e?.isManual),n())}catch(t){fi?.terminate?.(),Un=!1,ut.set(!1),hi?.reject?.(t),hi=null,window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"string"==typeof t&&t?t:"Something went wrong while processing your backup (B3)."}),St.set(null),Qe.set(100),Ci(e?.isManual),console.error(t),n(t)}else"string"==typeof i?.url&&""!==i?.url?(Ue(i.url,`Kanshi.${i.username?.toLowerCase?.()||"backup"}.gzip`),fi?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),Ci(e?.isManual),t()):(fi?.terminate?.(),Un=!1,window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"Something went wrong while processing your backup (B4)."}),St.set(null),Qe.set(100),ut.set(!1),Ci(e?.isManual),n())}},fi.onerror=t=>{fi?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),hi?.reject?.(t),hi=null,window.confirmPromise?.({isAlert:!0,title:"Back up failed",text:"string"==typeof t&&t?t:"Something went wrong while processing your backup (B5)."}),Ci(e?.isManual),console.error(t),n(t)}})).catch((t=>{fi?.terminate?.(),Un=!1,St.set(null),Qe.set(100),ut.set(!1),hi?.reject?.(t),hi=null,$i(),Ci(e?.isManual),console.error(t),n(t)}))}}))};let yi;const wi=e=>{if(!1===u(Wt))return new Promise(((t,n)=>{if(yi?.terminate?.(),!u(Yt)){if(u(ut)||Dn)return;qn?.terminate?.(),ct.set(!0),qn=null,ni=ti=void 0,Mi({isImporting:!0})}Qe.set(0),et.update((e=>!e)),En("./web-worker/importUserData.js").then((i=>{yi?.terminate?.(),yi=new Worker(i),Pn("username"),yi.postMessage(e),yi.onmessage=({data:e})=>{if(!Fn?.call?.(e,"progress"))return Fn?.call?.(e,"status")?(Un=!0,void St.set(e.status)):void(Fn?.call?.(e,"error")?(yi?.terminate?.(),Un=!1,ct.set(!1),Zn({updateRecommendedMediaList:!0}),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please ensure that file is in a supported format (e.g., .gzip)."}),St.set(null),Qe.set(100),Ci(),console.error(e.error),n(e.error||"Something went wrong")):Fn?.call?.(e,"username")?"string"==typeof e?.username&&(In("username",e.username).catch((()=>Pn("username"))),dt.set(e.username)):Fn?.call?.(e,"hiddenMediaEntries")?Mn(e?.hiddenMediaEntries)&&Ct.set(e?.hiddenMediaEntries):Fn?.call?.(e,"mediaCautions")?e?.mediaCautions instanceof Array&&(kt.set(e?.mediaCautions),Tt.set(e?.mediaCautions)):Fn?.call?.(e,"algorithmFilters")?e?.algorithmFilters instanceof Array&&(Et.set(e?.algorithmFilters),Lt.set(e?.algorithmFilters)):Fn?.call?.(e,"tagInfo")?Mn(e?.tagInfo)&&At.set(e?.tagInfo):(yi?.terminate?.(),window[u(Ye)]=!1,u(Je)&&(window.shouldUpdateNotifications=!0),Un=!1,ii({isImporting:!0}).finally((()=>{Zn({updateRecommendedMediaList:!0,isImporting:!0}).finally((()=>{On({loadAll:!0,selectedCategory:u(wt)}).finally((()=>{ct.set(!1),St.set(null),Qe.set(100),u(Je)?De("File has been imported"):fn.set("File has been imported"),hn.update((e=>!e))}))}))})),t(e)));e?.progress>=0&&e?.progress<=100&&Qe.set(e.progress)},yi.onerror=e=>{yi?.terminate?.(),Un=!1,ct.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please ensure that file is in a supported format (e.g., .gzip)."}),vn.update((e=>!e)),St.set(null),Qe.set(100),Ci(),console.error(e),n(e||"Something went wrong")}})).catch((e=>{yi?.terminate?.(),Un=!1,ct.set(!1),window.confirmPromise?.({isAlert:!0,title:"Import failed",text:"File was not imported, please try again."}),vn.update((e=>!e)),St.set(null),Qe.set(100),$i(),Ci(),console.error(e),n(e)}))}))},vi=e=>new Promise(((e,t)=>{Qe.set(0),En("./web-worker/retrieveInitialData.js",3264,"Checking Anime, Manga, and Novel Entries").then((async n=>{const i=new Worker(n);i.postMessage({initialDataBlob:await En("./data/initial-data.gzip",28017313,"Getting Anime, Manga, and Novel Entries",!0)}),i.onmessage=({data:n})=>{if(Fn?.call?.(n,"progress"))n?.progress>=0&&n?.progress<=100&&Qe.set(n.progress);else{if(Fn?.call?.(n,"status"))return Un=!0,void St.set(n.status);i?.terminate?.(),St.set(null),Qe.set(100),Un=!1,wn.update((e=>!e)),Fn?.call?.(n,"error")?(console.error(n.error),t(n.error)):e(n)}},i.onerror=e=>{i?.terminate?.(),Un=!1,St.set(null),Qe.set(100),$i(),wn.update((e=>!e)),console.error(e),t(e)}})).catch((e=>{Un=!1,St.set(null),Qe.set(100),$i(),wn.update((e=>!e)),console.error(e),t(e)}))}));let bi;const xi=async()=>{try{bi?.terminate?.();const e=await En("./web-worker/getOrderedFilters.js");bi=new Worker(e),bi.postMessage(0),bi.onmessage=({data:e})=>{bi?.terminate?.(),Fn?.call?.(e,"error")?console.error(e.error):Fn?.call?.(e,"orderedMediaOptions")&&Mn(e.orderedMediaOptions)&&!Cn(e.orderedMediaOptions)&&vt.set(e.orderedMediaOptions)},bi.onerror=()=>{bi?.terminate?.()}}catch{bi?.terminate?.()}};let ki;const Ei=(e={})=>{if(!1===u(Wt)||e?.initList)return new Promise((async t=>{try{ki?.terminate?.();const n=await En("./web-worker/updateTagInfo.js");let i;if(ki=new Worker(n),!u(Je)&&null!=window.location)try{const e=new URL(window.location).toString();"string"==typeof e&&""!==e&&(i=e)}catch{}ki.postMessage({server:i,getTagInfo:e.getTagInfo??!0}),ki.onmessage=({data:e})=>{Fn.call(e,"getConnectionState")?(async()=>{ki?.postMessage?.({connected:await Ve()})})():(ki?.terminate?.(),Fn.call(e,"tagInfo")&&Mn(e.tagInfo)&&!Cn(e.tagInfo)&&At.set(e.tagInfo),t())},ki.onerror=()=>{ki?.terminate?.(),t()}}catch{ki?.terminate?.(),t()}}))};function Mi(e){Un=!1,Qe.set(0),oi?.terminate?.(),si(),Rn=!1,Dn=e?.isGettingNewEntries??!1,pi?.terminate?.(),pt.update((e=>!e)),(ui||di)&&(window.confirmPromise?.({isAlert:!0,title:"Request Interrupted",text:"Request for user data was suddenly terminated, please try again."}),ui=di=!1),Bt.set(!1),Qn?.terminate?.(),Ft.set(!1),yi?.terminate?.(),ct.set(e?.isImporting??!1),fi?.terminate?.(),ut.set(e?.isExporting??!1),St.set(null)}function Ci(e){wn.update((e=>!e)),(jn||!0!==e)&&hn.update((e=>!e))}function $i(){u(Je)?window.confirmPromise?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, restart the app or clear your cache, if it still fails you may want to reinstall the app."}):window.confirmPromise?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, refresh the page or clear this website data, this also does not run in incognito."})}window.updateNotifications=async(e=[])=>{if(u(Je))try{const t=await On({updateNotifications:!0,mediaIds:e});for(let e in t){const n=t[e];e=parseInt(e),"number"==typeof e&&!isNaN(e)&&isFinite(e)&&"string"==typeof n?.title&&"number"==typeof n.maxEpisode&&!isNaN(n.maxEpisode)&&isFinite(n.maxEpisode)&&"string"==typeof n.mediaUrl&&"string"==typeof n.userStatus&&"number"==typeof n.episodeProgress&&!isNaN(n.episodeProgress)&&isFinite(n.episodeProgress)&&JSBridge.updateNotifications(Math.floor(e),n.title,Math.floor(n?.maxEpisode),n.mediaUrl,n.userStatus,Math.floor(n.episodeProgress))}}catch(e){console.error(e)}};const zi=(e,t)=>{try{e.classList.add(t)}catch{}},Ti=(e,t)=>{try{e.classList.remove(t)}catch{}},Li=(e,t,n=.5)=>{try{let i;i=t instanceof Array?t:e.querySelectorAll(t);let o=[];for(let t=0;t<i.length;t++)if(i[t].offsetTop>e.scrollTop){o=t>0?[i[t-1],i[t]]:0===t?[i[t]]:[];break}let l=null,r=0,a=e.getBoundingClientRect();for(let e=0;e<o.length;e++){const t=o[e],i=t.getBoundingClientRect(),s=(Math.min(i.bottom,a.bottom)-Math.max(i.top,a.top))/i.height;s>=n&&s>r&&(r=s,l=t)}return l}catch{}},Ai=(e,t)=>{try{let n=e.selectionStart;e.value=t,n>0&&"number"==typeof n&&(--n,e.setSelectionRange(n,n))}catch{}};function Si(e,t,n){const i=e.slice();return i[66]=t[n],i}function Ni(e,t,n){const i=e.slice();return i[66]=t[n],i}function Ii(e,t,n){const i=e.slice();return i[66]=t[n],i}function Pi(e,t,n){const i=e.slice();return i[66]=t[n],i}function Fi(e,t,n){const i=e.slice();i[71]=t[n],i[75]=t,i[76]=n;const o=i[71].format;i[72]=o;const l="Manga"===i[72]||"One Shot"===i[72];i[73]=l;const r="Novel"===i[72];return i[74]=r,i}function Bi(e){const t=e.slice(),n=function(e,t){let n,i;if("number"==typeof t?.episode&&"number"==typeof t?.airingAt){let e=new Date(1e3*t?.airingAt);i=t?.episode,e instanceof Date&&!isNaN(e)&&(n=e.getTime()-(new Date).getTime())}if(n>0&&e>=1&&e>=i)return`(${Math.max(i-1,0)}/${e})`;if(n<=0&&"number"==typeof i&&e>i)return`(${i}/${e})`;if("number"==typeof e)return`(${e})`;if("number"==typeof i){if(n>0&&i>1)return`(${i-1}")`;if(n<=0)return`(${i}")`}return""}(t[71].episodes,t[71].nextAiringEpisode);return t[77]=n,t}function Ui(e){const t=e.slice(),n=t[7]?.[t[0]]?.mediaList;return t[65]=n,t}function Di(t){let n,i,o=Array(21),l=[];for(let e=0;e<o.length;e+=1)l[e]=Hi(Ni(t,o,e));let r=Array(5),a=[];for(let e=0;e<r.length;e+=1)a[e]=Vi(Si(t,r,e));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();n=A();for(let e=0;e<a.length;e+=1)a[e].c();i=S()},m(e,t){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,t);M(e,n,t);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,t);M(e,i,t)},p:e,d(e){$(l,e),e&&C(n),$(a,e),e&&C(i)}}}function Ri(e){let t,n,i,o=!e[18]?.[e[0]]&&Oi(e);return{c(){t=z("div"),t.textContent="No Results",n=A(),o&&o.c(),i=S(),P(t,"class","empty svelte-aibzpo")},m(e,l){M(e,t,l),M(e,n,l),o&&o.m(e,l),M(e,i,l)},p(e,t){e[18]?.[e[0]]?o&&(o.d(1),o=null):o?o.p(e,t):(o=Oi(e),o.c(),o.m(i.parentNode,i))},d(e){e&&C(t),e&&C(n),o&&o.d(e),e&&C(i)}}}function ji(e){let t,n,i,o=[],l=new Map,r=e[65];const a=e=>(null!=e[71]?.id?e[71].id+" "+e[76]:{})??{};for(let t=0;t<r.length;t+=1){let n=Fi(e,r,t),i=a(n);l.set(i,o[t]=lo(i,n))}let s=Array(e[18]?.[e[0]]?0:1),c=[];for(let t=0;t<s.length;t+=1)c[t]=ro(Pi(e,s,t));let u=Array(e[6]?Math.floor((e[15]??1100)/220):5),d=[];for(let t=0;t<u.length;t+=1)d[t]=ao(Ii(e,u,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=A();for(let e=0;e<c.length;e+=1)c[e].c();n=A();for(let e=0;e<d.length;e+=1)d[e].c();i=S()},m(e,l){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,l);M(e,t,l);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,l);M(e,n,l);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,l);M(e,i,l)},p(e,p){if(1593852293&p[0]|1&p[1]&&(r=e[65],o=Ee(o,p,a,1,e,r,l,t.parentNode,xe,lo,t,Fi)),262145&p[0]){let t;for(s=Array(e[18]?.[e[0]]?0:1),t=0;t<s.length;t+=1){const i=Pi(e,s,t);c[t]?c[t].p(i,p):(c[t]=ro(),c[t].c(),c[t].m(n.parentNode,n))}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}if(32832&p[0]){let t;for(u=Array(e[6]?Math.floor((e[15]??1100)/220):5),t=0;t<u.length;t+=1){const n=Ii(e,u,t);d[t]?d[t].p(n,p):(d[t]=ao(),d[t].c(),d[t].m(i.parentNode,i))}for(;t<d.length;t+=1)d[t].d(1);d.length=u.length}},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&C(t),$(c,e),e&&C(n),$(d,e),e&&C(i)}}}function Hi(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer svelte-aibzpo"><div class="shimmer-background svelte-aibzpo"></div></div>',P(n,"class","image-card skeleton svelte-aibzpo"),P(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Vi(t){let n;return{c(){n=z("div"),P(n,"class","image-card svelte-aibzpo"),P(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Oi(t){let n,i;return{c(){n=z("div"),i=z("div"),P(i,"class","observed-grid empty-card svelte-aibzpo"),P(n,"class","image-card svelte-aibzpo"),P(n,"aria-hidden","true")},m(e,o){M(e,n,o),x(n,i),t[41](i)},p:e,d(e){e&&C(n),t[41](null)}}}function qi(e){let t,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl,i=_i(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){129&o[0]&&r(n,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)?(i.d(1),i=_i(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function _i(e){let t,n,i,l,r,a,c;return{c(){t=z("img"),s(t.src,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)||P(t,"src",n),P(t,"fetchpriority",i=e[76]>e[8]?"":"high"),P(t,"loading",l=e[76]>e[8]?"lazy":"eager"),P(t,"class","image-card-thumb svelte-aibzpo"),P(t,"alt",r=(e[71]?.shownTitle||"")+" Cover"),P(t,"width","180px"),P(t,"height","254.531px")},m(n,i){M(n,t,i),a||(c=[N(t,"load",e[35]),N(t,"error",e[36])],a=!0)},p(e,o){129&o[0]&&!s(t.src,n=e[71].coverImageUrl||e[71].bannerImageUrl||e[71].trailerThumbnailUrl)&&P(t,"src",n),385&o[0]&&i!==(i=e[76]>e[8]?"":"high")&&P(t,"fetchpriority",i),385&o[0]&&l!==(l=e[76]>e[8]?"lazy":"eager")&&P(t,"loading",l),129&o[0]&&r!==(r=(e[71]?.shownTitle||"")+" Cover")&&P(t,"alt",r)},d(e){e&&C(t),a=!1,o(c)}}}function Yi(e){let t,n,i,o=`${e[71].format||"N/A"}`;function l(e,t){return e[73]?Gi:e[74]?Ki:Ji}let r=l(e),a=r(e);return{c(){t=L(o),n=A(),a.c(),i=S()},m(e,o){M(e,t,o),M(e,n,o),a.m(e,o),M(e,i,o)},p(e,n){129&n[0]&&o!==(o=`${e[71].format||"N/A"}`)&&F(t,o),r===(r=l(e))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(i.parentNode,i)))},d(e){e&&C(t),e&&C(n),a.d(e),e&&C(i)}}}function Wi(e){let t,n,i,o=`${e[71].format||"N/A"}`;function l(e,t){return e[77]?Zi:Xi}let r=l(e),a=r(e);return{c(){t=L(o),n=A(),a.c(),i=S()},m(e,o){M(e,t,o),M(e,n,o),a.m(e,o),M(e,i,o)},p(e,n){129&n[0]&&o!==(o=`${e[71].format||"N/A"}`)&&F(t,o),r===(r=l(e))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(i.parentNode,i)))},d(e){e&&C(t),e&&C(n),a.d(e),e&&C(i)}}}function Ji(e){let t,n=""+(e[71].episodes>0?"("+e[71].episodes+")":e[71].episodeProgress>0?"("+e[71].episodeProgress+'")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){129&i[0]&&n!==(n=""+(e[71].episodes>0?"("+e[71].episodes+")":e[71].episodeProgress>0?"("+e[71].episodeProgress+'")':""))&&F(t,n)},d(e){e&&C(t)}}}function Ki(e){let t,n=""+(e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){129&i[0]&&n!==(n=""+(e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':""))&&F(t,n)},d(e){e&&C(t)}}}function Gi(e){let t,n=""+(e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){129&i[0]&&n!==(n=""+(e[71].chapters>0?"("+e[71].chapters+" Ch)":e[71].episodeProgress>0?"("+e[71].episodeProgress+' Ch")':e[71].volumes>0?"("+e[71].volumes+" Vol)":e[71].volumeProgress>0?"("+e[71].volumeProgress+' Vol")':""))&&F(t,n)},d(e){e&&C(t)}}}function Xi(e){let t,n=""+(e[71].episodes?"("+e[71].episodes+")":"");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){129&i[0]&&n!==(n=""+(e[71].episodes?"("+e[71].episodes+")":""))&&F(t,n)},d(e){e&&C(t)}}}function Zi(e){let t,n=e[25]||1,i=Qi(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){33554432&o[0]&&r(n,n=e[25]||1)?(i.d(1),i=Qi(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function Qi(e){let t,n=e[77]+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){129&i[0]&&n!==(n=e[77]+"")&&F(t,n)},d(e){e&&C(t)}}}function eo(e){let t,n,i,o,l,r=(e[71]?.shownActivity??"N/A")+"";return{c(){t=T("svg"),n=T("path"),o=A(),l=L(r),P(n,"d","M64 64a32 32 0 1 0-64 0v336c0 44 36 80 80 80h400a32 32 0 1 0 0-64H80c-9 0-16-7-16-16V64zm407 87a32 32 0 0 0-46-46L320 211l-57-58a32 32 0 0 0-46 0L105 265a32 32 0 0 0 46 46l89-90 57 58c13 12 33 12 46 0l128-128z"),P(t,"viewBox","0 0 512 512"),P(t,"class",i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,i){M(e,t,i),x(t,n),M(e,o,i),M(e,l,i)},p(e,n){129&n[0]&&i!==(i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&P(t,"class",i),129&n[0]&&r!==(r=(e[71]?.shownActivity??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(o),e&&C(l)}}}function to(e){let t,n,i,o,l,r=(e[71]?.shownFavorites??"N/A")+"";return{c(){t=T("svg"),n=T("path"),o=A(),l=L(r),P(n,"d","m48 300 180 169a41 41 0 0 0 56 0l180-169c31-28 48-68 48-109v-6A143 143 0 0 0 268 84l-12 12-12-12A143 143 0 0 0 0 185v6c0 41 17 81 48 109z"),P(t,"viewBox","0 0 512 512"),P(t,"class",i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,i){M(e,t,i),x(t,n),M(e,o,i),M(e,l,i)},p(e,n){129&n[0]&&i!==(i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&P(t,"class",i),129&n[0]&&r!==(r=(e[71]?.shownFavorites??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(o),e&&C(l)}}}function no(e){let t,n,i,o,l,r=(e[71]?.shownCount??"N/A")+"";return{c(){t=T("svg"),n=T("path"),o=A(),l=L(r),P(n,"d","M96 128a128 128 0 1 1 256 0 128 128 0 1 1-256 0zM0 482c0-98 80-178 178-178h92c98 0 178 80 178 178 0 17-13 30-30 30H30c-17 0-30-13-30-30zm609 30H471c6-9 9-20 9-32v-8c0-61-27-115-70-152h69c89 0 161 72 161 161 0 17-14 31-31 31zM432 256c-31 0-59-13-79-33a159 159 0 0 0 13-169 112 112 0 1 1 66 202z"),P(t,"viewBox","0 0 640 512"),P(t,"class",i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,i){M(e,t,i),x(t,n),M(e,o,i),M(e,l,i)},p(e,n){129&n[0]&&i!==(i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&P(t,"class",i),129&n[0]&&r!==(r=(e[71]?.shownCount??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(o),e&&C(l)}}}function io(e){let t,n,i,o,l,r=(e[71]?.shownScore??"N/A")+"";return{c(){t=T("svg"),n=T("path"),o=A(),l=L(r),P(n,"d","M317 18a32 32 0 0 0-58 0l-64 132-144 22a32 32 0 0 0-17 54l104 103-25 146a32 32 0 0 0 47 33l128-68 129 68a32 32 0 0 0 46-33l-24-146 104-103a32 32 0 0 0-18-54l-144-22-64-132z"),P(t,"viewBox","0 0 576 512"),P(t,"class",i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")},m(e,i){M(e,t,i),x(t,n),M(e,o,i),M(e,l,i)},p(e,n){129&n[0]&&i!==(i=p(`${e[71]?.contentCautionColor}-fill score`)+" svelte-aibzpo")&&P(t,"class",i),129&n[0]&&r!==(r=(e[71]?.shownScore??"N/A")+"")&&F(l,r)},d(e){e&&C(t),e&&C(o),e&&C(l)}}}function oo(t){let n;return{c(){n=z("div"),P(n,"aria-hidden","true"),P(n,"class","observed-grid svelte-aibzpo")},m(e,i){M(e,n,i),t[39](n)},p:e,d(e){e&&C(n),t[39](null)}}}function lo(e,t){let n,i,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,I,B,U,D,R,j,H,V,O,q=(t[71]?.shownTitle||"N/A")+"",_=t[75],Y=t[76],W=(t[71]?.coverImageUrl||t[71]?.bannerImageUrl||t[71]?.trailerThumbnailUrl)&&qi(t);function J(e,t){return 129&t[0]&&(k=null),null==k&&(k=!(e[73]||e[74]||!Mn(e[71]?.nextAiringEpisode))),k?Wi:Yi}function K(e,t){return t===Wi?Bi(e):e}let G=J(t,[-1,-1,-1]),X=G(K(t,G));function Z(e,t){return null!=e[71]?.shownScore?io:null!=e[71]?.shownCount?no:null!=e[71]?.shownFavorites?to:null!=e[71]?.shownActivity?eo:void 0}let Q=Z(t),ee=Q&&Q(t);function te(...e){return t[37](t[76],...e)}function ne(...e){return t[38](t[76],...e)}let ie=t[76]+1===t[65].length&&oo(t);const oe=()=>t[40](n,_,Y),le=()=>t[40](null,_,Y);return{key:e,first:null,c(){n=z("div"),i=z("div"),W&&W.c(),r=A(),a=z("span"),s=z("span"),c=L(q),m=A(),f=z("span"),h=z("div"),g=z("span"),y=T("svg"),w=T("path"),b=A(),X.c(),E=A(),$=z("div"),S=z("span"),ee&&ee.c(),U=A(),D=z("div"),j=A(),ie&&ie.c(),P(s,"class","title copy svelte-aibzpo"),P(s,"data-copy",u=t[71]?.shownTitle||""),P(s,"data-secondcopy",d=t[71]?.copiedTitle||""),P(w,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512z"),P(y,"viewBox","0 0 512 512"),P(y,"class",v=p(`${t[71]?.userStatusColor}-fill circle`)+" svelte-aibzpo"),P(g,"class","svelte-aibzpo"),P(h,"class","brief-info svelte-aibzpo"),P(S,"class","svelte-aibzpo"),P($,"class","brief-info svelte-aibzpo"),P(f,"class","brief-info-wrapper copy svelte-aibzpo"),P(f,"data-copy",I=t[71]?.shownTitle||""),P(f,"data-secondcopy",B=t[71]?.copiedTitle||""),P(a,"class","image-card-title svelte-aibzpo"),P(D,"class","shimmer-background svelte-aibzpo"),P(i,"class","shimmer svelte-aibzpo"),P(i,"tabindex",R=t[24]||t[14]?"":"0"),P(i,"role","button"),P(i,"aria-label","Open Detailed Information for the Media"),P(n,"class","image-card svelte-aibzpo"),P(n,"title",H=(t[71]?.shownTitle?t[71]?.shownTitle+"\n\n":"")+(t[71]?.briefInfo||"")),this.first=n},m(e,o){M(e,n,o),x(n,i),W&&W.m(i,null),x(i,r),x(i,a),x(a,s),x(s,c),x(a,m),x(a,f),x(f,h),x(h,g),x(g,y),x(y,w),x(g,b),X.m(g,null),x(f,E),x(f,$),x($,S),ee&&ee.m(S,null),x(i,U),x(i,D),x(n,j),ie&&ie.m(n,null),oe(),V||(O=[N(a,"pointerdown",t[30]),N(a,"pointerup",t[31]),N(a,"pointercancel",t[31]),N(i,"click",(function(){l(t[26](t[76]))&&t[26](t[76]).apply(this,arguments)})),N(i,"pointerdown",te),N(i,"pointerup",t[28]),N(i,"pointercancel",t[28]),N(i,"keyup",ne)],V=!0)},p(e,o){t=e,t[71]?.coverImageUrl||t[71]?.bannerImageUrl||t[71]?.trailerThumbnailUrl?W?W.p(t,o):(W=qi(t),W.c(),W.m(i,r)):W&&(W.d(1),W=null),129&o[0]&&q!==(q=(t[71]?.shownTitle||"N/A")+"")&&F(c,q),129&o[0]&&u!==(u=t[71]?.shownTitle||"")&&P(s,"data-copy",u),129&o[0]&&d!==(d=t[71]?.copiedTitle||"")&&P(s,"data-secondcopy",d),129&o[0]&&v!==(v=p(`${t[71]?.userStatusColor}-fill circle`)+" svelte-aibzpo")&&P(y,"class",v),G===(G=J(t,o))&&X?X.p(K(t,G),o):(X.d(1),X=G(K(t,G)),X&&(X.c(),X.m(g,null))),Q===(Q=Z(t))&&ee?ee.p(t,o):(ee&&ee.d(1),ee=Q&&Q(t),ee&&(ee.c(),ee.m(S,null))),129&o[0]&&I!==(I=t[71]?.shownTitle||"")&&P(f,"data-copy",I),129&o[0]&&B!==(B=t[71]?.copiedTitle||"")&&P(f,"data-secondcopy",B),16793600&o[0]&&R!==(R=t[24]||t[14]?"":"0")&&P(i,"tabindex",R),t[76]+1===t[65].length?ie?ie.p(t,o):(ie=oo(t),ie.c(),ie.m(n,null)):ie&&(ie.d(1),ie=null),129&o[0]&&H!==(H=(t[71]?.shownTitle?t[71]?.shownTitle+"\n\n":"")+(t[71]?.briefInfo||""))&&P(n,"title",H),_===t[75]&&Y===t[76]||(le(),_=t[75],Y=t[76],oe())},d(e){e&&C(n),W&&W.d(),X.d(),ee&&ee.d(),ie&&ie.d(),le(),V=!1,o(O)}}}function ro(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer svelte-aibzpo"><div class="shimmer-background svelte-aibzpo"></div></div>',P(n,"class","image-card skeleton dummy svelte-aibzpo"),P(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function ao(t){let n;return{c(){n=z("div"),P(n,"class","image-card dummy svelte-aibzpo"),P(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function so(e){let t,n,i,l,r,a,s,c,u;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"),P(n,"viewBox","0 0 320 512"),P(n,"class","svelte-aibzpo"),P(t,"class","go-back-grid full-view svelte-aibzpo"),P(t,"tabindex",l=e[24]||e[14]?"":"0")},m(o,l){M(o,t,l),x(t,n),x(n,i),s=!0,c||(u=[N(t,"click",e[29]),N(t,"keyup",e[45])],c=!0)},p(n,i){e=n,(!s||16793600&i[0]&&l!==(l=e[24]||e[14]?"":"0"))&&P(t,"tabindex",l)},i(e){s||(ne((()=>{s&&(a&&a.end(1),r=ye(t,Ae,{duration:200,easing:Le}),r.start())})),s=!0)},o(e){r&&r.invalidate(),a=we(t,Ae,{duration:200,easing:Le}),s=!1},d(e){e&&C(t),e&&a&&a.end(),c=!1,o(u)}}}function co(e){let t,n,i,l=function(e){let t,n,i,l,r,a,s;function c(e,t){return e[65]?.length>0?ji:0===e[65]?.length?Ri:Di}let u=c(e),d=u(e),m=!e[13]&&e[12]&&e[7]?.[e[0]]?.mediaList?.length&&so(e);return{c(){t=z("section"),d.c(),i=A(),m&&m.c(),l=S(),P(t,"class",n=p("image-grid "+(e[6]?" full-view":"")+(0!==e[65]?.length||e[23]?"":" empty-grid")+(e[19]||e[16][""]||e[16][e[0]]||e[9]||!1!==e[20]?" semi-loading":""))+" svelte-aibzpo"),P(t,"data-category",e[0]),P(t,"aria-label","List of Media Per Category")},m(n,o){M(n,t,o),d.m(t,null),e[42](t),M(n,i,o),m&&m.m(n,o),M(n,l,o),r=!0,a||(s=[N(t,"wheel",e[43]),N(t,"scroll",e[44])],a=!0)},p(e,i){u===(u=c(e))&&d?d.p(e,i):(d.d(1),d=u(e),d&&(d.c(),d.m(t,null))),(!r||10027713&i[0]&&n!==(n=p("image-grid "+(e[6]?" full-view":"")+(0!==e[65]?.length||e[23]?"":" empty-grid")+(e[19]||e[16][""]||e[16][e[0]]||e[9]||!1!==e[20]?" semi-loading":""))+" svelte-aibzpo"))&&P(t,"class",n),(!r||1&i[0])&&P(t,"data-category",e[0]),!e[13]&&e[12]&&e[7]?.[e[0]]?.mediaList?.length?m?(m.p(e,i),12417&i[0]&&fe(m,1)):(m=so(e),m.c(),fe(m,1),m.m(l.parentNode,l)):m&&(pe(),he(m,1,1,(()=>{m=null})),me())},i(e){r||(fe(m),r=!0)},o(e){he(m),r=!1},d(n){n&&C(t),d.d(),e[42](null),n&&C(i),m&&m.d(n),n&&C(l),a=!1,o(s)}}}(Ui(e));return{c(){t=z("div"),l&&l.c(),P(t,"data-category",e[0]),P(t,"class",n=p("category-list"+(e[0]===e[17]||""===e[0]?" viewed":"")+(e[6]?" full-view":""))+" svelte-aibzpo"),U(t,"--media-grid-height",(e[21]&&!e[13]?e[22]:e[15])+"px")},m(e,n){M(e,t,n),l&&l.m(t,null),i=!0},p(e,o){l.p(Ui(e),o),(!i||1&o[0])&&P(t,"data-category",e[0]),(!i||131137&o[0]&&n!==(n=p("category-list"+(e[0]===e[17]||""===e[0]?" viewed":"")+(e[6]?" full-view":""))+" svelte-aibzpo"))&&P(t,"class",n),6332416&o[0]&&U(t,"--media-grid-height",(e[21]&&!e[13]?e[22]:e[15])+"px")},i(e){i||(fe(l),i=!0)},o(e){he(l),i=!1},d(e){e&&C(t),l&&l.d()}}}function uo(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A;d(e,Mt,(e=>n(53,i=e))),d(e,Jt,(e=>n(6,o=e))),d(e,Je,(e=>n(13,l=e))),d(e,st,(e=>n(33,r=e))),d(e,lt,(e=>n(34,a=e))),d(e,nn,(e=>n(54,s=e))),d(e,on,(e=>n(55,c=e))),d(e,ln,(e=>n(14,u=e))),d(e,rn,(e=>n(56,p=e))),d(e,ot,(e=>n(15,f=e))),d(e,It,(e=>n(16,h=e))),d(e,Qt,(e=>n(57,g=e))),d(e,wt,(e=>n(17,y=e))),d(e,mt,(e=>n(7,w=e))),d(e,ht,(e=>n(58,v=e))),d(e,Zt,(e=>n(18,b=e))),d(e,sn,(e=>n(19,x=e))),d(e,Wt,(e=>n(20,k=e))),d(e,ft,(e=>n(59,E=e))),d(e,fn,(e=>n(60,M=e))),d(e,gt,(e=>n(61,C=e))),d(e,Ke,(e=>n(21,$=e))),d(e,at,(e=>n(22,z=e))),d(e,Yt,(e=>n(23,T=e))),d(e,tn,(e=>n(24,L=e))),d(e,Xt,(e=>n(25,A=e)));let{mainCategory:S}=t;const N={};let I,P,F=0,B=Math.max(5,(f-239)/250.525*5);N[F++]=ot.subscribe((e=>{n(8,B=Math.max(5,(e-239)/250.525*5))}));let U,D,R,j,H,V,O=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&On({loadMore:!0,selectedCategory:S,searchedWord:v})}))}),{root:null,rootMargin:"100%",threshold:[0,1]});function q(e){m(rn,p=e,p),m(ln,u=!0,u)}function _(e,t){try{window[".isOpeningMediaOption"]=!0}catch(e){}let n=e.target;n.classList.contains("copy")||n.closest(".copy")||(R?.(),R=Be((()=>{m(on,c=t,c),m(nn,s=!0,s)}),500))}function J(){R?.(),window[".isOpeningMediaOption"]=!1}N[F++]=""===S?ht.subscribe((e=>{e&&(l?De("Please wait a moment"):m(fn,M="Please wait a moment",M))})):ht.subscribe((e=>{null!=C&&(!1===k?n(9,U=new Date):e&&(l?De("Please wait a moment"):m(fn,M="Please wait a moment",M)),On({loadMore:!0,selectedCategory:S,searchedWord:e,searchDate:U}))})),m(ft,E[S]=function({idx:e,media:t,isLast:i,updateDate:l,searchDate:r,isInit:s}){if(y===S&&u&&!g&&e<P-1&&!1===k&&!s)return void m(sn,x=!0,x);let c,d;if(i?c=d=!0:(c=l>=h[S],d=r>=U),"number"==typeof t?.id){m(Zt,b[S]=i,b);let l=w[S]?.mediaList;if(l instanceof Array){let n=l;i&&"number"==typeof e&&(n=n.slice(0,e+1)),"number"==typeof e&&l?.[e]&&Math.abs(l[e]?.id)===t.id?(n[e]=t,m(mt,w[S].mediaList=n,w)):(e<l.length?n[e]=t:n.push(t),m(mt,w[S].mediaList=n,w))}else w[S]&&m(mt,w[S].mediaList=[t],w);if(s)return;e<P-1?On({loadMore:!0,selectedCategory:S,searchedWord:v}):(y===S&&m(Qt,g=!1,g),c&&(delete h[S],It.set(h)),d&&n(9,U=void 0),function(){let e=D?.getBoundingClientRect?.();return o?e?.left<a:e?.top<f}()&&On({loadMore:!0,selectedCategory:S,searchedWord:v}))}else if(i){if(w[S]&&m(mt,w[S].mediaList=[],w),s)return;y===S&&m(Qt,g=!1,g),c&&(delete h[S],It.set(h)),d&&n(9,U=void 0)}else s||(c&&(delete h[S],It.set(h)),d&&n(9,U=void 0))},E),window.oncontextmenu=()=>{if(window[".isOpeningMediaOption"])return window[".isOpeningMediaOption"]=!1,!1};let G,X,Z,Q,ee,te=!0;function ne(){o?(n(1,I.style.overflow="hidden",I),n(1,I.style.overflow="",I),I.scroll({left:0,behavior:"smooth"})):(!l&&matchMedia("(hover:hover)").matches||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow=""),window.scrollTo({top:-9999,behavior:"smooth"}))}N[F++]=st.subscribe((e=>{const t=document.documentElement;n(10,G=o&&Math.abs(t.scrollHeight-e-t.clientHeight)<=3)})),N[F++]=un.subscribe((()=>{Q?.(),Q=Be((()=>{const e=document.documentElement;n(10,G=o&&Math.abs(e.scrollHeight-r-e.clientHeight)<=3)}),17)}));const ie=()=>{window.mediaGridScrolled?.(I.scrollLeft),ee||X?.(),o&&I?.scrollLeft<1?ee||(ee=!0,n(32,X=Be((()=>{n(11,te=o&&I?.scrollLeft<1),ee=!1}),8))):(X?.(),ee=!1,n(11,te=!1))};let oe;var le;W((()=>{N[F++]=wt.subscribe((e=>{e===S&&e&&m(Mt,i=I,i)})),I.addEventListener("scroll",ie)})),le=()=>{O?.disconnect?.(),I?.removeEventListener?.("scroll",ie);for(const e in N)N[e]?.();J(),oe?.()},Y().$$.on_destroy.push(le);return e.$$set=e=>{"mainCategory"in e&&n(0,S=e.mainCategory)},e.$$.update=()=>{129&e.$$.dirty[0]&&(P=w?.[S]?.mediaList?.length??0),4&e.$$.dirty[0]&&D instanceof Element&&O.observe(D),66&e.$$.dirty[0]|6&e.$$.dirty[1]&&(n(10,G=o&&Math.abs(document.documentElement.scrollHeight-r-document.documentElement.clientHeight)<=3),X?.(),o&&I?.scrollLeft<1?n(32,X=Be((()=>{n(11,te=o&&I?.scrollLeft<1)}),1e3)):n(11,te=!1)),120&e.$$.dirty[0]|8&e.$$.dirty[1]&&n(12,Z=o&&V&&(H<j||a>596.5))},[S,I,D,j,H,V,o,w,B,U,G,te,Z,l,u,f,h,y,b,x,k,$,z,T,L,A,q,_,J,ne,function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&(oe?.(),oe=Be((()=>{let e=t.dataset.copy;if(e){t.style.pointerEvents="none",Be((()=>{t.style.pointerEvents=""}),500);let n=t.dataset.secondcopy;n&&!$n(n,e)?(window.copyToClipBoard?.(n),Be((()=>{window.copyToClipBoard?.(e)}),1e3)):window.copyToClipBoard?.(e)}}),500))},function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&oe?.()},X,r,a,e=>{Ti(e.target,"display-none"),zi(e.target,"loaded")},e=>{Ti(e.target,"loaded"),zi(e.target,"display-none")},(e,t)=>{_(t,e)},(e,t)=>"Enter"===t.key&&q(e),function(e){K[e?"unshift":"push"]((()=>{D=e,n(2,D)}))},function(e,t,i){K[e?"unshift":"push"]((()=>{t[i].gridElement=e,n(0,S)}))},function(e){K[e?"unshift":"push"]((()=>{D=e,n(2,D)}))},function(e){K[e?"unshift":"push"]((()=>{I=e,n(1,I)}))},e=>{if(o&&I.scrollWidth>I.clientWidth&&Math.abs(e?.deltaY)>Math.abs(e?.deltaX)){if(!G&&e?.deltaY>0)return;if(te&&e?.deltaY<0)return;!function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"image-grid")}},e=>{let t=e?.target;n(3,j=H),n(4,H=t?.scrollLeft),n(5,V=H>500)},e=>"Enter"===e.key&&ne()]}const po=(e,t,n)=>{try{if(e<1e3)return"0s";let i=Math.floor(e/1e3%60),o=Math.floor(e/6e4%60),l=Math.floor(e/36e5%24),r=Math.floor(e/864e5%7),a=Math.floor(e/6048e5%4),s=Math.floor(e/24192e5%12),c=Math.floor(e/290304e5%10),u=Math.floor(e/290304e6%10),d=Math.floor(e/290304e7%10),p=Math.floor(e/290304e8%10);if(t<=1){switch(p>0?"mil":d>0?"cen":u>0?"dec":c>0?"y":s>0?"mon":a>0?"w":r>0?"d":l>0?"h":o>0?"m":"s"){case"mil":d>0&&(p+=.1*d,p=Math.round(10*p)/10||0);break;case"cen":u>0&&(d+=.1*u,d=Math.round(10*d)/10||0);break;case"dec":c>0&&(u+=.1*c,u=Math.round(10*u)/10||0);break;case"y":s>0&&(c+=.0833333333*s,c=Math.round(10*c)/10||0);break;case"mon":a>0&&(s+=.229984378*a,s=Math.round(10*s)/10||0);break;case"w":r>0&&(a+=.142857143*r,a=Math.round(10*a)/10||0);break;case"d":l>0&&(r+=.0416666667*l,r=Math.round(10*r)/10||0);break;case"h":o>0&&(l+=.0166666667*o,l=Math.round(10*l)/10||0);break;case"m":i>0&&(o+=.0166666667*i,o=Math.round(10*o)/10||0)}}let m=[];return n?(p>0&&m.push(`${p} ${p>1?"millennia":"millennium"}`),d>0&&m.push(`${d} centur${d>1?"ies":"y"}`),u>0&&m.push(`${u} decade${p>1?"s":""}`),c>0&&m.push(`${c} year${c>1?"s":""}`),s>0&&m.push(`${s} month${s>1?"s":""}`),a>0&&m.push(`${a} week${a>1?"s":""}`),r>0&&m.push(`${r} day${r>1?"s":""}`),l>0&&m.push(`${l} hour${l>1?"s":""}`),o>0&&m.push(`${o} minute${o>1?"s":""}`),i>0&&m.push(`${i} second${i>1?"s":""}`)):(p>0&&m.push(`${p}mil`),d>0&&m.push(`${d}cen`),u>0&&m.push(`${u}dec`),c>0&&m.push(`${c}y`),s>0&&m.push(`${s}mon`),a>0&&m.push(`${a}w`),r>0&&m.push(`${r}d`),l>0&&m.push(`${l}h`),o>0&&m.push(`${o}m`),i>0&&m.push(`${i}s`)),t>0&&(m=m.slice(0,t)),m.join(" ")||"0s"}catch{return""}},mo=e=>{try{return e.toLocaleDateString(void 0,{year:"numeric"})}catch{return""}},fo=e=>{try{return e.toLocaleDateString(void 0,{month:"short"})}catch{return""}},ho=e=>{try{return e.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}},go=(e,t=2)=>{if("number"==typeof e){const n=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:0,notation:"compact",compactDisplay:"short"});if(Math.abs(e)>=1e3)return n.format(e);if(Math.abs(e)<.01&&Math.abs(e)>0)return e.toExponential(0);{let n=e.toFixed(t);return-1!==n.indexOf(".")&&(n=n.replace(/\.?0+$/,"")),n||e.toLocaleString("en-US",{maximumFractionDigits:t})}}return null};function yo(e,t,n){const i=e.slice();return i[144]=t[n],i[145]=t,i[146]=n,i}function wo(e){const t=e.slice(),n=Ul(t[144]?.description)||"";return t[151]=n,t}function vo(e,t,n){const i=e.slice();return i[152]=t[n],i}function bo(e,t,n){const i=e.slice();return i[155]=t[n],i}function xo(e,t,n){const i=e.slice();return i[158]=t[n],i}function ko(e){const t=e.slice(),n=t[144].nextAiringEpisode;t[161]=n;const i=t[161]?.episode;t[163]=i;const o=1e3*t[161]?.airingAt;return t[162]=o,t}function Eo(e){const t=e.slice(),n="Finished"===t[144].status;t[166]=n;const i=t[144].userStatus;return t[167]=i,t}function Mo(e){const t=e.slice(),n=t[144].format;t[147]=n;const i="Manga"===t[147]||"One Shot"===t[147];t[148]=i;const o="Novel"===t[147];t[149]=o;const l=function(e,t){const n={};let i,o;try{for(let t of["english","romaji","native"]){let l,r=e?.[t]?.trim?.();"string"!=typeof r||""===r||n[l=r.toLowerCase()]||(n[l]=!0,i?(o=!0,i+=" | "+r):i=r)}}catch{}if("string"!=typeof i||""===i)return;o&&(i=`(${i})`);return`https://www.youtube.com/results?search_query=${encodeURIComponent(i+" "+("Manga"===t||"One Shot"===t||"Novel"===t?t:"Anime"))}`}(t[144].title,t[144].format);return t[150]=l,t}function Co(e){const t=e.slice(),n=t[19][t[16]]?.mediaList;return t[143]=n,t}function $o(e){let t,n,i=[],o=new Map,l=e[143]||[];const r=e=>(null!=e[144]?.id?e[144].id+" "+e[146]:{})??{};for(let t=0;t<l.length;t+=1){let n=yo(e,l,t),a=r(n);o.set(a,i[t]=zl(a,n))}let a=e[143]?.length&&!e[26]?.[e[16]]&&Tl(e);return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A(),a&&a.c(),n=S()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);M(e,t,o),a&&a.m(e,o),M(e,n,o)},p(e,s){1946156872&s[0]|376855&s[1]&&(l=e[143]||[],i=Ee(i,s,r,1,e,l,o,t.parentNode,xe,zl,t,yo)),e[143]?.length&&!e[26]?.[e[16]]?a?a.p(e,s):(a=Tl(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&C(t),a&&a.d(e),e&&C(n)}}}function zo(t){let n;return{c(){n=z("div"),P(n,"class","popup-header dummy svelte-1i5jzz"),P(n,"aria-hidden","true")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function To(e){let t,n,i,l,r,a,s,c,u,d,m,h,g,y,w,v,b,k,E,$,I,B,D,R,j,H,V,O,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,ie,oe,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ye,we,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Le,Ae,Se,Ne,Ie,Pe,Fe,Be,Ue,De,Re,je,He,Ve,Oe,qe,_e,Ye,We,Je,Ke,Ge,Xe,Ze,Qe=e[145],et=e[146],tt=(e[144]?.shownTitle||"N/A")+"",nt=(e[144].userStatus||"N/A")+"",it=e[144].trailerID&&Lo(),ot=(e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&Ao(e);const lt=()=>e[54](n,Qe,et),rt=()=>e[54](null,Qe,et);function at(){return e[55](e[144],e[150])}function st(...t){return e[56](e[144],e[150],...t)}function ct(e,t){return e[24]>=290?Io:e[24]>=260?No:void 0}let ut=ct(e),dt=ut&&ut(e),pt=(e[18]||e[20][""]||e[20][e[16]]||e[15])&&Po(e);function mt(e,t){return e[144].trailerID&&e[6][e[144].trailerID]?Bo:Fo}let ft=mt(e),ht=ft(e),gt=null!=e[144].formattedAverageScore&&e[144].formattedAverageScore&&Ro(e),yt=null!=e[144].formattedPopularity&&e[144].formattedPopularity&&jo(e),wt=e[144]?.recommendedRatingColor&&Ho(e);function vt(e,t){return e[144]?.nextAiringEpisode?.airingAt?Oo:Vo}function bt(e,t){return t===Oo?function(e){const t=e.slice(),n=t[33](t[144],t[148],t[149]);t[176]=n;const i=(t[148]||t[149]?t[144]?.volumes>0?`  ${t[144]?.volumes} Vol${t[144]?.volumes>1?"s":""}`:t[144]?.volumeProgress>0?`  Seen ${t[144]?.volumeProgress} Vol${t[144]?.volumeProgress>1?"s":""}`:"":t[144]?.duration>0?`  ${po(60*t[144].duration*1e3,2)}`:"")||"";return t[177]=i,t}(e):function(e){const t=e.slice(),n=t[33](t[144],t[148],t[149]);t[176]=n;const i=(t[148]||t[149]?t[144]?.volumes>0?`  ${t[144]?.volumes} Vol${t[144]?.volumes>1?"s":""}`:t[144]?.volumeProgress>0?`  Seen ${t[144]?.volumeProgress} Vol${t[144]?.volumeProgress>1?"s":""}`:"":t[144]?.duration>0?`  ${po(60*t[144].duration*1e3,2)}`:"")||"";return t[177]=i,t}(e)}let xt=vt(e),kt=xt(bt(e,xt));function Et(e,t){return e[144]?.season||e[144]?.year?Jo:Wo}let Mt=Et(e),Ct=Mt(e),$t=function(e){let t,n=("Current"===e[167]||"Planning"===e[167]||"Paused"===e[167]||"Repeating"===e[167])&&Ko(ko(e));return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){"Current"===e[167]||"Planning"===e[167]||"Paused"===e[167]||"Repeating"===e[167]?n?n.p(ko(e),i):(n=Ko(ko(e)),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}(Eo(e)),zt=null!=e[144].userScore&&sl(e);function Tt(){return e[64](e[144])}function Lt(...t){return e[65](e[144],...t)}function At(e,t){return e[148]||e[149]||!e[144]?.nextAiringEpisode||"Finished"===e[144]?.status?cl:ul}function St(e,t){return t===ul?function(e){const t=e.slice(),n=t[144].nextAiringEpisode;t[161]=n;const i=t[161]?.airingAt;t[162]=i;const o=t[161]?.episode;t[163]=o;const l=t[144]?.episodes;t[164]=l;const r=t[163]>=t[164]&&t[163]>0&&t[162]>0&&t[164]>0;return t[165]=r,t}(e):e}let Nt=At(e),It=Nt(St(e,Nt)),Pt=e[144]?.shownStudios?.length&&gl(e),Ft=e[144]?.shownGenres?.length&&wl(e),Bt=e[144]?.shownTags?.length&&bl(e),Ut=(e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&kl(e),Dt=e[144]?.description&&Ml(wo(e));function Rt(e,t){return e[22]?$l:Cl}let jt=Rt(e),Ht=jt(e);function Vt(){return e[74](e[144])}function Ot(...t){return e[75](e[144],...t)}function qt(){return e[76](e[144])}function _t(...t){return e[77](e[144],...t)}return{c(){t=z("div"),n=z("div"),i=z("div"),i.innerHTML='<svg viewBox="0 0 320 512" class="svelte-1i5jzz"><path d="M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"></path></svg>',l=A(),it&&it.c(),r=A(),a=z("div"),ot&&ot.c(),u=A(),d=z("div"),m=z("div"),h=z("div"),g=z("label"),y=z("label"),w=L("Auto Play"),b=A(),k=z("input"),$=A(),I=z("span"),I.innerHTML='<div class="round-icon svelte-1i5jzz"></div>',D=A(),R=z("h3"),dt&&dt.c(),j=A(),pt&&pt.c(),H=A(),ht.c(),V=A(),O=z("div"),q=z("div"),_=z("a"),Y=L(tt),te=A(),ne=z("div"),ie=T("svg"),oe=T("path"),le=A(),re=z("h4"),gt&&gt.c(),ae=A(),yt&&yt.c(),se=A(),wt&&wt.c(),ce=A(),ue=z("div"),kt.c(),de=A(),Ct.c(),pe=A(),me=z("div"),fe=z("h4"),he=z("span"),ge=L(nt),we=A(),$t&&$t.c(),ve=A(),zt&&zt.c(),be=A(),It.c(),xe=A(),ke=z("div"),Pt&&Pt.c(),Ee=A(),Ft&&Ft.c(),Me=A(),Bt&&Bt.c(),Ce=A(),$e=z("div"),Ut&&Ut.c(),ze=A(),Dt&&Dt.c(),Te=A(),Le=z("div"),Ae=z("button"),Se=T("svg"),Ne=T("path"),Ie=A(),Ht.c(),Fe=A(),Be=z("a"),Ue=T("svg"),De=T("path"),Re=L(" YouTube"),qe=A(),_e=z("button"),Ye=T("svg"),We=T("path"),Je=T("path"),Ke=L(" Anilist"),P(i,"class","popup-header-loading svelte-1i5jzz"),P(i,"aria-hidden","true"),P(a,"class","popup-img loaded svelte-1i5jzz"),P(n,"class",s=p("popup-header "+(e[144].trailerID?"loader":""))+" svelte-1i5jzz"),P(n,"tabindex",c=!e[21]&&e[13]?"0":"-1"),P(y,"class","disable-interaction svelte-1i5jzz"),P(y,"for",v="auto-play-"+e[144]?.id),P(k,"id",E="auto-play-"+e[144]?.id),P(k,"type","checkbox"),P(k,"class","auto-play-toggle svelte-1i5jzz"),P(I,"class","slider round svelte-1i5jzz"),P(I,"aria-hidden","true"),P(g,"class","switch svelte-1i5jzz"),P(g,"tabindex",B=!e[21]&&e[13]?"0":"-1"),P(R,"class","auto-play-label svelte-1i5jzz"),P(h,"class","auto-play-container svelte-1i5jzz"),P(m,"class","popup-controls svelte-1i5jzz"),P(_,"tabindex",W=!e[21]&&e[13]?"":"-1"),P(_,"rel",J=e[144].mediaUrl?"noopener noreferrer":""),P(_,"target",K=e[144].mediaUrl?"_blank":""),P(_,"href",G=e[144].mediaUrl||"javascript:void(0)"),P(_,"class",X=p(e[144]?.contentCautionColor+"-color media-title copy")+" svelte-1i5jzz"),P(_,"title",Z=e[144]?.shownTitle||""),P(_,"data-copy",Q=e[144]?.shownTitle||""),P(_,"data-secondcopy",ee=e[144]?.copiedTitle||""),P(_,"aria-label","Open in AniList"),U(_,"overflow",e[14]?"hidden":""),P(oe,"d","M288 0c9 0 17 5 21 14l69 141 153 22c9 2 17 8 20 17s0 18-6 24L434 328l26 156c1 9-2 18-10 24s-17 6-25 1l-137-73-137 73c-8 4-18 4-25-2s-11-14-10-23l26-156L31 218a24 24 0 0 1 14-41l153-22 68-141c4-9 13-14 22-14zm0 79-53 108c-3 7-10 12-18 13L99 219l86 85c5 6 8 13 7 21l-21 120 106-57c7-3 15-3 22 1l105 56-20-120c-1-8 1-15 7-21l86-85-118-17c-8-2-15-7-18-14L288 79z"),P(ie,"viewBox","0 0 576 512"),P(ie,"class","svelte-1i5jzz"),P(re,"class","svelte-1i5jzz"),P(ne,"class","info-rating-wrapper svelte-1i5jzz"),P(q,"class","media-title-container svelte-1i5jzz"),U(q,"overflow",e[14]?"hidden":""),P(ue,"class","info-format svelte-1i5jzz"),U(ue,"overflow",e[14]?"hidden":""),P(he,"class",ye=p(e[144]?.userStatusColor?e[144].userStatusColor+"-color":"")+" svelte-1i5jzz"),P(fe,"class","user-info svelte-1i5jzz"),P(fe,"aria-label","Open in AniList"),P(me,"class","info-status svelte-1i5jzz"),U(me,"overflow",e[14]?"hidden":""),P(ke,"class","info-contents svelte-1i5jzz"),P($e,"class","info-profile svelte-1i5jzz"),P(O,"class","popup-info svelte-1i5jzz"),P(d,"class","popup-body svelte-1i5jzz"),P(Ne,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-72-280h144a24 24 0 1 1 0 48H184a24 24 0 1 1 0-48z"),P(Se,"class","hide-show svelte-1i5jzz"),P(Se,"viewBox","0 0 512 512"),P(Ae,"tabindex",Pe=!e[21]&&e[13]?"":"-1"),P(Ae,"class","hide-show-btn svelte-1i5jzz"),P(Ae,"aria-label","Hide or Show Media"),U(Ae,"overflow",e[14]?"hidden":""),P(De,"d","M550 124c-7-24-25-42-49-49-42-11-213-11-213-11S117 64 75 75c-24 7-42 25-49 49-11 43-11 132-11 132s0 90 11 133c7 23 25 41 49 48 42 11 213 11 213 11s171 0 213-11c24-7 42-25 49-48 11-43 11-133 11-133s0-89-11-132zM232 338V175l143 81-143 82z"),P(Ue,"viewBox","0 0 576 512"),P(Ue,"class","svelte-1i5jzz"),P(Be,"tabindex",je=!e[21]&&e[13]?"":"-1"),P(Be,"class","more-videos svelte-1i5jzz"),P(Be,"rel",He=e[150]?"noopener noreferrer":""),P(Be,"target",Ve=e[150]?"_blank":""),P(Be,"href",Oe=e[150]||"javascript:void(0)"),P(Be,"aria-label","Open Related YouTube Videos"),U(Be,"overflow",e[14]?"hidden":""),P(We,"fill","#3a5a7e"),P(We,"d","M111 111V41c0-4-2-6-6-6H91c-4 0-6 2-6 6v5l32 91h31c4 0 6-2 6-6v-14c0-4-2-6-6-6h-37z"),P(Je,"d","M54 35 18 137h28l6-17h31l6 17h28L81 35H54zm5 62 9-29 9 29H59z"),P(Ye,"viewBox","0 0 172 172"),P(Ye,"class","svelte-1i5jzz"),P(_e,"tabindex",Ge=!e[21]&&e[13]?"":"-1"),P(_e,"class","open-anilist svelte-1i5jzz"),P(_e,"aria-label","Open in AniList"),U(_e,"overflow",e[14]?"hidden":""),P(Le,"class","popup-footer svelte-1i5jzz"),P(t,"class","popup-main svelte-1i5jzz")},m(o,s){M(o,t,s),x(t,n),x(n,i),x(n,l),it&&it.m(n,null),x(n,r),x(n,a),ot&&ot.m(a,null),lt(),x(t,u),x(t,d),x(d,m),x(m,h),x(h,g),x(g,y),x(y,w),x(g,b),x(g,k),k.checked=e[12],x(g,$),x(g,I),x(h,D),x(h,R),dt&&dt.m(R,null),x(m,j),pt&&pt.m(m,null),x(m,H),ht.m(m,null),x(d,V),x(d,O),x(O,q),x(q,_),x(_,Y),x(q,te),x(q,ne),x(ne,ie),x(ie,oe),x(ne,le),x(ne,re),gt&&gt.m(re,null),x(re,ae),yt&&yt.m(re,null),x(re,se),wt&&wt.m(re,null),x(O,ce),x(O,ue),kt.m(ue,null),x(ue,de),Ct.m(ue,null),x(O,pe),x(O,me),x(me,fe),x(fe,he),x(he,ge),x(fe,we),$t&&$t.m(fe,null),x(fe,ve),zt&&zt.m(fe,null),x(me,be),It.m(me,null),x(O,xe),x(O,ke),Pt&&Pt.m(ke,null),x(ke,Ee),Ft&&Ft.m(ke,null),x(ke,Me),Bt&&Bt.m(ke,null),x(O,Ce),x(O,$e),Ut&&Ut.m($e,null),x($e,ze),Dt&&Dt.m($e,null),x(t,Te),x(t,Le),x(Le,Ae),x(Ae,Se),x(Se,Ne),x(Ae,Ie),Ht.m(Ae,null),x(Le,Fe),x(Le,Be),x(Be,Ue),x(Ue,De),x(Be,Re),x(Le,qe),x(Le,_e),x(_e,Ye),x(Ye,We),x(Ye,Je),x(_e,Ke),Xe||(Ze=[N(n,"click",at),N(n,"keyup",st),N(k,"change",e[57]),N(g,"keyup",e[58]),N(R,"click",e[29]),N(R,"keyup",e[59]),N(_,"scroll",e[35]),N(q,"scroll",e[35]),N(ue,"scroll",e[35]),N(fe,"click",Tt),N(fe,"keyup",Lt),N(me,"scroll",e[35]),N(Ae,"click",Vt),N(Ae,"keyup",Ot),N(_e,"click",qt),N(_e,"keyup",_t),f(e[48].call(null,t))],Xe=!0)},p(t,i){(e=t)[144].trailerID?it||(it=Lo(),it.c(),it.m(n,r)):it&&(it.d(1),it=null),e[144].bannerImageUrl||e[144].trailerThumbnailUrl?ot?ot.p(e,i):(ot=Ao(e),ot.c(),ot.m(a,null)):ot&&(ot.d(1),ot=null),589824&i[0]&&s!==(s=p("popup-header "+(e[144].trailerID?"loader":""))+" svelte-1i5jzz")&&P(n,"class",s),2105344&i[0]&&c!==(c=!e[21]&&e[13]?"0":"-1")&&P(n,"tabindex",c),Qe===e[145]&&et===e[146]||(rt(),Qe=e[145],et=e[146],lt()),589824&i[0]&&v!==(v="auto-play-"+e[144]?.id)&&P(y,"for",v),589824&i[0]&&E!==(E="auto-play-"+e[144]?.id)&&P(k,"id",E),4096&i[0]&&(k.checked=e[12]),2105344&i[0]&&B!==(B=!e[21]&&e[13]?"0":"-1")&&P(g,"tabindex",B),ut!==(ut=ct(e))&&(dt&&dt.d(1),dt=ut&&ut(e),dt&&(dt.c(),dt.m(R,null))),e[18]||e[20][""]||e[20][e[16]]||e[15]?pt?pt.p(e,i):(pt=Po(e),pt.c(),pt.m(m,H)):pt&&(pt.d(1),pt=null),ft===(ft=mt(e))&&ht?ht.p(e,i):(ht.d(1),ht=ft(e),ht&&(ht.c(),ht.m(m,null))),589824&i[0]&&tt!==(tt=(e[144]?.shownTitle||"N/A")+"")&&F(Y,tt),2105344&i[0]&&W!==(W=!e[21]&&e[13]?"":"-1")&&P(_,"tabindex",W),589824&i[0]&&J!==(J=e[144].mediaUrl?"noopener noreferrer":"")&&P(_,"rel",J),589824&i[0]&&K!==(K=e[144].mediaUrl?"_blank":"")&&P(_,"target",K),589824&i[0]&&G!==(G=e[144].mediaUrl||"javascript:void(0)")&&P(_,"href",G),589824&i[0]&&X!==(X=p(e[144]?.contentCautionColor+"-color media-title copy")+" svelte-1i5jzz")&&P(_,"class",X),589824&i[0]&&Z!==(Z=e[144]?.shownTitle||"")&&P(_,"title",Z),589824&i[0]&&Q!==(Q=e[144]?.shownTitle||"")&&P(_,"data-copy",Q),589824&i[0]&&ee!==(ee=e[144]?.copiedTitle||"")&&P(_,"data-secondcopy",ee),16384&i[0]&&U(_,"overflow",e[14]?"hidden":""),null!=e[144].formattedAverageScore&&e[144].formattedAverageScore?gt?gt.p(e,i):(gt=Ro(e),gt.c(),gt.m(re,ae)):gt&&(gt.d(1),gt=null),null!=e[144].formattedPopularity&&e[144].formattedPopularity?yt?yt.p(e,i):(yt=jo(e),yt.c(),yt.m(re,se)):yt&&(yt.d(1),yt=null),e[144]?.recommendedRatingColor?wt?wt.p(e,i):(wt=Ho(e),wt.c(),wt.m(re,null)):wt&&(wt.d(1),wt=null),16384&i[0]&&U(q,"overflow",e[14]?"hidden":""),xt===(xt=vt(e))&&kt?kt.p(bt(e,xt),i):(kt.d(1),kt=xt(bt(e,xt)),kt&&(kt.c(),kt.m(ue,de))),Mt===(Mt=Et(e))&&Ct?Ct.p(e,i):(Ct.d(1),Ct=Mt(e),Ct&&(Ct.c(),Ct.m(ue,null))),16384&i[0]&&U(ue,"overflow",e[14]?"hidden":""),589824&i[0]&&nt!==(nt=(e[144].userStatus||"N/A")+"")&&F(ge,nt),589824&i[0]&&ye!==(ye=p(e[144]?.userStatusColor?e[144].userStatusColor+"-color":"")+" svelte-1i5jzz")&&P(he,"class",ye),$t.p(Eo(e),i),null!=e[144].userScore?zt?zt.p(e,i):(zt=sl(e),zt.c(),zt.m(fe,null)):zt&&(zt.d(1),zt=null),Nt===(Nt=At(e))&&It?It.p(St(e,Nt),i):(It.d(1),It=Nt(St(e,Nt)),It&&(It.c(),It.m(me,null))),16384&i[0]&&U(me,"overflow",e[14]?"hidden":""),e[144]?.shownStudios?.length?Pt?Pt.p(e,i):(Pt=gl(e),Pt.c(),Pt.m(ke,Ee)):Pt&&(Pt.d(1),Pt=null),e[144]?.shownGenres?.length?Ft?Ft.p(e,i):(Ft=wl(e),Ft.c(),Ft.m(ke,Me)):Ft&&(Ft.d(1),Ft=null),e[144]?.shownTags?.length?Bt?Bt.p(e,i):(Bt=bl(e),Bt.c(),Bt.m(ke,null)):Bt&&(Bt.d(1),Bt=null),e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl?Ut?Ut.p(e,i):(Ut=kl(e),Ut.c(),Ut.m($e,ze)):Ut&&(Ut.d(1),Ut=null),e[144]?.description?Dt?Dt.p(wo(e),i):(Dt=Ml(wo(e)),Dt.c(),Dt.m($e,null)):Dt&&(Dt.d(1),Dt=null),jt===(jt=Rt(e))&&Ht?Ht.p(e,i):(Ht.d(1),Ht=jt(e),Ht&&(Ht.c(),Ht.m(Ae,null))),2105344&i[0]&&Pe!==(Pe=!e[21]&&e[13]?"":"-1")&&P(Ae,"tabindex",Pe),16384&i[0]&&U(Ae,"overflow",e[14]?"hidden":""),2105344&i[0]&&je!==(je=!e[21]&&e[13]?"":"-1")&&P(Be,"tabindex",je),589824&i[0]&&He!==(He=e[150]?"noopener noreferrer":"")&&P(Be,"rel",He),589824&i[0]&&Ve!==(Ve=e[150]?"_blank":"")&&P(Be,"target",Ve),589824&i[0]&&Oe!==(Oe=e[150]||"javascript:void(0)")&&P(Be,"href",Oe),16384&i[0]&&U(Be,"overflow",e[14]?"hidden":""),2105344&i[0]&&Ge!==(Ge=!e[21]&&e[13]?"":"-1")&&P(_e,"tabindex",Ge),16384&i[0]&&U(_e,"overflow",e[14]?"hidden":"")},d(e){e&&C(t),it&&it.d(),ot&&ot.d(),rt(),dt&&dt.d(),pt&&pt.d(),ht.d(),gt&&gt.d(),yt&&yt.d(),wt&&wt.d(),kt.d(),Ct.d(),$t&&$t.d(),zt&&zt.d(),It.d(),Pt&&Pt.d(),Ft&&Ft.d(),Bt&&Bt.d(),Ut&&Ut.d(),Dt&&Dt.d(),Ht.d(),Xe=!1,o(Ze)}}}function Lo(e){let t;return{c(){t=z("div"),P(t,"class","trailer display-none svelte-1i5jzz")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function Ao(e){let t,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl,i=So(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){589824&o[0]&&r(n,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)?(i.d(1),i=So(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function So(e){let t,n,i,l,r;return{c(){t=z("img"),s(t.src,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)||P(t,"src",n),P(t,"loading","lazy"),P(t,"width","640px"),P(t,"height","360px"),P(t,"alt",i=(e[144]?.shownTitle||"")+(e[144].bannerImageUrl?" Banner":" Thumbnail")),P(t,"class","banner-img svelte-1i5jzz")},m(n,i){M(n,t,i),l||(r=[N(t,"load",e[52]),N(t,"error",e[53])],l=!0)},p(e,o){589824&o[0]&&!s(t.src,n=e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&P(t,"src",n),589824&o[0]&&i!==(i=(e[144]?.shownTitle||"")+(e[144].bannerImageUrl?" Banner":" Thumbnail"))&&P(t,"alt",i)},d(e){e&&C(t),l=!1,o(r)}}}function No(e){let t;return{c(){t=L("Auto")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function Io(e){let t;return{c(){t=L("Auto Play")},m(e,n){M(e,t,n)},d(e){e&&C(t)}}}function Po(e){let t,n,i,l,r,a,s,c,u,d=e[24]>=320?"Reload List":e[24]>=205?"Reload":"";return{c(){t=z("div"),n=T("svg"),i=T("path"),l=A(),r=z("h3"),a=L(d),P(i,"d","M105 203a160 160 0 0 1 264-60l17 17h-50a32 32 0 1 0 0 64h128c18 0 32-14 32-32V64a32 32 0 1 0-64 0v51l-18-17a224 224 0 0 0-369 83 32 32 0 0 0 60 22zm-66 86a32 32 0 0 0-23 31v128a32 32 0 1 0 64 0v-51l18 17a224 224 0 0 0 369-83 32 32 0 0 0-60-22 160 160 0 0 1-264 60l-17-17h50a32 32 0 1 0 0-64H48a39 39 0 0 0-9 1z"),P(n,"viewBox","0 0 512 512"),P(n,"class","small-icon svelte-1i5jzz"),P(r,"class","small-icon-label svelte-1i5jzz"),P(t,"class","list-update-container svelte-1i5jzz"),P(t,"tabindex",s=!e[21]&&e[13]?"0":"-1"),P(t,"role","button"),P(t,"aria-label","Reload List")},m(o,s){M(o,t,s),x(t,n),x(n,i),x(t,l),x(t,r),x(r,a),c||(u=[N(t,"click",e[60]),N(t,"keyup",e[61])],c=!0)},p(e,n){16777216&n[0]&&d!==(d=e[24]>=320?"Reload List":e[24]>=205?"Reload":"")&&F(a,d),2105344&n[0]&&s!==(s=!e[21]&&e[13]?"0":"-1")&&P(t,"tabindex",s)},d(e){e&&C(t),c=!1,o(u)}}}function Fo(e){let t,n,i=e[23]&&!1!==e[17]&&e[144].trailerID&&Uo(e),o=(e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&Do(e);return{c(){i&&i.c(),t=A(),o&&o.c(),n=S()},m(e,l){i&&i.m(e,l),M(e,t,l),o&&o.m(e,l),M(e,n,l)},p(e,l){e[23]&&!1!==e[17]&&e[144].trailerID?i?i.p(e,l):(i=Uo(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),e[144].bannerImageUrl||e[144].trailerThumbnailUrl?o?o.p(e,l):(o=Do(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(e){i&&i.d(e),e&&C(t),o&&o.d(e),e&&C(n)}}}function Bo(e){let t,n,i,o,l,r,a;return{c(){t=z("a"),n=T("svg"),i=T("path"),o=A(),l=z("h3"),l.textContent="Trailer",P(i,"d","M550 124c-7-24-25-42-49-49-42-11-213-11-213-11S117 64 75 75c-24 7-42 25-49 49-11 43-11 132-11 132s0 90 11 133c7 23 25 41 49 48 42 11 213 11 213 11s171 0 213-11c24-7 42-25 49-48 11-43 11-133 11-133s0-89-11-132zM232 338V175l143 81-143 82z"),P(n,"viewBox","0 0 576 512"),P(n,"class","yt-small-icon svelte-1i5jzz"),P(l,"class","small-icon-label svelte-1i5jzz"),P(t,"class","icon-button svelte-1i5jzz"),P(t,"tabindex",r=!e[21]&&e[13]?"0":"-1"),P(t,"rel","noopener noreferrer"),P(t,"target","_blank"),P(t,"href",a=`https://www.youtube.com/watch?v=${e[144].trailerID}`),P(t,"role","button"),P(t,"aria-label","Open Trailer")},m(e,r){M(e,t,r),x(t,n),x(n,i),x(t,o),x(t,l)},p(e,n){2105344&n[0]&&r!==(r=!e[21]&&e[13]?"0":"-1")&&P(t,"tabindex",r),589824&n[0]&&a!==(a=`https://www.youtube.com/watch?v=${e[144].trailerID}`)&&P(t,"href",a)},d(e){e&&C(t)}}}function Uo(e){let t,n,i;return{c(){t=z("a"),n=L("Trailer"),P(t,"class","trailer-link svelte-1i5jzz"),P(t,"href",i=`https://www.youtube.com/watch?v=${e[144].trailerID}`)},m(e,i){M(e,t,i),x(t,n)},p(e,n){589824&n[0]&&i!==(i=`https://www.youtube.com/watch?v=${e[144].trailerID}`)&&P(t,"href",i)},d(e){e&&C(t)}}}function Do(e){let t,n,i,l,r,a,s,c,u,d=e[144].bannerImageUrl?"Banner":"Thumbnail";function p(){return e[62](e[144])}function m(...t){return e[63](e[144],...t)}return{c(){t=z("div"),n=T("svg"),i=T("path"),l=A(),r=z("h3"),a=L(d),P(i,"d","M0 96c0-35 29-64 64-64h384c35 0 64 29 64 64v320c0 35-29 64-64 64H64c-35 0-64-29-64-64V96zm324 107a24 24 0 0 0-40 0l-87 127-26-33a24 24 0 0 0-37 0l-65 80a24 24 0 0 0 19 39h336c9 0 17-5 21-13s4-17-1-25L324 204zm-212-11a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"),P(n,"viewBox","0 0 512 512"),P(n,"class","small-icon svelte-1i5jzz"),P(r,"class","small-icon-label svelte-1i5jzz"),P(t,"class","icon-button svelte-1i5jzz"),P(t,"tabindex",s=!e[21]&&e[13]?"0":"-1"),P(t,"role","button"),P(t,"aria-label","Open Banner or Thumbnail")},m(e,o){M(e,t,o),x(t,n),x(n,i),x(t,l),x(t,r),x(r,a),c||(u=[N(t,"click",p),N(t,"keyup",m)],c=!0)},p(n,i){e=n,589824&i[0]&&d!==(d=e[144].bannerImageUrl?"Banner":"Thumbnail")&&F(a,d),2105344&i[0]&&s!==(s=!e[21]&&e[13]?"0":"-1")&&P(t,"tabindex",s)},d(e){e&&C(t),c=!1,o(u)}}}function Ro(e){let t,n,i,o=(parseFloat(e[144].formattedAverageScore)>0?e[144].formattedAverageScore:"?")+"";return{c(){t=z("b"),n=L(o),i=L("/10"),P(t,"class","svelte-1i5jzz")},m(e,o){M(e,t,o),x(t,n),M(e,i,o)},p(e,t){589824&t[0]&&o!==(o=(parseFloat(e[144].formattedAverageScore)>0?e[144].formattedAverageScore:"?")+"")&&F(n,o)},d(e){e&&C(t),e&&C(i)}}}function jo(e){let t,n="  "+e[144].formattedPopularity;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){589824&i[0]&&n!==(n="  "+e[144].formattedPopularity)&&F(t,n)},d(e){e&&C(t)}}}function Ho(e){let t,n,i,o,l;return{c(){t=L("  "),n=A(),i=T("svg"),o=T("path"),P(o,"d","M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"),P(i,"class",l=p(`general-rating-icon ${e[144]?.recommendedRatingColor}`)+" svelte-1i5jzz"),P(i,"viewBox","0 0 320 512")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=p(`general-rating-icon ${e[144]?.recommendedRatingColor}`)+" svelte-1i5jzz")&&P(i,"class",l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function Vo(e){let t,n,i,o,l,r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""),a=(e[177]||"")+"",s=e[176]&&qo(e);return{c(){t=z("h4"),n=L(r),i=A(),s&&s.c(),o=A(),l=L(a),P(t,"class","svelte-1i5jzz")},m(e,r){M(e,t,r),x(t,n),x(t,i),s&&s.m(t,null),x(t,o),x(t,l)},p(e,i){589824&i[0]&&r!==(r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""))&&F(n,r),e[176]?s?s.p(e,i):(s=qo(e),s.c(),s.m(t,o)):s&&(s.d(1),s=null),589824&i[0]&&a!==(a=(e[177]||"")+"")&&F(l,a)},d(e){e&&C(t),s&&s.d()}}}function Oo(e){let t,n,i,o,l,r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""),a=(e[177]||"")+"",s=e[176]&&_o(e);return{c(){t=z("h4"),n=L(r),i=A(),s&&s.c(),o=A(),l=L(a),P(t,"class","svelte-1i5jzz")},m(e,r){M(e,t,r),x(t,n),x(t,i),s&&s.m(t,null),x(t,o),x(t,l)},p(e,i){589824&i[0]&&r!==(r=(e[144]?.format||"N/A")+(e[144]?.countryOfOrigin?` (${e[144].countryOfOrigin})`:""))&&F(n,r),e[176]?s?s.p(e,i):(s=_o(e),s.c(),s.m(t,o)):s&&(s.d(1),s=null),589824&i[0]&&a!==(a=(e[177]||"")+"")&&F(l,a)},d(e){e&&C(t),s&&s.d()}}}function qo(e){let t,n,i=e[176]+"";return{c(){t=new R(!1),n=S(),t.a=n},m(e,o){t.m(i,e,o),M(e,n,o)},p(e,n){589824&n[0]&&i!==(i=e[176]+"")&&t.p(i)},d(e){e&&C(n),e&&t.d()}}}function _o(e){let t,n=e[25]||1,i=Yo(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){33554432&o[0]&&r(n,n=e[25]||1)?(i.d(1),i=Yo(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function Yo(e){let t,n,i=e[176]+"";return{c(){t=new R(!1),n=S(),t.a=n},m(e,o){t.m(i,e,o),M(e,n,o)},p(e,n){589824&n[0]&&i!==(i=e[176]+"")&&t.p(i)},d(e){e&&C(n),e&&t.d()}}}function Wo(t){let n;return{c(){n=z("h4"),n.textContent="N/A",U(n,"text-align","right"),P(n,"class","svelte-1i5jzz")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Jo(e){let t,n,i=(`${e[144]?.season||""}${e[144]?.season&&e[144]?.year?" "+e[144]?.year:e[144]?.year||""}`||"N/A")+"";return{c(){t=z("h4"),n=L(i),U(t,"text-align","right"),P(t,"class","svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n)},p(e,t){589824&t[0]&&i!==(i=(`${e[144]?.season||""}${e[144]?.season&&e[144]?.year?" "+e[144]?.year:e[144]?.year||""}`||"N/A")+"")&&F(n,i)},d(e){e&&C(t)}}}function Ko(e){let t;function n(e,t){return e[148]||e[149]||!(e[162]>0&&e[163]>0||e[144].episodes>0)?e[166]&&(e[144].chapters>0||e[144].volumes>0)?Go:void 0:Xo}function i(e,t){return t===Xo?function(e){const t=e.slice(),n=t[162]<=(new Date).getTime();t[168]=n;const i=t[163]>0&&!t[166]?t[168]?t[163]:t[163]-1:t[166]?t[144].episodes:null;t[169]=i;const o=t[144].episodeProgress>0?t[144].episodeProgress:0;t[170]=o;const l=parseInt(t[169])-parseInt(t[170]);return t[171]=l,t}(e):e}let o=n(e),l=o&&o(i(e,o));return{c(){l&&l.c(),t=S()},m(e,n){l&&l.m(e,n),M(e,t,n)},p(e,r){o===(o=n(e))&&l?l.p(i(e,o),r):(l&&l.d(1),l=o&&o(i(e,o)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l&&l.d(e),e&&C(t)}}}function Go(e){let t;function n(e,t){return e[149]?el:e[144].chapters>0?Qo:Zo}function i(e,t){return t===Qo?function(e){const t=e.slice(),n=t[144].episodeProgress>0?t[144].episodeProgress:0;t[174]=n;const i=parseInt(t[144].chapters)-parseInt(t[174]);return t[175]=i,t}(e):t===Zo?function(e){const t=e.slice(),n=t[144].volumeProgress>0?t[144].volumeProgress:0;t[172]=n;const i=parseInt(t[144].volumes)-parseInt(t[172]);return t[173]=i,t}(e):e}let o=n(e),l=o(i(e,o));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){o===(o=n(e))&&l?l.p(i(e,o),r):(l.d(1),l=o(i(e,o)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function Xo(e){let t,n=e[171]>=1&&al(e);return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){e[171]>=1?n?n.p(e,i):(n=al(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Zo(e){let t,n=e[173]>=1&&tl(e);return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){e[173]>=1?n?n.p(e,i):(n=tl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Qo(e){let t,n=e[175]>=1&&nl(e);return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){e[175]>=1?n?n.p(e,i):(n=nl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function el(e){let t;function n(e,t){return e[144].volumes>0?ol:il}function i(e,t){return t===ol?function(e){const t=e.slice(),n=t[144].volumeProgress>0?t[144].volumeProgress:0;t[172]=n;const i=parseInt(t[144].volumes)-parseInt(t[172]);return t[173]=i,t}(e):function(e){const t=e.slice(),n=t[144].episodeProgress>0?t[144].episodeProgress:0;t[174]=n;const i=parseInt(t[144].chapters)-parseInt(t[174]);return t[175]=i,t}(e)}let o=n(e),l=o(i(e,o));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){o===(o=n(e))&&l?l.p(i(e,o),r):(l.d(1),l=o(i(e,o)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function tl(e){let t,n,i,o,l=`${e[173]} Vol${e[173]>1?"s":""} Behind`;return{c(){t=L("  "),n=A(),i=z("span"),o=L(l),U(i,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=`${e[173]} Vol${e[173]>1?"s":""} Behind`)&&F(o,l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function nl(e){let t,n,i,o,l=`${e[175]} Ch${e[175]>1?"s":""} Behind`;return{c(){t=L("  "),n=A(),i=z("span"),o=L(l),U(i,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=`${e[175]} Ch${e[175]>1?"s":""} Behind`)&&F(o,l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function il(e){let t,n=e[175]>=1&&ll(e);return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){e[175]>=1?n?n.p(e,i):(n=ll(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function ol(e){let t,n=e[173]>=1&&rl(e);return{c(){n&&n.c(),t=S()},m(e,i){n&&n.m(e,i),M(e,t,i)},p(e,i){e[173]>=1?n?n.p(e,i):(n=rl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function ll(e){let t,n,i,o,l=`${e[175]} Ch${e[175]>1?"s":""} Behind`;return{c(){t=L("  "),n=A(),i=z("span"),o=L(l),U(i,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=`${e[175]} Ch${e[175]>1?"s":""} Behind`)&&F(o,l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function rl(e){let t,n,i,o,l=`${e[173]} Vol${e[173]>1?"s":""} Behind`;return{c(){t=L("  "),n=A(),i=z("span"),o=L(l),U(i,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=`${e[173]} Vol${e[173]>1?"s":""} Behind`)&&F(o,l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function al(e){let t,n,i,o,l=`${e[171]} Ep${e[171]>1?"s":""} Behind`;return{c(){t=L("  "),n=A(),i=z("span"),o=L(l),U(i,"color","hsl(var(--ac-color))")},m(e,l){M(e,t,l),M(e,n,l),M(e,i,l),x(i,o)},p(e,t){589824&t[0]&&l!==(l=`${e[171]} Ep${e[171]>1?"s":""} Behind`)&&F(o,l)},d(e){e&&C(t),e&&C(n),e&&C(i)}}}function sl(e){let t,n,i,o,l,r,a=e[144].userScore+"";return{c(){t=L("  "),n=A(),i=T("svg"),o=T("path"),l=A(),r=L(a),P(o,"d","M288 0c9 0 17 5 21 14l69 141 153 22c9 2 17 8 20 17s0 18-6 24L434 328l26 156c1 9-2 18-10 24s-17 6-25 1l-137-73-137 73c-8 4-18 4-25-2s-11-14-10-23l26-156L31 218a24 24 0 0 1 14-41l153-22 68-141c4-9 13-14 22-14zm0 79-53 108c-3 7-10 12-18 13L99 219l86 85c5 6 8 13 7 21l-21 120 106-57c7-3 15-3 22 1l105 56-20-120c-1-8 1-15 7-21l86-85-118-17c-8-2-15-7-18-14L288 79z"),P(i,"viewBox","0 0 576 512"),P(i,"class","svelte-1i5jzz")},m(e,a){M(e,t,a),M(e,n,a),M(e,i,a),x(i,o),M(e,l,a),M(e,r,a)},p(e,t){589824&t[0]&&a!==(a=e[144].userScore+"")&&F(r,a)},d(e){e&&C(t),e&&C(n),e&&C(i),e&&C(l),e&&C(r)}}}function cl(e){let t,n,i=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(i),U(t,"text-align","right"),P(t,"class","year-season svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n)},p(e,t){589824&t[0]&&i!==(i=(e[144].status||"N/A")+"")&&F(n,i)},d(e){e&&C(t)}}}function ul(e){let t;function n(e,t){return e[165]?pl:dl}let i=n(e),o=i(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,l){i===(i=n(e))&&o?o.p(e,l):(o.d(1),o=i(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&C(t)}}}function dl(e){let t,n,i=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(i),U(t,"text-align","right"),P(t,"class","year-season svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n)},p(e,t){589824&t[0]&&i!==(i=(e[144].status||"N/A")+"")&&F(n,i)},d(e){e&&C(t)}}}function pl(e){let t,n=e[165]&&e[25]||1,i=hl(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){34144256&o[0]&&r(n,n=e[165]&&e[25]||1)?(i.d(1),i=hl(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function ml(e){let t,n,i=(e[144].status||"N/A")+"";return{c(){t=z("h4"),n=L(i),U(t,"text-align","right"),P(t,"class","year-season svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n)},p(e,t){589824&t[0]&&i!==(i=(e[144].status||"N/A")+"")&&F(n,i)},d(e){e&&C(t)}}}function fl(t){let n;return{c(){n=z("h4"),n.textContent="Finished",U(n,"text-align","right"),P(n,"class","year-season svelte-1i5jzz")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function hl(e){let t,n;function i(e,n){return 589824&n[0]&&(t=null),null==t&&(t=!!(1e3*e[162]<=(new Date).getTime())),t?fl:ml}let o=i(e,[-1,-1,-1,-1,-1,-1]),l=o(e);return{c(){l.c(),n=S()},m(e,t){l.m(e,t),M(e,n,t)},p(e,t){o===(o=i(e,t))&&l?l.p(e,t):(l.d(1),l=o(e),l&&(l.c(),l.m(n.parentNode,n)))},d(e){l.d(e),e&&C(n)}}}function gl(e){let t,n,i,l,r,a,s=[],c=new Map,u=e[144].shownStudios;const d=e=>e[158]?.studio||{};for(let t=0;t<u.length;t+=1){let n=xo(e,u,t),i=d(n);c.set(i,s[t]=yl(i,n))}return{c(){t=z("div"),n=z("div"),n.textContent="Studio",i=A(),l=z("div");for(let e=0;e<s.length;e+=1)s[e].c();P(n,"class","info-categ svelte-1i5jzz"),P(l,"class",p("studio-popup info")+" svelte-1i5jzz"),P(t,"class","svelte-1i5jzz")},m(o,c){M(o,t,c),x(t,n),x(t,i),x(t,l);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(l,null);r||(a=[N(l,"scroll",e[35]),N(l,"mouseenter",e[49])],r=!0)},p(e,t){2695168&t[0]&&(u=e[144].shownStudios,s=Ee(s,t,d,1,e,u,c,l,xe,yl,null,xo))},d(e){e&&C(t);for(let e=0;e<s.length;e+=1)s[e].d();r=!1,o(a)}}}function yl(e,t){let n,i,o,l,r,a,s,c,u=(t[158]?.studio?.studioName||"N/A")+"";return{key:e,first:null,c(){n=z("a"),i=L(u),o=A(),P(n,"tabindex",l=!t[21]&&t[13]?"":"-1"),P(n,"class",r=p(t[158]?.studioColor?`${t[158]?.studioColor}-color`:"")+" svelte-1i5jzz"),P(n,"rel",a=t[158]?.studio?.studioUrl?"noopener noreferrer":""),P(n,"target",s=t[158]?.studio?.studioUrl?"_blank":""),P(n,"href",c=t[158]?.studio?.studioUrl||"javascript:void(0)"),P(n,"aria-label","Open Studio in AniList"),this.first=n},m(e,t){M(e,n,t),x(n,i),x(n,o)},p(e,o){t=e,589824&o[0]&&u!==(u=(t[158]?.studio?.studioName||"N/A")+"")&&F(i,u),2105344&o[0]&&l!==(l=!t[21]&&t[13]?"":"-1")&&P(n,"tabindex",l),589824&o[0]&&r!==(r=p(t[158]?.studioColor?`${t[158]?.studioColor}-color`:"")+" svelte-1i5jzz")&&P(n,"class",r),589824&o[0]&&a!==(a=t[158]?.studio?.studioUrl?"noopener noreferrer":"")&&P(n,"rel",a),589824&o[0]&&s!==(s=t[158]?.studio?.studioUrl?"_blank":"")&&P(n,"target",s),589824&o[0]&&c!==(c=t[158]?.studio?.studioUrl||"javascript:void(0)")&&P(n,"href",c)},d(e){e&&C(n)}}}function wl(e){let t,n,i,l,r,a,s=[],c=new Map,u=e[144].shownGenres;const d=e=>e[155]?.genre||{};for(let t=0;t<u.length;t+=1){let n=bo(e,u,t),i=d(n);c.set(i,s[t]=vl(i,n))}return{c(){t=z("div"),n=z("div"),n.textContent="Genre",i=A(),l=z("div");for(let e=0;e<s.length;e+=1)s[e].c();P(n,"class","info-categ svelte-1i5jzz"),P(l,"class",p("genres-popup info")+" svelte-1i5jzz"),P(t,"class","svelte-1i5jzz")},m(o,c){M(o,t,c),x(t,n),x(t,i),x(t,l);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(l,null);r||(a=[N(l,"scroll",e[35]),N(l,"mouseenter",e[49])],r=!0)},p(e,t){589824&t[0]&&(u=e[144].shownGenres,s=Ee(s,t,d,1,e,u,c,l,xe,vl,null,bo))},d(e){e&&C(t);for(let e=0;e<s.length;e+=1)s[e].d();r=!1,o(a)}}}function vl(e,t){let n,i,o,l,r=(t[155]?.genre||"N/A")+"";return{key:e,first:null,c(){n=z("span"),i=L(r),o=A(),P(n,"class",l=p(t[155]?.genreColor?`${t[155]?.genreColor}-color`:"")+" svelte-1i5jzz"),this.first=n},m(e,t){M(e,n,t),x(n,i),x(n,o)},p(e,o){t=e,589824&o[0]&&r!==(r=(t[155]?.genre||"N/A")+"")&&F(i,r),589824&o[0]&&l!==(l=p(t[155]?.genreColor?`${t[155]?.genreColor}-color`:"")+" svelte-1i5jzz")&&P(n,"class",l)},d(e){e&&C(n)}}}function bl(e){let t,n,i,l,r=[],a=new Map,s=e[144].shownTags;const c=e=>e[152]?.tag||{};for(let t=0;t<s.length;t+=1){let n=vo(e,s,t),i=c(n);a.set(i,r[t]=xl(i,n))}return{c(){t=z("div"),n=z("div");for(let e=0;e<r.length;e+=1)r[e].c();P(n,"class",p("tags-info-content info")+" svelte-1i5jzz"),P(t,"class","tag-info svelte-1i5jzz")},m(o,a){M(o,t,a),x(t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(n,null);i||(l=[N(n,"scroll",e[35]),N(n,"mouseenter",e[49])],i=!0)},p(e,t){2697472&t[0]|32768&t[1]&&(s=e[144].shownTags,r=Ee(r,t,c,1,e,s,a,n,xe,xl,null,vo))},d(e){e&&C(t);for(let e=0;e<r.length;e+=1)r[e].d();i=!1,o(l)}}}function xl(e,t){let n,i,l,r,a,s,c,u=(t[152]?.tag||"N/A")+"";function d(){return t[66](t[152])}function m(...e){return t[67](t[152],...e)}return{key:e,first:null,c(){n=z("span"),i=new R(!1),l=A(),i.a=l,P(n,"tabindex",r=!t[21]&&t[13]?"0":""),P(n,"class",a=p(t[152]?.tagColor?`${t[152]?.tagColor}-color`:"")+" svelte-1i5jzz"),P(n,"role","button"),P(n,"aria-label","Open Tag Description"),this.first=n},m(e,t){M(e,n,t),i.m(u,n),x(n,l),s||(c=[N(n,"click",d),N(n,"keyup",m)],s=!0)},p(e,o){t=e,589824&o[0]&&u!==(u=(t[152]?.tag||"N/A")+"")&&i.p(u),2105344&o[0]&&r!==(r=!t[21]&&t[13]?"0":"")&&P(n,"tabindex",r),589824&o[0]&&a!==(a=p(t[152]?.tagColor?`${t[152]?.tagColor}-color`:"")+" svelte-1i5jzz")&&P(n,"class",a)},d(e){e&&C(n),s=!1,o(c)}}}function kl(e){let t,n=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl,i=El(e);return{c(){i.c(),t=S()},m(e,n){i.m(e,n),M(e,t,n)},p(e,o){589824&o[0]&&r(n,n=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)?(i.d(1),i=El(e),i.c(),i.m(t.parentNode,t)):i.p(e,o)},d(e){e&&C(t),i.d(e)}}}function El(e){let t,n,i,l,r,a,c,u,d;function p(){return e[70](e[144])}function m(...t){return e[71](e[144],...t)}return{c(){t=z("div"),n=z("img"),a=A(),c=z("div"),s(n.src,i=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)||P(n,"src",i),P(n,"loading","lazy"),P(n,"width","150px"),P(n,"height","210px"),P(n,"alt",l=(e[144]?.shownTitle||"")+(e[144].coverImageUrl?" Cover":e[144].bannerImageUrl?" Banner":" Thumbnail")),P(n,"tabindex",r=!e[21]&&e[13]?"0":"-1"),P(n,"class","cover-img svelte-1i5jzz"),P(n,"aria-label","Open Cover Image"),P(c,"class","shimmer-background svelte-1i5jzz"),P(t,"class","shimmer svelte-1i5jzz")},m(i,o){M(i,t,o),x(t,n),x(t,a),x(t,c),u||(d=[N(n,"load",e[68]),N(n,"error",e[69]),N(n,"click",p),N(n,"keyup",m)],u=!0)},p(t,o){e=t,589824&o[0]&&!s(n.src,i=e[144].coverImageUrl||e[144].bannerImageUrl||e[144].trailerThumbnailUrl)&&P(n,"src",i),589824&o[0]&&l!==(l=(e[144]?.shownTitle||"")+(e[144].coverImageUrl?" Cover":e[144].bannerImageUrl?" Banner":" Thumbnail"))&&P(n,"alt",l),2105344&o[0]&&r!==(r=!e[21]&&e[13]?"0":"-1")&&P(n,"tabindex",r)},d(e){e&&C(t),u=!1,o(d)}}}function Ml(e){let t,n,i,l,r,a=(e[151]||"")+"";function s(){return e[72](e[151])}function c(...t){return e[73](e[151],...t)}return{c(){t=z("div"),n=z("div"),P(n,"class","media-description svelte-1i5jzz"),P(t,"class","media-description-wrapper svelte-1i5jzz"),P(t,"tabindex",i=!e[21]&&e[13]?"0":"-1"),P(t,"role","button"),P(t,"aria-label","Open Media Synopsis")},m(e,i){M(e,t,i),x(t,n),n.innerHTML=a,l||(r=[N(t,"click",s),N(t,"keyup",c)],l=!0)},p(o,l){e=o,589824&l[0]&&a!==(a=(e[151]||"")+"")&&(n.innerHTML=a),2105344&l[0]&&i!==(i=!e[21]&&e[13]?"0":"-1")&&P(t,"tabindex",i)},d(e){e&&C(t),l=!1,o(r)}}}function Cl(t){let n;return{c(){n=L("Loading...")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function $l(e){let t,n=" "+(e[22][e[144]?.id]?"Show":"Hide");return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){4784128&i[0]&&n!==(n=" "+(e[22][e[144]?.id]?"Show":"Hide"))&&F(t,n)},d(e){e&&C(t)}}}function zl(e,t){let n;function i(e,t){return e[23]&&!1!==e[17]||e[146]<=e[3]+e[10]&&e[146]>=e[3]-e[9]?To:zo}function o(e,t){return t===To?Mo(e):e}let l=i(t),r=l(o(t,l));return{key:e,first:null,c(){n=z("div"),r.c(),P(n,"class","popup-content svelte-1i5jzz"),this.first=n},m(e,t){M(e,n,t),r.m(n,null)},p(e,a){l===(l=i(t=e))&&r?r.p(o(t,l),a):(r.d(1),r=l(o(t,l)),r&&(r.c(),r.m(n,null)))},d(e){e&&C(n),r.d()}}}function Tl(e){let t,n,i,o,l=e[143],a=Ll(e);return{c(){t=z("div"),n=T("svg"),i=T("path"),o=A(),a.c(),P(i,"d","M311 86a32 32 0 1 0-46-44L110 202l-46 47V64a32 32 0 1 0-64 0v384a32 32 0 1 0 64 0V341l65-67 133 192c10 15 30 18 44 8s18-30 8-44L174 227 311 86z"),P(n,"class","popup-content-loading-icon svelte-1i5jzz"),P(n,"viewBox","0 0 320 512"),P(t,"class","popup-content-loading svelte-1i5jzz"),P(t,"aria-hidden","true")},m(e,l){M(e,t,l),x(t,n),x(n,i),x(t,o),a.m(t,null)},p(e,n){589824&n[0]&&r(l,l=e[143])?(a.d(1),a=Ll(e),a.c(),a.m(t,null)):a.p(e,n)},d(e){e&&C(t),a.d(e)}}}function Ll(t){let n;return{c(){n=z("div"),P(n,"class","observed-grid svelte-1i5jzz")},m(e,i){M(e,n,i),t[78](n)},p:e,d(e){e&&C(n),t[78](null)}}}function Al(e){let t,n,i,o,l,r;return{c(){t=z("div"),n=z("div"),n.innerHTML='<svg viewBox="0 0 320 512" class="svelte-1i5jzz"><path d="M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"></path></svg>',P(n,"class","go-back-grid svelte-1i5jzz"),P(t,"class",i=p("go-back-grid-highlight"+(e[7]?" will-go-back":""))+" svelte-1i5jzz")},m(e,i){M(e,t,i),x(t,n),r=!0},p(n,o){e=n,(!r||128&o[0]&&i!==(i=p("go-back-grid-highlight"+(e[7]?" will-go-back":""))+" svelte-1i5jzz"))&&P(t,"class",i)},i(e){r||(ne((()=>{r&&(l&&l.end(1),o=ye(t,Ae,{duration:200,easing:Le}),o.start())})),r=!0)},o(e){o&&o.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),r=!1},d(e){e&&C(t),e&&l&&l.end()}}}function Sl(e){let t,n,i,l,a,s,c,u=e[0],d=Il(e);return{c(){t=z("div"),n=z("div"),d.c(),P(n,"class","full-popup svelte-1i5jzz"),P(t,"class","full-popup-wrapper svelte-1i5jzz")},m(i,o){M(i,t,o),x(t,n),d.m(n,null),a=!0,s||(c=[N(t,"click",e[87]),N(t,"keyup",e[88]),N(t,"touchstart",e[41],{passive:!0}),N(t,"touchend",e[43],{passive:!0}),N(t,"touchcancel",e[44],{passive:!0})],s=!0)},p(t,i){e=t,1&i[0]&&r(u,u=e[0])?(d.d(1),d=Il(e),d.c(),d.m(n,null)):d.p(e,i)},i(e){a||(ne((()=>{a&&(l&&l.end(1),i=ye(t,Ae,{duration:200,easing:Le}),i.start())})),a=!0)},o(e){i&&i.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),a=!1},d(e){e&&C(t),d.d(e),e&&l&&l.end(),s=!1,o(c)}}}function Nl(e){let t,n,i,l,r,a,s,c,u;return{c(){t=z("div"),n=z("div"),i=z("div"),l=z("div"),P(l,"tabindex","0"),P(l,"class","full-popup-description svelte-1i5jzz"),P(i,"class","full-popup-description-wrapper svelte-1i5jzz"),P(n,"class","full-popup svelte-1i5jzz"),P(t,"class","full-popup-wrapper svelte-1i5jzz")},m(o,r){M(o,t,r),x(t,n),x(n,i),x(i,l),l.innerHTML=e[1],s=!0,c||(u=[f(e[42].call(null,l)),N(l,"keyup",e[82]),N(l,"scroll",e[40]),N(t,"click",e[83]),N(t,"keyup",e[84]),N(t,"touchstart",e[41],{passive:!0}),N(t,"touchend",e[43],{passive:!0}),N(t,"touchcancel",e[44],{passive:!0})],c=!0)},p(t,n){e=t,(!s||2&n[0])&&(l.innerHTML=e[1])},i(e){s||(ne((()=>{s&&(a&&a.end(1),r=ye(t,Ae,{duration:200,easing:Le}),r.start())})),s=!0)},o(e){r&&r.invalidate(),a=we(t,Ae,{duration:200,easing:Le}),s=!1},d(e){e&&C(t),e&&a&&a.end(),c=!1,o(u)}}}function Il(e){let t,n,i,l;return{c(){t=z("img"),s(t.src,n=e[0])||P(t,"src",n),P(t,"tabindex","0"),P(t,"class","full-popup-image svelte-1i5jzz"),P(t,"loading","lazy"),P(t,"alt","Full View")},m(n,o){M(n,t,o),i||(l=[N(t,"keyup",e[85]),N(t,"error",e[86])],i=!0)},p(e,i){1&i[0]&&!s(t.src,n=e[0])&&P(t,"src",n)},d(e){e&&C(t),i=!1,o(l)}}}function Pl(e){let t,n,i,l,r,a,s,c,u,d,p,m=e[19]&&$o(Co(e)),f=e[13]&&e[14]&&Al(e);const h=[Nl,Sl],g=[];function y(e,t){return e[1]?0:e[0]?1:-1}return~(a=y(e))&&(s=g[a]=h[a](e)),{c(){t=z("div"),n=z("section"),m&&m.c(),l=A(),f&&f.c(),r=A(),s&&s.c(),c=S(),P(n,"id","popup-container"),P(n,"class","popup-container hide svelte-1i5jzz"),P(n,"aria-label","Detailed Information View for Media"),P(t,"id","popup-wrapper"),P(t,"class","popup-wrapper svelte-1i5jzz"),P(t,"tabindex",i=!e[21]&&e[13]?"0":"-1")},m(i,o){M(i,t,o),x(t,n),m&&m.m(n,null),e[79](n),e[81](t),M(i,l,o),f&&f.m(i,o),M(i,r,o),~a&&g[a].m(i,o),M(i,c,o),u=!0,d||(p=[N(n,"touchstart",e[36],{passive:!0}),N(n,"touchmove",e[37],{passive:!0}),N(n,"touchend",e[38],{passive:!0}),N(n,"touchcancel",e[39],{passive:!0}),N(n,"pointerdown",e[50]),N(n,"pointerup",e[51]),N(n,"pointercancel",e[51]),N(n,"scroll",e[34]),N(t,"click",e[27]),N(t,"keyup",e[80])],d=!0)},p(e,o){e[19]?m?m.p(Co(e),o):(m=$o(Co(e)),m.c(),m.m(n,null)):m&&(m.d(1),m=null),(!u||2105344&o[0]&&i!==(i=!e[21]&&e[13]?"0":"-1"))&&P(t,"tabindex",i),e[13]&&e[14]?f?(f.p(e,o),24576&o[0]&&fe(f,1)):(f=Al(e),f.c(),fe(f,1),f.m(r.parentNode,r)):f&&(pe(),he(f,1,1,(()=>{f=null})),me());let l=a;a=y(e),a===l?~a&&g[a].p(e,o):(s&&(pe(),he(g[l],1,1,(()=>{g[l]=null})),me()),~a?(s=g[a],s?s.p(e,o):(s=g[a]=h[a](e),s.c()),fe(s,1),s.m(c.parentNode,c)):s=null)},i(e){u||(fe(f),fe(s),u=!0)},o(e){he(f),he(s),u=!1},d(n){n&&C(t),m&&m.d(),e[79](null),e[81](null),n&&C(l),f&&f.d(n),n&&C(r),~a&&g[a].d(n),n&&C(c),d=!1,o(p)}}}function Fl(e){"string"==typeof e&&""!==e&&window.open(e,"_blank")}function Bl(e){let t;try{t=YT.PlayerState[e]}catch{}if(null==t){if("PLAYING"===e)return 1;if("PAUSED"===e)return 2;if("ENDED"===e)return 0;if("UNSTARTED"===e)return-1;if("CUED"===e)return 5;if("BUFFERING"===e)return 3}return t}function Ul(e){let t=document.createElement("span");t.innerHTML=e;let n=t.querySelectorAll("a");return Array.from(n).forEach((e=>{e?.setAttribute("rel","noopener noreferrer"),e?.setAttribute("target","_blank")})),t.innerHTML}function Dl(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,I;d(e,_t,(e=>n(12,i=e))),d(e,qt,(e=>n(113,o=e))),d(e,Ze,(e=>n(114,l=e))),d(e,ln,(e=>n(13,r=e))),d(e,ot,(e=>n(115,a=e))),d(e,cn,(e=>n(14,s=e))),d(e,fn,(e=>n(116,c=e))),d(e,Je,(e=>n(117,u=e))),d(e,qe,(e=>n(118,p=e))),d(e,sn,(e=>n(15,f=e))),d(e,ht,(e=>n(119,h=e))),d(e,wt,(e=>n(16,g=e))),d(e,Qt,(e=>n(120,y=e))),d(e,en,(e=>n(121,w=e))),d(e,Wt,(e=>n(17,v=e))),d(e,an,(e=>n(18,b=e))),d(e,mt,(e=>n(19,x=e))),d(e,st,(e=>n(122,k=e))),d(e,Jt,(e=>n(123,E=e))),d(e,Mt,(e=>n(124,M=e))),d(e,It,(e=>n(20,C=e))),d(e,tn,(e=>n(21,$=e))),d(e,pn,(e=>n(125,z=e))),d(e,rn,(e=>n(126,T=e))),d(e,Ct,(e=>n(22,L=e))),d(e,Ge,(e=>n(23,A=e))),d(e,lt,(e=>n(24,S=e))),d(e,Xt,(e=>n(25,N=e))),d(e,Zt,(e=>n(26,I=e)));let P,F,B,U,D,R,j,H,V,O={},q={},_={},Y={};function J(){cancelAnimationFrame(V),r&&(V=requestAnimationFrame((()=>{const e=Li(U,".popup-header",a>360?.5:0)||Li(U,".popup-content",0)?.getElementsByClassName("popup-header")?.[0];P=e,r&&oe()})))}function G(e){const t=e.target;t.classList.contains("popup-container")||t.closest(".popup-container")||m(ln,r=!1,r)}async function X(e,t){if(!1!==v||!L)return ce();t=t?`<span style="color:hsl(var(--ac-color));">${t}</span>`:"this entry",L[e]?await w(`Do you want to unhide ${t} in your recommendation list?`)&&(Zn({showId:e}),delete L[e],Ct.set(L)):await w(`Do you want to hide ${t} in your recommendation list?`)&&(Zn({removeId:e}),m(Ct,L[e]=1,L))}ln.subscribe((async e=>{if(B instanceof Element&&U instanceof Element)if(!0===e){const e=U?.children[T??F??0];if(e instanceof Element){k<=0||$?(Ti(D,"hide"),zi(B,"visible"),zi(U,"show")):requestAnimationFrame((()=>{zi(D,"stop-transition"),zi(D,"hide"),requestAnimationFrame((()=>{Ti(D,"stop-transition"),Ti(D,"hide"),zi(B,"visible"),zi(U,"show")}))}));const t=T;n(3,F=t);const i=x[g].mediaList,a=[[i[t],t],[i[t+1],t+1],[i[t-1],t-1]];if(await te(),!r)return m(rn,T=null,T),void window.addHistory?.();((e,t,n="top",i,o=0)=>{try{let l;if("string"==typeof t&&(t=document.querySelector(t)),e===window){const e=t.getBoundingClientRect(),i=window.scrollY;l="bottom"===n?e.bottom+i-window.innerHeight:"center"===n?e.top+i-window.innerHeight/2:e.top+i}else if("string"==typeof e&&(e=document.querySelector(e)),"bottom"===n)l=t.offsetTop+t.offsetHeight-e.offsetHeight;else if("center"===n){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();l=n.top+n.height/2-(i.top+i.height/2)-i.height/2,e.scrollTop}else l=t.getBoundingClientRect().top-e.getBoundingClientRect().top+e.scrollTop;e===window?"smooth"===i?window.scrollTo({top:l+o,behavior:"smooth"}):window.scrollTo({top:l+o}):"smooth"===i?e.scrollBy({top:l+o,behavior:"smooth"}):e.scrollTop=l+o}catch{}})(U,e,"top","instant");const s=i?.[t]?.popupHeader||U?.children[t]?.querySelector(".popup-header");P=s;const c=s?.querySelector(".trailer")||U?.children[t]?.querySelector(".trailer");let u;for(let e=0;e<o.length;e++){const t=o[e]?.ytPlayer,n=t?.g,i=n.id;if(!O[i]&&(n===c&&n)){u=!0,l&&!q[i]&&(t?.getPlayerState?.()===Bl("ENDED")?(t?.seekTo?.(0,!0),t?.playVideo?.()):t?.playVideo?.());break}}a.forEach((([e,t],n)=>{u&&e&&0===n||e&&le(e,t)})),m(rn,T=null,T),window.addHistory?.()}else k<=0?(Ti(D,"hide"),zi(B,"visible"),zi(U,"show")):requestAnimationFrame((()=>{zi(D,"stop-transition"),zi(D,"hide"),requestAnimationFrame((()=>{Ti(D,"stop-transition"),Ti(D,"hide"),zi(B,"visible"),zi(U,"show")}))}))}else!1===e&&(window.closeFullScreenItem?.(),window.handleConfirmationCancelled?.(),m(pn,z=!1,z),!$&&k>0&&zi(D,"hide"),Ti(U,"show"),Be((()=>{for(let e=0;e<o.length;e++){const t=o[e]?.ytPlayer,n=t?.g?.id;O[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}Ti(D,"hide"),Ti(B,"visible")}),200),b||C[""]||C[g]?ae(!0):f&&se(!0))}));const Z=new IntersectionObserver((e=>e.forEach((e=>{e.isIntersecting&&On({loadMore:!0,selectedCategory:g,searchedWord:h})}))),{root:null,rootMargin:"100%",threshold:[.5,0]});let Q,ee;async function ne(){const e=x[g||""]?.mediaList;e instanceof Array&&e.length?(R?.disconnect(),await te(),R?.disconnect(),R=new IntersectionObserver((()=>J()),{root:null,rootMargin:"100%",threshold:[.5,0]}),e.forEach(((e,t)=>{const n=e?.popupHeader||U?.children[t]?.querySelector(".popup-header");n instanceof Element&&R?.observe(n)})),oe()):m(ln,r=!1,r)}function ie(){m(_t,i=!i,i)}function oe(){if(!r||document.fullscreenElement)return;const e=P?.querySelector(".trailer"),t=(e=>{try{return Array.from(e.parentElement.children).indexOf(e)}catch{}})(P?.closest(".popup-content"))??-1,i=g;clearTimeout(ee),ee=setTimeout((()=>{if(!r||i!==g)return;const e=x[g]?.mediaList,n=e?.[t]?.gridElement||M?.children?.[t];if(n instanceof Element)if(E)n.scrollIntoView({behavior:"smooth",inline:"nearest"});else{const e=n.getBoundingClientRect().top,t=n.clientHeight;let i;if(e<0?i=k+(e-5):e>a-65-t&&(i=k+e-a+t+70),i){const e=document.documentElement;e.style.overflow="hidden",e.style.overflow="",e.scrollTo({behavior:"smooth",top:i})}}}),300);if(e instanceof Element&&o.some((t=>t?.ytPlayer?.g===e))){if(t>=0){const e=x[g].mediaList;n(3,F=t);const i=[[e?.[t+1],t+1],[e?.[t-1],t-1]];for(let e=0;e<i.length;e++){const[t,n]=i[e];t&&le(t,n)}}for(let t=0;t<o.length;t++){const n=o[t]?.ytPlayer,i=n?.g,a=i?.id;if(O[a])continue;const s=n?.getPlayerState?.();i===e&&i&&l&&r?q[a]||s===Bl("ENDED")||n?.playVideo?.():(a&&(_[a]=!0),n?.pauseVideo?.())}}else{for(let e=0;e<o.length;e++){const t=o[e]?.ytPlayer,n=t?.g?.id;O[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}if(t>=0){n(3,F=t);const e=x[g].mediaList,i=[[e?.[t],t],[e?.[t+1],t+1],[e?.[t-1],t-1]];for(let e=0;e<i.length;e++){const[t,n]=i[e];t&&le(t,n)}}}}function le(e,t){const a=e?.popupHeader||U?.children[t]?.querySelector(".popup-header");let s=a?.querySelector(".trailer");const c=e?.trailerID,u=a?.querySelector(".popup-img");if(s instanceof Element&&c&&"undefined"!=typeof YT&&"function"==typeof YT?.Player){if(o.some((e=>e?.ytPlayer?.g===s)))return;Ti(u,"display-none"),zi(u,"loaded"),zi(a,"loader"),zi(s,"display-none"),s.id="yt-player"+Fe(),O[s.id]=!0;const e=new YT.Player(s,{videoId:c,playerVars:{cc_lang_pref:"en",cc_load_policy:1,enablejsapi:1,modestbranding:1,playsinline:1,rel:0},events:{onReady:e=>{!async function(e,t){const i=e?.target,l=i?.g;if(i?.getPlayerState?.()===Bl("UNSTARTED")||"IFRAME"!==l?.tagName||!1===window.navigator?.onLine){null!=t&&n(6,Y[t]=!0,Y),m(qt,o=o.filter((e=>e?.ytPlayer?.g!==l))||[],o);const e=l?.parentElement,r=e?.querySelector(".popup-img");Ti(r,"display-none"),zi(r,"loaded"),Ti(e,"loader"),zi(l,"display-none"),i?.destroy?.(),delete O[l?.id]}else null!=t&&(delete Y[t],n(6,Y)),i?.mute?.(),i?.seekTo?.(0,!0),i?.playVideo?.(),oe()}(e,c)},onStateChange:e=>{!function(e){const t=e?.target,n=t?.g,o=n?.parentElement,a=o?.querySelector(".popup-img"),s=n?.id,c=t?.getPlayerState?.();if(c===Bl("PLAYING"))O[s]?(delete O[s],P===o&&l&&r?(t?.seekTo?.(0,!0),i?t?.unMute?.():t?.mute?.(),t?.playVideo?.(),Ti(n,"display-none"),Ti(o,"loader"),Ti(a,"loaded"),Be((()=>{zi(a,"display-none")}),200)):(Ti(o,"loader"),s&&(_[s]=!0),t?.pauseVideo?.(),i?t?.unMute?.():t?.mute?.())):(n?.classList?.contains("display-none")||o?.classList?.contains("loader")||!a?.classList?.contains("display-none"))&&(Ti(n,"display-none"),Ti(o,"loader"),Ti(a,"loaded"),Be((()=>{zi(a,"display-none")}),200));else if(c===Bl("CUED"))t?.mute?.(),t?.seekTo?.(0,!0),t?.playVideo?.();else if(c===Bl("PAUSED"))return void(s&&P===o&&!_[s]&&(q[s]=!0));delete q[s],delete _[s]}(e)},onError:e=>{!function(e,t){const i=e?.target,l=i?.g,r=l?.parentElement,a=r?.querySelector(".popup-img"),s=i?.id;null!=t&&n(6,Y[t]=!0,Y);m(qt,o=o.filter((e=>e?.ytPlayer?.g!==l))||[],o),Ti(a,"display-none"),zi(a,"loaded"),Ti(r,"loader"),zi(l,"display-none"),i?.destroy?.(),delete O[s]}(e,c)}}});o.push({ytPlayer:e,headerIdx:t})}else null!=c&&n(6,Y[c]=!0,Y),Ti(u,"display-none"),zi(u,"loaded"),Ti(a,"loader"),zi(s,"display-none")}async function re(e,t,i){t?(n(0,j=t),n(1,H=null)):e&&!Y[e]?await w({title:"Open trailer",text:"Do you want to open the trailer in YouTube?",isImportant:!0})&&window.open(`https://www.youtube.com/watch?v=${e}`,"_blank"):i&&await w({title:"See related videos",text:"Do you want to see more related videos in YouTube?",isImportant:!0})&&window.open(i)}async function ae(e){u&&!0===window[p]||(!1===v?(e||await w({title:"Reload List",text:"Do you want to refresh your list to sync changes?"}))&&(m(Qt,y=!0,y),Zn({updateRecommendedMediaList:!0}),m(sn,f=m(an,b=!1,b),f)):e||ce())}async function se(e){u&&!0===window[p]||(!1===v?(e||await w({title:"Reload List",text:"Do you want to refresh your list to sync changes?"}))&&(m(Qt,y=!0,y),On({loadMore:!0,selectedCategory:g,searchedWord:h,reload:!0}),m(sn,f=!1,f)):e||ce())}function ce(){u?De("Please wait a moment"):m(fn,c="Please wait a moment",c)}wt.subscribe(ne),mt.subscribe(ne),_t.subscribe((e=>{if("boolean"==typeof e){In("autoPlay",e).catch((()=>Pn("autoPlay"))).finally((()=>Sn("autoPlay",e)));const t=P?.querySelector(".trailer");for(let n=0;n<o.length;n++){const i=o[n]?.ytPlayer,a=i?.g,s=a?.id;if(O[s])continue;const c=i?.isMuted?.();!0===e?i?.unMute?.():i?.mute?.(),a===t&&a&&l&&r?!0!==e||!1===c||q[s]||(i?.seekTo?.(0,!0),i?.playVideo?.()):(!0===e&&i?.seekTo?.(0,!0),s&&(_[s]=!0),i?.pauseVideo?.())}}}));const ue=864e5,de=7*ue;function pe(e,t,n){return"boolean"==typeof n?n?`${po(t,t<=ue||!t?2:1)}, ${fo(e)} ${mo(e)}`:`${po(t,t<=ue||!t?2:1)}, ${mo(e)}`:t>de?`${po(t,1)}, ${fo(e)} ${(e=>{try{return e.toLocaleDateString(void 0,{day:"numeric"})}catch{return""}})(e)} ${mo(e)}`:t<=de&&t>ue?`${po(t,1)}, ${(e=>{try{return e.toLocaleDateString(void 0,{weekday:"short"})}catch{return""}})(e)}, ${ho(e).toLowerCase()}`:`${po(t,2)}, ${ho(e).toLowerCase()}`}function me(){new Promise((e=>{let t="https://www.youtube.com/iframe_api?v=16",n=document.querySelector(`#www-widgetapi-script[src="${t}"]`);n||(n=document.querySelector(`script[src="${t}"]`)),n&&n.parentElement.removeChild(n);let i=document.createElement("script");i.src=t,i.id="www-widgetapi-script",i.onerror=()=>{e()},i.onload=()=>{window.onYouTubeIframeAPIReady?.(),e()};let o=document.getElementsByTagName("script")[0];o.parentElement.insertBefore(i,o)})).then((()=>{m(qt,o=o.filter((e=>{const t=e?.ytPlayer,n=t?.getPlayerState?.();if(t&&t?.g instanceof Element&&"function"==typeof t?.playVideo&&n!==Bl("UNSTARTED")&&"number"==typeof n&&!isNaN(n))return!0;{t?.destroy?.();const e=t?.g?.closest?.(".popup-header")?.querySelector?.(".popup-img");return e&&Ti(e,"display-none"),!1}}))||[],o),oe()}))}window.returnedAppIsVisible=e=>{if(!u)return;m(Ze,l=e,l);const t=P?.querySelector(".trailer");if(e&&r&&t)for(let e=0;e<o.length;e++){const n=o[e]?.ytPlayer,i=n?.g,l=i?.id;O[l]||(i===t&&i?q[l]||n?.getPlayerState?.()===Bl("ENDED")||n?.playVideo?.():(l&&(_[l]=!0),n?.pauseVideo?.()))}else for(let e=0;e<o.length;e++){const t=o[e]?.ytPlayer,n=t?.g?.id;O[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}},document.addEventListener("visibilitychange",(()=>{if(u)return;m(Ze,l="visible"===document.visibilityState,l);const e=P?.querySelector?.(".trailer");if(l&&r&&e)for(let t=0;t<o.length;t++){const n=o[t]?.ytPlayer,i=n?.g,l=i?.id;O[l]||(i===e&&i?q[l]||n?.getPlayerState?.()===Bl("ENDED")||n?.playVideo?.():(l&&(_[l]=!0),n?.pauseVideo?.()))}else for(let e=0;e<o.length;e++){const t=o[e]?.ytPlayer,n=t?.g?.id;O[n]||(n&&(_[n]=!0),t?.pauseVideo?.())}})),window.playMostVisibleTrailer=oe,window.reloadYoutube=me;let fe,he,ge,ye,we,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Le,Ae=window.navigator?.onLine;async function Se(e){await te(),Le=e||Le,Le instanceof Element?Le?.scrollHeight>Le?.clientHeight?zi(Le,"scrollable"):Ti(Le,"scrollable"):zi(Le,"scrollable")}function Ne(){Ee=Me=Ce=$e=ze=Te=!1}function Ie(e){if(!e)return;let t=e||"";n(1,H=H===t?null:t),n(0,j=null)}function Pe(e){if(!e)return;let t=Ul(e)||"";n(1,H=H===t?null:t),n(0,j=null)}function Ue(e){e&&(n(0,j=j===e?null:e),n(1,H=null))}window.addEventListener("online",(()=>{if(!0!==window[p]){if(u)try{JSBridge.isOnline(!0)}catch(e){console.error(e)}else!1===Ae&&(Ae=!0,m(fn,c="Your internet has been restored",c));document.querySelectorAll("script")?.forEach((e=>{e.src&&"https://www.youtube.com/iframe_api?v=16"!==e.src&&(e.src=e.src)})),document.querySelectorAll("img")?.forEach((e=>{e.naturalHeight||(e.src=e.src)})),me()}})),window.addEventListener("offline",(()=>{if(!0!==window[p])if(u)try{JSBridge.isOnline(!1)}catch(e){console.error(e)}else!0===Ae&&(Ae=!1,m(fn,c="You are currently offline",c))})),window.showFullScreenInfo=Pe,window.checkOpenFullScreenItem=()=>j||H,window.closeFullScreenItem=()=>{n(1,H=n(0,j=null))};let Re,je=a>=1e3?2:1,He=Math.floor(Math.max(1,a/640))||1;ot.subscribe((e=>{n(9,je=e>=1e3?2:1),n(10,He=Math.floor(Math.max(1,e/640))||1)}));const Ve=e=>{try{if(!0!==matchMedia("(hover:hover)").matches)return;let t=e.target;if(t.removeEventListener(e.type,Ve),t.addedCustomDragScroll)return;t.addedCustomDragScroll=!0,((e,t="xy",n=(()=>!1))=>{try{let i,o,l,r,a,s,c,u,d;const p=n=>{i&&"mouse"===n.pointerType&&(t.toLowerCase().includes("y")&&(e.scrollTop=s-n.clientY-o),t.toLowerCase().includes("x")&&(e.scrollLeft=c-n.clientX-l))},m=p=>{"mouse"!==p.pointerType||n(p)||(r=0,cancelAnimationFrame(u),a=0,cancelAnimationFrame(d),t.toLowerCase().includes("y")&&(o=p.clientY,s=e.scrollTop),t.toLowerCase().includes("x")&&(l=p.clientX,c=e.scrollLeft),i=!0)},f=n=>{i&&(t.toLowerCase().includes("y")&&"mouse"===n.pointerType&&(r=n.clientY-o,e.scrollTop=s-r,g(e)),t.toLowerCase().includes("x")&&"mouse"===n.pointerType&&(a=n.clientX-l,e.scrollLeft=c-a,y(e))),i=!1},h=()=>i=!1,g=(e,t)=>{(null==t||e.scrollTop===t)&&"number"==typeof r&&e&&Math.abs(r)>.1?(e.scrollTop-=.1*r,u=requestAnimationFrame((()=>g(e,e.scrollTop))),r*=.9):(r=0,cancelAnimationFrame(u))},y=(e,t)=>{(null==t||e.scrollLeft===t)&&"number"==typeof a&&e&&Math.abs(a)>.1?(e.scrollLeft-=.1*a,d=requestAnimationFrame((()=>y(e,e.scrollLeft))),a*=.9):(a=0,cancelAnimationFrame(d))};return e.addEventListener("pointermove",p),e.addEventListener("pointerdown",m),e.addEventListener("pointerup",f),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),()=>{a=r=0,cancelAnimationFrame(u),cancelAnimationFrame(d),e.removeEventListener("pointermove",p),e.removeEventListener("pointerdown",m),e.removeEventListener("pointerup",f),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h)}}catch{return()=>{}}})(t,"x"),null==Re&&n(11,Re=!0)}catch{}};let Oe;W((async()=>{n(4,B=B||document.getElementById("popup-wrapper")),n(5,U=U||B.querySelector("#popup-container")),D=document.getElementById("nav-container"),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||oe()}),!1),document.addEventListener("keydown",(e=>{" "===e.key&&r&&e.preventDefault()})),document.addEventListener("keyup",(e=>{if(" "===e.key&&r){e.preventDefault();const t=P?.querySelector(".trailer");for(let e=0;e<o.length;e++){const n=o[e]?.ytPlayer,i=n?.g,r=i?.id;if(!O[r])if(t===i&&i){const e=n?.getPlayerState?.();e===Bl("PLAYING")?(r&&(q[r]=!0),n?.pauseVideo?.()):l&&(e===Bl("ENDED")?(n?.seekTo?.(0,!0),n?.playVideo?.()):n?.playVideo?.())}else r&&(_[r]=!0),n?.pauseVideo?.()}}})),new MutationObserver((e=>{for(let t of e)if("childList"===t.type)for(let e of t.removedNodes)if(e?.matches?.("iframe.trailer")){const t=e,n=t?.id;m(qt,o=o.filter((e=>{const t=e?.ytPlayer,i=t?.g;return i!==t&&i?.id!==n||(t?.destroy?.(),!1)}))||[],o),delete q[n],delete _[n],delete O[n]}})).observe(U,{childList:!0,subtree:!0}),m(_t,i=i??await An("autoPlay"),i),null==i&&In("autoPlay",m(_t,i=!1,i)).catch((()=>Pn("autoPlay"))).finally((()=>Sn("autoPlay",!1)))}));return e.$$.update=()=>{4&e.$$.dirty[0]&&Q instanceof Element&&Z.observe(Q),2&e.$$.dirty[0]&&Se(),3&e.$$.dirty[0]&&(H||j)&&window.addHistory?.()},[j,H,Q,F,B,U,Y,be,xe,je,He,Re,i,r,s,f,g,v,b,x,C,$,L,A,S,N,I,G,X,ie,re,ae,se,function({episodes:e,chapters:t,nextAiringEpisode:n,episodeProgress:i,season:o},l,r){let a,s,c,u;if(!l&&!r&&"number"==typeof n?.airingAt)if("number"==typeof n?.episode)u=new Date(1e3*n?.airingAt),c=n?.episode,u instanceof Date&&!isNaN(u)&&(s=u.getTime()-(new Date).getTime());else if(!0===n?.estimated)return u=new Date(1e3*n?.airingAt),(u instanceof Date||isNaN(u))&&(s=u.getTime()-(new Date).getTime()),e>0&&(a=`  ${e} Ep${e>1?"s":""}`),s>0&&(a=`${a||""}  <span style="color:hsl(var(--ac-color));">${pe(u,s,"Winter"===o||"Spring"===o||"Summer"===o||"Fall"===o)}</span>`),a;if(s>0&&"number"==typeof c&&e>c)a=`  <span style="color:hsl(var(--ac-color));">${c}/${e} in ${pe(u,s)}</span>`;else if(s>0&&"number"==typeof c){let t="";t=null!=e&&c===e?`Fin ${c}`:`Ep ${c}`,a=`  <span style="color:hsl(var(--ac-color));">${t} in ${pe(u,s)}</span>`}else s<=0&&"number"==typeof c&&e>c?a=`  ${c}/${e}`:e>0&&!l&&!r?a=`  ${e} Ep${e>1?"s":""}`:t>0&&(l||r)?a=`  ${t} Ch${t>1?"s":""}`:i>0&&(a=`  Seen ${i} ${l||r?"Ch":"Ep"}${i>1?"s":""}`);return a},function(){r&&J(),n(8,xe=!0),clearTimeout(ke),ke=setTimeout((()=>{n(8,xe=!1)}),50),fe=null,n(7,be=he=m(cn,s=!1,s))},function(){n(8,xe=!0),clearTimeout(ke),ke=setTimeout((()=>{n(8,xe=!1)}),500)},function(e){if(xe)return;ge=e.touches[0].clientX,we=e.touches[0].clientY,fe=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="popup-container"!==t.id;break}t=t.parentElement}n||(he=!0)},function(e){if(he){he=!1,ye=e.touches[0].clientX,ve=e.touches[0].clientY;const t=ye-ge,n=ve-we;Math.abs(t)>Math.abs(n)&&t>0&&m(cn,s=!0,s)}else if(s){ye=e.touches[0].clientX;n(7,be=ye-ge>48)}},function(e){if(s){if(ye=Array.from(e.changedTouches)?.find((e=>e.identifier===fe))?.clientX,"number"==typeof ye){s&&ye-ge>=48&&m(ln,r=!1,r)}fe=null,n(7,be=he=m(cn,s=!1,s))}else fe=null,n(7,be=he=m(cn,s=!1,s))},function(){fe=null,n(7,be=he=m(cn,s=!1,s))},function(){$e=!0},function(e){if(!U)return;let t=e.target,n=t;for(;n&&n!==document.body;){if(ze=t.scrollTop<1,Te=Math.abs(t.scrollHeight-t.clientHeight-t.scrollTop)<1,ze||Te)break;n=n?.parentElement}Ee=e?.touches?.[0]?.identifier,Me=e?.touches?.[0]?.clientY,Ce=e?.touches?.[0]?.clientX},Se,function(e){if(!$e){let t=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===Ee))?.clientY,i=Array.from(e?.changedTouches||[])?.find((e=>e?.identifier===Ee))?.clientX,o=t-Me,l=i-Ce;if("number"==typeof o&&!isNaN(o)&&"number"==typeof l&&!isNaN(l)){(Math.abs(l)>Math.abs(o)||o<0&&Te||o>0&&ze)&&n(1,H=n(0,j=null))}}Ne()},Ne,Ie,Pe,Ue,function(e){return{destroy(){const t=e?.querySelector?.(".trailer"),n=t?.id;m(qt,o=o.filter((e=>{const i=e?.ytPlayer,o=i?.g;return o!==t&&o?.id!==n||(i?.destroy?.(),!1)}))||[],o),delete q[n],delete _[n],delete O[n]}}},Ve,function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&(Oe?.(),Oe=Be((()=>{let e=t.dataset.copy;if(e){t.style.pointerEvents="none",Be((()=>{t.style.pointerEvents=""}),500);let n=t.dataset.secondcopy;n&&!$n(n,e)?(window.copyToClipBoard?.(n),Be((()=>{window.copyToClipBoard?.(e)}),1e3)):window.copyToClipBoard?.(e)}}),500))},function(e){if("mouse"===e?.pointerType)return;let t=e?.target;const n=t?.classList;n&&!n?.contains?.("copy")&&(t=t.closest(".copy")),t&&Oe?.()},e=>{Ti(e.target,"display-none"),zi(e.target,"loaded")},e=>{Ti(e.target,"loaded"),zi(e.target,"display-none")},function(e,t,n){K[e?"unshift":"push"]((()=>{t[n].popupHeader=e}))},(e,t)=>{r&&re(e.trailerID,e.bannerImageUrl||e.trailerThumbnailUrl,t)},(e,t,n)=>{r&&"Enter"===n.key&&re(e.trailerID,e.bannerImageUrl||e.trailerThumbnailUrl,t)},function(){i=this.checked,_t.set(i)},e=>"Enter"===e.key&&ie(),e=>"Enter"===e.key&&ie(),()=>{b||C[""]||C[g]?ae():se()},e=>{"Enter"!==e.key&&(b||C[""]||C[g]?ae():se())},e=>{r&&Ue(e.bannerImageUrl||e.trailerThumbnailUrl)},(e,t)=>{r&&"Enter"===t.key&&Ue(e.bannerImageUrl||e.trailerThumbnailUrl)},e=>Fl(e.mediaUrl),(e,t)=>"Enter"===t.key&&Fl(e.mediaUrl),e=>{r&&(null!=Re&&xe||Pe(window.getTagInfoHTML?.(e?.tagName)))},(e,t)=>{r&&("Enter"!==t.key||null!=Re&&xe||Pe(window.getTagInfoHTML?.(e?.tagName)))},e=>{Ti(e.target,"display-none"),zi(e.target,"loaded")},e=>{Ti(e.target,"loaded"),zi(e.target,"display-none")},e=>{r&&Ue(e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl)},(e,t)=>{r&&"Enter"===t.key&&Ue(e.coverImageUrl||e.bannerImageUrl||e.trailerThumbnailUrl)},e=>{r&&Ie(e)},(e,t)=>{r&&"Enter"===t.key&&Ie(e)},e=>{r&&X(e.id,e?.shownTitle)},(e,t)=>{r&&"Enter"===t.key&&(t.stopImmediatePropagation(),X(e.id,e?.shownTitle),t.stopImmediatePropagation())},e=>Fl(e.mediaUrl),(e,t)=>"Enter"===t.key&&Fl(e.mediaUrl),function(e){K[e?"unshift":"push"]((()=>{Q=e,n(2,Q)}))},function(e){K[e?"unshift":"push"]((()=>{U=e,n(5,U)}))},e=>"Enter"===e.key&&G(e),function(e){K[e?"unshift":"push"]((()=>{B=e,n(4,B)}))},e=>"Enter"===e.key&&n(0,j=n(1,H=null)),()=>n(0,j=n(1,H=null)),e=>"Enter"===e.key&&n(0,j=n(1,H=null)),e=>"Enter"===e.key&&n(1,H=n(0,j=null)),e=>{zi(e.target,"display-none")},()=>n(1,H=n(0,j=null)),e=>"Enter"===e.key&&n(1,H=n(0,j=null))]}function Rl(e){let t,n,i,l,r,a,s,c,u,d,p,m,h,g,y,w,v,b,k,E,$,S,I,B,U,D,R,j,H,V,O,q,_,Y=e[7]?(e[7][e[2]]?"Show":"Hide")+" Entry":"Please Wait...",W=e[1]&&jl(e);return{c(){t=z("div"),n=z("div"),i=z("div"),l=z("span"),r=z("h1"),a=L(e[0]),s=A(),c=T("svg"),u=T("path"),p=A(),m=z("span"),h=z("h2"),h.textContent="Information",y=A(),w=z("span"),v=z("h2"),v.textContent="Open in Anilist",k=A(),E=z("span"),$=z("h2"),$.textContent="Open in YouTube",I=A(),W&&W.c(),B=A(),U=z("span"),D=z("h2"),R=L(Y),P(r,"class","svelte-nro706"),P(l,"class","media-title svelte-nro706"),P(u,"fill","#fff"),P(u,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(c,"viewBox","0 0 24 24"),P(c,"class","closing-x svelte-nro706"),P(c,"tabindex",d=e[8]?"":"0"),P(c,"role","button"),P(c,"aria-label","Close Media Options Popup"),P(i,"class","option-header svelte-nro706"),P(h,"class","option-title svelte-nro706"),P(m,"tabindex",g=e[8]?"":"0"),P(m,"class","media-option svelte-nro706"),P(m,"role","button"),P(m,"aria-label","Open Detailed Information for the Media"),P(v,"class","option-title svelte-nro706"),P(w,"tabindex",b=e[8]?"":"0"),P(w,"class","media-option svelte-nro706"),P(w,"role","button"),P(w,"aria-label","Open in AniList"),P($,"class","option-title svelte-nro706"),P(E,"tabindex",S=e[8]?"":"0"),P(E,"class","media-option svelte-nro706"),P(E,"role","button"),P(E,"aria-label","Open Related YouTube Videos"),P(D,"class","option-title svelte-nro706"),P(U,"tabindex",j=e[8]?"":"0"),P(U,"class","media-option svelte-nro706"),P(U,"role","button"),P(U,"aria-label","Hide or Show Media"),P(n,"class","media-options-container svelte-nro706"),P(t,"class","fixed-media-options svelte-nro706")},m(o,d){M(o,t,d),x(t,n),x(n,i),x(i,l),x(l,r),x(r,a),x(i,s),x(i,c),x(c,u),x(n,p),x(n,m),x(m,h),e[19](m),x(n,y),x(n,w),x(w,v),x(n,k),x(n,E),x(E,$),x(n,I),W&&W.m(n,null),x(n,B),x(n,U),x(U,D),x(D,R),O=!0,q||(_=[N(c,"click",e[10]),N(c,"keydown",e[17]),N(m,"click",e[11]),N(m,"keydown",e[18]),N(w,"click",e[12]),N(w,"keydown",e[20]),N(E,"click",e[13]),N(E,"keydown",e[21]),N(U,"click",e[15]),N(U,"keydown",e[23]),f(e[16].call(null,t)),N(t,"click",e[10]),N(t,"touchend",e[9],{passive:!0}),N(t,"keydown",e[24])],q=!0)},p(t,i){e=t,(!O||1&i[0])&&F(a,e[0]),(!O||256&i[0]&&d!==(d=e[8]?"":"0"))&&P(c,"tabindex",d),(!O||256&i[0]&&g!==(g=e[8]?"":"0"))&&P(m,"tabindex",g),(!O||256&i[0]&&b!==(b=e[8]?"":"0"))&&P(w,"tabindex",b),(!O||256&i[0]&&S!==(S=e[8]?"":"0"))&&P(E,"tabindex",S),e[1]?W?W.p(e,i):(W=jl(e),W.c(),W.m(n,B)):W&&(W.d(1),W=null),(!O||132&i[0])&&Y!==(Y=e[7]?(e[7][e[2]]?"Show":"Hide")+" Entry":"Please Wait...")&&F(R,Y),(!O||256&i[0]&&j!==(j=e[8]?"":"0"))&&P(U,"tabindex",j)},i(e){O||(ne((()=>{O&&(V&&V.end(1),H=ye(t,Ae,{duration:200,easing:Le}),H.start())})),O=!0)},o(e){H&&H.invalidate(),V=we(t,Ae,{duration:200,easing:Le}),O=!1},d(n){n&&C(t),e[19](null),W&&W.d(),n&&V&&V.end(),q=!1,o(_)}}}function jl(e){let t,n,i,l,r;return{c(){t=z("span"),n=z("h2"),n.textContent="Copy Title",P(n,"class","option-title svelte-nro706"),P(t,"tabindex",i=e[8]?"":"0"),P(t,"class","media-option svelte-nro706"),P(t,"role","button"),P(t,"aria-label","Copy Title")},m(i,o){M(i,t,o),x(t,n),l||(r=[N(t,"click",e[14]),N(t,"keydown",e[22])],l=!0)},p(e,n){256&n[0]&&i!==(i=e[8]?"":"0")&&P(t,"tabindex",i)},d(e){e&&C(t),l=!1,o(r)}}}function Hl(e){let t,n,i=e[4]&&!e[8]&&e[6]?.[e[5]]&&Rl(e);return{c(){i&&i.c(),t=S()},m(e,o){i&&i.m(e,o),M(e,t,o),n=!0},p(e,n){e[4]&&!e[8]&&e[6]?.[e[5]]?i?(i.p(e,n),368&n[0]&&fe(i,1)):(i=Rl(e),i.c(),fe(i,1),i.m(t.parentNode,t)):i&&(pe(),he(i,1,1,(()=>{i=null})),me())},i(e){n||(fe(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&C(t)}}}function Vl(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E;function M(e){"Tab"===e.key&&(e.preventDefault(),e.stopPropagation(),E?.focus?.(),window.removeEventListener("keydown",M))}d(e,nn,(e=>n(4,i=e))),d(e,on,(e=>n(31,o=e))),d(e,wt,(e=>n(5,l=e))),d(e,mt,(e=>n(6,r=e))),d(e,Ct,(e=>n(7,a=e))),d(e,en,(e=>n(32,s=e))),d(e,fn,(e=>n(33,c=e))),d(e,Je,(e=>n(34,u=e))),d(e,Wt,(e=>n(35,p=e))),d(e,ln,(e=>n(8,f=e))),d(e,rn,(e=>n(36,h=e)));let C,$=!0;function z(e){if($&&"keydown"!==e.type)return;let t=e.target,n=t.classList;(n.contains("closing-x")||t.closest(".closing-x")||!t.closest(".media-options-container")&&!n.contains("media-options-container"))&&m(nn,i=!1,i)}function T(e){$&&"keydown"!==e.type||(m(rn,h=k,h),m(ln,f=!0,f),m(nn,i=!1,i))}function L(e){$&&"keydown"!==e.type||"string"==typeof b&&""!==b&&window.open(b,"_blank")}async function A(e){$&&"keydown"!==e.type||"string"==typeof y&&""!==y&&"string"==typeof x&&""!==x&&window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(y+" "+x)}`,"_blank")}function S(e){if((!$||"keydown"===e.type)&&g){if(w&&!$n(w,g))if(u)try{"string"==typeof w&&JSBridge.copyToClipBoard(w),Be((()=>{"string"==typeof g&&JSBridge.copyToClipBoard(g)}),1e3)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(w),Be((()=>{navigator?.clipboard?.writeText?.(g)}),1e3);else if(u)try{"string"==typeof g&&JSBridge.copyToClipBoard(g)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(g);m(nn,i=!1,i)}}async function N(e){if($&&"keydown"!==e.type)return;if(!1!==p||!a)return void(u?De("Please wait a moment"):m(fn,c="Please wait a moment",c));let t=g?`<span style="color:hsl(var(--ac-color));">${g}</span>`:"this entry";a[v]?await s(`Do you want to unhide ${t} in your recommendation list?`)&&(Zn({showId:v}),delete a?.[v],Ct.set(a),m(nn,i=!1,i)):await s(`Do you want to hide ${t} in your recommendation list?`)&&(Zn({removeId:v}),m(Ct,a[v]=1,a),m(nn,i=!1,i))}function I(){let e=r?.[l]?.mediaList?.[o??-1];if(e){n(0,g=e?.shownTitle),n(1,w=e?.copiedTitle);let t,i={};y=null;try{for(let n of["english","romaji","native"]){let o,l=e?.title?.[n]?.trim?.();"string"!=typeof l||""===l||i[o=l.toLowerCase()]||(i[o]=!0,y?(t=!0,y+=" | "+l):y=l)}}catch{}t&&"string"==typeof y&&""!==y&&(y=`(${y})`),n(2,v=e.id),b=e.mediaUrl;let l=e?.format;x="Manga"===l||"One Shot"===l||"Novel"===l?l:"Anime",k=o}else m(nn,i=!1,i)}nn.subscribe((e=>{!0===e?(window.addEventListener("keydown",M),$=!0,C=Be((()=>{$=!1}),100),window.addHistory?.()):(window.removeEventListener("keydown",M),C?.(),$=!1)})),mt.subscribe((()=>{i&&I()})),Ct.subscribe((()=>{i&&I()}));return[g,w,v,E,i,l,r,a,f,function(e){if($)return;let t=e.target,n=t.classList;t.closest(".media-options-container")||n.contains("media-options-container")||m(nn,i=!1,i)},z,T,L,A,S,N,I,e=>"Enter"===e.key&&z(e),e=>"Enter"===e.key&&T(e),function(e){K[e?"unshift":"push"]((()=>{E=e,n(3,E)}))},e=>"Enter"===e.key&&L(e),e=>"Enter"===e.key&&A(e),e=>"Enter"===e.key&&S(e),e=>"Enter"===e.key&&N(e),e=>"Enter"===e.key&&z(e)]}function Ol(e,t,n){const i=e.slice();return i[39]=t[n],i}function ql(e,t){let n,i,r,a,s,c,u,d,m=(t[39].trim()||"")+"";function f(...e){return t[17](t[39],...e)}return{key:e,first:null,c(){n=z("span"),i=L(m),r=A(),P(n,"tabindex",a=t[10]||t[7]?"":"0"),P(n,"data-category",s=t[39]),P(n,"class",c=p("category"+(t[39]===t[8]?" selected":""))+" svelte-yiaup7"),P(n,"role","button"),P(n,"aria-label","category"),this.first=n},m(e,o){M(e,n,o),x(n,i),x(n,r),u||(d=[N(n,"click",(function(){l(t[12](t[39]))&&t[12](t[39]).apply(this,arguments)})),N(n,"keyup",f)],u=!0)},p(e,o){t=e,2&o[0]&&m!==(m=(t[39].trim()||"")+"")&&F(i,m),1152&o[0]&&a!==(a=t[10]||t[7]?"":"0")&&P(n,"tabindex",a),2&o[0]&&s!==(s=t[39])&&P(n,"data-category",s),258&o[0]&&c!==(c=p("category"+(t[39]===t[8]?" selected":""))+" svelte-yiaup7")&&P(n,"class",c)},d(e){e&&C(n),u=!1,o(d)}}}function _l(t){let n,i,l,r,a,s,c,u,d,m,f,h,g=[],y=new Map,w=t[1]||[];const v=e=>e[39]||{};for(let e=0;e<w.length;e+=1){let n=Ol(t,w,e),i=v(n);y.set(i,g[e]=ql(i,n))}return{c(){n=z("div"),i=z("nav"),l=z("div"),r=A();for(let e=0;e<g.length;e+=1)g[e].c();s=A(),c=z("div"),u=A(),d=z("div"),P(l,"class","selected-category-indicator svelte-yiaup7"),U(l,"--width",t[3]+"px"),U(l,"--translateY",t[4]+"px"),P(i,"id","categories-nav"),P(i,"class",a=p("nav"+(t[9]?" hasWheel":"")+(t[13]&&t[0]?" android":""))+" svelte-yiaup7"),P(i,"aria-label","Select a category"),P(c,"class","prev-category svelte-yiaup7"),P(c,"aria-label","Select Previous Category"),P(d,"class","next-category svelte-yiaup7"),P(d,"aria-label","Select Next Category"),P(n,"class",m=p("bottom-nav-container"+(t[6]?"":" hide")+(t[5]?" immediate":"")+(t[0]?" android":""))+" svelte-yiaup7")},m(e,o){M(e,n,o),x(n,i),x(i,l),x(i,r);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(i,null);t[18](i),x(n,s),x(n,c),x(n,u),x(n,d),f||(h=[N(i,"wheel",t[19]),N(c,"click",t[20]),N(c,"keyup",t[21]),N(d,"click",t[22]),N(d,"keyup",t[23])],f=!0)},p(e,t){8&t[0]&&U(l,"--width",e[3]+"px"),16&t[0]&&U(l,"--translateY",e[4]+"px"),5506&t[0]&&(w=e[1]||[],g=Ee(g,t,v,1,e,w,y,i,xe,ql,null,Ol)),513&t[0]&&a!==(a=p("nav"+(e[9]?" hasWheel":"")+(e[13]&&e[0]?" android":""))+" svelte-yiaup7")&&P(i,"class",a),97&t[0]&&m!==(m=p("bottom-nav-container"+(e[6]?"":" hide")+(e[5]?" immediate":"")+(e[0]?" android":""))+" svelte-yiaup7")&&P(n,"class",m)},i:e,o:e,d(e){e&&C(n);for(let e=0;e<g.length;e+=1)g[e].d();t[18](null),f=!1,o(h)}}}function Yl(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y;d(e,Je,(e=>n(0,i=e))),d(e,yt,(e=>n(1,o=e))),d(e,fn,(e=>n(30,l=e))),d(e,ln,(e=>n(7,r=e))),d(e,Mt,(e=>n(31,a=e))),d(e,Jt,(e=>n(16,s=e))),d(e,un,(e=>n(32,c=e))),d(e,dn,(e=>n(33,u=e))),d(e,wt,(e=>n(8,p=e))),d(e,Zt,(e=>n(34,f=e))),d(e,tt,(e=>n(9,h=e))),d(e,tn,(e=>n(10,g=e)));let w,v,b,x,k,E,M,C,$,z=!0;function T(e,t=!0){if(!e?.target?.classList?.contains("category")){if(!o?.length)return P();clearTimeout(k),k=setTimeout((()=>{let e=o.indexOf(p);if(e<0)return;let n=e+(t?1:-1);if(n>=0&&o?.length>n){let e=o?.[n];e&&L(e)}}),8)}}function L(e){if(!o?.length)return P();clearTimeout(E),async function(e){let t,n;M===e?(M=e,$?(t=!0,$=!1):($=!0,C=setTimeout((()=>{$=!1}),500))):(clearTimeout(C),M===e&&($=!0,C=setTimeout((()=>{$=!1}),500)),M=e);n=c&&s?-9999:s?74:57;const o=document.documentElement;!i&&matchMedia("(hover:hover)").matches||(o.style.overflow="hidden",o.style.overflow="");t?s?a&&m(Mt,a.scrollLeft=0,a):window.scrollY=o.scrollTop=n:$&&(s?a&&a.scrollTo({behavior:"smooth",left:0}):window.scrollTo({top:n,behavior:"smooth"}));r&&(w.scrollTop=0)}(e),e!==p&&(m(wt,p=e,p),m(dn,u=!1,u))}st.subscribe((e=>{n(15,v=e>=document?.documentElement?.scrollHeight-window.innerHeight-1&&f?.[p]),v&&n(14,z=!0)})),window.scrollToSelectedCategory=async function(e=p){await te();let t=Array.from(y?.children||[]).find((t=>t?.dataset?.category===e&&t?.classList?.contains?.("category")));if(t instanceof Element){let e=(e=>{try{const t=window.getComputedStyle(e);let n=e.getBoundingClientRect().width;return n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n}catch{}})(t)||26;n(3,b=e),n(4,x=t?.offsetLeft+parseFloat(window.getComputedStyle?.(t,null)?.paddingLeft)+(e-b)/2);let i=t?.offsetLeft-y?.clientWidth/2+t?.offsetWidth/2;y?.scrollTo?.({left:i,behavior:"smooth"})}else n(4,x=n(3,b=-99))};let A,S,N,I=Nn("nonScrollSnapFilters")??!0;function P(){i?De("Please wait a moment"):m(fn,l="Please wait a moment",l)}if(window.showCategoriesNav=(e,t=!1)=>{t?(n(5,A=!0),n(14,z=e),S?.(),S=Be((()=>{n(5,A=!1)}),200)):(S?.(),n(5,A=!1),n(14,z=e))},i){let F,B,U,D,R;function j(){F=null}window.addEventListener("touchstart",(e=>{if(null!=F||(e?.target?.classList?.contains?.("category")??1))return;let t=e?.target,n=t,i=!0;for(;n&&n!==document.body;){if(n.scrollHeight>n.clientHeight){i=!1;break}n=n?.parentElement}if(!i)return;let o=e?.touches?.[0];B=o?.clientY,D=o?.clientX,F=o?.identifier}),{passive:!0}),window.addEventListener("touchmove",(e=>{if(null==F||null==B||!i)return;let t=Array.from(e.changedTouches)?.find((e=>e.identifier===F));if(U=t?.clientY,R=t?.clientX,"number"==typeof U&&"number"==typeof R){let e=R-D,t=U-B;0!==t&&Math.abs(t)>Math.abs(e)&&n(14,z=t>0)}}),{passive:!0}),window.addEventListener("touchend",j,{passive:!0}),window.addEventListener("touchcancel",j,{passive:!0})}W((()=>{n(2,y=y||document.getElementById("categories-nav")),w=document?.getElementById("popup-container")}));return e.$$.update=()=>{65536&e.$$.dirty[0]&&s&&n(14,z=!0),49155&e.$$.dirty[0]&&n(6,N=!!o?.length&&(!i||z||v))},[i,o,y,b,x,A,N,r,p,h,g,T,L,I,z,v,s,(e,t)=>{"Enter"===t.key&&L(e)},function(e){K[e?"unshift":"push"]((()=>{y=e,n(2,y)}))},e=>{!function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"nav")},e=>T(e,!1),e=>{"Enter"===e.key&&T(e,!1)},e=>T(e,!0),e=>{"Enter"===e.key&&T(!0)}]}function Wl(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","m144 7-2 2-1 1c-2 0-9 7-9 9l-2 2-1 1-1 2-3 5c-1 3-3 4-4 5l-1 3-1 1v1l-1 1-15 1-12 1c-11 1-12 1-18-4l-7-6-6-6-4-2s-2-1-2-3-3-2-3-2l-2-2-2-1-1-1-2-1-2-1-8-4c-3 0-7 5-6 6l-1 1v24a350 350 0 0 0 7 36c0 2-1 3-2 3v2l-1 1-3 7-1 2-3 9a61 61 0 0 0 4 30v2l2 3 3 7 1 1v1l1 2 1 1 1 1c0 1 0 2 2 3l2 4 2 2 2 2 6 7 5 7 1 1 1 1v3l4 10 1 14a75 75 0 0 0 2 19l1 4v2l2 3v2a205 205 0 0 0 15 29l1 1v1a128 128 0 0 1 11 22v1l1 1 1 1v3l1 2 2 5a480 480 0 0 1-2 93c0 1-4 6-6 6l-11 11-1 4c-2 3 0 7 8 14 1 1 2 2 1 3l1 3v1l1 2 1 2 3 3h3l1 1 4 1 2 1c0 1 16 2 19 1l2-1h2l7-5 1-1c2 0 11-10 12-13l1-2 1-1c-1-3 0-3 8-2l5 1 2 1-1 3-1 9 2 3 1 2 1 2 3 3 2 1 2 1 4 2 14 1a232 232 0 0 0 56-9l4-1 4-1h8l3 2h1l2 1a93 93 0 0 0 30-1l6-3 4-1 1-1 1-1h2l1-1 1-1 3-1 4-2h3l1-1h2l1-1h2l2-1h2l2-1h2l2-1 3-1h6c12-2 16-2 30-2a174 174 0 0 1 45 5l2 1h3l5 3 5 2 1 1 3 3 3 3 1 1 1 4c0 3-1 4-4 7l-4 3-1 1-8 4-5 2-8 2-5 2h-1l-2 1h-2l-3 1-1 1h-2l-3 1h-4l-10 2c-2 1-11 9-11 11-1 5 0 8 2 10l4 3 2 1 16 1 18-1 5-1 2-1h2l2-1h2l2-1h2l1-1h2l1-1 2-1h2l3-1 3-2h2l1-1 1-1c1 1 13-5 13-6h1l1-1 2-1 1-1h1l2-1 2-2 2-1 1-2c2 0 9-7 9-9l2-1 1-2v-1l1-1v-1l1-1v-1l1-2v-2c1-2 1-8-1-12v-1l-1-1-1-1c0-2-11-14-13-14l-2-2-2-2-2-1-5-3c-3-1-4-3-5-4l-3-1-1-1h-1l-1-1c0-1-4-3-5-2l-1-1h-1l-1-1-1-1-4-1-3-1-1-1h-1l-1-1h-2c-1 1-1 0-1-1h-2l-1-1-1-1h-2l-2-1h-2l-4-1-6-2-6-1-4-1-3-1-12-1a252 252 0 0 0-76 1v-2l1-3 1-5 1-2v-1l1-3 1-4 2-11 1-6c4-24 4-56 1-78l-1-5-1-3-1-7-1-2-1-3-1-5v-1l-1-1v-2l-1-1v-2l-1-2-1-3-1-2-1-3-1-1v-1l-1-1v-1l-1-1-2-4-3-5-1-1-1-2-1-1-1-2-1-1-1-3-2-1-9-11a68 68 0 0 0-15-12l-4-3-1-1-1-1-2-1-2-2-3-1-5-2-1-1h-1l-1-1-1-1-4-1-3-1-2-2h-3l-1-1h-2l-1-1h-2l-1-1h-2l-1-1-3-1h-3l-1-2-2-1-1-1-2-1h-1l-2-2-2-1-2-2c-1 0-10-9-10-11l-2-2-1-1-1-3a66 66 0 0 0-16-15l-1-1-2-1-1-1-3-1v-2l-1-1v-2l-1-1-1-2v-2l-2-3v-3l-1-1-1-1-4-9-2-2c-1-2-1-4 1-12a233 233 0 0 0 1-52v-2l-2-5c-2-3-3-3-6-3h-7z"),P(i,"class","svelte-nxebcy"),P(n,"viewBox","0 0 500 500"),P(n,"class","logo-icon svelte-nxebcy"),P(n,"role","button"),P(n,"aria-label","Open Menu"),P(n,"tabindex",l=e[0]&&e[10]>750?"-1":"0"),P(t,"class","logo-icon-container svelte-nxebcy")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(n,"keyup",e[28]),N(t,"pointerdown",e[15]),N(t,"pointerup",e[16]),N(t,"pointercancel",e[16])],r=!0)},p(e,t){1025&t[0]&&l!==(l=e[0]&&e[10]>750?"-1":"0")&&P(n,"tabindex",l)},d(e){e&&C(t),r=!1,o(a)}}}function Jl(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M75 75 41 41C26 26 0 37 0 58v110c0 13 11 24 24 24h110c21 0 32-26 17-41l-31-31a191 191 0 0 1 328 136 192 192 0 0 1-302 158 32 32 0 0 0-36 52A256 256 0 1 0 75 75zm181 53c-13 0-24 11-24 24v104c0 6 3 13 7 17l72 72c9 9 25 9 34 0s9-25 0-34l-65-65v-94c0-13-11-24-24-24z"),P(i,"class","svelte-nxebcy"),P(n,"viewBox","0 0 512 512"),P(n,"class","media-release-icon svelte-nxebcy"),P(n,"role","button"),P(n,"aria-label","Media Releases"),P(n,"tabindex",l=e[0]&&e[10]>750?"-1":"0"),P(t,"class","media-release-icon-container svelte-nxebcy")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(n,"keyup",e[27]),N(t,"click",e[17]),N(t,"pointerdown",e[15]),N(t,"pointerup",e[16]),N(t,"pointercancel",e[16])],r=!0)},p(e,t){1025&t[0]&&l!==(l=e[0]&&e[10]>750?"-1":"0")&&P(n,"tabindex",l)},d(e){e&&C(t),r=!1,o(a)}}}function Kl(t){let n,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,I,U,D=(t[2]||"Your Anilist Username")+"";function R(e,t){return e[9]?Jl:Wl}let j=R(t),H=j(t);return{c(){n=z("header"),i=z("nav"),l=z("div"),r=T("svg"),a=T("path"),s=A(),c=T("svg"),u=T("path"),d=A(),m=z("search"),f=z("label"),f.textContent="Anilist Username",h=A(),g=z("input"),v=A(),b=z("div"),k=L(D),E=A(),H.c(),P(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(a,"class","svelte-nxebcy"),P(r,"class","closing-x svelte-nxebcy"),P(r,"viewBox","0 0 24 24"),P(r,"tabindex","0"),P(r,"role","button"),P(r,"aria-label","Close Fixed Popup Element"),P(u,"d","M 30.047 225.832 C 17.045 238.409 17.045 259.255 30.047 271.832 L 190.047 431.832 C 207.752 449.537 237.985 441.437 244.465 417.251 C 247.473 406.026 244.264 394.049 236.047 385.832 L 130.047 280.832 L 437.047 280.832 C 461.68 280.832 477.076 254.165 464.76 232.832 C 459.043 222.931 448.479 216.832 437.047 216.832 L 130.047 216.832 L 236.047 111.832 C 253.752 94.127 245.651 63.894 221.465 57.413 C 210.241 54.406 198.264 57.615 190.047 65.832 L 30.047 225.832 Z"),P(u,"class","svelte-nxebcy"),P(c,"class","go-back svelte-nxebcy"),P(c,"tabindex","0"),P(c,"viewBox","0 0 500 500"),P(c,"role","button"),P(c,"aria-label","Cancel Username Search"),P(l,"class","go-back-container svelte-nxebcy"),P(f,"class","disable-interaction svelte-nxebcy"),P(f,"for","username-input"),P(g,"id","username-input"),P(g,"type","search"),P(g,"tabindex",y=t[0]&&t[10]>750?"-1":"0"),P(g,"enterkeyhint","search"),P(g,"autocomplete","off"),P(g,"placeholder","Your Anilist Username"),P(g,"class",w=p(t[9]?"android":"")+" svelte-nxebcy"),g.disabled=t[0],P(b,"class","username-text svelte-nxebcy"),P(m,"class","search-username svelte-nxebcy"),P(m,"aria-label","anilist username"),P(i,"id","nav"),P(i,"class",$=p("nav "+(t[6]?" popup-visible":"")+(t[5]===document?.activeElement?" input-focused":""))+" svelte-nxebcy"),P(n,"id","nav-container"),P(n,"class",S=p("nav-container"+(t[7]?" menu-visible":"")+(t[7]||t[6]||!t[8]&&(t[0]||t[1])?" delayed-full-screen-popup":""))+" svelte-nxebcy")},m(e,o){M(e,n,o),x(n,i),x(i,l),x(l,r),x(r,a),x(l,s),x(l,c),x(c,u),x(i,d),x(i,m),x(m,f),x(m,h),x(m,g),B(g,t[2]),t[24](g),x(m,v),x(m,b),x(b,k),x(i,E),H.m(i,null),t[29](i),t[30](n),I||(U=[N(r,"keyup",t[20]),N(c,"keyup",t[21]),N(l,"click",t[14]),N(g,"keyup",t[22]),N(g,"focusin",t[18]),N(g,"focusout",t[18]),N(g,"input",t[23]),N(b,"click",t[25]),N(b,"keyup",t[26]),N(n,"keyup",t[31]),N(n,"click",t[12])],I=!0)},p(e,t){1025&t[0]&&y!==(y=e[0]&&e[10]>750?"-1":"0")&&P(g,"tabindex",y),512&t[0]&&w!==(w=p(e[9]?"android":"")+" svelte-nxebcy")&&P(g,"class",w),1&t[0]&&(g.disabled=e[0]),4&t[0]&&g.value!==e[2]&&B(g,e[2]),4&t[0]&&D!==(D=(e[2]||"Your Anilist Username")+"")&&F(k,D),j===(j=R(e))&&H?H.p(e,t):(H.d(1),H=j(e),H&&(H.c(),H.m(i,null))),96&t[0]&&$!==($=p("nav "+(e[6]?" popup-visible":"")+(e[5]===document?.activeElement?" input-focused":""))+" svelte-nxebcy")&&P(i,"class",$),451&t[0]&&S!==(S=p("nav-container"+(e[7]?" menu-visible":"")+(e[7]||e[6]||!e[8]&&(e[0]||e[1])?" delayed-full-screen-popup":""))+" svelte-nxebcy")&&P(n,"class",S)},i:e,o:e,d(e){e&&C(n),t[24](null),H.d(),t[29](null),t[30](null),I=!1,o(U)}}}function Gl(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x;d(e,ln,(e=>n(0,o=e))),d(e,tn,(e=>n(1,l=e))),d(e,dt,(e=>n(38,r=e))),d(e,Je,(e=>n(9,a=e))),d(e,Mt,(e=>n(39,s=e))),d(e,Jt,(e=>n(40,c=e))),d(e,an,(e=>n(41,u=e))),d(e,fn,(e=>n(42,p=e))),d(e,It,(e=>n(43,f=e))),d(e,Bt,(e=>n(44,h=e))),d(e,St,(e=>n(45,g=e))),d(e,en,(e=>n(46,y=e))),d(e,Wt,(e=>n(47,w=e))),d(e,Yt,(e=>n(48,v=e))),d(e,qe,(e=>n(49,b=e))),d(e,lt,(e=>n(10,x=e)));let k,E,M,C,$,z,T,L,A,S,N,I="",P=!1;async function F(e,t=!1){if(a&&!0===window[b])return;if(v||!1!==w)return a?De("Please wait a moment"):m(fn,p="Please wait a moment",p),void new Promise((e=>{$={resolve:e}})).then((()=>{F(e,!0)}));let i=e.target,l=i.classList;if("Enter"===e.key||"click"===e.type&&(l.contains("searchBtn")||i?.closest?.(".searchBtn"))){if(!I)return;if(I!==r){if(!1===window.navigator?.onLine)return document?.activeElement!==C&&n(2,I=r||I||""),void(a?De("You are currently offline"):m(fn,p="You are currently offline",p));await y(`Do you${t?" still":""} want to connect to <span style="color:hsl(var(--ac-color));">${I}</span>?`)?(o||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo?.({top:-9999,behavior:"smooth"})),m(St,g="Getting User Entries",g),m(Bt,h=!0,h),Pn("username"),m(It,f[""]=new Date,f),mi({username:I}).then((({newusername:e})=>{n(2,I=e?m(dt,r=e||r||I||"",r):r||I||""),gn.update((e=>!e))})).catch((e=>{document.activeElement!==C&&n(2,I=r||I||""),a?De("Failed to retrieve user data"):m(fn,p="Failed to retrieve user data",p),m(an,u=!0,u),console.error(e)})).finally((()=>{In("username",r).catch((()=>Pn("username")))})),et.update((e=>!e))):t?n(2,I=r||""):(n(2,I=r||I||""),U())}else C?.blur?.(),n(19,P=!1)}}function B(e){if(T)return void(T=!1);let t=e.target,i=t.classList;i.contains("go-back-container")||t.closest(".go-back-container")||(i.contains("search-username")||i.contains("nav")||i.contains("nav-container")||i.contains("logo-icon")||t.closest(".logo-icon")||(l||o)&&t.closest(".search-username"))&&(!P||i.contains("logo-icon")||t.closest(".logo-icon")||(C?.blur?.(),n(19,P=!1),o||l))&&m(tn,l=!l,l)}async function U(){C?.focus?.()}function D(){C===document.activeElement||P?(C?.blur?.(),n(19,P=!1)):l?m(tn,l=!l,l):o&&m(ln,o=!1,o)}async function R(){if(a){"Notification"in window&&"denied"!==window.Notification?.permission&&await(window.Notification?.requestPermission?.());try{JSBridge.showRecentReleases()}catch(e){console.error(e)}}}function j(e){let t=e?.type,a="focusin"===t;a?window.addHistory?.():"focusout"===t&&""===I&&n(2,I=r||""),null!=N&&(a?P:!P)||(N=t??"focusout",S?.(),a?(n(19,P=!0),l||o||zi(E,"layout-change"),S=Be((()=>{zi(M,"input-focused"),Ti(E,"layout-change"),N=null}),100)):(l||o||!i||zi(E,"layout-change"),S=Be((()=>{Ti(M,"input-focused"),n(19,P=!1),Ti(E,"layout-change"),N=null}),100)))}W((()=>{n(3,E=E||document.getElementById("nav-container")),n(4,M=M||document?.getElementById("nav")),n(5,C=C||document?.getElementById("username-input")),k=k||document?.getElementById("popup-container"),dt.subscribe((e=>{n(2,I=e||I||"")})),pt.subscribe((e=>{null!=e&&document?.activeElement!==C&&n(2,I=r||I||"")}))})),Yt.subscribe((e=>{!1!==w||e||$?.resolve?.()})),Wt.subscribe((e=>{!1!==e||v||$?.resolve?.()})),ln.subscribe((e=>{e||l?(n(6,L=e),i&&(e||l)&&(zi(E,"layout-change"),Be((()=>{n(6,L=e),Ti(E,"layout-change")}),100))):(P||zi(E,"layout-change"),Be((()=>{n(6,L=e),Ti(E,"layout-change")}),100))})),tn.subscribe((e=>{e||o?(n(7,A=e),i&&(e||o)&&(zi(E,"layout-change"),Be((()=>{Ti(E,"layout-change")}),100))):(P||zi(E,"layout-change"),Be((()=>{n(7,A=e),Ti(E,"layout-change")}),100))})),window.onfocusUsernameInput=j;return e.$$.update=()=>{524291&e.$$.dirty[0]&&n(8,i=!l&&!o&&!P)},[o,l,I,E,M,C,L,A,i,a,x,F,B,U,D,function(){clearTimeout(z),z=setTimeout((()=>{T=!0,o?(k.style.overflow="hidden",k.style.overflow="",k.scroll({top:0,behavior:"smooth"})):c&&s?(m(Mt,s.style.overflow="hidden",s),m(Mt,s.style.overflow="",s),s.scroll({left:0,behavior:"smooth"})):(window.showCategoriesNav?.(!0),document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo({top:-9999,behavior:"smooth"}))}),500)},function(){clearTimeout(z),T&&(z=setTimeout((()=>{T=!1}),50))},R,j,P,e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&D(),e=>"Enter"===e.key&&F(e),function(){I=this.value,n(2,I)},function(e){K[e?"unshift":"push"]((()=>{C=e,n(5,C)}))},()=>{o||U()},e=>{"Enter"===e.key&&(o||U())},e=>{"Enter"===e.key&&(e.stopPropagation(),R())},e=>{"Enter"===e.key?(e.stopPropagation(),m(tn,l=!l,l)):"Escape"!==e.key&&e.stopPropagation()},function(e){K[e?"unshift":"push"]((()=>{M=e,n(4,M)}))},function(e){K[e?"unshift":"push"]((()=>{E=e,n(3,E)}))},e=>"Enter"===e.key&&B(e)]}const Xl=476;let Zl;async function Ql(){return Zl||(Zl=new Promise((async e=>{try{const t=window.location;if(t.protocol?.includes?.("file"))return e(Xl),void(Zl=null);const n=await fetch(new URL("version.json",t),{cache:"no-cache"}),i=await n.json();return"number"==typeof i&&!isNaN(i)&&isFinite(i)?e(i||Xl):e(Xl),void(Zl=null)}catch{return e(Xl),void(Zl=null)}})),Zl)}function er(e){let t,n,i,l,r,a,s,c,u,d,m,h,g,y,w,v,b,k,E,$,L,S,I,F,B,D,R,j,H,V,O,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ie,oe,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ve,be,xe,ke,Ee,Me,Ce,$e,ze,Te,Se,Ne,Ie,Pe,Fe,Be,Ue,De,Re,je,He,Ve,Oe,qe,_e,Ye,We,Je,Ke,Ge,Xe,Ze,Qe,et,tt,nt,it,ot,lt=e[10]&&tr(e),rt=e[10]&&ir(e),at=e[10]&&or(e),st=e[14]&&!e[10]&&(e[3]||e[4]&&"function"==typeof e[4]?.prompt)&&lr(e);return{c(){t=z("div"),n=z("div"),i=z("span"),i.textContent="LIST ACTIONS",l=A(),r=z("div"),a=z("div"),s=T("svg"),c=T("path"),u=A(),d=z("span"),d.textContent="Update Entries",m=A(),h=z("label"),g=z("input"),y=A(),w=z("span"),w.innerHTML='<div class="round-icon svelte-l5mci9"></div>',k=A(),E=z("div"),$=T("svg"),L=T("path"),S=A(),I=z("span"),I.textContent="Show All Hidden Entries",B=A(),D=z("span"),D.textContent="BACKUP AND RESTORE",R=A(),j=z("div"),H=z("div"),V=T("svg"),O=T("path"),q=A(),_=z("span"),_.textContent="Restore Backup",W=A(),J=z("div"),K=T("svg"),G=T("path"),X=A(),Z=z("span"),Z.textContent="Back Up Data",Q=A(),lt&&lt.c(),ie=A(),oe=z("span"),oe.textContent="TOOL CONFIGS",le=A(),re=z("div"),rt&&rt.c(),ae=A(),se=z("div"),ce=T("svg"),ue=T("path"),de=A(),pe=z("span"),pe.textContent="Show Status Updates",me=A(),fe=z("label"),he=z("input"),ge=A(),ve=z("span"),ve.innerHTML='<div class="round-icon svelte-l5mci9"></div>',xe=A(),ke=z("div"),Ee=T("svg"),Me=T("path"),Ce=A(),$e=z("span"),$e.textContent="Show Rate Limit",ze=A(),Te=z("label"),Se=z("input"),Ne=A(),Ie=z("span"),Ie.innerHTML='<div class="round-icon svelte-l5mci9"></div>',Fe=A(),at&&at.c(),Be=A(),Ue=z("span"),Ue.textContent="OTHERS",De=A(),Re=z("div"),st&&st.c(),je=A(),He=z("div"),Ve=T("svg"),Oe=T("path"),qe=A(),_e=z("span"),_e.textContent="Create an AniList Account",We=A(),Je=z("div"),Ke=T("svg"),Ge=T("path"),Xe=A(),Ze=z("span"),Ze.textContent="Notice!",P(i,"class","menu-category svelte-l5mci9"),P(c,"d","M464 224h8c13 0 24-11 24-24V72a24 24 0 0 0-41-17l-42 42a224 224 0 1 0 1 317 32 32 0 0 0-45-45 160 160 0 1 1-1-227l-41 41a24 24 0 0 0 17 41h120z"),P(s,"viewBox","0 0 512 512"),P(s,"class","svelte-l5mci9"),P(d,"class","option-label svelte-l5mci9"),P(g,"type","checkbox"),P(g,"class","switch-toggle svelte-l5mci9"),P(w,"class","slider round svelte-l5mci9"),P(h,"class","switch svelte-l5mci9"),P(h,"tabindex",v=e[15]?"0":"-1"),P(a,"class","option switchable svelte-l5mci9"),P(a,"tabindex",b=e[15]?"0":"-1"),P(a,"role","menuitem"),P(L,"d","M288 32c-81 0-145 37-193 81-46 43-78 95-92 131-4 8-4 16 0 24 14 36 46 88 92 131 48 44 112 81 193 81s146-37 193-81c46-43 78-95 93-131 3-8 3-16 0-24-15-36-47-88-93-131-47-44-112-81-193-81zM144 256a144 144 0 1 1 288 0 144 144 0 1 1-288 0zm144-64a64 64 0 0 1-84 61c-6-2-12 1-12 7l3 21a96 96 0 1 0 97-121c-6 0-9 6-7 12s3 13 3 20z"),P($,"viewBox","0 0 576 512"),P($,"class","svelte-l5mci9"),P(I,"class","option-label svelte-l5mci9"),P(E,"class","option svelte-l5mci9"),P(E,"tabindex",F=e[15]?"0":"-1"),P(E,"role","menuitem"),P(r,"class","menu-options svelte-l5mci9"),P(r,"role","group"),P(r,"aria-label","list actions"),P(D,"class","menu-category svelte-l5mci9"),P(O,"d","M247 9a32 32 0 0 0-46 0L73 137a32 32 0 0 0 46 46l73-74v211a32 32 0 1 0 64 0V109l73 74a32 32 0 0 0 46-46L247 9zM64 352a32 32 0 1 0-64 0v64c0 53 43 96 96 96h256c53 0 96-43 96-96v-64a32 32 0 1 0-64 0v64c0 18-14 32-32 32H96c-18 0-32-14-32-32v-64z"),P(V,"viewBox","0 0 448 512"),P(V,"class","svelte-l5mci9"),U(V,"--width","18px"),P(_,"class","option-label svelte-l5mci9"),P(H,"class","option svelte-l5mci9"),P(H,"tabindex",Y=e[15]?"0":"-1"),P(H,"role","menuitem"),P(G,"d","M288 32a32 32 0 1 0-64 0v243l-73-74a32 32 0 0 0-46 46l128 128c13 12 33 12 46 0l128-128a32 32 0 0 0-46-46l-73 74V32zM64 352c-35 0-64 29-64 64v32c0 35 29 64 64 64h384c35 0 64-29 64-64v-32c0-35-29-64-64-64H347l-46 45a64 64 0 0 1-90 0l-45-45H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"),P(K,"viewBox","0 0 512 512"),P(K,"class","svelte-l5mci9"),P(Z,"class","option-label svelte-l5mci9"),P(J,"class",ee=p("option "+(e[10]?e[9]?"export-switchable":"export":""))+" svelte-l5mci9"),P(J,"tabindex",te=e[15]?"0":"-1"),P(J,"role","menuitem"),P(j,"class","menu-options svelte-l5mci9"),P(j,"role","group"),P(j,"aria-label","backup and restore"),P(oe,"class","menu-category svelte-l5mci9"),P(ue,"d","M272 384c10-32 30-59 49-86l16-22a176 176 0 1 0-289 0c4 8 10 15 15 22 20 27 40 54 49 86h160zm-80 128c44 0 80-36 80-80v-16H112v16c0 44 36 80 80 80zm-80-336c0 9-7 16-16 16s-16-7-16-16c0-62 50-112 112-112 9 0 16 7 16 16s-7 16-16 16c-44 0-80 36-80 80z"),P(ce,"viewBox","0 0 384 512"),P(ce,"class","svelte-l5mci9"),U(ce,"--width","18px"),P(pe,"class","option-label svelte-l5mci9"),P(he,"type","checkbox"),P(he,"class","switch-toggle svelte-l5mci9"),P(ve,"class","slider round svelte-l5mci9"),P(fe,"class","switch svelte-l5mci9"),P(fe,"tabindex",be=e[15]?"0":"-1"),P(se,"class","option switchable svelte-l5mci9"),P(Me,"d","M176 0a32 32 0 1 0 0 64h16v34a208 208 0 1 0 207 93l24-24a32 32 0 0 0-46-46l-21 22c-28-23-63-39-100-45V64h16a32 32 0 1 0 0-64h-96zm72 192v128a24 24 0 1 1-48 0V192a24 24 0 1 1 48 0z"),P(Ee,"viewBox","0 0 448 512"),P(Ee,"class","svelte-l5mci9"),U(Ee,"--width","18px"),P($e,"class","option-label svelte-l5mci9"),P(Se,"type","checkbox"),P(Se,"class","switch-toggle svelte-l5mci9"),P(Ie,"class","slider round svelte-l5mci9"),P(Te,"class","switch svelte-l5mci9"),P(Te,"tabindex",Pe=e[15]?"0":"-1"),P(ke,"class","option switchable svelte-l5mci9"),P(re,"class","menu-options svelte-l5mci9"),P(re,"role","group"),P(re,"aria-label","tool configs"),P(Ue,"class","menu-category svelte-l5mci9"),P(Oe,"d","M96 128a128 128 0 1 1 256 0 128 128 0 1 1-256 0zM0 482c0-98 80-178 178-178h92c98 0 178 80 178 178 0 17-13 30-30 30H30c-17 0-30-13-30-30zm504-170v-64h-64a24 24 0 1 1 0-48h64v-64a24 24 0 1 1 48 0v64h64a24 24 0 1 1 0 48h-64v64a24 24 0 1 1-48 0z"),P(Ve,"viewBox","0 0 640 512"),P(Ve,"class","svelte-l5mci9"),P(_e,"class","option-label svelte-l5mci9"),P(He,"class","option svelte-l5mci9"),P(He,"tabindex",Ye=e[15]?"0":"-1"),P(He,"role","menuitem"),P(Ge,"d","M256 32c14 0 27 8 35 20l216 368a40 40 0 0 1-35 60H40a40 40 0 0 1-34-60L222 52c7-12 20-20 34-20zm0 128c-13 0-24 11-24 24v112a24 24 0 1 0 48 0V184c0-13-11-24-24-24zm32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0z"),P(Ke,"viewBox","0 0 512 512"),P(Ke,"class","svelte-l5mci9"),P(Ze,"class","option-label svelte-l5mci9"),P(Je,"class","option svelte-l5mci9"),P(Je,"tabindex",Qe=e[15]?"0":"-1"),P(Je,"role","menuitem"),P(Re,"class","menu-options svelte-l5mci9"),P(Re,"role","group"),P(Re,"aria-label","other option"),P(n,"class","menu svelte-l5mci9"),P(n,"role","menu"),P(t,"class","fixed-menu-container svelte-l5mci9")},m(o,p){M(o,t,p),x(t,n),x(n,i),x(n,l),x(n,r),x(r,a),x(a,s),x(s,c),x(a,u),x(a,d),x(a,m),x(a,h),x(h,g),g.checked=e[11],x(h,y),x(h,w),x(r,k),x(r,E),x(E,$),x($,L),x(E,S),x(E,I),x(n,B),x(n,D),x(n,R),x(n,j),x(j,H),x(H,V),x(V,O),x(H,q),x(H,_),x(j,W),x(j,J),x(J,K),x(K,G),x(J,X),x(J,Z),x(J,Q),lt&&lt.m(J,null),x(n,ie),x(n,oe),x(n,le),x(n,re),rt&&rt.m(re,null),x(re,ae),x(re,se),x(se,ce),x(ce,ue),x(se,de),x(se,pe),x(se,me),x(se,fe),x(fe,he),he.checked=e[7],x(fe,ge),x(fe,ve),x(re,xe),x(re,ke),x(ke,Ee),x(Ee,Me),x(ke,Ce),x(ke,$e),x(ke,ze),x(ke,Te),x(Te,Se),Se.checked=e[6],x(Te,Ne),x(Te,Ie),x(n,Fe),at&&at.m(n,null),x(n,Be),x(n,Ue),x(n,De),x(n,Re),st&&st.m(Re,null),x(Re,je),x(Re,He),x(He,Ve),x(Ve,Oe),x(He,qe),x(He,_e),x(Re,We),x(Re,Je),x(Je,Ke),x(Ke,Ge),x(Je,Xe),x(Je,Ze),nt=!0,it||(ot=[N(g,"change",e[32]),N(g,"change",e[33]),N(h,"keyup",e[34]),N(a,"click",e[19]),N(a,"keyup",e[35]),N(E,"click",e[22]),N(E,"keyup",e[36]),N(H,"click",e[37]),N(H,"keyup",e[38]),N(J,"click",e[18]),N(J,"keyup",e[43]),N(he,"change",e[47]),N(fe,"keyup",e[48]),N(se,"click",e[49]),N(se,"keyup",pr),N(Se,"change",e[50]),N(Te,"keyup",e[51]),N(ke,"click",e[52]),N(ke,"keyup",mr),N(He,"click",e[23]),N(He,"keyup",e[57]),N(Je,"keyup",e[58]),N(Je,"click",e[24]),N(n,"touchstart",e[28],{passive:!0}),N(n,"touchmove",e[29],{passive:!0}),N(n,"touchend",e[30],{passive:!0}),N(n,"touchcancel",e[31],{passive:!0}),N(n,"scroll",e[27]),f(e[21].call(null,n)),N(t,"click",e[20]),N(t,"keyup",e[59])],it=!0)},p(t,i){e=t,2048&i[0]&&(g.checked=e[11]),(!nt||32768&i[0]&&v!==(v=e[15]?"0":"-1"))&&P(h,"tabindex",v),(!nt||32768&i[0]&&b!==(b=e[15]?"0":"-1"))&&P(a,"tabindex",b),(!nt||32768&i[0]&&F!==(F=e[15]?"0":"-1"))&&P(E,"tabindex",F),(!nt||32768&i[0]&&Y!==(Y=e[15]?"0":"-1"))&&P(H,"tabindex",Y),e[10]?lt?lt.p(e,i):(lt=tr(e),lt.c(),lt.m(J,null)):lt&&(lt.d(1),lt=null),(!nt||1536&i[0]&&ee!==(ee=p("option "+(e[10]?e[9]?"export-switchable":"export":""))+" svelte-l5mci9"))&&P(J,"class",ee),(!nt||32768&i[0]&&te!==(te=e[15]?"0":"-1"))&&P(J,"tabindex",te),e[10]?rt?rt.p(e,i):(rt=ir(e),rt.c(),rt.m(re,ae)):rt&&(rt.d(1),rt=null),128&i[0]&&(he.checked=e[7]),(!nt||32768&i[0]&&be!==(be=e[15]?"0":"-1"))&&P(fe,"tabindex",be),64&i[0]&&(Se.checked=e[6]),(!nt||32768&i[0]&&Pe!==(Pe=e[15]?"0":"-1"))&&P(Te,"tabindex",Pe),e[10]?at?at.p(e,i):(at=or(e),at.c(),at.m(n,Be)):at&&(at.d(1),at=null),e[14]&&!e[10]&&(e[3]||e[4]&&"function"==typeof e[4]?.prompt)?st?st.p(e,i):(st=lr(e),st.c(),st.m(Re,je)):st&&(st.d(1),st=null),(!nt||32768&i[0]&&Ye!==(Ye=e[15]?"0":"-1"))&&P(He,"tabindex",Ye),(!nt||32768&i[0]&&Qe!==(Qe=e[15]?"0":"-1"))&&P(Je,"tabindex",Qe)},i(e){nt||(ne((()=>{nt&&(tt&&tt.end(1),et=ye(t,Ae,{duration:200,easing:Le}),et.start())})),nt=!0)},o(e){et&&et.invalidate(),tt=we(t,Ae,{duration:200,easing:Le}),nt=!1},d(e){e&&C(t),lt&&lt.d(),rt&&rt.d(),at&&at.d(),st&&st.d(),e&&tt&&tt.end(),it=!1,o(ot)}}}function tr(e){let t,n,i,l,r,a,s,c,u=e[9]&&nr(e);return{c(){t=z("div"),n=T("svg"),i=T("path"),r=A(),u&&u.c(),a=S(),P(i,"d","M89 224 0 376V96c0-35 29-64 64-64h118c17 0 33 7 45 19l26 26c12 12 29 19 46 19h117c35 0 64 29 64 64v32H144c-23 0-44 12-55 32zm27 16c6-10 17-16 28-16h400c12 0 22 6 28 16s5 22 0 32L460 464c-6 10-17 16-28 16H32c-11 0-22-6-28-16s-5-22 0-32l112-192z"),P(n,"viewBox","0 0 576 512"),P(n,"tabindex",l=e[15]?"0":"-1"),P(n,"class","svelte-l5mci9"),P(t,"class","change-folder svelte-l5mci9")},m(o,l){M(o,t,l),x(t,n),x(n,i),M(o,r,l),u&&u.m(o,l),M(o,a,l),s||(c=[N(n,"click",ur),N(n,"keyup",e[39])],s=!0)},p(e,t){32768&t[0]&&l!==(l=e[15]?"0":"-1")&&P(n,"tabindex",l),e[9]?u?u.p(e,t):(u=nr(e),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(e){e&&C(t),e&&C(r),u&&u.d(e),e&&C(a),s=!1,o(c)}}}function nr(e){let t,n,i,l,r,a,s;return{c(){t=z("label"),n=z("input"),i=A(),l=z("span"),l.innerHTML='<div class="round-icon svelte-l5mci9"></div>',P(n,"type","checkbox"),P(n,"class","switch-toggle svelte-l5mci9"),P(l,"class","slider round svelte-l5mci9"),P(t,"class","switch svelte-l5mci9"),P(t,"tabindex",r=e[15]?"0":"-1")},m(o,r){M(o,t,r),x(t,n),n.checked=e[8],x(t,i),x(t,l),a||(s=[N(n,"change",e[40]),N(n,"change",e[41]),N(t,"keyup",e[42])],a=!0)},p(e,i){256&i[0]&&(n.checked=e[8]),32768&i[0]&&r!==(r=e[15]?"0":"-1")&&P(t,"tabindex",r)},d(e){e&&C(t),a=!1,o(s)}}}function ir(e){let t,n,i,l,r,a,s,c,u,d,p,m,f;return{c(){t=z("div"),n=T("svg"),i=T("path"),l=A(),r=z("span"),r.textContent="Enable Background Updates",a=A(),s=z("label"),c=z("input"),u=A(),d=z("span"),d.innerHTML='<div class="round-icon svelte-l5mci9"></div>',P(i,"d","M309 135c7-6 9-16 6-25l-8-15-3-6-10-14c-6-8-16-10-25-7l-28 9c-10-9-23-16-36-21l-6-29c-2-9-9-17-18-18l-21-1-20 1c-10 1-17 9-19 18l-6 29c-13 5-25 12-36 21l-28-9c-9-3-19-1-25 7L16 89l-3 6-8 15c-3 9-1 19 7 25l22 20a129 129 0 0 0 0 42l-22 20c-8 6-10 16-7 25l8 15 3 6 10 14c5 8 15 10 24 7l29-9c10 9 23 16 36 21l6 29c2 9 9 17 19 18a172 172 0 0 0 40 0c10-1 17-9 19-18l6-29c13-5 25-12 36-21l28 9c9 3 19 1 25-7l10-14 3-6 8-15c3-9 0-19-7-25l-22-20a131 131 0 0 0 0-42l22-20zm-197 41a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm393 325c6 7 16 9 25 6l15-8 6-3 14-10c8-6 10-16 7-25l-9-28c9-10 16-23 21-36l29-6c9-2 17-9 18-19a172 172 0 0 0 0-40c-1-10-9-17-18-19l-29-6c-5-13-12-25-21-36l9-28c3-9 1-19-7-25l-14-10-6-3-15-8c-9-3-19 0-25 7l-20 22a131 131 0 0 0-42 0l-20-22c-6-7-16-10-25-7l-15 8-6 3-14 10c-8 6-10 16-7 25l9 28c-9 11-16 23-21 36l-29 6c-9 2-17 9-18 19a172 172 0 0 0 0 40c1 10 9 17 18 19l29 6c5 13 12 25 21 36l-9 28c-3 9-1 19 7 25l15 10 5 3 15 7c9 4 19 1 25-6l20-22a131 131 0 0 0 42 0l20 22zm-41-197a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"),P(n,"viewBox","0 0 640 512"),P(n,"class","svelte-l5mci9"),U(n,"--width","25px"),P(r,"class","option-label svelte-l5mci9"),P(c,"type","checkbox"),P(c,"class","switch-toggle svelte-l5mci9"),P(d,"class","slider round svelte-l5mci9"),P(s,"class","switch svelte-l5mci9"),P(s,"tabindex",p=e[15]?"0":"-1"),P(t,"class","option switchable svelte-l5mci9")},m(o,p){M(o,t,p),x(t,n),x(n,i),x(t,l),x(t,r),x(t,a),x(t,s),x(s,c),c.checked=e[12],x(s,u),x(s,d),m||(f=[N(c,"change",e[44]),N(s,"keyup",e[45]),N(t,"click",e[46]),N(t,"keyup",dr)],m=!0)},p(e,t){4096&t[0]&&(c.checked=e[12]),32768&t[0]&&p!==(p=e[15]?"0":"-1")&&P(s,"tabindex",p)},d(e){e&&C(t),m=!1,o(f)}}}function or(e){let t,n,i,l,r,a,s,c,u,d,p,m,f,h,g,y,w,v;return{c(){t=z("span"),t.textContent="TOOL ACTIONS",n=A(),i=z("div"),l=z("div"),r=T("svg"),a=T("path"),s=A(),c=z("span"),c.textContent="Check for Updates",d=A(),p=z("div"),m=T("svg"),f=T("path"),h=A(),g=z("span"),g.textContent="Clear Cache",P(t,"class","menu-category svelte-l5mci9"),P(a,"d","M421 302a24 24 0 1 1 24-24 24 24 0 0 1-24 24m-265 0a24 24 0 1 1 24-24 24 24 0 0 1-24 24m273-145 48-83a10 10 0 1 0-17-10l-49 84a301 301 0 0 0-246 0l-49-83a10 10 0 1 0-17 10l48 83A283 283 0 0 0 0 384h576c-8-98-64-182-147-227"),P(r,"viewBox","0 0 576 512"),P(r,"class","svelte-l5mci9"),P(c,"class","option-label svelte-l5mci9"),P(l,"class","option svelte-l5mci9"),P(l,"tabindex",u=e[15]?"0":"-1"),P(l,"role","menuitem"),P(f,"d","m135 18-7 14H32a32 32 0 1 0 0 64h384a32 32 0 1 0 0-64h-96l-7-14c-6-11-17-18-29-18H164c-12 0-23 7-29 18zm281 110H32l21 339c2 25 23 45 48 45h246c25 0 46-20 48-45l21-339z"),P(m,"viewBox","0 0 448 512"),P(m,"class","svelte-l5mci9"),U(m,"--width","17px"),P(g,"class","option-label svelte-l5mci9"),P(p,"class","option svelte-l5mci9"),P(p,"tabindex",y=e[15]?"0":"-1"),P(p,"role","menuitem"),P(i,"class","menu-options svelte-l5mci9"),P(i,"role","group"),P(i,"aria-label","tool actions")},m(o,u){M(o,t,u),M(o,n,u),M(o,i,u),x(i,l),x(l,r),x(r,a),x(l,s),x(l,c),x(i,d),x(i,p),x(p,m),x(m,f),x(p,h),x(p,g),w||(v=[N(l,"keyup",e[53]),N(l,"click",e[26]),N(p,"keyup",e[54]),N(p,"click",e[25])],w=!0)},p(e,t){32768&t[0]&&u!==(u=e[15]?"0":"-1")&&P(l,"tabindex",u),32768&t[0]&&y!==(y=e[15]?"0":"-1")&&P(p,"tabindex",y)},d(e){e&&C(t),e&&C(n),e&&C(i),w=!1,o(v)}}}function lr(e){let t,n,i,l;function r(e,t){return e[3]?ar:rr}let a=r(e),s=a(e);return{c(){t=z("div"),s.c(),P(t,"class","option svelte-l5mci9"),P(t,"tabindex",n=e[15]?"0":"-1"),P(t,"role","menuitem")},m(n,o){M(n,t,o),s.m(t,null),i||(l=[N(t,"click",e[55]),N(t,"keyup",e[56])],i=!0)},p(e,i){a!==(a=r(e))&&(s.d(1),s=a(e),s&&(s.c(),s.m(t,null))),32768&i[0]&&n!==(n=e[15]?"0":"-1")&&P(t,"tabindex",n)},d(e){e&&C(t),s.d(),i=!1,o(l)}}}function rr(e){let t,n,i,o;return{c(){t=T("svg"),n=T("path"),i=A(),o=z("span"),o.textContent="Install Web App",P(n,"d","M16 64C16 29 45 0 80 0h224c35 0 64 29 64 64v384c0 35-29 64-64 64H80c-35 0-64-29-64-64V64zm208 384a32 32 0 1 0-64 0 32 32 0 1 0 64 0zm80-384H80v320h224V64z"),P(t,"viewBox","0 0 384 512"),P(t,"class","svelte-l5mci9"),U(t,"--width","18px"),P(o,"class","option-label svelte-l5mci9")},m(e,l){M(e,t,l),x(t,n),M(e,i,l),M(e,o,l)},d(e){e&&C(t),e&&C(i),e&&C(o)}}}function ar(e){let t,n,i,o;return{c(){t=T("svg"),n=T("path"),i=A(),o=z("span"),o.textContent="Install Android App",P(n,"d","M421 302a24 24 0 1 1 24-24 24 24 0 0 1-24 24m-265 0a24 24 0 1 1 24-24 24 24 0 0 1-24 24m273-145 48-83a10 10 0 1 0-17-10l-49 84a301 301 0 0 0-246 0l-49-83a10 10 0 1 0-17 10l48 83A283 283 0 0 0 0 384h576c-8-98-64-182-147-227"),P(t,"viewBox","0 0 576 512"),P(t,"class","svelte-l5mci9"),P(o,"class","option-label svelte-l5mci9")},m(e,l){M(e,t,l),x(t,n),M(e,i,l),M(e,o,l)},d(e){e&&C(t),e&&C(i),e&&C(o)}}}function sr(e){let t,n,i,o,l,r;return{c(){t=z("div"),n=z("div"),n.innerHTML='<svg viewBox="0 0 320 512" class="svelte-l5mci9"><path d="M41 233a32 32 0 0 0 0 46l160 160a32 32 0 0 0 46-46L109 256l138-137a32 32 0 0 0-46-46L41 233z"></path></svg>',P(n,"class","go-back-grid svelte-l5mci9"),P(t,"class",i=p("go-back-grid-highlight"+(e[2]?" will-go-back":""))+" svelte-l5mci9")},m(e,i){M(e,t,i),x(t,n),r=!0},p(n,o){e=n,(!r||4&o[0]&&i!==(i=p("go-back-grid-highlight"+(e[2]?" will-go-back":""))+" svelte-l5mci9"))&&P(t,"class",i)},i(e){r||(ne((()=>{r&&(l&&l.end(1),o=ye(t,Ae,{duration:200,easing:Le}),o.start())})),r=!0)},o(e){o&&o.invalidate(),l=we(t,Ae,{duration:200,easing:Le}),r=!1},d(e){e&&C(t),e&&l&&l.end()}}}function cr(e){let t,n,i,o,l,r,a,s=e[15]&&er(e),c=e[15]&&e[1]&&sr(e);return{c(){s&&s.c(),t=A(),n=z("input"),i=A(),c&&c.c(),o=S(),P(n,"aria-hidden","true"),P(n,"type","file"),P(n,"accept",".gzip"),U(n,"display","none")},m(u,d){s&&s.m(u,d),M(u,t,d),M(u,n,d),e[60](n),M(u,i,d),c&&c.m(u,d),M(u,o,d),l=!0,r||(a=N(n,"change",e[17]),r=!0)},p(e,n){e[15]?s?(s.p(e,n),32768&n[0]&&fe(s,1)):(s=er(e),s.c(),fe(s,1),s.m(t.parentNode,t)):s&&(pe(),he(s,1,1,(()=>{s=null})),me()),e[15]&&e[1]?c?(c.p(e,n),32770&n[0]&&fe(c,1)):(c=sr(e),c.c(),fe(c,1),c.m(o.parentNode,o)):c&&(pe(),he(c,1,1,(()=>{c=null})),me())},i(e){l||(fe(s),fe(c),l=!0)},o(e){he(s),he(c),l=!1},d(l){s&&s.d(l),l&&C(t),l&&C(n),e[60](null),l&&C(i),c&&c.d(l),l&&C(o),r=!1,a()}}}function ur(){try{JSBridge.chooseExportFolder()}catch(e){console.error(e)}}const dr=()=>{},pr=()=>{},mr=()=>{};function fr(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,I,P,F,B,U,D,R,j;async function H(e){!1===k?T instanceof Element?await p("Do you want to import your backup file?")&&(n(0,T.value=null,T),T.click()):a?De("Import feature failed"):m(fn,u="Import feature failed",u):e&&Y()}async function V(e){if(a){const t=e?.target,n=t?.classList;if(n.contains("switch")||t?.closest?.(".switch")||n.contains("change-folder")||t?.closest?.(".change-folder"))return;if(!r)return ur()}if(!1!==k)return Y();await p("Do you want to back up your data?")&&gi({isManual:!0})}async function O(e){if(a&&!0===window[E])return;if(!1===window.navigator?.onLine)return void(a?De("You are currently offline"):m(fn,u="You are currently offline",u));if(!1!==k||C)return Y();const t=e?.target,n=t?.classList;if(!n.contains("switch")&&!t?.closest?.(".switch")&&await p("Do you want to update existing entries?"))if(et.update((e=>!e)),M)ci();else{try{await mi({reload:!0})}catch(e){console.error(e)}ci()}}function q(e){let t=e.target;t.classList.contains("menu")||t.closest(".menu")||m(tn,y=!y,y)}async function _(){if(!a||!0!==window[E])return!1!==k?Y():void(Cn(b)?a?De("No hidden entries were found"):m(fn,u="No hidden entries were found",u):await p("Do you want to show all your hidden entries?")&&(m(It,x[""]=new Date,x),Zn({showId:"all"}),m(Ct,b={},b),et.update((e=>!e))))}function Y(){a?De("Please wait a moment"):m(fn,u="Please wait a moment",u)}async function J(){await p({text:"Do you want to sign up an AniList account?",isImportant:!0})&&window.open("https://anilist.co/signup","_blank")}async function G(){let e=await(navigator?.storage?.persisted?.()),t="granted"===window.Notification?.permission;a?await p({isAlert:!0,title:"Possibility for Future Data Loss",text:`<div id="kanshi-show-notice">You may want to <span style='color:hsl(345deg, 75%, 60%);'>Regularly Back Up</span> your data or <span style='color:hsl(345deg, 75%, 60%);'>Enable Automatic Back Up</span> to prevent future data loss.\n\nCurrently, the storage can be <span style='color:hsl(345deg, 75%, 60%);'>Automatically Cleared by Chrome</span> when your <span style='color:hsl(345deg, 75%, 60%);'>Disk is Nearly Full.</span>\n\n<span ${e?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.navigator?.storage?.persisted?.();await window.navigator?.storage?.persist?.();window.refreshKanshiNotice?.()})()'"}>Persistent Storage Status: ${e?"<span style='color:hsl(185deg, 65%, 50%);'>Enabled</span>":"<span style='color:hsl(345deg, 75%, 60%);'>Disabled</span>"}</span></div>`}):await p({isAlert:!0,title:"Possibility for Future Data Loss",text:`<div id="kanshi-show-notice">You may want to <span style='color:hsl(345deg, 75%, 60%);'>Enable Persistent Storage</span> or <span style='color:hsl(345deg, 75%, 60%);'>Regularly Back Up</span> your data to prevent future data loss. Currently, browsers can <span style='color:hsl(345deg, 75%, 60%);'>Automatically Clear your Data</span> when your <span style='color:hsl(345deg, 75%, 60%);'>Disk is Nearly Full.</span>\n\nPersistent Storage Status: ${e?"<span style='color:hsl(185deg, 65%, 50%);'>Enabled</span>":"<span style='color:hsl(345deg, 75%, 60%);'>Disabled</span>"}\n\nTo enable persistent storage:\n\n<span ${e?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.navigator?.storage?.persisted?.();await window.navigator?.storage?.persist?.();window.refreshKanshiNotice?.()})()'"}>1) Grant permission for <span style="${e?"":"text-decoration: underline;"}${e?"color:hsl(185deg, 65%, 50%)":"color:hsl(345deg, 75%, 60%)"};">Persistent Storage</span></span>.\n2) OR Grant permission for <span ${t?"":"tabindex='0' style='cursor:pointer;' onclick='(async()=>{await window.Notification?.requestPermission?.();window.refreshKanshiNotice?.()})()'"}><span style="${t?"":"text-decoration: underline;"}${t?"color:hsl(185deg, 65%, 50%)":"color:hsl(345deg, 75%, 60%)"};">Notification</span></span>.\n3) OR Bookmark this Website.</div>`})}function X(){document.getElementById("kanshi-show-notice")&&G()}d(e,Gt,(e=>n(6,i=e))),d(e,Kt,(e=>n(7,o=e))),d(e,Ht,(e=>n(8,l=e))),d(e,jt,(e=>n(9,r=e))),d(e,Je,(e=>n(10,a=e))),d(e,Ut,(e=>n(11,s=e))),d(e,mn,(e=>n(12,c=e))),d(e,fn,(e=>n(13,u=e))),d(e,en,(e=>n(69,p=e))),d(e,Ke,(e=>n(14,f=e))),d(e,st,(e=>n(70,h=e))),d(e,ln,(e=>n(71,g=e))),d(e,tn,(e=>n(15,y=e))),d(e,Xe,(e=>n(72,w=e))),d(e,St,(e=>n(73,v=e))),d(e,Ct,(e=>n(74,b=e))),d(e,It,(e=>n(75,x=e))),d(e,Wt,(e=>n(76,k=e))),d(e,qe,(e=>n(77,E=e))),d(e,Bt,(e=>n(78,M=e))),d(e,Yt,(e=>n(79,C=e))),d(e,an,(e=>n(80,$=e))),window.importAndroidUserData=H,window.setExportPathAvailability=async(e=!0)=>{In("exportPathIsAvailable",m(jt,r=e,r)).catch((()=>Pn("exportPathIsAvailable"))).finally((()=>Sn("exportPathIsAvailable",e)))},Kt.subscribe((e=>{"boolean"==typeof e&&In("showStatus",e).catch((()=>Pn("showStatus"))).finally((()=>Sn("showStatus",e)))})),Gt.subscribe((e=>{"boolean"==typeof e&&(!e&&v?.includes?.("Rate Limit:")&&m(St,v=null,v),In("showRateLimit",e).catch((()=>Pn("showRateLimit"))).finally((()=>Sn("showRateLimit",e))))})),mn.subscribe((e=>{if("boolean"==typeof e)try{JSBridge.setKeepAppRunningInBackground(e)}catch(e){console.error(e)}})),window.setKeepAppRunningInBackground=e=>{m(mn,c=e,c)};try{window.navigator?.permissions?.query?.({name:"notifications"})?.then?.((e=>e.onchange=X)),window.navigator?.permissions?.query?.({name:"persistent-storage"})?.then?.((e=>e.onchange=X))}catch(e){}async function Z(){if(a&&await p({text:"Do you want to clear your cache?",isImportant:!0}))try{JSBridge.clearCache()}catch(e){console.error(e)}}async function Q(){if(a){if(!1===window.navigator?.onLine)return void De("You are currently offline");try{"number"==typeof w&&!isNaN(w)&&isFinite(w)||m(Xe,w=await Ql(),w),"number"==typeof w&&!isNaN(w)&&isFinite(w)&&JSBridge.checkAppID(Math.floor(w),!0)}catch(e){console.error(e)}}}window.refreshKanshiNotice=X,tn.subscribe((e=>{null==z&&(z=document.getElementById("nav-container")),e?(h<=0||g?Ti(z,"hide"):requestAnimationFrame((()=>{zi(z,"stop-transition"),zi(z,"hide"),requestAnimationFrame((()=>{Ti(z,"stop-transition"),Ti(z,"hide")}))})),window.addHistory?.()):(!g&&h>0&&zi(z,"hide"),Be((()=>{Ti(z,"hide")}),200))})),!a&&f&&(D=/android/i.test(window.navigator?.userAgent||window.navigator?.vendor||window.opera),window.addEventListener("beforeinstallprompt",(e=>{n(4,R=e)})),j=async()=>{if(await p({text:`Do you want to ${D?"install the android application for your device":"add the application to your device"}?`,isImportant:!0})){if(D)return void Ue("https://github.com/u-Kuro/Kanshi-Anime-Recommender/raw/main/Kanshi.apk","Kanshi.apk");if("function"==typeof R?.prompt)try{await R.prompt()}catch{a?De("Something went wrong"):m(fn,u="Something went wrong",u)}else a?De("Something went wrong"):m(fn,u="Something went wrong",u)}}),W((async()=>{"boolean"==typeof window.keepAppRunningInBackground&&"boolean"!=typeof c&&m(mn,c=window.keepAppRunningInBackground,c),m(Ut,s=s??await An("autoUpdate"),s),null==s&&In("autoUpdate",m(Ut,s=!0,s)).catch((()=>Pn("autoUpdate"))).finally((()=>Sn("autoUpdate",!0))),a&&(m(jt,r=r??await An("exportPathIsAvailable"),r),null==r&&In("exportPathIsAvailable",m(jt,r=!1,r)).catch((()=>Pn("exportPathIsAvailable"))).finally((()=>Sn("exportPathIsAvailable",!1))),m(Ht,l=l??await An("autoExport"),l),null==l&&In("autoExport",m(Ht,l=!1,l)).catch((()=>Pn("autoExport"))).finally((()=>Sn("autoExport",!1)))),m(Kt,o=o??await An("showStatus"),o),null==o&&In("showStatus",m(Kt,o=!0,o)).catch((()=>Pn("showStatus"))).finally((()=>Sn("showStatus",!0))),m(Gt,i=i??await An("showRateLimit"),i),null==i&&In("showRateLimit",m(Gt,i=!0,i)).catch((()=>Pn("showRateLimit"))).finally((()=>Sn("showRateLimit",!0)))}));return[T,A,U,D,R,j,i,o,l,r,a,s,c,u,f,y,H,async function(){if(a&&!0===window[E])return;if(!(T instanceof Element))return void(a?De("Failed to capture the backup file"):m(fn,u="Failed to capture the backup file",u));let e=T.files?.[0];if(e){let t=e.name,i=t?`named <span style="color:hsl(var(--ac-color));">${t}</span> `:"";await p({text:`File ${i}was found, do you want to import the file?`,isPersistent:!0})?(g||(document.documentElement.style.overflow="hidden",document.documentElement.style.overflow="",window.scrollTo?.({top:-9999,behavior:"smooth"})),m(It,x[""]=new Date,x),wi({importedFile:e}).catch((()=>{m(an,$=!0,$)})).finally((()=>{T instanceof Element&&n(0,T.value=null,T)})),et.update((e=>!e))):T instanceof Element&&n(0,T.value=null,T)}else T instanceof Element&&n(0,T.value=null,T)},V,O,q,async function(e){await te(),L=e||L,L instanceof Element?L?.scrollHeight>L?.clientHeight?zi(L,"scrollable"):Ti(L,"scrollable"):zi(L,"scrollable")},_,J,G,Z,Q,function(){let e=this;e instanceof Element||(e=menuContainer),S=null,n(2,U=N=n(1,A=!1))},function(e){I=e.touches[0].clientX,F=e.touches[0].clientY,S=e.touches[0].identifier;let t=e.target,n=!1;for(;t&&t!==document.body;){if(t.scrollWidth>t.clientWidth&&t.scrollLeft>0){n="menu"!==t.id;break}t=t.parentElement}n||(N=!0)},function(e){if(N){N=!1,P=e.touches[0].clientX,B=e.touches[0].clientY;const t=P-I,i=B-F;Math.abs(t)>Math.abs(i)&&t>0&&n(1,A=!0)}else if(A){P=e.touches[0].clientX;n(2,U=P-I>48)}},function(e){if(A){if(P=Array.from(e.changedTouches)?.find((e=>e.identifier===S))?.clientX,"number"==typeof P){A&&P-I>=48&&m(tn,y=!1,y)}S=null,n(2,U=N=n(1,A=!1))}else S=null,n(2,U=N=n(1,A=!1))},function(){S=null,n(2,U=N=n(1,A=!1))},function(){s=this.checked,Ut.set(s)},()=>{const e=(s?"Enabled":"Disabled")+" automatic update";a?De(e):m(fn,u=e,u)},e=>{if("Enter"===e.key){m(Ut,s=!s,s);const e=(s?"Enabled":"Disabled")+" automatic update";a?De(e):m(fn,u=e,u)}},e=>"Enter"===e.key&&O(e),e=>"Enter"===e.key&&_(),()=>H(!0),e=>"Enter"===e.key&&H(!0),e=>"Enter"===e.key&&ur(),function(){l=this.checked,Ht.set(l)},()=>{const e=(l?"Enabled":"Disabled")+" automatic back up";a?De(e):m(fn,u=e,u)},e=>{if("Enter"===e.key){m(Ht,l=!l,l);const e=(l?"Enabled":"Disabled")+" automatic back up";a?De(e):m(fn,u=e,u)}},e=>"Enter"===e.key&&V(e),function(){c=this.checked,mn.set(c)},e=>{"Enter"===e.key&&m(mn,c=!c,c)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(mn,c=!c,c)},function(){o=this.checked,Kt.set(o)},e=>{"Enter"===e.key&&m(Kt,o=!o,o)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(Kt,o=!o,o)},function(){i=this.checked,Gt.set(i)},e=>{"Enter"===e.key&&m(Gt,i=!i,i)},e=>{const t=e.target;t.classList.contains("switch")||t.closest(".switch")||m(Gt,i=!i,i)},e=>"Enter"===e.key&&Q(),e=>"Enter"===e.key&&Z(),()=>j?.(),e=>"Enter"===e.key&&j?.(),e=>"Enter"===e.key&&J(),e=>"Enter"===e.key&&G(),e=>"Enter"===e.key&&q(e),function(e){K[e?"unshift":"push"]((()=>{T=e,n(0,T)}))}]}function hr(e,t,n){const i=e.slice();return i[167]=t[n],i}function gr(e,t,n){const i=e.slice();i[170]=t[n].filterType,i[171]=t[n].optionName,i[172]=t[n].optionCategory,i[173]=t[n].status,i[174]=t[n].optionValue,i[178]=n;const o="Tag"===i[172]&&"All"!==i[171];i[175]=o;const l="Tag Category"===i[172]&&"All"!==i[171];return i[176]=l,i}function yr(e,t,n){const i=e.slice();return i[181]=t[n],i}function wr(e,t,n){const i=e.slice();i[184]=t[n];const o=i[184]===i[2];i[185]=o;const l=i[11][i[184]]?.bool;i[186]=l;const r=i[11][i[184]]?.number;return i[187]=r,i}function vr(e,t,n){const i=e.slice();return i[190]=t[n].name,i[191]=t[n].defaultValue,i[192]=t[n].maxValue,i[193]=t[n].minValue,i}function br(e){const t=e.slice(),n=t[184]+t[190];t[196]=n;const i="Media Filter"===t[184]?t[0]:"Algorithm Filter"===t[184]?t[10]:"Content Caution"===t[184]?t[9]:[];return t[197]=i,t}function xr(e,t,n){const i=e.slice();return i[198]=t[n],i}function kr(e){const t=e.slice(),n=t[184]+t[198];return t[201]=n,t}function Er(e,t,n){const i=e.slice();i[204]=t[n];const o=i[184]+"_"+i[204];i[205]=o;const l=i[185]&&i[204]===i[22];return i[206]=l,i}function Mr(e,t,n){const i=e.slice();return i[171]=t[n],i[214]=n,i}function Cr(e){const t=e.slice(),n=t[197]?.find?.((function(...n){return e[116](t[171],t[204],...n)}))?.status;return t[173]=n,t}function $r(e){const t=e.slice(),n="Country Of Origin"===t[204];t[209]=n;const i=t[17][t[205]]?.trim?.().replace(/[\uFF01-\uFF60\uFFE0-\uFFE6\u3000]/g,(e=>""===e?"":String.fromCharCode(e.charCodeAt(0)-65248))).normalize("NFD").replace(/[^a-zA-Z0-9\p{Lo}]/gu,"").toLowerCase();t[210]=i;const o=t[210]?t[49]?.[t[204]]?.filter?.((function(...n){return e[115](t[210],...n)})):t[49]?.[t[204]];return t[211]=o,t}function zr(e){const t=e.slice(),n="Algorithm Filter"===t[184];t[202]=n;const i=t[1][t[184]]||[];return t[203]=i,t}function Tr(e,t,n){const i=e.slice();return i[184]=t[n],i}function Lr(e,t,n){const i=e.slice();return i[217]=t[n],i}function Ar(e){let t,n,i,o,l=e[41]&&Sr(e);return{c(){t=z("div"),l&&l.c(),P(t,"class",n=p("options-wrap "+(e[3]?"":"display-none hide"))+" svelte-9ebu9g")},m(n,r){M(n,t,r),l&&l.m(t,null),i||(o=N(t,"touchend",e[61],{passive:!0}),i=!0)},p(e,i){e[41]?l?l.p(e,i):(l=Sr(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),8&i[0]&&n!==(n=p("options-wrap "+(e[3]?"":"display-none hide"))+" svelte-9ebu9g")&&P(t,"class",n)},d(e){e&&C(t),l&&l.d(),i=!1,o()}}}function Sr(e){let t,n,i,l,r,a,s,c,u,d,m,f,h=[],g=new Map,y=e[42]||[];const w=e=>e[217]||{};for(let t=0;t<y.length;t+=1){let n=Lr(e,y,t),i=w(n);g.set(i,h[t]=Nr(i,n))}return{c(){t=z("div"),n=z("div"),i=z("div"),i.textContent="Category",l=A(),r=T("svg"),a=T("path"),c=A(),u=z("div");for(let e=0;e<h.length;e+=1)h[e].c();P(i,"class","filter-title svelte-9ebu9g"),P(a,"fill","#fff"),P(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(a,"class","svelte-9ebu9g"),P(r,"viewBox","0 0 24 24"),P(r,"class","closing-x svelte-9ebu9g"),P(r,"tabindex",s=!e[46]&&!e[44]&&e[3]&&e[39]<=425?"0":"-1"),P(n,"class","header svelte-9ebu9g"),P(u,"class","options svelte-9ebu9g"),P(t,"class",d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-9ebu9g")},m(o,s){M(o,t,s),x(t,n),x(n,i),x(n,l),x(n,r),x(r,a),x(t,c),x(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);m||(f=[N(r,"keyup",e[89]),N(r,"click",e[72])],m=!0)},p(e,n){8&n[0]|41216&n[1]&&s!==(s=!e[46]&&!e[44]&&e[3]&&e[39]<=425?"0":"-1")&&P(r,"tabindex",s),2048&n[1]|2048&n[2]&&(y=e[42]||[],h=Ee(h,n,w,1,e,y,g,u,xe,Nr,null,Lr)),8&n[0]&&d!==(d=p("options-wrap-filter-info "+(e[3]?"":"hide"))+" svelte-9ebu9g")&&P(t,"class",d)},d(e){e&&C(t);for(let e=0;e<h.length;e+=1)h[e].d();m=!1,o(f)}}}function Nr(e,t){let n,i,l,r,a,s,c=(t[217].trim()||"")+"";function u(){return t[90](t[217])}function d(...e){return t[91](t[217],...e)}return{key:e,first:null,c(){n=z("div"),i=z("h3"),l=L(c),r=A(),P(i,"class","svelte-9ebu9g"),P(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,i),x(i,l),x(n,r),a||(s=[N(n,"click",u),N(n,"keyup",d)],a=!0)},p(e,n){t=e,2048&n[1]&&c!==(c=(t[217].trim()||"")+"")&&F(l,c)},d(e){e&&C(n),a=!1,o(s)}}}function Ir(e){let t,n,i,l,r,a,s,c,u,d,m,f=e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]&&Pr(e);return{c(){f&&f.c(),t=A(),n=z("div"),i=T("svg"),l=T("path"),P(l,"d",r=e[25]?"m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z":"M472 22a56 56 0 0 0-80 0l-30 30 98 98 30-30c22-22 22-58 0-80l-18-18zM172 242c-6 6-10 13-13 22l-30 88a24 24 0 0 0 31 31l89-30c8-3 15-7 21-13l168-168-98-98-168 168zM96 64c-53 0-96 43-96 96v256c0 53 43 96 96 96h256c53 0 96-43 96-96v-96a32 32 0 1 0-64 0v96c0 18-14 32-32 32H96c-18 0-32-14-32-32V160c0-18 14-32 32-32h96a32 32 0 1 0 0-64H96z"),P(l,"class","svelte-9ebu9g"),P(i,"class",a=p(e[25]?"cancel-custom-category-name":"edit-custom-category-name")+" svelte-9ebu9g"),P(i,"tabindex",s=e[46]||e[44]||!e[33]?"-1":"0"),P(i,"viewBox",c="0 0"+(e[25]?" 24 24":" 512 512")),P(n,"class","category-icon-wrap svelte-9ebu9g"),P(n,"title",u=e[25]?"Cancel Categories Editor":"Edit Categories")},m(o,r){f&&f.m(o,r),M(o,t,r),M(o,n,r),x(n,i),x(i,l),d||(m=[N(i,"click",e[94]),N(i,"keyup",e[95])],d=!0)},p(e,o){e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]?f?f.p(e,o):(f=Pr(e),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),33554432&o[0]&&r!==(r=e[25]?"m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z":"M472 22a56 56 0 0 0-80 0l-30 30 98 98 30-30c22-22 22-58 0-80l-18-18zM172 242c-6 6-10 13-13 22l-30 88a24 24 0 0 0 31 31l89-30c8-3 15-7 21-13l168-168-98-98-168 168zM96 64c-53 0-96 43-96 96v256c0 53 43 96 96 96h256c53 0 96-43 96-96v-96a32 32 0 1 0-64 0v96c0 18-14 32-32 32H96c-18 0-32-14-32-32V160c0-18 14-32 32-32h96a32 32 0 1 0 0-64H96z")&&P(l,"d",r),33554432&o[0]&&a!==(a=p(e[25]?"cancel-custom-category-name":"edit-custom-category-name")+" svelte-9ebu9g")&&P(i,"class",a),40964&o[1]&&s!==(s=e[46]||e[44]||!e[33]?"-1":"0")&&P(i,"tabindex",s),33554432&o[0]&&c!==(c="0 0"+(e[25]?" 24 24":" 512 512"))&&P(i,"viewBox",c),33554432&o[0]&&u!==(u=e[25]?"Cancel Categories Editor":"Edit Categories")&&P(n,"title",u)},d(e){f&&f.d(e),e&&C(t),e&&C(n),d=!1,o(m)}}}function Pr(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M48 96v320c0 9 7 16 16 16h320c9 0 16-7 16-16V171c0-5-2-9-5-12l34-34c12 12 19 29 19 46v245c0 35-29 64-64 64H64c-35 0-64-29-64-64V96c0-35 29-64 64-64h246c17 0 33 7 45 19l74 74-34 34-74-74-1-1v100c0 13-11 24-24 24H104c-13 0-24-11-24-24V80H64c-9 0-16 7-16 16zm80-16v80h144V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1-128 0z"),P(i,"class","svelte-9ebu9g"),P(n,"class","save-custom-category-name svelte-9ebu9g"),P(n,"tabindex",l=e[46]||e[44]?"-1":"0"),P(n,"viewBox","0 0 448 512"),P(t,"class","category-icon-wrap svelte-9ebu9g"),P(t,"title","Save Category Name")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(n,"click",e[92]),N(n,"keyup",e[93])],r=!0)},p(e,t){40960&t[1]&&l!==(l=e[46]||e[44]?"-1":"0")&&P(n,"tabindex",l)},d(e){e&&C(t),r=!1,o(a)}}}function Fr(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer-background svelte-9ebu9g"></div>',P(n,"class","skeleton shimmer svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Br(e){let t,n,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,I=(e[2]||"")+"",B=[],U=new Map,D=e[15]||[];const R=e=>e[184]||{};for(let t=0;t<D.length;t+=1){let n=Tr(e,D,t),i=R(n);U.set(i,B[t]=Ur(i,n))}return{c(){t=z("span"),n=z("h2"),i=L(I),l=A(),r=T("svg"),a=T("path"),c=A(),u=z("div"),d=z("div"),m=z("div"),f=z("div"),f.textContent="Filter",h=A(),g=T("svg"),y=T("path"),v=A(),b=z("div");for(let e=0;e<B.length;e+=1)B[e].c();P(a,"d","M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),P(a,"class","svelte-9ebu9g"),P(r,"viewBox","0 140 320 512"),P(r,"tabindex",s=e[46]||e[44]||!e[33]||e[4]?"":"0"),P(r,"class","svelte-9ebu9g"),P(n,"class","filter-category-dropdown svelte-9ebu9g"),P(f,"class","filter-title svelte-9ebu9g"),P(y,"fill","#fff"),P(y,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(y,"class","svelte-9ebu9g"),P(g,"viewBox","0 0 24 24"),P(g,"class","closing-x svelte-9ebu9g"),P(g,"tabindex",w=!e[46]&&!e[44]&&e[4]&&e[39]<=425?"0":"-1"),P(m,"class","header svelte-9ebu9g"),P(b,"class","options svelte-9ebu9g"),P(d,"class",k=p("options-wrap-filter-info"+(e[4]?"":" hide"))+" svelte-9ebu9g"),P(u,"class",E=p("options-wrap"+(e[4]?"":" display-none hide"))+" svelte-9ebu9g"),P(t,"class","filter-category svelte-9ebu9g")},m(o,s){M(o,t,s),x(t,n),x(n,i),x(n,l),x(n,r),x(r,a),x(t,c),x(t,u),x(u,d),x(d,m),x(m,f),x(m,h),x(m,g),x(g,y),x(d,v),x(d,b);for(let e=0;e<B.length;e+=1)B[e]&&B[e].m(b,null);$||(S=[N(g,"keyup",e[99]),N(g,"click",e[58]),N(u,"touchend",e[61],{passive:!0}),N(t,"click",e[58]),N(t,"keyup",e[102])],$=!0)},p(e,t){4&t[0]&&I!==(I=(e[2]||"")+"")&&F(i,I),16&t[0]|40964&t[1]&&s!==(s=e[46]||e[44]||!e[33]||e[4]?"":"0")&&P(r,"tabindex",s),16&t[0]|41216&t[1]&&w!==(w=!e[46]&&!e[44]&&e[4]&&e[39]<=425?"0":"-1")&&P(g,"tabindex",w),32768&t[0]|67108864&t[1]&&(D=e[15]||[],B=Ee(B,t,R,1,e,D,U,b,xe,Ur,null,Tr)),16&t[0]&&k!==(k=p("options-wrap-filter-info"+(e[4]?"":" hide"))+" svelte-9ebu9g")&&P(d,"class",k),16&t[0]&&E!==(E=p("options-wrap"+(e[4]?"":" display-none hide"))+" svelte-9ebu9g")&&P(u,"class",E)},d(e){e&&C(t);for(let e=0;e<B.length;e+=1)B[e].d();$=!1,o(S)}}}function Ur(e,t){let n,i,l,r,a,s,c=(t[184]||"")+"";function u(...e){return t[100](t[184],...e)}function d(...e){return t[101](t[184],...e)}return{key:e,first:null,c(){n=z("div"),i=z("h3"),l=L(c),r=A(),P(i,"class","svelte-9ebu9g"),P(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,i),x(i,l),x(n,r),a||(s=[N(n,"click",u),N(n,"keyup",d)],a=!0)},p(e,n){t=e,32768&n[0]&&c!==(c=(t[184]||"")+"")&&F(l,c)},d(e){e&&C(n),a=!1,o(s)}}}function Dr(e){let t,n,i,o=(e[39]>=300?"Error: ":e[39]>=275?"E: ":"")+go(e[30])+"%";return{c(){t=z("div"),n=L(o),P(t,"class",i=p("mean-error"+(e[47]?" loading":""))+" svelte-9ebu9g"),U(t,"--mean-error-color",!0===e[31]?"hsl(185deg,65%,50%)":!1===e[31]?"hsl(345deg,75%,60%)":"")},m(e,i){M(e,t,i),x(t,n)},p(e,l){1073741824&l[0]|256&l[1]&&o!==(o=(e[39]>=300?"Error: ":e[39]>=275?"E: ":"")+go(e[30])+"%")&&F(n,o),65536&l[1]&&i!==(i=p("mean-error"+(e[47]?" loading":""))+" svelte-9ebu9g")&&P(t,"class",i),1&l[1]&&U(t,"--mean-error-color",!0===e[31]?"hsl(185deg,65%,50%)":!1===e[31]?"hsl(345deg,75%,60%)":"")},d(e){e&&C(t)}}}function Rr(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M432 256c0 18-14 32-32 32H48a32 32 0 1 1 0-64h352c18 0 32 14 32 32z"),P(i,"class","svelte-9ebu9g"),P(n,"class","filter-category-wrap-icon svelte-9ebu9g"),P(n,"viewBox","0 0 448 512"),P(t,"tabindex",l=e[46]||e[44]?"":"0"),P(t,"class","remove-custom-category svelte-9ebu9g"),P(t,"title","Delete Category"),U(t,"visibility",e[42]?.length>1?"":"hidden")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(t,"click",e[103]),N(t,"keyup",e[104])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&P(t,"tabindex",l),2048&n[1]&&U(t,"visibility",e[42]?.length>1?"":"hidden")},d(e){e&&C(t),r=!1,o(a)}}}function jr(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M256 80a32 32 0 1 0-64 0v144H48a32 32 0 1 0 0 64h144v144a32 32 0 1 0 64 0V288h144a32 32 0 1 0 0-64H256V80z"),P(i,"class","svelte-9ebu9g"),P(n,"class","filter-category-wrap-icon svelte-9ebu9g"),P(n,"viewBox","0 0 448 512"),P(t,"tabindex",l=e[46]||e[44]?"":"0"),P(t,"class","add-custom-category svelte-9ebu9g"),P(t,"title","Add Custom Category")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(t,"click",e[105]),N(t,"keyup",e[106])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&P(t,"tabindex",l)},d(e){e&&C(t),r=!1,o(a)}}}function Hr(e){let t,n=[],i=new Map,o=e[15]||[];const l=e=>e[184]||{};for(let t=0;t<o.length;t+=1){let r=wr(e,o,t),a=l(r);i.set(a,n[t]=da(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);M(e,t,i)},p(e,r){1020173959&r[0]|1929687812&r[1]|229383&r[2]&&(o=e[15]||[],n=Ee(n,r,l,1,e,o,i,t.parentNode,xe,da,t,wr))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function Vr(e){let t,n=[],i=new Map,o=e[203]||[];const l=e=>e[184]+e[204]||{};for(let t=0;t<o.length;t+=1){let r=Er(e,o,t),a=l(r);i.set(a,n[t]=la(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);M(e,t,i)},p(e,r){12752391&r[0]|1896129284&r[1]|229377&r[2]&&(o=e[203]||[],n=Ee(n,r,l,1,e,o,i,t.parentNode,xe,la,t,Er))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function Or(t){let n,i;return{c(){n=T("svg"),i=T("path"),P(i,"d","M201 343c13 12 33 12 46 0l160-160a32 32 0 0 0-46-46L224 275 87 137a32 32 0 0 0-46 46l160 160z"),P(i,"class","svelte-9ebu9g"),P(n,"class","angle-down svelte-9ebu9g"),P(n,"viewBox","0 0 512 512")},m(e,t){M(e,n,t),x(n,i)},p:e,d(e){e&&C(n)}}}function qr(t){let n,i,l,r;return{c(){n=T("svg"),i=T("path"),P(i,"d","M201 137c13-12 33-12 46 0l160 160a32 32 0 0 1-46 46L224 205 87 343a32 32 0 0 1-46-46l160-160z"),P(i,"class","svelte-9ebu9g"),P(n,"class","angle-up svelte-9ebu9g"),P(n,"viewBox","0 0 512 512")},m(e,o){M(e,n,o),x(n,i),l||(r=[N(n,"keyup",t[109]),N(n,"click",t[60])],l=!0)},p:e,d(e){e&&C(n),l=!1,o(r)}}}function _r(e){let t;function n(e,t){return e[211]?.length?Wr:Yr}function i(e,t){return t===Wr?function(e){const t=e.slice(),n="Media Filter"===t[184]&&t[12].readOnly[t[204]];t[212]=n;const i="Media Filter"===t[184]?t[0]:"Algorithm Filter"===t[184]?t[10]:"Content Caution"===t[184]?t[9]:[];return t[197]=i,t}(e):e}let o=n(e),l=o(i(e,o));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){o===(o=n(e))&&l?l.p(i(e,o),r):(l.d(1),l=o(i(e,o)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function Yr(t){let n;return{c(){n=z("div"),n.innerHTML='<h3 class="svelte-9ebu9g">No Results</h3>',P(n,"class","option svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Wr(e){let t,n=[],i=new Map,o=e[211]||[];const l=e=>e[171]||{};for(let t=0;t<o.length;t+=1){let r=Mr(e,o,t),a=l(r);i.set(a,n[t]=oa(a,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=S()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);M(e,t,i)},p(e,r){8558083&r[0]|17039872&r[1]|229377&r[2]&&(o=e[211]||[],n=Ee(n,r,l,1,e,o,i,t.parentNode,xe,oa,t,Mr))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&C(t)}}}function Jr(e){let t,n;function i(...t){return e[117](e[214],...t)}let o={ctx:e,current:null,token:null,hasCatch:!1,pending:ia,then:Gr,catch:Kr};return be(n=e[23]?1:new Promise(i),o),{c(){t=S(),o.block.c()},m(e,n){M(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t},p(t,l){e=t,o.ctx=e,8552450&l[0]|262144&l[1]&&n!==(n=e[23]?1:new Promise(i))&&be(n,o)||function(e,t,n){const i=t.slice(),{resolved:o}=e;e.current===e.then&&(i[e.value]=o),e.current===e.catch&&(i[e.error]=o),e.block.p(i,n)}(o,e,l)},d(e){e&&C(t),o.block.d(e),o.token=null,o=null}}}function Kr(t){return{c:e,m:e,p:e,d:e}}function Gr(e){let t,n,i,r,a,s,c,u,d="function"==typeof window.showFullScreenInfo&&("Tag"===e[204]&&e[77]({tag:e[171]},"category and description")||"Tag Category"===e[204]&&!Cn(e[40]?.[e[171]]));function p(e,t){return e[209]?Zr:Xr}function m(e,t){return t===Zr?function(e){const t=e.slice(),n=t[171]?.toUpperCase?.();t[179]=n;const i=t[55][t[179]];return t[180]=i,t}(e):e}let f=p(e),h=f(m(e,f)),g=("included"===e[173]||"excluded"===e[173]&&!e[212])&&ta(e),y=d&&na(e);function w(...t){return e[120](e[171],e[204],e[184],e[212],...t)}return{c(){t=z("div"),n=z("h3"),h.c(),i=A(),g&&g.c(),r=A(),y&&y.c(),s=A(),P(n,"class","svelte-9ebu9g"),P(t,"title",a=e[77]("Tag Category"===e[204]?{category:e[171]}:"Tag"===e[204]?{tag:e[171]}:{},"Tag Category"===e[204]?"all tags":"Tag"===e[204]?"category and description":"")),P(t,"class","option svelte-9ebu9g")},m(o,a){M(o,t,a),x(t,n),h.m(n,null),x(t,i),g&&g.m(t,null),x(t,r),y&&y.m(t,null),M(o,s,a),c||(u=[N(t,"click",(function(){l(e[62](e[171],e[204],e[184],e[212]))&&e[62](e[171],e[204],e[184],e[212]).apply(this,arguments)})),N(t,"keyup",w)],c=!0)},p(i,o){f===(f=p(e=i))&&h?h.p(m(e,f),o):(h.d(1),h=f(m(e,f)),h&&(h.c(),h.m(n,null))),"included"===e[173]||"excluded"===e[173]&&!e[212]?g?g.p(e,o):(g=ta(e),g.c(),g.m(t,r)):g&&(g.d(1),g=null),163842&o[0]|262656&o[1]&&(d="function"==typeof window.showFullScreenInfo&&("Tag"===e[204]&&e[77]({tag:e[171]},"category and description")||"Tag Category"===e[204]&&!Cn(e[40]?.[e[171]]))),d?y?y.p(e,o):(y=na(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null),163842&o[0]|262144&o[1]&&a!==(a=e[77]("Tag Category"===e[204]?{category:e[171]}:"Tag"===e[204]?{tag:e[171]}:{},"Tag Category"===e[204]?"all tags":"Tag"===e[204]?"category and description":""))&&P(t,"title",a)},d(e){e&&C(t),h.d(),g&&g.d(),y&&y.d(),e&&C(s),c=!1,o(u)}}}function Xr(e){let t,n=(e[171]||"")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){163842&i[0]|262144&i[1]&&n!==(n=(e[171]||"")+"")&&F(t,n)},d(e){e&&C(t)}}}function Zr(e){let t;function n(e,t){return e[180]?ea:Qr}let i=n(e),o=i(e);return{c(){o.c(),t=S()},m(e,n){o.m(e,n),M(e,t,n)},p(e,l){i===(i=n(e))&&o?o.p(e,l):(o.d(1),o=i(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&C(t)}}}function Qr(e){let t,n=(e[179]||e[171]||"")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){163842&i[0]|262144&i[1]&&n!==(n=(e[179]||e[171]||"")+"")&&F(t,n)},d(e){e&&C(t)}}}function ea(e){let t,n=`${e[180]} (${e[179]})`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){163842&i[0]|262144&i[1]&&n!==(n=`${e[180]} (${e[179]})`)&&F(t,n)},d(e){e&&C(t)}}}function ta(e){let t,n,i;return{c(){t=T("svg"),n=T("path"),P(n,"class","item-info-path svelte-9ebu9g"),P(n,"d",i="excluded"===e[173]||"Content Caution"===e[184]?"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-81-337c-9 9-9 25 0 34l47 47-47 47c-9 9-9 24 0 34s25 9 34 0l47-47 47 47c9 9 24 9 34 0s9-25 0-34l-47-47 47-47c9-10 9-25 0-34s-25-9-34 0l-47 47-47-47c-10-9-25-9-34 0z":"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303c9-9 9-25 0-34s-25-9-34 0L224 286l-47-47c-9-9-24-9-34 0s-9 25 0 34l64 64c10 9 25 9 34 0l128-128z"),P(t,"class","item-info svelte-9ebu9g"),P(t,"viewBox","0 0 512 512"),U(t,"--option-color","included"===e[173]?"#5f9ea0":"#e85d75")},m(e,i){M(e,t,i),x(t,n)},p(e,o){165379&o[0]|262144&o[1]&&i!==(i="excluded"===e[173]||"Content Caution"===e[184]?"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-81-337c-9 9-9 25 0 34l47 47-47 47c-9 9-9 24 0 34s25 9 34 0l47-47 47 47c9 9 24 9 34 0s9-25 0-34l-47-47 47-47c9-10 9-25 0-34s-25-9-34 0l-47 47-47-47c-10-9-25-9-34 0z":"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303c9-9 9-25 0-34s-25-9-34 0L224 286l-47-47c-9-9-24-9-34 0s-9 25 0 34l64 64c10 9 25 9 34 0l128-128z")&&P(n,"d",i),165379&o[0]|262144&o[1]&&U(t,"--option-color","included"===e[173]?"#5f9ea0":"#e85d75")},d(e){e&&C(t)}}}function na(e){let t,n,i,l;function r(){return e[118](e[204],e[171])}function a(...t){return e[119](e[204],e[171],...t)}return{c(){t=T("svg"),n=T("path"),P(n,"class","item-info-path svelte-9ebu9g"),P(n,"d","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-40-176h24v-64h-24a24 24 0 1 1 0-48h48c13 0 24 11 24 24v88h8a24 24 0 1 1 0 48h-80a24 24 0 1 1 0-48zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"),P(t,"class","extra-item-info svelte-9ebu9g"),P(t,"viewBox","0 0 512 512")},m(e,o){M(e,t,o),x(t,n),i||(l=[N(t,"click",I(r)),N(t,"keyup",I(a))],i=!0)},p(t,n){e=t},d(e){e&&C(t),i=!1,o(l)}}}function ia(t){let n;return{c(){n=L("")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function oa(e,t){let n,i,o=(t[202]||"All"!==t[171])&&Jr(Cr(t));return{key:e,first:null,c(){n=S(),o&&o.c(),i=S(),this.first=n},m(e,t){M(e,n,t),o&&o.m(e,t),M(e,i,t)},p(e,n){(t=e)[202]||"All"!==t[171]?o?o.p(Cr(t),n):(o=Jr(Cr(t)),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(e){e&&C(n),o&&o.d(e),e&&C(i)}}}function la(e,t){let n,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,U,D,R,j,H,V,O,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,ie,oe,le,re=(t[204]||"")+"",ae=t[205]+"",se=(t[204]||"")+"",ce="Search "+t[205];function ue(){t[107].call(h,t[205])}function de(e,t){return e[206]?qr:Or}let pe=de(t),me=pe(t);function fe(...e){return t[110](t[204],...e)}function he(...e){return t[111](t[204],...e)}function ge(){t[113].call(J,t[205])}let ye=t[206]&&_r($r(t));return{key:e,first:null,c(){n=z("div"),i=z("div"),l=z("h2"),r=L(re),a=A(),s=z("div"),c=z("div"),u=z("label"),d=L(ae),f=A(),h=z("input"),v=A(),me.c(),k=A(),E=z("div"),$=z("div"),S=z("div"),U=z("div"),D=L(se),R=A(),j=T("svg"),H=T("path"),O=A(),q=z("label"),_=L(ce),W=A(),J=z("input"),Z=A(),Q=z("div"),ye&&ye.c(),ne=A(),P(l,"class","svelte-9ebu9g"),P(i,"class","filter-name svelte-9ebu9g"),P(u,"class","disable-interaction svelte-9ebu9g"),P(u,"for",m=t[205]),P(h,"tabindex",g=t[46]||t[44]||!t[33]?"-1":"0"),P(h,"id",y=t[205]),P(h,"placeholder","Any"),P(h,"type","search"),P(h,"enterkeyhint","search"),P(h,"autocomplete","off"),P(h,"class","value-input svelte-9ebu9g"),h.disabled=w=!t[33]||t[39]<=425||!t[185],P(c,"class","value-wrap svelte-9ebu9g"),P(s,"class","select svelte-9ebu9g"),P(s,"tabindex",b=!t[46]&&!t[44]&&t[33]&&t[39]<=425&&t[185]?"0":"-1"),P(U,"class","filter-title svelte-9ebu9g"),P(H,"fill","#fff"),P(H,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(H,"class","svelte-9ebu9g"),P(j,"viewBox","0 0 24 24"),P(j,"class","closing-x svelte-9ebu9g"),P(j,"tabindex",V=!t[46]&&!t[44]&&t[33]&&t[206]?"0":"-1"),P(S,"class","header svelte-9ebu9g"),P(q,"class","disable-interaction svelte-9ebu9g"),P(q,"for",Y="Search "+t[205]),P(J,"tabindex",K=t[46]||t[44]||!t[33]?"-1":"0"),P(J,"id",G="Search "+t[205]),P(J,"placeholder","Any"),P(J,"type","search"),P(J,"enterkeyhint","search"),P(J,"autocomplete","off"),J.disabled=X=!t[33]||!t[185]||!t[206],P(J,"class","svelte-9ebu9g"),P(Q,"class","options svelte-9ebu9g"),P($,"class",ee=p("options-wrap-filter-info"+(t[206]?"":" hide"))+" svelte-9ebu9g"),P(E,"class",te=p("options-wrap"+(t[206]?"":" display-none hide"))+" svelte-9ebu9g"),P(n,"class",ie=p("filter-select"+(t[185]?"":" display-none"))+" svelte-9ebu9g"),this.first=n},m(e,o){M(e,n,o),x(n,i),x(i,l),x(l,r),x(n,a),x(n,s),x(s,c),x(c,u),x(u,d),x(c,f),x(c,h),B(h,t[17][t[205]]),x(s,v),me.m(s,null),x(n,k),x(n,E),x(E,$),x($,S),x(S,U),x(U,D),x(S,R),x(S,j),x(j,H),x($,O),x($,q),x(q,_),x($,W),x($,J),B(J,t[17][t[205]]),x($,Z),x($,Q),ye&&ye.m(Q,null),x(n,ne),oe||(le=[N(h,"input",ue),N(h,"focusin",t[108]),N(s,"keyup",fe),N(s,"click",he),N(j,"keyup",t[112]),N(j,"click",t[60]),N(J,"input",ge),N(J,"focusin",t[114]),N(Q,"wheel",I(Sa),{passive:!0}),N(E,"wheel",I(Na),{passive:!0}),N(E,"touchend",t[61],{passive:!0})],oe=!0)},p(e,i){t=e,32770&i[0]&&re!==(re=(t[204]||"")+"")&&F(r,re),32770&i[0]&&ae!==(ae=t[205]+"")&&F(d,ae),32770&i[0]&&m!==(m=t[205])&&P(u,"for",m),40964&i[1]&&g!==(g=t[46]||t[44]||!t[33]?"-1":"0")&&P(h,"tabindex",g),32770&i[0]&&y!==(y=t[205])&&P(h,"id",y),32772&i[0]|260&i[1]&&w!==(w=!t[33]||t[39]<=425||!t[185])&&(h.disabled=w),163842&i[0]&&h.value!==t[17][t[205]]&&B(h,t[17][t[205]]),pe===(pe=de(t))&&me?me.p(t,i):(me.d(1),me=pe(t),me&&(me.c(),me.m(s,null))),32772&i[0]|41220&i[1]&&b!==(b=!t[46]&&!t[44]&&t[33]&&t[39]<=425&&t[185]?"0":"-1")&&P(s,"tabindex",b),32770&i[0]&&se!==(se=(t[204]||"")+"")&&F(D,se),4227078&i[0]|40964&i[1]&&V!==(V=!t[46]&&!t[44]&&t[33]&&t[206]?"0":"-1")&&P(j,"tabindex",V),32770&i[0]&&ce!==(ce="Search "+t[205])&&F(_,ce),32770&i[0]&&Y!==(Y="Search "+t[205])&&P(q,"for",Y),40964&i[1]&&K!==(K=t[46]||t[44]||!t[33]?"-1":"0")&&P(J,"tabindex",K),32770&i[0]&&G!==(G="Search "+t[205])&&P(J,"id",G),4227078&i[0]|4&i[1]&&X!==(X=!t[33]||!t[185]||!t[206])&&(J.disabled=X),163842&i[0]&&J.value!==t[17][t[205]]&&B(J,t[17][t[205]]),t[206]?ye?ye.p($r(t),i):(ye=_r($r(t)),ye.c(),ye.m(Q,null)):ye&&(ye.d(1),ye=null),4227078&i[0]&&ee!==(ee=p("options-wrap-filter-info"+(t[206]?"":" hide"))+" svelte-9ebu9g")&&P($,"class",ee),4227078&i[0]&&te!==(te=p("options-wrap"+(t[206]?"":" display-none hide"))+" svelte-9ebu9g")&&P(E,"class",te),32772&i[0]&&ie!==(ie=p("filter-select"+(t[185]?"":" display-none"))+" svelte-9ebu9g")&&P(n,"class",ie)},d(e){e&&C(n),me.d(),ye&&ye.d(),oe=!1,o(le)}}}function ra(e){let t,n,i,l,r,a,s,c,u,d,p,m,f,h,g,y,w,v,b=e[201]+"",k=(e[198]||"")+"";function E(...t){return e[121](e[198],e[184],...t)}function $(){e[122].call(u,e[201])}function T(...t){return e[123](e[198],e[184],...t)}function S(...t){return e[124](e[198],e[184],...t)}return{c(){t=z("div"),n=z("div"),i=A(),l=z("div"),r=z("label"),a=L(b),c=A(),u=z("input"),f=A(),h=z("div"),g=L(k),y=A(),P(n,"class","svelte-9ebu9g"),U(n,"visibility","none"),P(r,"class","disable-interaction svelte-9ebu9g"),P(r,"for",s="Checkbox: "+e[201]),P(u,"tabindex",d=e[46]||e[44]||!e[33]?"-1":"0"),P(u,"id",p="Checkbox: "+e[201]),P(u,"type","checkbox"),P(u,"class","filter-bool svelte-9ebu9g"),u.disabled=m=!e[33]||e[43],P(h,"class","filter-bool-label svelte-9ebu9g"),P(l,"class","filter-bool-wrap svelte-9ebu9g"),P(t,"class","filter-bool-container svelte-9ebu9g")},m(o,s){M(o,t,s),x(t,n),x(t,i),x(t,l),x(l,r),x(r,a),x(l,c),x(l,u),u.checked=e[19][e[201]],x(l,f),x(l,h),x(h,g),x(t,y),w||(v=[N(u,"change",E),N(u,"change",$),N(l,"click",T),N(l,"keyup",S)],w=!0)},p(t,n){e=t,34816&n[0]&&b!==(b=e[201]+"")&&F(a,b),34816&n[0]&&s!==(s="Checkbox: "+e[201])&&P(r,"for",s),40964&n[1]&&d!==(d=e[46]||e[44]||!e[33]?"-1":"0")&&P(u,"tabindex",d),34816&n[0]&&p!==(p="Checkbox: "+e[201])&&P(u,"id",p),4100&n[1]&&m!==(m=!e[33]||e[43])&&(u.disabled=m),559104&n[0]&&(u.checked=e[19][e[201]]),34816&n[0]&&k!==(k=(e[198]||"")+"")&&F(g,k)},d(e){e&&C(t),w=!1,o(v)}}}function aa(e,t){let n,i,o=t[185]&&null!=t[19][t[184]+t[198]]&&ra(kr(t));return{key:e,first:null,c(){n=S(),o&&o.c(),i=S(),this.first=n},m(e,t){M(e,n,t),o&&o.m(e,t),M(e,i,t)},p(e,n){(t=e)[185]&&null!=t[19][t[184]+t[198]]?o?o.p(kr(t),n):(o=ra(kr(t)),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(e){e&&C(n),o&&o.d(e),e&&C(i)}}}function sa(e){let t,n,i,o,l,a,s,c,u,d,p,m=(e[190]||"")+"",f="Number Filter: "+e[196],h=e[7]+e[33]+(e[197]instanceof Array?1:0),g=ca(e);return{c(){t=z("div"),n=z("div"),i=z("h2"),o=L(m),l=A(),a=z("div"),s=z("label"),c=L(f),d=A(),g.c(),p=A(),P(i,"class","svelte-9ebu9g"),P(n,"class","filter-input-number-name svelte-9ebu9g"),P(s,"class","disable-interaction svelte-9ebu9g"),P(s,"for",u="Number Filter: "+e[196]),P(a,"class","value-input-number-wrap svelte-9ebu9g"),P(t,"class","filter-input-number svelte-9ebu9g"),U(t,"display",e[185]?"":"none")},m(e,r){M(e,t,r),x(t,n),x(n,i),x(i,o),x(t,l),x(t,a),x(a,s),x(s,c),x(a,d),g.m(a,null),x(t,p)},p(e,n){34816&n[0]&&m!==(m=(e[190]||"")+"")&&F(o,m),34816&n[0]&&f!==(f="Number Filter: "+e[196])&&F(c,f),34816&n[0]&&u!==(u="Number Filter: "+e[196])&&P(s,"for",u),34433&n[0]|4&n[1]&&r(h,h=e[7]+e[33]+(e[197]instanceof Array?1:0))?(g.d(1),g=ca(e),g.c(),g.m(a,null)):g.p(e,n),32772&n[0]&&U(t,"display",e[185]?"":"none")},d(e){e&&C(t),g.d(e)}}}function ca(e){let t,n,i,r,a,s,c,u;function d(...t){return e[126](e[190],...t)}function p(...t){return e[127](e[196],e[197],e[190],e[192],e[193],e[184],...t)}return{c(){t=z("input"),P(t,"tabindex",n=e[46]||e[44]||!e[33]?"-1":"0"),P(t,"id",i="Number Filter: "+e[196]),P(t,"class","value-input-number svelte-9ebu9g"),P(t,"type","text"),P(t,"placeholder",r="Scoring System"===e[190]?"Default: User Scoring":("Average Score"===e[190]||"Min Average Score"===e[190])&&"number"==typeof e[26]&&e[26]>0?"Average: "+go(e[26]):"Popularity"===e[190]&&("number"==typeof e[27]&&e[27]>0||"number"==typeof e[28]&&e[28]>0||"number"==typeof e[29]&&e[29]>0)?[e[27],e[28],e[29]].map(e[125]).join(" | "):"Min Anime Popularity"===e[190]&&"number"==typeof e[27]&&e[27]>0?"Average: "+go(e[27],e[27]>=1e3?1:0):"Min Manga Popularity"===e[190]&&"number"==typeof e[28]&&e[28]>0?"Average: "+go(e[28],e[28]>=1e3?1:0):"Min Novel Popularity"===e[190]&&"number"==typeof e[29]&&e[29]>0?"Average: "+go(e[29],e[29]>=1e3?1:0):null!=e[191]?"Default: "+e[191]:e[56].includes(e[190])?">123 or 123":"123"),t.disabled=a=!e[33]||e[43]},m(n,i){M(n,t,i),c||(u=[f(s=Aa.call(null,t,e[197]?.find?.(d)?.optionValue)),N(t,"input",p),N(t,"focusin",e[128])],c=!0)},p(o,c){e=o,40964&c[1]&&n!==(n=e[46]||e[44]||!e[33]?"-1":"0")&&P(t,"tabindex",n),34816&c[0]&&i!==(i="Number Filter: "+e[196])&&P(t,"id",i),1006667776&c[0]&&r!==(r="Scoring System"===e[190]?"Default: User Scoring":("Average Score"===e[190]||"Min Average Score"===e[190])&&"number"==typeof e[26]&&e[26]>0?"Average: "+go(e[26]):"Popularity"===e[190]&&("number"==typeof e[27]&&e[27]>0||"number"==typeof e[28]&&e[28]>0||"number"==typeof e[29]&&e[29]>0)?[e[27],e[28],e[29]].map(e[125]).join(" | "):"Min Anime Popularity"===e[190]&&"number"==typeof e[27]&&e[27]>0?"Average: "+go(e[27],e[27]>=1e3?1:0):"Min Manga Popularity"===e[190]&&"number"==typeof e[28]&&e[28]>0?"Average: "+go(e[28],e[28]>=1e3?1:0):"Min Novel Popularity"===e[190]&&"number"==typeof e[29]&&e[29]>0?"Average: "+go(e[29],e[29]>=1e3?1:0):null!=e[191]?"Default: "+e[191]:e[56].includes(e[190])?">123 or 123":"123")&&P(t,"placeholder",r),4100&c[1]&&a!==(a=!e[33]||e[43])&&(t.disabled=a),s&&l(s.update)&&36353&c[0]&&s.update.call(null,e[197]?.find?.(d)?.optionValue)},d(e){e&&C(t),c=!1,o(u)}}}function ua(e,t){let n,i,o=t[185]&&sa(br(t));return{key:e,first:null,c(){n=S(),o&&o.c(),i=S(),this.first=n},m(e,t){M(e,n,t),o&&o.m(e,t),M(e,i,t)},p(e,n){(t=e)[185]?o?o.p(br(t),n):(o=sa(br(t)),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(e){e&&C(n),o&&o.d(e),e&&C(i)}}}function da(e,t){let n,i,o,l,r=[],a=new Map,s=[],c=new Map,u=t[49]&&t[1]&&Vr(zr(t)),d=t[186]||[];const p=e=>e[184]+e[198]||{};for(let e=0;e<d.length;e+=1){let n=xr(t,d,e),i=p(n);a.set(i,r[e]=aa(i,n))}let m=t[187]||[];const f=e=>e[184]+e[190]||{};for(let e=0;e<m.length;e+=1){let n=vr(t,m,e),i=f(n);c.set(i,s[e]=ua(i,n))}return{key:e,first:null,c(){n=S(),u&&u.c(),i=A();for(let e=0;e<r.length;e+=1)r[e].c();o=A();for(let e=0;e<s.length;e+=1)s[e].c();l=S(),this.first=n},m(e,t){M(e,n,t),u&&u.m(e,t),M(e,i,t);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,t);M(e,o,t);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,t);M(e,l,t)},p(e,n){(t=e)[49]&&t[1]?u?u.p(zr(t),n):(u=Vr(zr(t)),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),559108&n[0]|45060&n[1]|2&n[2]&&(d=t[186]||[],r=Ee(r,n,p,1,t,d,a,o.parentNode,xe,aa,o,xr)),1006931589&n[0]|33599492&n[1]|4&n[2]&&(m=t[187]||[],s=Ee(s,n,f,1,t,m,c,l.parentNode,xe,ua,l,vr))},d(e){e&&C(n),u&&u.d(e),e&&C(i);for(let t=0;t<r.length;t+=1)r[t].d(e);e&&C(o);for(let t=0;t<s.length;t+=1)s[t].d(e);e&&C(l)}}}function pa(t){let n,i=Array(10),o=[];for(let e=0;e<i.length;e+=1)o[e]=ma(yr(t,i,e));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();n=S()},m(e,t){for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(e,t);M(e,n,t)},p:e,d(e){$(o,e),e&&C(n)}}}function ma(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="filter-name skeleton shimmer svelte-9ebu9g"><div class="shimmer-background svelte-9ebu9g"></div></div> \n                    <div class="select skeleton shimmer svelte-9ebu9g"><div class="shimmer-background svelte-9ebu9g"></div></div> \n                ',P(n,"class","filter-select svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function fa(e){let t,n,i=(e[171]||"")+"";return{c(){t=z("h3"),n=L(i),P(t,"class","svelte-9ebu9g")},m(e,i){M(e,t,i),x(t,n)},p(e,t){65536&t[0]&&i!==(i=(e[171]||"")+"")&&F(n,i)},d(e){e&&C(t)}}}function ha(e){let t;function n(e,t){return"Country Of Origin"===e[172]?wa:ya}function i(e,t){return t===wa?function(e){const t=e.slice(),n=t[171]?.toUpperCase?.();t[179]=n;const i=t[55][t[179]];return t[180]=i,t}(e):e}let o=n(e),l=o(i(e,o));return{c(){l.c(),t=S()},m(e,n){l.m(e,n),M(e,t,n)},p(e,r){o===(o=n(e))&&l?l.p(i(e,o),r):(l.d(1),l=o(i(e,o)),l&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&C(t)}}}function ga(e){let t,n,i=(e[171]+" : "+e[174]||"")+"";return{c(){t=z("h3"),n=L(i),P(t,"class","svelte-9ebu9g")},m(e,i){M(e,t,i),x(t,n)},p(e,t){65536&t[0]&&i!==(i=(e[171]+" : "+e[174]||"")+"")&&F(n,i)},d(e){e&&C(t)}}}function ya(e){let t,n,i=`${e[172]} : ${e[171]||""}`;return{c(){t=z("h3"),n=L(i),P(t,"class","svelte-9ebu9g")},m(e,i){M(e,t,i),x(t,n)},p(e,t){65536&t[0]&&i!==(i=`${e[172]} : ${e[171]||""}`)&&F(n,i)},d(e){e&&C(t)}}}function wa(e){let t;function n(e,t){return e[180]&&e[179]?ba:va}let i=n(e),o=i(e);return{c(){t=z("h3"),o.c(),P(t,"class","svelte-9ebu9g")},m(e,n){M(e,t,n),o.m(t,null)},p(e,l){i===(i=n(e))&&o?o.p(e,l):(o.d(1),o=i(e),o&&(o.c(),o.m(t,null)))},d(e){e&&C(t),o.d()}}}function va(e){let t,n=`${e[172]} : ${e[180]||e[179]||""}`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){65536&i[0]&&n!==(n=`${e[172]} : ${e[180]||e[179]||""}`)&&F(t,n)},d(e){e&&C(t)}}}function ba(e){let t,n=`${e[172]} : ${e[180]} (${e[179]})`;return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){65536&i[0]&&n!==(n=`${e[172]} : ${e[180]} (${e[179]})`)&&F(t,n)},d(e){e&&C(t)}}}function xa(e,t){let n,i,l,r,a,s,c,u,d,p,m;function f(e,t){return"number"===e[170]?ga:e[172]?ha:fa}let h=f(t),g=h(t);function y(){return t[131](t[178])}function w(...e){return t[132](t[178],...e)}function v(...e){return t[133](t[170],t[171],t[178],t[173],t[172],...e)}function b(...e){return t[134](t[170],t[171],t[178],t[173],t[172],...e)}return{key:e,first:null,c(){n=z("div"),i=z("div"),g.c(),l=A(),r=T("svg"),a=T("path"),c=A(),P(i,"class","active-filter svelte-9ebu9g"),P(a,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(a,"class","svelte-9ebu9g"),P(r,"class","remove-active-filter svelte-9ebu9g"),P(r,"viewBox","0 0 24 24"),P(r,"tabindex",s=t[46]||t[44]||!t[33]?"-1":"0"),P(n,"class","active-tag-filter svelte-9ebu9g"),P(n,"title",u=t[175]?t[77]({tag:t[171]},"category and description")||"":t[176]&&t[77]({category:t[171]},"all tags")||""),P(n,"tabindex",d=t[46]||t[44]||!t[33]?"-1":"0"),U(n,"--active-tag-filter-color","included"===t[173]?"hsl(185deg, 65%, 50%)":"excluded"===t[173]?"hsl(345deg, 75%, 60%)":"hsl(0deg, 0%, 50%)"),this.first=n},m(e,t){var o;M(e,n,t),x(n,i),g.m(i,null),x(n,l),x(n,r),x(r,a),x(n,c),p||(m=[N(r,"click",(o=y,function(e){return e.preventDefault(),o.call(this,e)})),N(r,"keyup",w),N(n,"click",v),N(n,"keyup",b)],p=!0)},p(e,o){h===(h=f(t=e))&&g?g.p(t,o):(g.d(1),g=h(t),g&&(g.c(),g.m(i,null))),40964&o[1]&&s!==(s=t[46]||t[44]||!t[33]?"-1":"0")&&P(r,"tabindex",s),65536&o[0]&&u!==(u=t[175]?t[77]({tag:t[171]},"category and description")||"":t[176]&&t[77]({category:t[171]},"all tags")||"")&&P(n,"title",u),40964&o[1]&&d!==(d=t[46]||t[44]||!t[33]?"-1":"0")&&P(n,"tabindex",d),65536&o[0]&&U(n,"--active-tag-filter-color","included"===t[173]?"hsl(185deg, 65%, 50%)":"excluded"===t[173]?"hsl(345deg, 75%, 60%)":"hsl(0deg, 0%, 50%)")},d(e){e&&C(n),g.d(),p=!1,o(m)}}}function ka(t){let n,i=(t[84]()||"Please Wait")+"";return{c(){n=L(i)},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function Ea(e){let t,n=(e[50]||"Please Wait")+"";return{c(){t=L(n)},m(e,n){M(e,t,n)},p(e,i){524288&i[1]&&n!==(n=(e[50]||"Please Wait")+"")&&F(t,n)},d(e){e&&C(t)}}}function Ma(e){let t,n,i,l,r,a;return{c(){t=z("div"),n=T("svg"),i=T("path"),P(i,"d","M105 203a160 160 0 0 1 264-60l17 17h-50a32 32 0 1 0 0 64h128c18 0 32-14 32-32V64a32 32 0 1 0-64 0v51l-18-17a224 224 0 0 0-369 83 32 32 0 0 0 60 22zm-66 86a32 32 0 0 0-23 31v128a32 32 0 1 0 64 0v-51l18 17a224 224 0 0 0 369-83 32 32 0 0 0-60-22 160 160 0 0 1-264 60l-17-17h50a32 32 0 1 0 0-64H48a39 39 0 0 0-9 1z"),P(i,"class","svelte-9ebu9g"),P(n,"viewBox","0 0 512 512"),P(n,"class","svelte-9ebu9g"),P(t,"tabindex",l=e[46]||e[44]?"":"0"),P(t,"class","refresh-list svelte-9ebu9g"),P(t,"role","button"),P(t,"aria-label","Reload List")},m(o,l){M(o,t,l),x(t,n),x(n,i),r||(a=[N(t,"click",e[140]),N(t,"keyup",e[141])],r=!0)},p(e,n){40960&n[1]&&l!==(l=e[46]||e[44]?"":"0")&&P(t,"tabindex",l)},d(e){e&&C(t),r=!1,o(a)}}}function Ca(t){let n;return{c(){n=z("div"),n.innerHTML='<div class="shimmer-background svelte-9ebu9g"></div>',P(n,"class","sort-filter skeleton shimmer svelte-9ebu9g")},m(e,t){M(e,n,t)},p:e,d(e){e&&C(n)}}}function $a(e){let t,n,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,S,I,B,U,D=(e[13]||"")+"",R=[],j=new Map,H=e[49]?.sortFilter||[];const V=e=>e[167]||{};for(let t=0;t<H.length;t+=1){let n=hr(e,H,t),i=V(n);j.set(i,R[t]=Ta(i,n))}return{c(){t=z("div"),n=T("svg"),i=T("path"),s=A(),c=z("h2"),u=L(D),m=A(),f=z("div"),h=z("div"),g=z("div"),y=z("div"),y.textContent="Sort By",w=A(),v=T("svg"),b=T("path"),E=A(),$=z("div");for(let e=0;e<R.length;e+=1)R[e].c();P(i,"d",l="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),P(i,"class","svelte-9ebu9g"),P(n,"class","sort-order-icon svelte-9ebu9g"),P(n,"viewBox",r=`0 ${"asc"===e[14]?"-":""}140 320 512`),P(n,"tabindex",a=e[46]||e[44]||e[6]?"":"0"),P(n,"role","button"),P(n,"aria-label","Change Sort Order"),P(c,"tabindex",d=e[46]||e[44]||e[6]?"":"0"),P(c,"aria-label","Select Sort Type"),P(c,"class","svelte-9ebu9g"),P(y,"class","filter-title svelte-9ebu9g"),P(b,"fill","#fff"),P(b,"d","m19 6-1-1-6 6-6-6-1 1 6 6-6 6 1 1 6-6 6 6 1-1-6-6Z"),P(b,"class","svelte-9ebu9g"),P(v,"viewBox","0 0 24 24"),P(v,"class","closing-x svelte-9ebu9g"),P(v,"tabindex",k=!e[46]&&!e[44]&&e[6]&&e[39]<=425?"0":""),P(g,"class","header svelte-9ebu9g"),P($,"class","options svelte-9ebu9g"),P(h,"class",S=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-9ebu9g"),P(f,"class",I=p("options-wrap "+(e[6]?"":"display-none hide"))+" svelte-9ebu9g"),P(t,"class","sort-filter svelte-9ebu9g")},m(o,l){M(o,t,l),x(t,n),x(n,i),x(t,s),x(t,c),x(c,u),x(t,m),x(t,f),x(f,h),x(h,g),x(g,y),x(g,w),x(g,v),x(v,b),x(h,E),x(h,$);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m($,null);B||(U=[N(n,"click",e[70]),N(n,"keyup",e[142]),N(c,"click",e[68]),N(c,"keyup",e[143]),N(v,"keyup",e[144]),N(v,"click",e[68]),N(f,"touchend",e[61],{passive:!0})],B=!0)},p(e,t){16384&t[0]&&l!==(l="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z")&&P(i,"d",l),16384&t[0]&&r!==(r=`0 ${"asc"===e[14]?"-":""}140 320 512`)&&P(n,"viewBox",r),64&t[0]|40960&t[1]&&a!==(a=e[46]||e[44]||e[6]?"":"0")&&P(n,"tabindex",a),8192&t[0]&&D!==(D=(e[13]||"")+"")&&F(u,D),64&t[0]|40960&t[1]&&d!==(d=e[46]||e[44]||e[6]?"":"0")&&P(c,"tabindex",d),64&t[0]|41216&t[1]&&k!==(k=!e[46]&&!e[44]&&e[6]&&e[39]<=425?"0":"")&&P(v,"tabindex",k),24576&t[0]|262144&t[1]|128&t[2]&&(H=e[49]?.sortFilter||[],R=Ee(R,t,V,1,e,H,j,$,xe,Ta,null,hr)),64&t[0]&&S!==(S=p("options-wrap-filter-info "+(e[6]?"":"hide"))+" svelte-9ebu9g")&&P(h,"class",S),64&t[0]&&I!==(I=p("options-wrap "+(e[6]?"":"display-none hide"))+" svelte-9ebu9g")&&P(f,"class",I)},d(e){e&&C(t);for(let e=0;e<R.length;e+=1)R[e].d();B=!1,o(U)}}}function za(e){let t,n,i,o;return{c(){t=T("svg"),n=T("path"),P(n,"d",i="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z"),P(n,"class","svelte-9ebu9g"),P(t,"viewBox",o=`0 ${"asc"===e[14]?"-180":"100"} 320 512`),P(t,"class","svelte-9ebu9g")},m(e,i){M(e,t,i),x(t,n)},p(e,l){16384&l[0]&&i!==(i="asc"===e[14]?"M183 41a32 32 0 0 0-46 0L9 169c-9 10-12 23-7 35s17 20 30 20h256a32 32 0 0 0 23-55L183 41z":"M183 471a32 32 0 0 1-46 0L9 343c-9-10-12-23-7-35s17-20 30-20h256a32 32 0 0 1 23 55L183 471z")&&P(n,"d",i),16384&l[0]&&o!==(o=`0 ${"asc"===e[14]?"-180":"100"} 320 512`)&&P(t,"viewBox",o)},d(e){e&&C(t)}}}function Ta(e,t){let n,i,l,r,a,s,c,u=(t[167]||"")+"",d=t[13]===t[167]&&za(t);function p(){return t[145](t[167])}function m(...e){return t[146](t[167],...e)}return{key:e,first:null,c(){n=z("div"),i=z("h3"),l=L(u),r=A(),d&&d.c(),a=A(),P(i,"class","svelte-9ebu9g"),P(n,"class","option svelte-9ebu9g"),this.first=n},m(e,t){M(e,n,t),x(n,i),x(i,l),x(n,r),d&&d.m(n,null),x(n,a),s||(c=[N(n,"click",p),N(n,"keyup",m)],s=!0)},p(e,i){t=e,262144&i[1]&&u!==(u=(t[167]||"")+"")&&F(l,u),t[13]===t[167]?d?d.p(t,i):(d=za(t),d.c(),d.m(n,a)):d&&(d.d(1),d=null)},d(e){e&&C(n),d&&d.d(),s=!1,o(c)}}}function La(t){let n,i,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,L,S,I,F,D,R,j,H,V,O,q,_,Y,W,J,K,G,X,Z,Q,ee,te,ne,ie,oe,le,re,ae,se,ce,ue,de,pe,me,fe,he,ge,ye,we,ve,be,ke,Me,Ce,$e=[],ze=new Map,Te=`${t[20]}px`,Le=(!t[25]||!t[33])&&Ar(t),Ae=t[33]&&Ir(t);function Se(e,t){return e[15]?.length?Br:Fr}let Ne=Se(t),Ie=Ne(t),Pe=t[30]>0&&Dr(t),Fe=t[33]&&t[42]?.length>1&&Rr(t),Be=t[33]&&t[24]&&t[41]&&!t[41]?.[t[24]]&&jr(t),Ue=t[15]&&t[49]&&Hr(t),De=(!t[15]||!t[49])&&pa(t),Re=t[16]||[];const je=e=>e[170]+e[171]+(e[172]??"")||{};for(let e=0;e<Re.length;e+=1){let n=gr(t,Re,e),i=je(n);ze.set(i,$e[e]=xa(i,n))}function He(e,t){return e[51]&&(e[50]||e[53]||e[54]||e[45][""]||e[45][e[7]])?Ea:ka}let Ve=He(t),Oe=Ve(t),qe=(t[34]||t[38]||t[45][""]||t[45][t[7]])&&!1===t[36]&&Ma(t);function _e(e,t){return e[49]?.sortFilter&&e[8]?.[e[7]]?.sortBy?$a:Ca}let Ye=_e(t),We=Ye(t);return{c(){n=z("section"),i=z("div"),l=z("label"),l.textContent="Search Title",r=A(),a=z("input"),u=A(),Le&&Le.c(),d=A(),Ae&&Ae.c(),m=A(),f=z("div"),h=T("svg"),g=T("path"),b=A(),k=z("div"),Ie.c(),E=A(),Pe&&Pe.c(),$=A(),Fe&&Fe.c(),L=A(),Be&&Be.c(),I=A(),F=z("div"),Ue&&Ue.c(),D=A(),De&&De.c(),j=A(),H=z("div"),V=z("div"),O=z("div"),q=T("svg"),_=T("path"),W=A();for(let e=0;e<$e.length;e+=1)$e[e].c();K=A(),G=z("div"),X=T("svg"),Z=T("path"),te=A(),ne=z("div"),ie=z("span"),oe=z("h2"),Oe.c(),re=A(),ae=z("search"),se=z("label"),se.textContent="Search Title",ce=A(),ue=z("input"),pe=A(),me=z("div"),fe=z("div"),he=T("svg"),ge=T("path"),be=A(),qe&&qe.c(),ke=A(),We.c(),P(l,"class","disable-interaction svelte-9ebu9g"),P(l,"for","category-name"),P(a,"id","category-name"),P(a,"class","category svelte-9ebu9g"),P(a,"type","text"),P(a,"autocomplete","off"),P(a,"placeholder",s=null==t[7]?"Kanshi":"Category"),a.disabled=c=!t[25],P(a,"aria-label","Category Name to Add or Edit"),U(a,"pointer-events",t[25]?"":"none"),P(g,"d","M0 416c0 18 14 32 32 32h55a80 80 0 0 0 146 0h247a32 32 0 1 0 0-64H233a80 80 0 0 0-146 0H32c-18 0-32 14-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm192-160a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm32-80c-33 0-61 20-73 48H32a32 32 0 1 0 0 64h247a80 80 0 0 0 146 0h55a32 32 0 1 0 0-64h-55a80 80 0 0 0-73-48zm-160-48a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73-64a80 80 0 0 0-146 0H32a32 32 0 1 0 0 64h87a80 80 0 0 0 146 0h215a32 32 0 1 0 0-64H265z"),P(g,"class","svelte-9ebu9g"),P(h,"class","show-filter-options svelte-9ebu9g"),P(h,"tabindex",y=t[46]||t[44]?"":"0"),P(h,"viewBox","0 0 512 512"),P(h,"role","button"),P(h,"aria-label","Show Filter Options"),P(f,"class","category-icon-wrap svelte-9ebu9g"),P(i,"id","category-wrap"),P(i,"class",w=p("category-wrap"+(t[25]?" editing":""))+" svelte-9ebu9g"),P(i,"tabindex",v=t[25]||t[46]||t[44]||t[3]?"":"0"),P(i,"role","button"),P(i,"aria-label","Select a Recommendation Category"),U(i,"--edit-cancel-icon",t[33]?"25px":""),U(i,"--save-icon",t[33]&&t[25]&&t[24]&&t[41]&&!t[41]?.[t[24]]?"25px":""),P(k,"class",S=p("category-settings-wrap"+(t[33]?"":" display-none"))+" svelte-9ebu9g"),P(k,"aria-label","Select a Type of Filter"),U(k,"--add-icon-size",t[33]&&t[24]&&t[41]&&!t[41]?.[t[24]]?"25px":""),U(k,"--remove-icon-size",t[42]?.length>1?t[30]>0?"25px":"1fr":""),U(k,"--mape-size",t[30]>0?"1fr":""),P(F,"aria-label","List of Filters"),P(F,"class",R=p("filters"+(t[33]?"":" display-none")+(t[48]?" has-wheel":"")+(t[80]&&t[37]?" android":""))+" svelte-9ebu9g"),P(F,"id","filters"),U(F,"--max-padding-height",t[5]?t[20]+65+"px":"0"),P(_,"d","M367 413 100 145a192 192 0 0 0 268 268zm45-46A192 192 0 0 0 145 99l269 268zM1 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0z"),P(_,"class","svelte-9ebu9g"),P(q,"viewBox","0 0 512 512"),P(q,"class","svelte-9ebu9g"),P(O,"tabindex",Y=t[46]||t[44]||!t[33]?"-1":"0"),P(O,"class","empty-tag-filter svelte-9ebu9g"),P(O,"title","Remove Filters"),P(V,"id","tag-filters"),P(V,"class","tag-filters svelte-9ebu9g"),P(H,"aria-label","List of Active Filters"),P(H,"id","active-filters"),P(H,"class",J=p("active-filters"+(t[33]&&t[16]?.length?"":" display-none"))+" svelte-9ebu9g"),P(Z,"d","M201 137c13-12 33-12 46 0l160 160a32 32 0 0 1-46 46L224 205 87 343a32 32 0 0 1-46-46l160-160z"),P(Z,"class","svelte-9ebu9g"),P(X,"viewBox","0 0 512 512"),P(X,"class","svelte-9ebu9g"),P(G,"aria-label","Expand/Hide Filter Controls"),P(G,"class",Q=p("close-filters"+(t[33]?"":" display-none"))+" svelte-9ebu9g"),P(G,"tabindex",ee=t[46]||t[44]||!t[33]?"-1":"0"),P(oe,"class",le=p(t[50]&&t[51]||!t[52]?"":" loading")+" svelte-9ebu9g"),P(oe,"role","status"),P(ie,"class","status-and-trivia svelte-9ebu9g"),P(ne,"class","status-and-trivia-wrapper svelte-9ebu9g"),P(ne,"aria-label","Status of Page and Extra Trivia"),P(se,"class","disable-interaction svelte-9ebu9g"),P(se,"for","search-media"),P(ue,"id","search-media"),P(ue,"class","search-media svelte-9ebu9g"),P(ue,"type","search"),P(ue,"enterkeyhint","search"),P(ue,"autocomplete","off"),P(ue,"placeholder","Search"),P(ue,"tabindex",de=t[46]||t[44]?"-1":"0"),P(ae,"class","search-media-wrap svelte-9ebu9g"),P(ae,"aria-label","Anime, Manga, Novel"),P(ge,"d",ye=t[32]?"M183 9a32 32 0 0 0-46 0l-96 96a32 32 0 0 0 46 46l41-42v294l-41-42a32 32 0 0 0-46 46l96 96c13 12 33 12 46 0l96-96a32 32 0 0 0-46-46l-41 42V109l41 42a32 32 0 0 0 46-46L183 9z":"m407 375 96-96c12-13 12-33 0-46l-96-96a32 32 0 0 0-46 46l42 41H109l42-41a32 32 0 0 0-46-46L9 233a32 32 0 0 0 0 46l96 96a32 32 0 0 0 46-46l-42-41h294l-42 41a32 32 0 0 0 46 46z"),P(ge,"class","svelte-9ebu9g"),P(he,"viewBox",we=`0 0 ${t[32]?"312":"512"} 512`),P(he,"class","svelte-9ebu9g"),P(fe,"tabindex",ve=t[46]||t[44]?"":"0"),P(fe,"class","change-grid-view svelte-9ebu9g"),P(fe,"role","button"),P(fe,"aria-label","Change List View"),P(me,"class","last-filter-option svelte-9ebu9g"),P(n,"id","controls"),P(n,"aria-label","List of Control Actions for the App"),P(n,"class","svelte-9ebu9g"),U(n,"--filters-space",t[33]?"80px":""),U(n,"--active-tag-filter-space",t[33]?"auto":""),U(n,"--category-settings-space",t[33]?"30px":""),U(n,"--close-filters-space",t[33]?"42px":""),U(n,"--max-filter-selection-height",Te)},m(e,o){M(e,n,o),x(n,i),x(i,l),x(i,r),x(i,a),B(a,t[24]),x(i,u),Le&&Le.m(i,null),x(i,d),Ae&&Ae.m(i,null),x(i,m),x(i,f),x(f,h),x(h,g),x(n,b),x(n,k),Ie.m(k,null),x(k,E),Pe&&Pe.m(k,null),x(k,$),Fe&&Fe.m(k,null),x(k,L),Be&&Be.m(k,null),x(n,I),x(n,F),Ue&&Ue.m(F,null),x(F,D),De&&De.m(F,null),x(n,j),x(n,H),x(H,V),x(V,O),x(O,q),x(q,_),x(V,W);for(let e=0;e<$e.length;e+=1)$e[e]&&$e[e].m(V,null);x(n,K),x(n,G),x(G,X),x(X,Z),x(n,te),x(n,ne),x(ne,ie),x(ie,oe),Oe.m(oe,null),x(n,re),x(n,ae),x(ae,se),x(ae,ce),x(ae,ue),B(ue,t[35]),x(n,pe),x(n,me),x(me,fe),x(fe,he),x(he,ge),x(me,be),qe&&qe.m(me,null),x(me,ke),We.m(me,null),Me||(Ce=[N(a,"input",t[87]),N(a,"focusin",t[88]),N(h,"click",t[96]),N(h,"keyup",t[97]),N(i,"keyup",t[98]),N(i,"click",t[72]),N(F,"wheel",t[129]),N(O,"click",t[67]),N(O,"keyup",t[130]),N(G,"click",t[135]),N(G,"keyup",t[136]),N(oe,"keyup",Ia),N(ue,"input",t[137]),N(ue,"focusin",t[138]),N(fe,"click",t[81]),N(fe,"keyup",t[139])],Me=!0)},p(e,t){128&t[0]&&s!==(s=null==e[7]?"Kanshi":"Category")&&P(a,"placeholder",s),33554432&t[0]&&c!==(c=!e[25])&&(a.disabled=c),16777216&t[0]&&a.value!==e[24]&&B(a,e[24]),33554432&t[0]&&U(a,"pointer-events",e[25]?"":"none"),e[25]&&e[33]?Le&&(Le.d(1),Le=null):Le?Le.p(e,t):(Le=Ar(e),Le.c(),Le.m(i,d)),e[33]?Ae?Ae.p(e,t):(Ae=Ir(e),Ae.c(),Ae.m(i,m)):Ae&&(Ae.d(1),Ae=null),40960&t[1]&&y!==(y=e[46]||e[44]?"":"0")&&P(h,"tabindex",y),33554432&t[0]&&w!==(w=p("category-wrap"+(e[25]?" editing":""))+" svelte-9ebu9g")&&P(i,"class",w),33554440&t[0]|40960&t[1]&&v!==(v=e[25]||e[46]||e[44]||e[3]?"":"0")&&P(i,"tabindex",v),4&t[1]&&U(i,"--edit-cancel-icon",e[33]?"25px":""),50331648&t[0]|1028&t[1]&&U(i,"--save-icon",e[33]&&e[25]&&e[24]&&e[41]&&!e[41]?.[e[24]]?"25px":""),Ne===(Ne=Se(e))&&Ie?Ie.p(e,t):(Ie.d(1),Ie=Ne(e),Ie&&(Ie.c(),Ie.m(k,E))),e[30]>0?Pe?Pe.p(e,t):(Pe=Dr(e),Pe.c(),Pe.m(k,$)):Pe&&(Pe.d(1),Pe=null),e[33]&&e[42]?.length>1?Fe?Fe.p(e,t):(Fe=Rr(e),Fe.c(),Fe.m(k,L)):Fe&&(Fe.d(1),Fe=null),e[33]&&e[24]&&e[41]&&!e[41]?.[e[24]]?Be?Be.p(e,t):(Be=jr(e),Be.c(),Be.m(k,null)):Be&&(Be.d(1),Be=null),4&t[1]&&S!==(S=p("category-settings-wrap"+(e[33]?"":" display-none"))+" svelte-9ebu9g")&&P(k,"class",S),16777216&t[0]|1028&t[1]&&U(k,"--add-icon-size",e[33]&&e[24]&&e[41]&&!e[41]?.[e[24]]?"25px":""),1073741824&t[0]|2048&t[1]&&U(k,"--remove-icon-size",e[42]?.length>1?e[30]>0?"25px":"1fr":""),1073741824&t[0]&&U(k,"--mape-size",e[30]>0?"1fr":""),e[15]&&e[49]?Ue?Ue.p(e,t):(Ue=Hr(e),Ue.c(),Ue.m(F,D)):Ue&&(Ue.d(1),Ue=null),e[15]&&e[49]?De&&(De.d(1),De=null):De?De.p(e,t):(De=pa(e),De.c(),De.m(F,null)),131140&t[1]&&R!==(R=p("filters"+(e[33]?"":" display-none")+(e[48]?" has-wheel":"")+(e[80]&&e[37]?" android":""))+" svelte-9ebu9g")&&P(F,"class",R),1048608&t[0]&&U(F,"--max-padding-height",e[5]?e[20]+65+"px":"0"),40964&t[1]&&Y!==(Y=e[46]||e[44]||!e[33]?"-1":"0")&&P(O,"tabindex",Y),69632&t[0]|16818180&t[1]|32792&t[2]&&(Re=e[16]||[],$e=Ee($e,t,je,1,e,Re,ze,V,xe,xa,null,gr)),65536&t[0]|4&t[1]&&J!==(J=p("active-filters"+(e[33]&&e[16]?.length?"":" display-none"))+" svelte-9ebu9g")&&P(H,"class",J),4&t[1]&&Q!==(Q=p("close-filters"+(e[33]?"":" display-none"))+" svelte-9ebu9g")&&P(G,"class",Q),40964&t[1]&&ee!==(ee=e[46]||e[44]||!e[33]?"-1":"0")&&P(G,"tabindex",ee),Ve===(Ve=He(e))&&Oe?Oe.p(e,t):(Oe.d(1),Oe=Ve(e),Oe&&(Oe.c(),Oe.m(oe,null))),3670016&t[1]&&le!==(le=p(e[50]&&e[51]||!e[52]?"":" loading")+" svelte-9ebu9g")&&P(oe,"class",le),40960&t[1]&&de!==(de=e[46]||e[44]?"-1":"0")&&P(ue,"tabindex",de),16&t[1]&&ue.value!==e[35]&&B(ue,e[35]),2&t[1]&&ye!==(ye=e[32]?"M183 9a32 32 0 0 0-46 0l-96 96a32 32 0 0 0 46 46l41-42v294l-41-42a32 32 0 0 0-46 46l96 96c13 12 33 12 46 0l96-96a32 32 0 0 0-46-46l-41 42V109l41 42a32 32 0 0 0 46-46L183 9z":"m407 375 96-96c12-13 12-33 0-46l-96-96a32 32 0 0 0-46 46l42 41H109l42-41a32 32 0 0 0-46-46L9 233a32 32 0 0 0 0 46l96 96a32 32 0 0 0 46-46l-42-41h294l-42 41a32 32 0 0 0 46 46z")&&P(ge,"d",ye),2&t[1]&&we!==(we=`0 0 ${e[32]?"312":"512"} 512`)&&P(he,"viewBox",we),40960&t[1]&&ve!==(ve=e[46]||e[44]?"":"0")&&P(fe,"tabindex",ve),(e[34]||e[38]||e[45][""]||e[45][e[7]])&&!1===e[36]?qe?qe.p(e,t):(qe=Ma(e),qe.c(),qe.m(me,ke)):qe&&(qe.d(1),qe=null),Ye===(Ye=_e(e))&&We?We.p(e,t):(We.d(1),We=Ye(e),We&&(We.c(),We.m(me,null))),4&t[1]&&U(n,"--filters-space",e[33]?"80px":""),4&t[1]&&U(n,"--active-tag-filter-space",e[33]?"auto":""),4&t[1]&&U(n,"--category-settings-space",e[33]?"30px":""),4&t[1]&&U(n,"--close-filters-space",e[33]?"42px":""),1048576&t[0]&&Te!==(Te=`${e[20]}px`)&&U(n,"--max-filter-selection-height",Te)},i:e,o:e,d(e){e&&C(n),Le&&Le.d(),Ae&&Ae.d(),Ie.d(),Pe&&Pe.d(),Fe&&Fe.d(),Be&&Be.d(),Ue&&Ue.d(),De&&De.d();for(let e=0;e<$e.length;e+=1)$e[e].d();Oe.d(),qe&&qe.d(),We.d(),Me=!1,o(Ce)}}}function Aa(e,t){try{"string"==typeof t&&(e.value=t)}catch(e){}}const Sa=()=>{},Na=()=>{},Ia=()=>{};function Pa(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,I,P,F,B,U,D,R,j,H,V,O,q,_;d(e,Jt,(e=>n(32,i=e))),d(e,un,(e=>n(33,o=e))),d(e,sn,(e=>n(34,l=e))),d(e,ht,(e=>n(35,r=e))),d(e,wt,(e=>n(7,a=e))),d(e,Qt,(e=>n(152,s=e))),d(e,en,(e=>n(153,c=e))),d(e,Wt,(e=>n(36,u=e))),d(e,qe,(e=>n(154,p=e))),d(e,Je,(e=>n(37,f=e))),d(e,an,(e=>n(38,h=e))),d(e,fn,(e=>n(155,g=e))),d(e,lt,(e=>n(39,y=e))),d(e,dn,(e=>n(156,w=e))),d(e,At,(e=>n(40,v=e))),d(e,mt,(e=>n(8,b=e))),d(e,gt,(e=>n(41,x=e))),d(e,yt,(e=>n(42,k=e))),d(e,Yt,(e=>n(43,E=e))),d(e,ln,(e=>n(44,M=e))),d(e,Mt,(e=>n(157,C=e))),d(e,st,(e=>n(158,$=e))),d(e,kt,(e=>n(9,z=e))),d(e,Et,(e=>n(10,T=e))),d(e,Tt,(e=>n(159,L=e))),d(e,It,(e=>n(45,A=e))),d(e,Lt,(e=>n(160,S=e))),d(e,zt,(e=>n(85,N=e))),d(e,$t,(e=>n(86,I=e))),d(e,ot,(e=>n(161,P=e))),d(e,bt,(e=>n(11,F=e))),d(e,xt,(e=>n(12,B=e))),d(e,tn,(e=>n(46,U=e))),d(e,Ft,(e=>n(47,D=e))),d(e,tt,(e=>n(48,R=e))),d(e,vt,(e=>n(49,j=e))),d(e,St,(e=>n(50,H=e))),d(e,Kt,(e=>n(51,V=e))),d(e,Nt,(e=>n(52,O=e))),d(e,ct,(e=>n(53,q=e))),d(e,ut,(e=>n(54,_=e)));let Y,J,K,G,X,Z,Q,ee,ne,ie,oe,le,re,ae,se=Nn("selectedFilterCategoryName"),ce=Et.subscribe((e=>{e&&(m(Lt,S=e,S),ce?.(),ce=null)})),ue=kt.subscribe((e=>{e&&(m(Tt,L=e,L),ue?.(),ue=null)})),de={},pe={},me={},fe=.3*P,he=["Weighted Score","Score","Average Score","User Score","Popularity","Year"];async function ge(e,t){if(!1!==u||E)return Ke();if(!Mn(t))return;const n=t?.selectedCategory;if(n&&m(It,A[n]=new Date,A),et.update((e=>!e)),"Media Filter"===e)try{t.updateMediaFilter=!0,await ye(t)}catch{b?.[n]&&I[n]&&m(mt,b[n].mediaFilters=I[n],b)}else if("sortBy"===e)try{t.updateMediaFilter=!0,await ye(t)}catch{b?.[n]&&N[n]&&m(mt,b[n].sortBy=N[n],b)}else if("Algorithm Filter"===e)try{m(It,A[""]=new Date,A),await async function(e){if(f&&!0===window[p])throw new Error("Something went wrong...");await ii(e)}(t),m(Lt,S=t.algorithmFilters,S);try{await ye({updateRecommendedMediaList:!0})}catch{}}catch{S&&m(Et,T=S,T)}else if("Content Caution"===e)try{m(It,A[""]=new Date,A),await ye(t),m(Tt,L=t.mediaCautions,L)}catch{L&&m(kt,z=L,z)}}async function ye(e){if(f&&!0===window[p])throw new Error("Something went wrong...");await Zn(e)}function we(e,t){e.stopPropagation(),In("selectedFilterCategoryName",n(2,se=t)).catch((()=>Pn("selectedFilterCategoryName"))),le instanceof Element&&le.closest(".filter-category")&&(Ti(le,"highlight"),le=null),n(4,ne=!1)}function ve(e){let t=e.target,i=t?.classList||[],o=t?.closest?.(".filter-category"),l=t?.closest?.(".options-wrap");if(!i.contains("filter-category")&&!o||ne||i.contains("closing-x")||t.closest(".closing-x")){if((!l||i.contains("closing-x")||t.closest(".closing-x"))&&!i.contains("options-wrap")){let e=ne?.querySelector?.(".options-wrap");e?(zi(e,"hide"),Be((()=>{Ti(e,"hide"),le instanceof Element&&le.closest(".filter-category")&&(Ti(le,"highlight"),le=null),n(4,ne=!1)}),200)):(le instanceof Element&&le.closest(".filter-category")&&(Ti(le,"highlight"),le=null),n(4,ne=!1))}}else n(4,ne=o||t||!0)}function be(e,t){let i=e.target,o=i?.closest?.(".filter-select");o!==ie&&(ie instanceof Element&&n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&(Ti(le,"highlight"),le=null),n(22,ae=t),n(5,ie=o||i||!0))}function xe(){let e=ie?.querySelector?.(".options-wrap");e?(zi(e,"hide"),Be((()=>{Ti(e,"hide"),n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&(Ti(le,"highlight"),le=null),n(22,ae=n(5,ie=null))}),200)):(n(22,ae=null),le instanceof Element&&le.closest(".filter-select")&&(Ti(le,"highlight"),le=null),n(22,ae=n(5,ie=null)))}async function ke(e){let t=e?.target,i=t?.classList||[];if(i.contains("options-wrap")&&"fixed"===getComputedStyle(t).position){let e=ee||ne||oe||ie,t=e?.querySelector?.(".options-wrap");t?(zi(t,"hide"),Be((()=>{Ti(t,"hide"),le instanceof Element&&(Ti(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,oe=!1),n(22,ae=n(5,ie=null))}),200)):(le instanceof Element&&(Ti(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,oe=!1),n(22,ae=n(5,ie=null)))}else if(!(i.contains("options-wrap")||t?.closest?.(".options-wrap")||i.contains("full-popup-wrapper")||t?.closest?.(".full-popup-wrapper")||i.contains("item-info")||i.contains("extra-item-info")||i.contains("item-info-path")||t?.closest?.(".item-info")||t?.closest?.(".extra-item-info"))){let e=t?.closest?.(".category-wrap");i.contains("category-wrap")||e||(le instanceof Element&&le.closest(".category-wrap")&&(Ti(le,"highlight"),le=null),n(3,ee=!1));let o=t?.closest(".filter-category");i.contains("filter-category")||o||(le instanceof Element&&le.closest(".filter-category")&&(Ti(le,"highlight"),le=null),n(4,ne=!1));let l=t?.closest(".sort-filter");i.contains("sort-filter")||l||(le instanceof Element&&le.closest(".sort-filter")&&(Ti(le,"highlight"),le=null),n(6,oe=!1));let r=t?.closest(".select"),a=t?.closest(".angle-down");i.contains("select")||i.contains("angle-down")||a||r||(le instanceof Element&&le.closest(".filter-select")&&(Ti(le,"highlight"),le=null),n(22,ae=n(5,ie=null)))}}ot.subscribe((e=>{n(20,fe=.3*e)}));let Ee,Me,Ce=!1;function $e(e,t,i,o){if(E||!1!==u||!0===x?.[a])return Ke();let l;if("Media Filter"===i?l=b?.[a]?.mediaFilters:"Algorithm Filter"===i?l=T:"Content Caution"===i&&(l=z),!(l instanceof Array))return;let r,s,c="selection",d=l.findIndex((n=>n?.optionName===e&&n?.optionCategory===t&&n?.filterType===c))??-1,p=l[d],f=p?.status;"none"!==f&&f?"included"!==f||o||(r="excluded"):r="included",r?Mn(p)?l[d].status=r:(l=l.filter((n=>!(n?.optionName===e&&n?.optionCategory===t&&n?.filterType===c))),l.unshift({optionName:e,optionCategory:t,filterType:c,status:"included"})):d>=0&&l.splice(d,1),n(23,Ce=!0),"Media Filter"===i?s={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=l,b)}:"Algorithm Filter"===i?s={algorithmFilters:m(Et,T=l,T)}:"Content Caution"===i&&(s={mediaCautions:m(kt,z=l,z)}),ge(i,s)}function ze(e,t,n){if(E||!1!==u)return Ke();let i,o=e.target,l=o?.classList||[],r=e.key;if(l.contains("filter-bool")&&"click"===e.type||l.contains("filter-bool")&&"Enter"!==r&&"keyup"===e.type)return;if(!0===x?.[a])return Ke();if("Media Filter"===n?i=b?.[a]?.mediaFilters:"Algorithm Filter"===n?i=T:"Content Caution"===n&&(i=z),!(i instanceof Array))return;let s,c,d="bool",p=i.findIndex((e=>e?.optionName===t&&e?.filterType===d))??-1,f=i[p],h=f?.status;"none"!==h&&h||(s="included"),s?Mn(f)?i[p].status=s:(i=i.filter((e=>!(e?.optionName===t&&e?.filterType===d))),i.unshift({optionName:t,filterType:d,status:"included"})):p>=0&&i.splice(p,1),"Media Filter"===n?c={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=i,b)}:"Algorithm Filter"===n?c={algorithmFilters:m(Et,T=i,T)}:"Content Caution"===n&&(c={mediaCautions:m(kt,z=i,z)}),ge(n,c)}function Te(e,t,i,o,l,r,s){let c,d=s+t;if(E||!1!==u)return Ai(e.target,i),n(18,pe[d]=i,pe),Ke();if(!0===x?.[a])return Ai(e.target,i),n(18,pe[d]=i,pe),Ke();if("Media Filter"===s?c=b?.[a]?.mediaFilters:"Algorithm Filter"===s?c=T:"Content Caution"===s&&(c=z),!(c instanceof Array))return Ai(e.target,i),void n(18,pe[d]=i,pe);let p,f="number",h=c.findIndex((e=>e?.optionName===t&&e?.filterType===f))??-1,g=!1;if(he.includes(t)&&/^(>=|<=|<|>).*($)/.test(o)){const a=o?.split(/(<=|>=|<|>)/)?.filter?.((e=>e));if(o!==i&&a.length<=2){const s=a[0].trim(),u=a[1];if(o!==i&&(!isNaN(u)&&(parseFloat(u)>=r||"number"!=typeof r)&&(parseFloat(u)<=l||"number"!=typeof l)||!u))if(g=!0,u){h>=0?(c[h].optionValue=o,c[h].CMPOperator=s,c[h].CMPNumber=u,c[h].status="included"):(c=c.filter((e=>!(e?.optionName===t&&e?.filterType===f))),c.unshift({optionName:t,filterType:f,optionValue:o,CMPOperator:s,CMPNumber:u,status:"included"}))}else h>=0&&c.splice(h,1);else Ai(e.target,i),n(18,pe[d]=i,pe)}else Ai(e.target,i),n(18,pe[d]=i,pe)}else{if("="===o)return;if("="===o?.[0]&&(o=o.replace("=","")),o!==i&&(!isNaN(o)&&(parseFloat(o)>=r||"number"!=typeof r)&&(parseFloat(o)<=l||"number"!=typeof l)||""===o))if(g=!0,""===o)h>=0&&c.splice(h,1);else{h>=0?(delete c[h].CMPOperator,delete c[h].CMPNumber,c[h].optionValue=o,c[h].status="included"):(c=c.filter((e=>!(e?.optionName===t&&e?.filterType===f))),c.unshift({optionName:t,filterType:f,optionValue:o,status:"included"}))}else Ai(e.target,i),n(18,pe[d]=i,pe)}g&&("Media Filter"===s?p={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=c,b)}:"Algorithm Filter"===s?p={algorithmFilters:m(Et,T=c,T)}:"Content Caution"===s&&(p={mediaCautions:m(kt,z=c,z)}),ge(s,p))}function Le(e,t,i,o,l,r){if(E||!1!==u||!0===x?.[a])return Ke();if(!(Z instanceof Array&&Z[o]))return;let s=e?.target,c=s?.classList;if(c?.contains?.("remove-active-filter")||s?.closest?.(".remove-active-filter"))return;let d,p=se;"number"===t?o>=0&&("included"===l?n(16,Z[o].status="none",Z):null!=l&&n(16,Z[o].status="included",Z)):"bool"===t?"included"===l?(n(19,me[p+i]=!1,me),n(16,Z[o].status="none",Z)):null!=l&&(n(19,me[p+i]=!0,me),n(16,Z[o].status="included",Z)):"selection"===t&&n(16,Z[o].status="included"!==l||r?"none"===l?"included":"none":"excluded",Z),"Media Filter"===p?d={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=Z,b)}:"Algorithm Filter"===p?d={algorithmFilters:m(Et,T=Z,T)}:"Content Caution"===p&&(d={mediaCautions:m(kt,z=Z,z)}),ge(p,d)}function Ae(e){if(E||!1!==u||!0===x?.[a])return Ke();if(!(Z instanceof Array&&Z[e]))return;Z.splice(e,1);let t,n=se;"Media Filter"===n?t={selectedCategory:a,mediaFilters:m(mt,b[a].mediaFilters=Z,b)}:"Algorithm Filter"===n?t={algorithmFilters:m(Et,T=Z,T)}:"Content Caution"===n&&(t={mediaCautions:m(kt,z=Z,z)}),ge(n,t)}async function Se(){if(E||!1!==u)return Ke();let e=a;if(!0===x?.[e])return Ke();let t=se;if(await c("Do you want to remove all the active tags?")){if(E||!1!==u||!0===x?.[e])return Ke();let n;"Media Filter"===t?n={selectedCategory:e,mediaFilters:m(mt,b[e].mediaFilters=[],b)}:"Algorithm Filter"===t?n={algorithmFilters:m(Et,T=[],T)}:"Content Caution"===t&&(n={mediaCautions:m(kt,z=[],z)}),ge(t,n)}}function Ne(e){if(E||!1!==u)return Ke();let t=e.target,i=t.classList,o=t.closest(".sort-filter"),l=t.closest(".options-wrap");if(!i.contains("sort-filter")&&!o||oe){if((!l||i.contains("closing-x")||t.closest(".closing-x"))&&!i.contains("options-wrap")){let e=oe?.querySelector?.(".options-wrap");e?(zi(e,"hide"),Be((()=>{Ti(e,"hide"),le instanceof Element&&le.closest(".sort-filter")&&(Ti(le,"highlight"),le=null),n(6,oe=!1)}),200)):(le instanceof Element&&le.closest(".sort-filter")&&(Ti(le,"highlight"),le=null),n(6,oe=!1))}}else n(6,oe=o||t||!0)}function Ie(e){if(E||!1!==u||!0===x?.[a]||!b?.[a]?.sortBy)return Ke();let t;J!==e?(m(mt,b[a].sortBy={sortName:e,sortType:"desc"},b),t={selectedCategory:a,sortBy:b[a].sortBy}):"desc"===K?(m(mt,b[a].sortBy.sortType="asc",b),t={selectedCategory:a,sortBy:b[a].sortBy}):"asc"===K&&(m(mt,b[a].sortBy.sortType="desc",b),t={selectedCategory:a,sortBy:b[a].sortBy}),ge("Media Filter",t),le instanceof Element&&le.closest(".sort-filter")&&(Ti(le,"highlight"),le=null),n(6,oe=!1)}function Pe(){if(E||!1!==u||!0===x?.[a]||!b?.[a]?.sortBy)return Ke();let e;"desc"===K?(m(mt,b[a].sortBy.sortType="asc",b),e={selectedCategory:a,sortBy:b[a].sortBy}):"asc"===K&&(m(mt,b[a].sortBy.sortType="desc",b),e={selectedCategory:a,sortBy:b[a].sortBy}),ge("Media Filter",e)}async function Fe(){n(3,ee=!1),n(24,Ee=a),n(25,We=!1),In("showFilterOptions",m(un,o=!o,o)).catch((()=>Pn("showFilterOptions")))}function Ue(e){let t=e.target,i=t.classList;if(t.closest(".category-icon-wrap")||i.contains("category-icon-wrap"))return;if(!x)return Ke(),le instanceof Element&&le.closest(".category-wrap")&&(Ti(le,"highlight"),le=null),void n(3,ee=!1);if(t.closest(".option")||i.contains("option"))return;let o=t.closest(".category-wrap"),l=t.closest(".options-wrap");if(!i.contains("category-wrap")&&!o||ee||i.contains("closing-x")||t.closest(".closing-x")){if((!l||i.contains("closing-x")||t.closest(".closing-x"))&&!i.contains("options-wrap")){let e=ee?.querySelector?.(".options-wrap");e?(zi(e,"hide"),Be((()=>{Ti(e,"hide"),le instanceof Element&&le.closest(".category-wrap")&&(Ti(le,"highlight"),le=null),n(3,ee=!1)}),200)):(le instanceof Element&&le.closest(".category-wrap")&&(Ti(le,"highlight"),le=null),n(3,ee=!1))}}else n(3,ee=o||t||!0)}async function Re(e){if(!x)return Ke();o&&i||!($>57)||(window.scrollY=document.documentElement.scrollTop=57),i&&C&&(m(Mt,C.style.overflow="hidden",C),m(Mt,C.style.overflow="",C),C.scroll({left:0,behavior:"smooth"})),M&&(Q.scrollTop=0),m(wt,a=e,a),n(3,ee=!1)}async function je(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();let t=Ee;if(t&&e!==t&&x?.[e]){let i=`<span style="color:hsl(var(--ac-color));">${t.trim()}</span>`;if(await c({title:"Save category",text:`Do you want to change the category name to ${i}?`})){if(!0===x?.[e])return Ke();x&&t&&e!==t&&x?.[e]&&(window.deletedCategory?.(e),delete x?.[e],m(gt,x[t]=!0,x),m(wt,a=t,a),n(25,We=!1),ye({renamedCategoryKey:t,replacedCategoryKey:e}))}}}async function He(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();let t=Ee;if(t&&!x?.[t]){let i=`<span style="color:hsl(var(--ac-color));">${t.trim()}</span>`;if(await c({title:"Add custom category",text:`Do you want to add a custom category named ${i}?`})){if(!0===x?.[e])return Ke();x&&!x?.[t]&&(m(gt,x[t]=!0,x),m(wt,a=t,a),n(25,We=!1),ye({addedCategoryKey:t,copiedCategoryKey:e}))}}}async function Ve(){if(E||!1!==u||!x)return Ke();let e=a;if(!e||!0===x?.[e])return Ke();if(x?.[e]&&Object.values(x||{}).length>1){let t=`<span style="color:hsl(var(--ac-color));">${e.trim()}</span>`;if(await c({title:"Delete category",text:`Do you want to delete the category named ${t}?`})){if(!0===x?.[e])return Ke();if(x&&x?.[e]&&Object.values(x||{}).length>1){n(25,We=!1);let t,i=k?.findIndex?.((t=>t===e));if(i>0)t=k[i-1];else if(0===i&&k?.length>1)t=k[1];else for(let n in x)if(n!==e){t=n;break}window.deletedCategory?.(e),delete x?.[e],delete b?.[e],gt.set(x),mt.set(b),m(wt,a=t,a),ye({deletedCategoryKey:e})}}}else f?De("Requires atleast one category"):m(fn,g="Requires atleast one category",g)}function Oe({tag:e,category:t},n){if("tag category"===n&&null!=e){for(let t in v)for(let n in v[t])if(n===e)return t||""}else if("category and description"===n&&null!=e){null==t&&(t=Oe({tag:e},"tag category"));let n=v?.[t]?.[e];if(n)return`Description: ${n}\n\nCategory: ${t}`}else if("all tags"===n&&null!=t){let e=v?.[t],n=Object.keys(e||{});if(!Cn(e))return n.join(", ")}return""}function _e(e){let t=v?.[e];if(!e||!Mn(t)||Cn(t))return"";let n="",i=Object.keys(v?.[e])||[];for(let t=0,o=i.length;t<o;t++)n+=`\n                <li onclick="window.showTagInfoHTML?.(event,'${i[t]}','${e}')">\n                    ${i[t]}\n                </li>\n            `;return`\n            <div class="is-custom-table">\n                <header class="custom-header">\n                    <h1 class="custom-h1">${e}</h1>\n                </header>\n                <ul class="custom-table-list">\n                    ${n}\n                </ul> \n            </div>\n        `}function Ye(e,t){null==t&&(t=Oe({tag:e},"tag category"));let n=v?.[t]?.[e];return t&&n?`\n            <div class="is-custom-table">\n                <header class="custom-header">\n                    <h1 class="custom-h1">${e}</h1>\n                    <h4 class="custom-extra" onclick="window.showTagCategoryInfoHTML?.(event,'${t}')">${t}</h4>\n                </header>\n                <div class="custom-description">${n}</div>\n            </div>\n        `:""}wt.subscribe((e=>{e&&(Me&&Me!==e?(On({categorySelected:e}),n(24,Ee=e),In("selectedCategory",e).catch((()=>Pn("selectedCategory"))).finally((()=>Sn("selectedCategory",e)))):null==Ee&&n(24,Ee=e),Me=e)})),window.getTagInfoHTML=Ye,window.showTagInfoHTML=(e,t,n)=>{e.stopPropagation();let i=Ye(t,n);i&&window.showFullScreenInfo?.(i)},window.showTagCategoryInfoHTML=(e,t)=>{e.stopPropagation();let n=_e(t);n&&window.showFullScreenInfo?.(n)};let We=!1;function Ke(){f?De("Please wait a moment"):m(fn,g="Please wait a moment",g)}dn.subscribe((e=>{if(e)window.addHistory?.();else if(!1===e&&y<=425){let e=ee||ne||oe||ie,t=e?.querySelector?.(".options-wrap");t?(zi(t,"hide"),Be((()=>{Ti(t,"hide"),le instanceof Element&&(Ti(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,oe=!1),n(22,ae=n(5,ie=null))}),200)):(le instanceof Element&&(Ti(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,oe=!1),n(22,ae=n(5,ie=null)))}}));let Ge,Xe,Ze=Nn("nonScrollSnapFilters")??!0,Qe=Nn("meanAverageScore"),nt=Nn("meanAnimePopularity"),it=Nn("meanMangaPopularity"),rt=Nn("meanNovelPopularity");function at(){const e=!i;In("gridFullView",m(Jt,i=e,i)).catch((()=>Pn("gridFullView"))).finally((()=>Sn("gridFullView",e)))}async function dt(){if(!f||!0!==window[p])return!1!==u?Ke():void(await c({title:"Reload List",text:"Do you want to refresh your list to sync changes?"})&&(m(Qt,s=!0,s),Zn({updateRecommendedMediaList:!0}),m(sn,l=m(an,h=!1,h),l)))}async function pt(){if(!f||!0!==window[p])return!1!==u?Ke():void(await c({title:"Reload List",text:"Do you want to refresh your list to sync changes?"})&&(m(Qt,s=!0,s),On({loadMore:!0,selectedCategory:a,searchedWord:r,reload:!0}),m(sn,l=!1,l)))}window.updateMeanNumberInfos=(e,t,i,o)=>{e&&e>0&&(n(26,Qe=e),In("meanAverageScore",Qe).catch((()=>Pn("meanAverageScore")))),t&&t>0&&(n(27,nt=t),In("meanAnimePopularity",nt).catch((()=>Pn("meanAnimePopularity")))),i&&i>0&&(n(28,it=i),In("meanMangaPopularity",it).catch((()=>Pn("meanMangaPopularity")))),o&&o>0&&(n(29,rt=o),In("meanNovelPopularity",rt).catch((()=>Pn("meanNovelPopularity"))))},(async()=>{n(30,Ge=await An("recommendationError"))})(),window.updateRecommendationError=e=>{Ge>0&&Ge!==e?(n(31,Xe=e<Ge||!(e>Ge)&&null),n(30,Ge=e)):e>0?n(30,Ge=e):n(31,Xe=n(30,Ge=null))},W((async()=>{n(2,se=se||"Media Filter"),m(un,o=o??!1,o),m(Jt,i=i??await An("gridFullView"),i),null==i&&In("gridFullView",m(Jt,i=!1,i)).catch((()=>Pn("gridFullView"))).finally((()=>Sn("gridFullView",!1))),Q=document.getElementById("popup-container"),window.addEventListener("click",ke),document.addEventListener("keydown",(async e=>{let t=e.key;if("ArrowUp"===t||"ArrowDown"===t){let i=Array.from(document?.getElementsByClassName?.("options-wrap")||[])?.find?.((e=>!e?.classList?.contains?.("display-none")));if(i?.closest?.(".filter-category")||i?.closest?.(".sort-filter")||i?.closest?.(".filter-select")||i?.closest?.(".category-wrap"))if(e.preventDefault(),le instanceof Element&&le?.closest?.(".options")?.children?.length){let e=le.closest(".options");"ArrowUp"===t&&ie&&!le?.previousElementSibling&&(n(23,Ce=!0),await te());let i,o,l,r,a=Array.from(e.querySelectorAll(".option")),s=a.indexOf(le);for(let e=0,n=a.length;e<n;e++)if(!a[e].classList.contains("display-none"))if("ArrowUp"===t){if(r=a[e],e<s)o=a[e];else if(o){i=o;break}}else if(l||(l=a[e]),e>s){i=a[e];break}let c=!1;i instanceof Element||(l instanceof Element?(i=l,c=!0):r instanceof Element&&(i=r,c=!0)),i instanceof Element&&(Ti(le,"highlight"),le=i,zi(le,"highlight"),le.scrollIntoView({behavior:c?"auto":"smooth",block:"nearest"}))}else{let e=i.querySelectorAll(".option:not(.display-none)");le=e[0],le instanceof Element&&(zi(le,"highlight"),le.scrollIntoView({behavior:"smooth",block:"nearest"}))}}else if("Enter"===t){if(le instanceof Element){let e=new KeyboardEvent("keyup",{key:"Enter"});le.dispatchEvent(e)}}else{let e=Array.from(document.getElementsByClassName("options-wrap")||[]).find((e=>!e.classList.contains("display-none")));if(e?.closest?.(".filter-select")&&"Tab"!==t||e instanceof Element&&"fixed"===getComputedStyle(e).position)return;n(3,ee=null),n(4,ne=null),n(6,oe=null),n(22,ae=n(5,ie=null)),le instanceof Element&&(Ti(le,"highlight"),le=null)}}))}));return e.$$.update=()=>{if(385&e.$$.dirty[0]|25165824&e.$$.dirty[2]){let e=b?.[a];n(0,Y=e?.mediaFilters),null==I[a]&&m($t,I[a]=Y,I);let t=e?.sortBy;null==N[a]&&m(zt,N[a]=t,N),n(13,J=t?.sortName),n(14,K=t?.sortType)}if(1541&e.$$.dirty[0]&&n(16,Z="Media Filter"===se?Y:"Algorithm Filter"===se?T:"Content Caution"===se?z:null),4098&e.$$.dirty[0]&&(n(1,G=B.selection),n(15,X=Object.keys(G))),3073&e.$$.dirty[0]){const e=Y?.filter?.((e=>"bool"===e?.filterType))||[],t=T?.filter?.((e=>"bool"===e?.filterType))||[];n(19,me=Object.entries({"Media Filter":F["Media Filter"].bool,"Algorithm Filter":F["Algorithm Filter"].bool}).reduce(((n,[i,o])=>{let l="Media Filter"===i?e:t;for(let e=0;e<o?.length;e++){let t=o[e],r=l?.find?.((e=>e?.optionName===t)),a=r?.status,s="included"===a;n[i+t]=s}return n}),{}))}32&e.$$.dirty[0]&&(ie instanceof Element||n(23,Ce=!1)),120&e.$$.dirty[0]&&m(dn,w=ee||ie||ne||oe,w)},[Y,G,se,ee,ne,ie,oe,a,b,z,T,F,B,J,K,X,Z,de,pe,me,fe,re,ae,Ce,Ee,We,Qe,nt,it,rt,Ge,Xe,i,o,l,r,u,f,h,y,v,x,k,E,M,A,U,D,R,j,H,V,O,q,_,{JP:"Japan",KR:"South Korea",CN:"China",TW:"Taiwan"},he,we,ve,be,xe,function(e){if(y>425)return;let t=e.target,i=t.classList;if(t.closest(".options-wrap-filter-info")||i.contains("options-wrap-filter-info"))return;let o=this;if(!(o instanceof Element)){let e=ee||ne||oe||ie;o=e?.querySelector?.(".options-wrap")}o instanceof Element&&"fixed"===getComputedStyle(o).position&&(zi(o,"hide"),Be((()=>{Ti(o,"hide"),le instanceof Element&&(Ti(le,"highlight"),le=null),n(3,ee=!1),n(4,ne=!1),n(6,oe=!1),n(22,ae=n(5,ie=null))}),200))},$e,ze,Te,Le,Ae,Se,Ne,Ie,Pe,Fe,Ue,Re,je,He,Ve,Oe,_e,Ye,Ze,at,dt,pt,function(){const e=new Date,t=e.getFullYear(),n={winter:new Date(parseInt(t),0,1),spring:new Date(parseInt(t),3,1),summer:new Date(parseInt(t),6,1),fall:new Date(parseInt(t),9,1)};let i,o,l;return e>=n.winter&&e<n.spring?(o=n.spring.getTime()-1,i=new Date(o),l="Winter"):e>=n.spring&&e<n.summer?(o=n.summer.getTime()-1,i=new Date(o),l="Spring"):e>=n.summer&&e<n.fall?(o=n.fall.getTime()-1,i=new Date(o),l="Summer"):(o=new Date(parseInt(t+1),0,1).getTime()-1,i=new Date(o),l="Fall"),`${po(i.getTime()-(new Date).getTime(),1,!0)} until ${l} Season Ends`},N,I,function(){Ee=this.value,n(24,Ee)},()=>window.addHistory?.(),e=>"Enter"===e.key&&Ue(e),e=>Re(e),(e,t)=>"Enter"===t.key&&Re(e),()=>je(),e=>"Enter"===e.key&&je(),async()=>{n(25,We=!We),n(24,Ee=a),n(3,ee=!1),await te(),document?.getElementById?.("category-name")?.focus?.()},async e=>{"Enter"===e.key&&(n(25,We=!We),n(24,Ee=a),n(3,ee=!1),await te(),document?.getElementById?.("category-name")?.focus?.())},()=>Fe(),e=>"Enter"===e.key&&Fe(),e=>"Enter"===e.key&&Ue(e),e=>"Enter"===e.key&&ve(e),(e,t)=>we(t,e),(e,t)=>"Enter"===t.key&&we(t,e),e=>"Enter"===e.key&&ve(e),()=>k?.length>1&&Ve(),e=>"Enter"===e.key&&k?.length>1&&Ve(),()=>He(),e=>"Enter"===e.key&&He(),function(e){de[e]=this.value,n(17,de)},()=>window.addHistory?.(),e=>"Enter"===e.key&&xe(),(e,t)=>("Enter"===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key)&&be(t,e),(e,t)=>{be(t,e)},e=>"Enter"===e.key&&xe(),function(e){de[e]=this.value,n(17,de)},()=>window.addHistory?.(),(e,t)=>function(e,t){if("string"==typeof e&&"string"==typeof t)return e.trim().replace(/[\uFF01-\uFF60\uFFE0-\uFFE6\u3000]/g,(e=>""===e?"":String.fromCharCode(e.charCodeAt(0)-65248))).normalize("NFD").replace(/[^a-zA-Z0-9\p{Lo}]/gu,"").toLowerCase().includes(t)}(t,e),(e,t,n)=>n?.optionName===e&&n?.optionCategory===t&&"selection"===n?.filterType,(e,t)=>setTimeout(t,Math.min(17*e,2e9)),(e,t)=>{let n="";"Tag"===e?n=Ye(t):"Tag Category"===e&&(n=_e(t)),window.showFullScreenInfo?.(n)},(e,t,n)=>{if("Enter"===n.key){let n="";"Tag"===e?n=Ye(t):"Tag Category"===e&&(n=_e(t)),window.showFullScreenInfo?.(n)}},(e,t,n,i,o)=>"Enter"===o.key&&$e(e,t,n,i),(e,t,n)=>ze(n,e,t),function(e){me[e]=this.checked,n(19,me),n(0,Y),n(10,T),n(11,F),n(8,b),n(7,a),n(86,I),n(85,N)},(e,t,n)=>ze(n,e,t),(e,t,n)=>"Enter"===n.key&&ze(n,e,t),e=>"number"==typeof e&&e>0?go(e,0):"N/A",(e,t)=>t?.optionName===e&&"number"===t?.filterType,(e,t,i,o,l,r,a)=>{let s=a.target.value,c=pe[e]??t?.find?.((e=>e?.optionName===i&&"number"===e?.filterType))?.optionValue??"";n(18,pe[e]=s,pe),Te(a,i,c,s,o,l,r)},()=>window.addHistory?.(),e=>{if(function(e,t){let n=e.target;n.classList.contains(t)||(n=n.closest("."+t)),n.scrollWidth<=n.clientWidth||0!==e.deltaY&&0===e.deltaX&&(e.preventDefault(),e.stopPropagation(),n.scrollLeft=Math.max(0,n.scrollLeft+e.deltaY))}(e,"filters"),i&&!re&&e.deltaY<0){n(21,re=!0);let e=0;document.documentElement.scrollTop=e,n(21,re=!1)}},e=>"Enter"===e.key&&Se(),e=>Ae(e),(e,t)=>"Enter"===t.key&&Ae(e),(e,t,n,i,o,l)=>Le(l,e,t,n,i,B.readOnly[o]),(e,t,n,i,o,l)=>"Enter"===l.key&&Le(l,e,t,n,i,B.readOnly[o]),()=>Fe(),e=>"Enter"===e.key&&Fe(),function(){r=this.value,ht.set(r)},()=>window.addHistory?.(),e=>"Enter"===e.key&&at(),()=>{h||A[""]||A[a]?dt():pt()},e=>{"Enter"!==e.key&&(h||A[""]||A[a]?dt():pt())},e=>"Enter"===e.key&&Pe(),e=>"Enter"===e.key&&Ne(e),e=>"Enter"===e.key&&Ne(e),e=>Ie(e),(e,t)=>"Enter"===t.key&&Ie(e)]}function Fa(e){const t=e.slice(),n=t[6]?"Initializing resources":t[2];t[24]=n;const i=t[6]?"Please wait a moment...":t[3];return t[25]=i,t}function Ba(e){let t,n,i,l,r,a,s,c,u,d,p,m,h,g,y,w,v,b,k,E,$,T=e[24]+"",S=e[25]+"",I=!e[1]&&!e[6]&&Ua(e);return{c(){t=z("div"),n=z("div"),i=z("div"),l=z("div"),r=z("h2"),a=L(T),s=A(),c=z("div"),u=z("h2"),d=A(),p=z("div"),I&&I.c(),m=A(),h=z("button"),g=L(e[4]),P(r,"class","confirm-title svelte-1upy7mp"),P(l,"class","confirm-title-wrapper svelte-1upy7mp"),P(u,"class","confirm-text svelte-1upy7mp"),P(c,"class","confirm-info-container svelte-1upy7mp"),P(h,"class","button svelte-1upy7mp"),P(p,"class","confirm-button-container svelte-1upy7mp"),P(i,"class","confirm-container svelte-1upy7mp"),P(n,"class","confirm-wrapper svelte-1upy7mp"),P(t,"class","fixed-confirm-dialog svelte-1upy7mp"),P(t,"role","alertdialog"),P(t,"aria-labelledby",y=e[24]),P(t,"aria-describedby",w=Ra(e[25]))},m(o,y){M(o,t,y),x(t,n),x(n,i),x(i,l),x(l,r),x(r,a),x(i,s),x(i,c),x(c,u),u.innerHTML=S,x(i,d),x(i,p),I&&I.m(p,null),x(p,m),x(p,h),x(h,g),e[15](h),k=!0,E||($=[f(e[11].call(null,c)),N(h,"click",e[8]),N(h,"keydown",e[16]),N(t,"click",e[10]),N(t,"touchend",e[10],{passive:!0}),N(t,"keydown",e[17])],E=!0)},p(n,i){e=n,(!k||68&i)&&T!==(T=e[24]+"")&&F(a,T),(!k||72&i)&&S!==(S=e[25]+"")&&(u.innerHTML=S),e[1]||e[6]?I&&(I.d(1),I=null):I?I.p(e,i):(I=Ua(e),I.c(),I.m(p,m)),(!k||16&i)&&F(g,e[4]),(!k||68&i&&y!==(y=e[24]))&&P(t,"aria-labelledby",y),(!k||72&i&&w!==(w=Ra(e[25])))&&P(t,"aria-describedby",w)},i(e){k||(ne((()=>{k&&(b&&b.end(1),v=ye(t,Ae,{duration:200,easing:Le}),v.start())})),k=!0)},o(e){v&&v.invalidate(),b=we(t,Ae,{duration:200,easing:Le}),k=!1},d(n){n&&C(t),I&&I.d(),e[15](null),n&&b&&b.end(),E=!1,o($)}}}function Ua(e){let t,n,i,l;return{c(){t=z("button"),n=L(e[5]),P(t,"class","button svelte-1upy7mp")},m(o,r){M(o,t,r),x(t,n),i||(l=[N(t,"click",e[9]),N(t,"keydown",e[14])],i=!0)},p(e,t){32&t&&F(n,e[5])},d(e){e&&C(t),i=!1,o(l)}}}function Da(e){let t,n,i=e[0]&&Ba(Fa(e));return{c(){i&&i.c(),t=S()},m(e,o){i&&i.m(e,o),M(e,t,o),n=!0},p(e,[n]){e[0]?i?(i.p(Fa(e),n),1&n&&fe(i,1)):(i=Ba(Fa(e)),i.c(),fe(i,1),i.m(t.parentNode,t)):i&&(pe(),he(i,1,1,(()=>{i=null})),me())},i(e){n||(fe(i),n=!0)},o(e){he(i),n=!1},d(e){i&&i.d(e),e&&C(t)}}}function Ra(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}function ja(e,t,n){let i,o;d(e,Yt,(e=>n(13,o=e)));const l=function(){const e=Y();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const l=D(t,n,{cancelable:i});return o.slice().forEach((t=>{t.call(e,l)})),!l.defaultPrevented}return!0}}();let r,a,s,c,{showConfirm:u=!1}=t,{isAlert:p=!1}=t,{confirmTitle:m="Confirmation"}=t,{confirmText:f="Do you want to continue?"}=t,{confirmLabel:h="OK"}=t,{cancelLabel:g="CANCEL"}=t,{isImportant:y=!1}=t,w=!1;function v(e){a||w&&"keydown"!==e.type||(n(0,u=!1),l(i?"cancelled":"confirmed"))}function b(e){a||w&&"keydown"!==e.type||(n(0,u=!1),l("cancelled"))}function x(e){if(w&&"keydown"!==e.type)return;let t=e.target,i=t.classList;t.closest(".confirm-container")||i.contains("confirm-container")||(n(0,u=!1),l("cancelled"))}async function k(e){await te(),c=e||c,c instanceof Element?c?.scrollHeight>c?.clientHeight?zi(c,"scrollable"):Ti(c,"scrollable"):zi(c,"scrollable")}var E;Yt.subscribe((e=>{!1===e&&"Initializing resources"===m&&p&&(n(0,u=!1),l("cancelled"))})),window.addEventListener("keydown",(e=>{if(null==a){let t=e?.target,n=t?.classList;a=!n?.contains?.("confirm-button-container")&&!t?.closest?.(".confirm-button-container")}})),window.addEventListener("keyup",(()=>{a=null})),E=()=>{u?(window.addHistory?.(),r?.focus?.(),w=!0,s=Be((()=>{w=!1}),200)):(s?.(),w=!1)},Y().$$.after_update.push(E);return e.$$set=e=>{"showConfirm"in e&&n(0,u=e.showConfirm),"isAlert"in e&&n(1,p=e.isAlert),"confirmTitle"in e&&n(2,m=e.confirmTitle),"confirmText"in e&&n(3,f=e.confirmText),"confirmLabel"in e&&n(4,h=e.confirmLabel),"cancelLabel"in e&&n(5,g=e.cancelLabel),"isImportant"in e&&n(12,y=e.isImportant)},e.$$.update=()=>{12290&e.$$.dirty&&n(6,i=o&&!p&&!y),72&e.$$.dirty&&k()},[u,p,m,f,h,g,i,r,v,b,x,k,y,o,e=>"Enter"===e.key&&b(e),function(e){K[e?"unshift":"push"]((()=>{r=e,n(7,r)}))},e=>"Enter"===e.key&&v(e),e=>"Enter"===e.key&&x(e)]}var Ha={Fixed:{Categories:class extends Te{constructor(e){super(),ze(this,e,Yl,_l,r,{},null,[-1,-1])}},Navigator:class extends Te{constructor(e){super(),ze(this,e,Gl,Kl,r,{},null,[-1,-1])}},Menu:class extends Te{constructor(e){super(),ze(this,e,fr,cr,r,{},null,[-1,-1,-1])}}},Media:{MediaGrid:class extends Te{constructor(e){super(),ze(this,e,uo,co,r,{mainCategory:0},null,[-1,-1,-1])}},Fixed:{MediaPopup:class extends Te{constructor(e){super(),ze(this,e,Dl,Pl,r,{},null,[-1,-1,-1,-1,-1,-1])}},MediaOptionsPopup:class extends Te{constructor(e){super(),ze(this,e,Vl,Hl,r,{},null,[-1,-1])}}}},Others:{Search:class extends Te{constructor(e){super(),ze(this,e,Pa,La,r,{},null,[-1,-1,-1,-1,-1,-1,-1,-1])}},Confirm:class extends Te{constructor(e){super(),ze(this,e,ja,Da,r,{showConfirm:0,isAlert:1,confirmTitle:2,confirmText:3,confirmLabel:4,cancelLabel:5,isImportant:12})}}}},Va="@vercel/analytics",Oa="1.1.1",qa=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function _a(){return"undefined"!=typeof window}function Ya(){try{const e=process.env.NODE_ENV;if("development"===e||"test"===e)return"development"}catch(e){}return"production"}function Wa(){return"development"===((_a()?window.vam:Ya())||"production")}function Ja(e={debug:!0}){var t;if(!_a())return;!function(e="auto"){window.vam="auto"!==e?e:Ya()}(e.mode),qa(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const n=Wa()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;const i=document.createElement("script");i.src=n,i.defer=!0,i.setAttribute("data-sdkn",Va),i.setAttribute("data-sdkv",Oa),i.onerror=()=>{const e=Wa()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${e}`)},Wa()&&!1===e.debug&&i.setAttribute("data-debug","false"),document.head.appendChild(i)}function Ka(e,t,n){const i=e.slice();return i[84]=t[n],i}function Ga(e){let t,n,i,o,l,r;return{c(){t=z("div"),P(t,"role","progressbar"),P(t,"class",n=p("fixed-progress"+(e[4]?" is-below-absolute-progress":""))+" svelte-19a9uc1"),U(t,"--progress","-"+(100-e[7])+"%")},m(e,n){M(e,t,n),o=!0,l||(r=N(t,"outrostart",ns),l=!0)},p(e,i){(!o||16&i[0]&&n!==(n=p("fixed-progress"+(e[4]?" is-below-absolute-progress":""))+" svelte-19a9uc1"))&&P(t,"class",n),128&i[0]&&U(t,"--progress","-"+(100-e[7])+"%")},i(e){o||(i&&i.end(1),o=!0)},o(e){i=we(t,Ae,{duration:0,delay:400}),o=!1},d(e){e&&C(t),e&&i&&i.end(),l=!1,r()}}}function Xa(t){let n,i;return n=new Ha.Media.MediaGrid({props:{mainCategory:""}}),{c(){Me(n.$$.fragment)},m(e,t){Ce(n,e,t),i=!0},p:e,i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){he(n.$$.fragment,e),i=!1},d(e){$e(n,e)}}}function Za(e){let t,n,i=[],o=new Map,l=e[16]||[];const r=e=>e[84];for(let t=0;t<l.length;t+=1){let n=Ka(e,l,t),a=r(n);o.set(a,i[t]=Qa(a,n))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=S()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);M(e,t,o),n=!0},p(e,n){65536&n[0]&&(l=e[16]||[],pe(),i=Ee(i,n,r,1,e,l,o,t.parentNode,ke,Qa,t,Ka),me())},i(e){if(!n){for(let e=0;e<l.length;e+=1)fe(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)he(i[e]);n=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&C(t)}}}function Qa(e,t){let n,i,o;return i=new Ha.Media.MediaGrid({props:{mainCategory:t[84]}}),{key:e,first:null,c(){n=S(),Me(i.$$.fragment),this.first=n},m(e,t){M(e,n,t),Ce(i,e,t),o=!0},p(e,n){t=e;const o={};65536&n[0]&&(o.mainCategory=t[84]),i.$set(o)},i(e){o||(fe(i.$$.fragment,e),o=!0)},o(e){he(i.$$.fragment,e),o=!1},d(e){e&&C(n),$e(i,e)}}}function es(e){let t,n,i,o;return{c(){t=z("div"),n=L(e[20]),P(t,"role","alert"),P(t,"class","message-toast svelte-19a9uc1")},m(e,i){M(e,t,i),x(t,n),o=!0},p(e,t){(!o||1048576&t[0])&&F(n,e[20])},i(e){o||(ne((()=>{o&&(i||(i=ve(t,Ae,{duration:200},!0)),i.run(1))})),o=!0)},o(e){i||(i=ve(t,Ae,{duration:200},!1)),i.run(0),o=!1},d(e){e&&C(t),e&&i&&i.end()}}}function ts(e){let t,n,i,o,l,r,a,s,c,u,d,m,f,h,g,y,w,v,b,k,E,$,T,L,S=e[7]>0&&e[7]<100&&Ga(e);i=new Ha.Fixed.Navigator({}),r=new Ha.Media.Fixed.MediaPopup({}),s=new Ha.Others.Search({});const N=[Za,Xa],I=[];function F(e,t){return e[16]?.length>0?0:1}d=F(e),m=I[d]=N[d](e),g=new Ha.Fixed.Categories({}),w=new Ha.Fixed.Menu({}),b=new Ha.Media.Fixed.MediaOptionsPopup({}),E=new Ha.Others.Confirm({props:{showConfirm:e[18],isAlert:e[8],confirmTitle:e[9],confirmText:e[10],confirmLabel:e[11],cancelLabel:e[12],isImportant:e[13]}}),E.$on("confirmed",e[21]),E.$on("cancelled",e[22]);let B=e[20]&&es(e);return{c(){t=z("div"),S&&S.c(),n=A(),Me(i.$$.fragment),o=A(),l=z("main"),Me(r.$$.fragment),a=A(),Me(s.$$.fragment),c=A(),u=z("section"),m.c(),h=A(),Me(g.$$.fragment),y=A(),Me(w.$$.fragment),v=A(),Me(b.$$.fragment),k=A(),Me(E.$$.fragment),$=A(),B&&B.c(),P(u,"id","media-list-pager"),P(u,"class",f=p("media-list-pager"+(e[14]?" pager-is-changing":"")+(e[3]?" is-changing-top-position":"")+(e[17]?" remove-snap-scroll":""))+" svelte-19a9uc1"),P(u,"aria-label","List of Category of Media"),U(u,"--grid-position",e[5]+"px"),U(u,"--grid-max-height",e[6]+"px"),U(u,"--media-list-pager-pad",e[1]+"px"),P(l,"class","svelte-19a9uc1"),P(t,"id","app"),P(t,"class",T=p((e[15]?"android":"")+(e[2]?" max-window-height":"")+(e[19]?" popup-visible":""))+" svelte-19a9uc1")},m(p,m){M(p,t,m),S&&S.m(t,null),x(t,n),Ce(i,t,null),x(t,o),x(t,l),Ce(r,l,null),x(l,a),Ce(s,l,null),x(l,c),x(l,u),I[d].m(u,null),e[23](u),x(t,h),Ce(g,t,null),x(t,y),Ce(w,t,null),x(t,v),Ce(b,t,null),x(t,k),Ce(E,t,null),x(t,$),B&&B.m(t,null),L=!0},p(e,i){e[7]>0&&e[7]<100?S?(S.p(e,i),128&i[0]&&fe(S,1)):(S=Ga(e),S.c(),fe(S,1),S.m(t,n)):S&&(pe(),he(S,1,1,(()=>{S=null})),me());let o=d;d=F(e),d===o?I[d].p(e,i):(pe(),he(I[o],1,1,(()=>{I[o]=null})),me(),m=I[d],m?m.p(e,i):(m=I[d]=N[d](e),m.c()),fe(m,1),m.m(u,null)),(!L||147464&i[0]&&f!==(f=p("media-list-pager"+(e[14]?" pager-is-changing":"")+(e[3]?" is-changing-top-position":"")+(e[17]?" remove-snap-scroll":""))+" svelte-19a9uc1"))&&P(u,"class",f),32&i[0]&&U(u,"--grid-position",e[5]+"px"),64&i[0]&&U(u,"--grid-max-height",e[6]+"px"),2&i[0]&&U(u,"--media-list-pager-pad",e[1]+"px");const l={};262144&i[0]&&(l.showConfirm=e[18]),256&i[0]&&(l.isAlert=e[8]),512&i[0]&&(l.confirmTitle=e[9]),1024&i[0]&&(l.confirmText=e[10]),2048&i[0]&&(l.confirmLabel=e[11]),4096&i[0]&&(l.cancelLabel=e[12]),8192&i[0]&&(l.isImportant=e[13]),E.$set(l),e[20]?B?(B.p(e,i),1048576&i[0]&&fe(B,1)):(B=es(e),B.c(),fe(B,1),B.m(t,null)):B&&(pe(),he(B,1,1,(()=>{B=null})),me()),(!L||557060&i[0]&&T!==(T=p((e[15]?"android":"")+(e[2]?" max-window-height":"")+(e[19]?" popup-visible":""))+" svelte-19a9uc1"))&&P(t,"class",T)},i(e){L||(fe(S),fe(i.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),fe(m),fe(g.$$.fragment,e),fe(w.$$.fragment,e),fe(b.$$.fragment,e),fe(E.$$.fragment,e),fe(B),L=!0)},o(e){he(S),he(i.$$.fragment,e),he(r.$$.fragment,e),he(s.$$.fragment,e),he(m),he(g.$$.fragment,e),he(w.$$.fragment,e),he(b.$$.fragment,e),he(E.$$.fragment,e),he(B),L=!1},d(n){n&&C(t),S&&S.d(),$e(i),$e(r),$e(s),I[d].d(),e[23](null),$e(g),$e(w),$e(b),$e(E),B&&B.d()}}}const ns=e=>{e.target.style.setProperty("--progress","0%")};function is(e,t,n){let i,o,l,r,a,s,c,u,p,f,h,g,y,w,v,b,x,k,E,M,C,$,z,T,L,A,S,N,I,P,F,B,U,D,R,j,H,V,O,q,_,Y,J,G,X,Z;d(e,wt,(e=>n(42,i=e))),d(e,Je,(e=>n(15,o=e))),d(e,yt,(e=>n(16,l=e))),d(e,st,(e=>n(43,r=e))),d(e,Jt,(e=>n(17,a=e))),d(e,It,(e=>n(44,s=e))),d(e,qe,(e=>n(45,c=e))),d(e,Wt,(e=>n(46,u=e))),d(e,Yt,(e=>n(47,p=e))),d(e,zt,(e=>n(48,f=e))),d(e,$t,(e=>n(49,h=e))),d(e,Zt,(e=>n(50,g=e))),d(e,ft,(e=>n(51,y=e))),d(e,mt,(e=>n(52,w=e))),d(e,pn,(e=>n(18,v=e))),d(e,en,(e=>n(53,b=e))),d(e,tt,(e=>n(54,x=e))),d(e,Qe,(e=>n(55,k=e))),d(e,Mt,(e=>n(56,E=e))),d(e,dn,(e=>n(57,M=e))),d(e,nn,(e=>n(58,C=e))),d(e,ln,(e=>n(19,$=e))),d(e,tn,(e=>n(59,z=e))),d(e,lt,(e=>n(60,T=e))),d(e,Ot,(e=>n(61,L=e))),d(e,Rt,(e=>n(62,A=e))),d(e,Vt,(e=>n(63,S=e))),d(e,Ht,(e=>n(64,N=e))),d(e,Dt,(e=>n(65,I=e))),d(e,Ut,(e=>n(66,P=e))),d(e,Bt,(e=>n(67,F=e))),d(e,an,(e=>n(68,B=e))),d(e,Xe,(e=>n(69,U=e))),d(e,ot,(e=>n(70,D=e))),d(e,at,(e=>n(71,R=e))),d(e,St,(e=>n(72,j=e))),d(e,jt,(e=>n(73,H=e))),d(e,At,(e=>n(74,V=e))),d(e,Et,(e=>n(75,O=e))),d(e,vt,(e=>n(76,q=e))),d(e,dt,(e=>n(77,_=e))),d(e,_e,(e=>n(78,Y=e))),d(e,Ye,(e=>n(79,J=e))),d(e,fn,(e=>n(20,G=e))),(async()=>{try{if(o||m(Xe,U=await Ql(),U),o)if(!0===window[Y]){if(!0!==await An("visited")){window[J]=!0;try{JSBridge.notifyDataEviction(),!0===window[c]&&JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}}}else!1===window[Y]&&Sn("visited",!0,!0).then((()=>{try{JSBridge.pageVisited()}catch(e){console.error(e)}})).catch((e=>console.error(e)));if(!o||!0!==window[c])try{m(Wt,u=(await On({loadAll:!0,selectedCategory:i??Nn("selectedCategory")??await An("selectedCategory"),initList:!0}))?.shouldReloadList,u),!1===u&&(e(),t())}catch(e){console.error(e)}if(await(async()=>{if(await Ln(["mediaEntries","excludedMediaIds","tagInfo"])||await vi(),!o||!0!==window[c]){const t=await(e=["username","orderedMediaOptions","algorithmFilters","tagInfo"],new Promise((async t=>{try{zn||await Tn();const n=zn.transaction(e,"readonly");t(Object.fromEntries(await Promise.all(e.map((e=>new Promise((t=>{const i=n.objectStore(e).get(e);i.onsuccess=async()=>{let n=i.result;n instanceof Blob&&(n=await new Response(n.stream().pipeThrough(new DecompressionStream("gzip"))).json()),t([e,n])},i.onerror=n=>{console.error(n),t([e])}})))))))}catch(e){console.error(e),t()}})));if(!t)throw new Error("Failed to load initial data");{const e=t.username;e!==_&&(m(dt,_=e,_),In("username",e||"").catch((()=>Pn("username")))),m(vt,q=t.orderedMediaOptions,q),m(Et,O=t.algorithmFilters||[{filterType:"bool",optionName:"Content Focused",status:"none"},{filterType:"bool",optionName:"Inc. All Factors",status:"none"},{filterType:"bool",optionName:"Inc. Average Score",status:"none"},{filterType:"bool",optionName:"Exclude Year",status:"none"}],O),m(At,V=t.tagInfo||{},V),Ei()}}var e})(),m(Yt,p=!1,p),o&&!0===window[c])try{let e;St.subscribe((t=>{e||"string"!=typeof t||(e=!0,setTimeout((()=>{try{JSBridge.sendBackgroundStatus(t)}catch(e){console.error(e)}e=!1}),750))}));let t,n,i=await ge();if(m(jt,H=H??await An("exportPathIsAvailable"),H),m(Ht,N=N??await An("autoExport"),N),i&&H&&N)try{await gi({initList:!0}),i=!1}catch(e){console.error(e)}try{JSBridge.setShouldProcessRecommendedEntries(!0)}catch(e){console.error(e)}try{await mi({initList:!0})}catch(e){console.error(e)}t=window.KanshiBackgroundshouldProcessRecommendedEntries;try{await ci({initList:!0})}catch(e){console.error(e)}t=t||window.KanshiBackgroundshouldProcessRecommendedEntries;try{await Ei({initList:!0,getTagInfo:!1})}catch(e){console.error(e)}if(t)try{window.shouldUpdateNotifications=!0,await ii({initList:!0});try{JSBridge.setShouldProcessRecommendedEntries(!1)}catch(e){console.error(e)}n=!0}catch(e){console.error(e)}else try{JSBridge.setShouldProcessRecommendedEntries(!1)}catch(e){console.error(e)}try{if(n)try{await Zn({updateRecommendedMediaList:!0,initList:!0});try{JSBridge.setshouldManageMedia(!1)}catch(e){console.error(e)}}catch(e){console.error(e)}else try{JSBridge.setshouldManageMedia(!1)}catch(e){console.error(e)}}catch(e){console.error(e)}if(i=i||t,i&&H&&N)try{await gi({initList:!0}),i=!1}catch(e){console.error(e)}JSBridge.backgroundUpdateIsFinished(!0)}catch(e){try{JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}console.error(e)}else{let n;const o=Nn("nearestMediaReleaseAiringAt")??await An("nearestMediaReleaseAiringAt");if("number"==typeof o&&!isNaN(o)){const e=new Date(1e3*o);!isNaN(e)&&e<=new Date?n=!0:window.setMediaReleaseUpdateTimeout?.(o)}let l;n||(n=await An("shouldProcessRecommendedEntries")||!await Ln(["recommendedMediaEntries"])),n&&(m(It,s[""]=new Date,s),window.shouldUpdateNotifications=!0,await ii({initList:!0}),l=!0),l=l||!1!==u||await An("shouldManageMedia"),l?!1!==u?(await Zn({updateRecommendedMediaList:!0,initList:!0}),await On({loadAll:!0,selectedCategory:i??Nn("selectedCategory")??await An("selectedCategory"),initList:!0}),m(Wt,u=!1,u),e(),t(),me("first-visit")):(m(It,s[""]=new Date,s),await Zn({updateRecommendedMediaList:!0}),me(!0)):me(!0)}}catch(n){if(o){try{JSBridge.backgroundUpdateIsFinished(!1)}catch(e){console.error(e)}b?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, restart the app or clear your cache, if it still fails you may want to reinstall the app."})}else b?.({isAlert:!0,title:"Something went wrong",text:"App may not be working properly, refresh the page or clear this website data, this also does not run in incognito."});p&&m(Yt,p=!1,p),!1!==u&&m(Wt,u=!1,u),e(),m(St,j="Something went wrong",j),me(!0),t(),console.error(n)}function e(){window.onYouTubeIframeAPIReady=()=>{window.playMostVisibleTrailer?.()};const e=document.createElement("script");e.onload=()=>{window.onYouTubeIframeAPIReady()},e.src="https://www.youtube.com/iframe_api?v=16",e.id="www-widgetapi-script",e.defer=!0,document.head.appendChild(e)}function t(){const e="https://kanshi.vercel.app"===window.location?.origin,t=document.createElement("script");t.onload=()=>{function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",e?"G-F5E8XNQS20":"G-PPMY92TJCE")},e?(Ja?.(),t.src="https://www.googletagmanager.com/gtag/js?id=G-F5E8XNQS20"):t.src="https://www.googletagmanager.com/gtag/js?id=G-PPMY92TJCE",t.defer=!0,document.head.appendChild(t)}})();const Q={};let ee,ne=D;window.addEventListener("resize",(()=>{m(ot,D=Math.max(window.visualViewport?.height||0,window.innerHeight||0),D),m(lt,T=Math.max(window.document?.documentElement?.getBoundingClientRect?.()?.width||0,window.visualViewport?.width||0,window.innerWidth||0),T),window.scrollToSelectedCategory?.(),document.fullscreenElement||(D>R||null==R)&&m(at,R=D,R)})),ot.subscribe((e=>{const t=Q[window.screen?.orientation?.type];if(t>0&&Math.abs(ne-e)>Math.max(100,.15*t)){const t=e>ne;window.showCategoriesNav(t,!t);const n=document.activeElement,i=n?.tagName;t&&n&&("INPUT"===i||"TEXTAREA"===i)&&(n.blur?.(),"username-input"===n.id&&window.onfocusUsernameInput())}ne=D})),at.subscribe((e=>{if(null==e)return;const t=window.screen?.orientation?.type;if(t){const i=Q[t];n(2,ee=e>=(i||0)),(null==i||e>i)&&(Q[t]=e)}})),lt.subscribe((e=>{n(1,Z=e>660?70:0)}));let ie,oe,le,re,ae,se,ce,ue={},de=!1,pe=0;async function me(e=!1,t=!1){if(!(p||o&&!0===window[c]))if(e){try{await mi({visibilityChange:t})}catch(e){console.error(e)}if("first-visit"===e)try{await ci()}catch(e){console.error(e)}fe(t)}else if(P&&await he()){try{if(F)ci();else{try{await mi({visibilityChange:t})}catch(e){console.error(e)}ci()}}catch(e){console.error(e)}fe(t)}else if(N&&await ge()&&o){try{await gi({visibilityChange:t})}catch(e){console.error(e)}t&&!F&&mi({visibilityChange:!0})}else t&&!F&&mi({visibilityChange:!0})}async function fe(e){o&&!0===window[c]||N&&o&&await ge()&&gi({visibilityChange:e})}async function he(){let e=!1;if(m(Rt,A=await An("runnedAutoUpdateAt"),A),null==A)e=!0;else if("number"==typeof A&&!isNaN(A)){const t=36e5;(new Date).getTime()-A>=t&&(e=!0)}return e}async function ge(){let e=!1;if(m(Ot,L=await An("runnedAutoExportAt"),L),null==L)e=!0;else if("number"==typeof L&&!isNaN(L)){const t=36e5;(new Date).getTime()-L>=t&&(e=!0)}return e}window.addEventListener("scroll",(()=>{m(st,r=window.document?.documentElement?.scrollTop||0,r)})),st.subscribe((e=>{if(!a&&X){const t=X.querySelector(".category-list.viewed .image-grid");if(t){const o=t.getBoundingClientRect().top;e!==ae&&(o<=1||se<=1)&&(re?.(),n(3,le=!0)),ae=e,se=o;const l=t?.dataset?.category;if(l&&oe&&oe!==l&&m(wt,i=oe,i),o>1){n(5,pe=0),Array.from(X.children).forEach((e=>{e.scrollTop=0}));for(const e in ue)ue[e]=null}else{n(5,pe=Math.abs(o));const e=t.dataset.category,i=r+t.getBoundingClientRect().top;ue[e]=r-i}n(6,ce=t?.clientHeight??ce),re=Be((async()=>{await te(),n(3,le=!1)}),30)}}B&&!$&&!1===u&&(p||o&&!0===window[c]||(m(an,B=!1,B),Zn({updateRecommendedMediaList:!0}))),n(4,de=e>54),E?.getBoundingClientRect?.()?.top<0&&!we&&window.addHistory?.()})),document.addEventListener("visibilitychange",(()=>{p||o||"visible"!==document.visibilityState||me(!1,!0)})),window.checkEntries=()=>{p||me(!1,!0)},Yt.subscribe((async e=>{if(!1===e&&o&&!1!==window.navigator?.onLine)try{m(Xe,U=await Ql(),U),!0!==window[c]&&"number"==typeof U&&!isNaN(U)&&isFinite(U)&&JSBridge.checkAppID(Math.floor(U),!1)}catch(e){console.error(e)}})),yn.subscribe((e=>{"boolean"!=typeof e||p||!1!==u||o&&!0===window[c]||(m(an,B=!1,B),Zn({updateRecommendedMediaList:!0}))})),gn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1!==u||o&&!0===window[c])){m(an,B=!1,B);try{await ii()}catch(e){console.error(e)}yn.update((e=>!e))}})),wn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1!==u||o&&!0===window[c])){try{await ii()}catch(e){console.error(e)}vn.update((e=>!e))}})),window.loadlang=()=>{vn.update((e=>!e))},window.processlang=()=>{wn.update((e=>!e))},vn.subscribe((async e=>{"boolean"!=typeof e||p||o&&!0===window[c]||(!1!==u||$&&w?.[i]?.mediaList?.length?m(an,B=!0,B):Zn({updateRecommendedMediaList:!0}))})),hn.subscribe((async e=>{if(!("boolean"!=typeof e||p||!1===window.navigator?.onLine||o&&!0===window[c]))if(F)ci();else{try{await mi()}catch(e){console.error(e)}ci()}})),Ut.subscribe((async e=>{if(!o||!0!==window[c])if(!0===e){const t=36e5;if(In("autoUpdate",e).catch((()=>Pn("autoUpdate"))).finally((()=>Sn("autoUpdate",e))),await he())me(),clearTimeout(I),clearInterval(I),m(Dt,I=setInterval((()=>{P&&me()}),t),I);else{const e=t-((new Date).getTime()-A)||0;clearTimeout(I),clearInterval(I),m(Dt,I=setTimeout((()=>{!1!==P&&(me(),clearTimeout(I),clearInterval(I),m(Dt,I=setInterval((()=>{P&&me()}),t),I))}),Math.min(e,2e9)),I)}}else!1===e&&(clearTimeout(I),clearInterval(I),In("autoUpdate",e).catch((()=>Pn("autoUpdate"))).finally((()=>Sn("autoUpdate",e))))})),Ht.subscribe((async e=>{if(!o||!0!==window[c])if(!0===e){const t=36e5;if(In("autoExport",e).catch((()=>Pn("autoExport"))).finally((()=>Sn("autoExport",e))),await ge())me(),clearTimeout(S),clearInterval(S),m(Vt,S=setInterval((()=>{N&&me()}),t),S);else{const e=t-((new Date).getTime()-L)||0;clearTimeout(S),clearInterval(S),m(Vt,S=setTimeout((()=>{!1!==N&&(me(),clearTimeout(S),clearInterval(S),m(Vt,S=setInterval((()=>{N&&me()}),t),S))}),Math.min(e,2e9)),S)}}else!1===e&&(clearTimeout(S),clearInterval(S),m(Vt,S=null,S),In("autoExport",e).catch((()=>Pn("autoExport"))).finally((()=>Sn("autoExport",e))))}));let ye,we=!1;"history"in window&&(window.history.scrollRestoration="manual"),window.onbeforeunload=()=>{if(!(we&&"visited"!==window.history?.state||o||matchMedia("(hover:hover)").matches))return"Do you want to leave the site?"},window.addHistory=()=>{if(we=!1,o){if(!0!==window[c])try{JSBridge.setShouldGoBack(!1)}catch(e){console.error(e)}}else"visited"!==window.history?.state&&window.history?.pushState?.("visited","")},window.backPressed=()=>{if(we&&!o)window.history?.go?.(-1);else{o||window.history?.pushState?.("visited","");const e=document?.activeElement,t=e?.tagName;if(v)Se(),m(pn,v=!1,v),we=!1;else if(("INPUT"===t||"TEXTAREA"===t)&&T<=750)e.blur?.(),"username-input"===e.id&&window.onfocusUsernameInput?.(),we=!1;else if(z)m(tn,z=!1,z),we=!1;else if(window.checkOpenFullScreenItem?.())window.closeFullScreenItem?.(),we=!1;else if($)m(ln,$=!1,$),we=!1;else if(C)m(nn,C=!1,C),we=!1;else if(M)m(dn,M=!1,M),we=!1;else{if(a&&E)m(Mt,E.style.overflow="hidden",E),m(Mt,E.scrollLeft=0,E),ye?.(),ye=Be((()=>{m(Mt,E.style.overflow="",E)}),100);else{window.showCategoriesNav?.(!0);const e=document.documentElement;!o&&matchMedia("(hover:hover)").matches||(e.style.overflow="hidden"),e.scrollTop=0,document.body.scrollTop=0,window.scrollY=0,!o&&matchMedia("(hover:hover)").matches||(ye?.(),ye=Be((()=>{e.style.overflow=""}),100))}if(o)if(we){we=!1;try{JSBridge.willExit(),JSBridge.setShouldGoBack(!0)}catch(e){console.error(e)}}else we=!0;else we=!0}}},window.addEventListener("popstate",(()=>window.backPressed())),Jt.subscribe((async e=>{await te(),e?E?.scrollLeft>500&&window.addHistory?.():E?.getBoundingClientRect?.()?.top<0&&window.addHistory?.()})),window.mediaGridScrolled=e=>{e>500&&!we&&window.addHistory?.()};let ve,be,xe=0;Qe.subscribe((e=>{if(xe<100&&xe>0)n(7,xe=Math.max(e,xe));else{if(ve)return;ve=!0,setTimeout((()=>{n(7,xe=e),ve=!1}),200)}})),et.subscribe((()=>{n(7,xe=.01),m(Qe,k=0,k)})),fn.subscribe((e=>{e&&(clearTimeout(be),be=setTimeout((()=>{fn.set(null)}),3500))}));let ke,Ee,Me,Ce,$e,ze,Te,Le,Ae=()=>{m(tt,x=!0,x),window.removeEventListener("wheel",Ae,{passive:!0}),Ae=void 0};function Se(){Le=!1,Te?.resolve?.(!1),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))),m(pn,v=!1,v)}window.addEventListener("wheel",Ae,{passive:!0}),m(en,b=window.confirmPromise=e=>new Promise((t=>{Le&&!e?.isPersistent||(Le=e?.isPersistent,n(8,ke=e?.isAlert||!1),n(9,Ee=e?.title||(ke?"Heads Up":"Confirmation")),n(10,Me=("string"==typeof e?e:e?.text)||"Do you want to continue?"),n(11,Ce=e?.confirmLabel||"OK"),n(12,$e=e?.cancelLabel||"CANCEL"),n(13,ze=e?.isImportant??!1),m(pn,v=!0,v),Te={resolve:t})})),b),window.handleConfirmationCancelled=Se,pn.subscribe((e=>{!1===e&&(Le=!1,Te?.resolve?.(!1),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))))})),window.deletedCategory=e=>{delete ue?.[e],oe===e&&(oe=void 0)},gt.subscribe((e=>{if(e)if(l instanceof Array){const t=JSON.parse(JSON.stringify(l));m(yt,l=Object.keys(e).sort(),l);for(let n=0;n<t.length;n++){const i=t[n];null==e?.[i]&&(delete w?.[i],delete s?.[i],delete y?.[i],delete g?.[i],delete h?.[i],delete f?.[i],delete ue?.[i],oe===i&&(oe=void 0),mt.set(w),It.set(s),ft.set(y),Zt.set(g),$t.set(h),zt.set(f))}}else m(yt,l=Object.keys(e).sort(),l)})),yt.subscribe((async e=>{if(await te(),e instanceof Array&&e.length>0&&"string"==typeof i)if(e.includes(i))window.scrollToSelectedCategory?.(i);else{let t=e[0];"string"==typeof t&&m(wt,i=t,i)}})),window.shouldRefreshMediaList=async(e,t)=>{if(p||!1!==u)return;if(o&&!0===window[c])return;let n;if(e)try{m(It,s[""]=new Date,s),await ii(),n=!0}catch(e){console.error(e)}else n=!1;if(!t&&!n){try{m(It,s[""]=new Date,s),await On({updateRecommendedMediaList:!0,updateUserData:!0})}catch(e){console.error(e)}window.checkEntries?.()}else{try{m(It,s[""]=new Date,s),await Zn({updateRecommendedMediaList:!0})}catch(e){console.error(e)}window.checkEntries?.()}},window.copyToClipBoard=e=>{if("string"==typeof e||e)if(o)try{JSBridge.copyToClipBoard(e)}catch(e){console.error(e)}else navigator?.clipboard?.writeText?.(e)};let Ne,Ie,Pe=!0;wt.subscribe((async e=>{if(e){if(window.scrollToSelectedCategory?.(e),await te(),!(l instanceof Array))return;const t=l.findIndex((t=>t===e))??-1;if(-1===t)return m(wt,i=l[0]||i,i),void(Ie=e);if(Ie!==e){const e=t*X.getBoundingClientRect().width+Math.max(0,t-1)*Z;n(0,X.scrollLeft=e,X),n(14,Ne=!1)}if(a)return void(Ie=e);if(Pe)return Pe=!1,void(Ie=e);const o=Array.from(X.children).find((t=>t.dataset.category===e));if(o){const t=o.getBoundingClientRect().top+20,n=r+t,i=ue[e],l=document.documentElement;null!=i?l.scrollTop=n+i:t<1&&(l.scrollTop=n),Array.from(X.children).forEach((t=>{const n=t.dataset.category;if(e===n)return;const i=ue[n];i&&(t.scrollTop=i)}))}}Ie=e}));let Fe=window.visualViewport?.width;return window.visualViewport?.addEventListener?.("resize",(()=>{const e=window.visualViewport?.width;if(Ne&&i&&Fe!==e){const e=ie??l.findIndex((e=>e===i)),t=X.scrollLeft,n=e*X.getBoundingClientRect().width+Math.max(0,e-1)*Z;n>t?X.scrollBy({left:Number.EPSILON}):n<t&&X.scrollBy({left:-Number.EPSILON})}Fe=e})),W((async()=>{X.addEventListener("scroll",(()=>{n(14,Ne=!0),window.showCategoriesNav?.(!0,!0);const e=parseInt(X.scrollLeft),t=X.getBoundingClientRect().width,l=t+Z,r=Math.round(e/(t+Z));if(r>=0&&r!==ie){const e=Array.from(X?.children),t=e?.[r],n=t?.dataset?.category;null!=n&&(window.scrollToSelectedCategory?.(n),oe=n),ie=r}const a=e%l;let s;try{const e=getComputedStyle(X),{marginLeft:t,marginRight:n}=e;s=t&&t===n?0===a:a<1||l-a<1}catch{s=o?0===a:a<1||l-a<1}if(s){const e=Array.from(X?.children),t=e?.[ie],o=t?.dataset?.category;o&&o!==i&&m(wt,i=o,i),n(14,Ne=!1)}})),X.addEventListener("scrollend",(()=>{if(Ne){const e=Array.from(X?.children),t=e?.[ie],o=t?.dataset?.category;o&&o!==i&&m(wt,i=o,i),n(14,Ne=!1)}}))})),[X,Z,ee,le,de,pe,ce,xe,ke,Ee,Me,Ce,$e,ze,Ne,o,l,a,v,$,G,function(){Le=!1,Te?.resolve?.(!0),Te=n(8,ke=n(9,Ee=n(10,Me=n(11,Ce=n(12,$e=n(13,ze=void 0)))))),m(pn,v=!1,v)},Se,function(e){K[e?"unshift":"push"]((()=>{X=e,n(0,X)}))}]}try{if(!u(Je)){const e=new BroadcastChannel("tab");e.postMessage("changed-tab"),e.addEventListener("message",(e=>{if("changed-tab"===e.data){const e="https://kanshi.changed.tab";try{window.location.href=e}catch{}try{window.location.assign("https://kanshi.changed.tab")}catch{}try{window.open(e,"_self")}catch{}}}))}}catch{}return new class extends Te{constructor(e){super(),ze(this,e,is,ts,r,{},null,[-1,-1,-1])}}({target:document.body})}();//# sourceMappingURL=bundle.js.map